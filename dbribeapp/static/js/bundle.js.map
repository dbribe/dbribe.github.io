{"version":3,"file":"bundle.js","sources":["../../../node_modules/stem-core/src/base/PageTitleManager.js","../../js/AppConfig.js","../../../node_modules/stem-core/src/base/Utils.js","../../../node_modules/stem-core/src/base/Dispatcher.js","../../../node_modules/stem-core/src/ui/NodeAttributes.js","../../../node_modules/stem-core/src/ui/UIBase.js","../../../node_modules/stem-core/src/ui/Constants.js","../../../node_modules/stem-core/src/ui/Utils.js","../../../node_modules/stem-core/src/ui/StyleElement.jsx","../../../node_modules/stem-core/src/decorators/Utils.js","../../../node_modules/stem-core/src/decorators/LazyInitialize.js","../../../node_modules/stem-core/src/decorators/Style.js","../../../node_modules/stem-core/src/ui/Style.js","../../../node_modules/stem-core/src/base/Device.js","../../../node_modules/stem-core/src/ui/Draggable.js","../../../node_modules/stem-core/src/ui/Color.js","../../../node_modules/stem-core/src/ui/style/Theme.js","../../../node_modules/stem-core/src/ui/GlobalStyle.js","../../../node_modules/stem-core/src/ui/Bootstrap3.jsx","../../../node_modules/stem-core/src/ui/UIPrimitives.jsx","../../../node_modules/stem-core/src/ui/input/Style.js","../../../node_modules/stem-core/src/ui/input/Input.jsx","../../../node_modules/stem-core/src/ui/form/Style.js","../../../node_modules/stem-core/src/ui/form/Form.jsx","../../../node_modules/stem-core/src/ui/svg/SVGNodeAttributes.js","../../../node_modules/stem-core/src/ui/svg/SVGBase.js","../../../node_modules/stem-core/src/ui/svg/SVGText.js","../../../node_modules/stem-core/src/math.js","../../../node_modules/stem-core/src/ui/svg/SVGPrimitives.js","../../../node_modules/stem-core/src/ui/Transition.js","../../../node_modules/stem-core/src/ui/svg/Animations.js","../../../node_modules/stem-core/src/ui/Switcher.jsx","../../../node_modules/stem-core/src/ui/Router.jsx","../../../node_modules/stem-core/src/ui/Translation.js","../../../node_modules/stem-core/src/ui/horizontal-overflow/Style.js","../../../node_modules/stem-core/src/ui/tabs/Style.js","../../../node_modules/stem-core/src/ui/tabs/TabArea.jsx","../../../node_modules/stem-core/src/ui/FontAwesome.jsx","../../../node_modules/stem-core/src/ui/horizontal-overflow/HorizontalOverflow.jsx","../../../node_modules/stem-core/src/ui/tabs/FlatTabArea.jsx","../../../node_modules/stem-core/src/data-structures/MultiMap.js","../../../node_modules/stem-core/src/polyfill/Headers.js","../../../node_modules/stem-core/src/polyfill/URLSearchParams.js","../../../node_modules/stem-core/src/polyfill/Body.js","../../../node_modules/stem-core/src/polyfill/Request.js","../../../node_modules/stem-core/src/polyfill/Response.js","../../../node_modules/stem-core/src/base/Fetch.js","../../../node_modules/stem-core/src/base/Ajax.js","../../../node_modules/stem-core/src/ui/button/ButtonStyle.js","../../../node_modules/stem-core/src/ui/button/Button.jsx","../../../node_modules/stem-core/src/ui/button/ButtonGroup.jsx","../../../node_modules/stem-core/src/ui/CardPanel.jsx","../../../node_modules/stem-core/src/ui/RowList.jsx","../../../node_modules/stem-core/src/ui/collapsible/Style.js","../../../node_modules/stem-core/src/ui/collapsible/CollapsibleMixin.jsx","../../../node_modules/stem-core/src/ui/collapsible/CollapsiblePanel.jsx","../../../node_modules/stem-core/src/ui/modal/Style.js","../../../node_modules/stem-core/src/ui/modal/FloatingWindow.jsx","../../../node_modules/stem-core/src/ui/modal/Modal.jsx","../../../node_modules/stem-core/src/ui/global-container/Style.js","../../../node_modules/stem-core/src/ui/global-container/GlobalContainer.jsx","../../../node_modules/stem-core/src/ui/section-divider/Divider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Style.js","../../../node_modules/stem-core/src/ui/section-divider/SectionDivider.jsx","../../../node_modules/stem-core/src/ui/section-divider/TitledSectionDivider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Accordion.jsx","../../../node_modules/stem-core/src/ui/Carousel.jsx","../../../node_modules/stem-core/src/ui/RangePanelStyle.js","../../../node_modules/stem-core/src/ui/RangePanel.jsx","../../../node_modules/stem-core/src/ui/table/Style.js","../../../node_modules/stem-core/src/ui/table/Table.jsx","../../../node_modules/stem-core/src/ui/table/CollapsibleTable.jsx","../../../node_modules/stem-core/src/ui/table/SortableTable.jsx","../../../node_modules/stem-core/src/time/Duration.js","../../../node_modules/stem-core/src/time/Date.js","../../../node_modules/stem-core/src/time/Time.js","../../../node_modules/stem-core/src/ui/DateTimePicker.jsx","../../../node_modules/stem-core/src/base/EnqueueableMethodMixin.js","../../../node_modules/stem-core/src/ui/CodeEditor.jsx","../../js/SVGComponents.jsx","../../js/IndexPage.jsx","../../../node_modules/stem-core/src/state/State.js","../../../node_modules/stem-core/src/state/Store.js","../../../node_modules/stem-core/src/state/StoreMixins.js","../../../establishment/localization/js/state/LanguageStore.js","../../../establishment/content/js/state/ArticleStore.js","../../../establishment/blog/js/state/BlogStore.js","../../../node_modules/stem-core/src/markup/MarkupParser.js","../../../node_modules/stem-core/src/markup/MarkupRenderer.js","../../../establishment/content/js/markup/MarkupEditor.jsx","../../../establishment/accounts/js/state/UserStore.js","../../../establishment/accounts/js/UserHandle.jsx","../../../establishment/content/js/ArticleRenderer.jsx","../../../establishment/blog/js/BlogStyle.js","../../../establishment/blog/js/BlogArticleRenderer.jsx","../../../establishment/content/js/ArticleManager.jsx","../../../establishment/content/js/ArticleEditor.jsx","../../../establishment/accounts/js/state/UserReactionStore.js","../../../establishment/chat/js/state/MessageThreadStore.js","../../../establishment/content/js/Popup.jsx","../../../establishment/content/js/markup/MarkupEditorModal.jsx","../../../establishment/chat/js/ChatMarkupRenderer.jsx","../../../node_modules/stem-core/src/base/Require.js","../../../establishment/localization/js/state/TranslationStore.js","../../../establishment/errors/js/state/ErrorMessageStore.js","../../../establishment/errors/js/ErrorHandlers.js","../../../establishment/socialaccount/js/SocialAccountManager.js","../../../establishment/socialaccount/js/state/SocialAppStore.js","../../../establishment/accounts/js/GoogleManager.js","../../../establishment/accounts/js/FacebookManager.js","../../../establishment/accounts/js/GithubManager.js","../../../establishment/localization/js/state/CountryStore.js","../../../establishment/accounts/js/LoginStyle.js","../../../establishment/accounts/js/Login.jsx","../../../establishment/accounts/js/LoginModal.jsx","../../../establishment/chat/js/VotingWidgetStyle.js","../../../establishment/chat/js/VotingWidget.jsx","../../../establishment/chat/js/ChatStyle.js","../../../node_modules/stem-core/src/base/Plugin.js","../../../establishment/chat/js/ChatWidget.jsx","../../../establishment/chat/js/CommentWidgetStyle.js","../../../establishment/chat/js/CommentWidget.jsx","../../../node_modules/stem-core/src/ui/ConcentricCirclesLoadingScreen.jsx","../../../node_modules/stem-core/src/ui/DelayedElement.js","../../../node_modules/stem-core/src/ui/StateDependentElement.jsx","../../../establishment/blog/js/BlogPanel.jsx","../../../establishment/forum/js/state/ForumStore.js","../../../establishment/forum/js/EditThreadReplyButton.jsx","../../../establishment/forum/js/DeleteThreadReplyButton.jsx","../../../establishment/forum/js/ForumStyle.js","../../../establishment/forum/js/CreateThreadReplyButton.jsx","../../../establishment/forum/js/ForumThread.jsx","../../../establishment/forum/js/ForumPanel.jsx","../../js/Routes.js","../../../node_modules/stem-core/src/app/StemApp.jsx","../../../establishment/funnel/js/websocket/WebsocketStreamHandler.js","../../../establishment/funnel/js/websocket/WebsocketSubscriber.js","../../../establishment/webapp/js/GlobalStyleSheet.js","../../../establishment/webapp/js/EstablishmentApp.js","../../js/App.jsx"],"sourcesContent":["export class PageTitleManager {\n    static title = null;\n    static defaultTitle = \"Website\";\n    static prefix = null;\n\n    static getPrefix() {\n        return this.prefix ? \"(\" + this.prefix + \") \" : \"\";\n    }\n\n    static setPrefix(prefix) {\n        this.prefix = prefix;\n        this.updatePageTitle();\n    }\n\n    static setDefaultTitle(defaultTitle) {\n        this.defaultTitle = defaultTitle;\n    }\n\n    static getTitle() {\n        return this.title || this.defaultTitle;\n    }\n\n    static setTitle(title) {\n        this.title = title;\n        this.updatePageTitle();\n    }\n\n    static getFullPageTitle() {\n        return this.getPrefix() + this.getTitle();\n    }\n\n    static updatePageTitle() {\n        document.title = this.getFullPageTitle();\n    }\n\n    static setIcon() {\n        throw Error(\"Not implemented yet!\");\n    }\n}\n","import {PageTitleManager} from \"base/PageTitleManager\";\n\nPageTitleManager.setDefaultTitle(\"\");","// TODO: should this be renamed to \"toUnwrappedArray\"?\nexport function unwrapArray(elements) {\n    if (!elements) {\n        return [];\n    }\n\n    if (!Array.isArray(elements)) {\n        // In case this is an iterable, convert to array\n        if (elements[Symbol.iterator]) {\n            return unwrapArray(Array.from(elements));\n        } else {\n            return [elements];\n        }\n    }\n\n    // Check if the passed in array is valid, and try to return it if possible to preserve references\n    let allProperElements = true;\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i]) || elements[i] == null) {\n            allProperElements = false;\n            break;\n        }\n    }\n\n    if (allProperElements) {\n        // Return the exact same array as was passed in\n        return elements;\n    }\n\n    let result = [];\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i])) {\n            let unwrappedElement = unwrapArray(elements[i]);\n            for (let j = 0; j < unwrappedElement.length; j += 1) {\n                result.push(unwrappedElement[j]);\n            }\n        } else {\n            if (elements[i] != null) {\n                result.push(elements[i]);\n            }\n        }\n    }\n    return result;\n}\n\nexport function isLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    // Empty url is considered local\n    if (!url) {\n        return true;\n    }\n    // Protocol-relative url is local if the host matches\n    if (url.startsWith(\"//\")) {\n        return url.startsWith(\"//\" + host);\n    }\n    // Absolute url is local if the origin matches\n    let r = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n    if (r.test(url)) {\n        return url.startsWith(origin);\n    }\n    // Root-relative and document-relative urls are always local\n    return true;\n}\n\n// Trims a local url to root-relative or document-relative url.\n// If the url is protocol-relative, removes the starting \"//\"+host, transforming it in a root-relative url.\n// If the url is absolute, removes the origin, transforming it in a root-relative url.\n// If the url is root-relative or document-relative, leaves it as is.\nexport function trimLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    if (!isLocalUrl(url, host, origin)) {\n        throw Error(\"Trying to trim non-local url!\");\n    }\n    if (!url) {\n        return url;\n    }\n    if (url.startsWith(\"//\" + host)) {\n        return url.slice((\"//\" + host).length);\n    }\n    if (url.startsWith(origin)) {\n        return url.slice(origin.length);\n    }\n    return url;\n}\n\n// Split the passed in array into arrays with at most maxChunkSize elements\nexport function splitInChunks(array, maxChunkSize) {\n    let chunks = [];\n    while (array.length > 0) {\n        chunks.push(array.splice(0, maxChunkSize));\n    }\n    return chunks;\n}\n\nexport function isIterable(obj) {\n    if (obj == null) {\n        return false;\n    }\n    return obj[Symbol.iterator] !== undefined;\n}\n\nexport function defaultComparator(a, b) {\n    if (a == null && b == null) {\n        return 0;\n    }\n\n    if (b == null) {\n        return 1;\n    }\n\n    if (a == null) {\n        return -1;\n    }\n\n    // TODO: might want to use valueof here\n    if (isNumber(a) && isNumber(b)) {\n        return a - b;\n    }\n\n    let aStr = a.toString();\n    let bStr = b.toString();\n\n    if (aStr === bStr) {\n        return 0;\n    }\n    return aStr < bStr ? -1 : 1;\n}\n\nexport function slugify(string) {\n    string = string.trim();\n\n    string = string.replace((/[^a-zA-Z0-9-\\s]/g), \"\"); // remove anything non-latin alphanumeric\n    string = string.replace((/\\s+/g), \"-\"); // replace whitespace with dashes\n    string = string.replace((/-{2,}/g), \"-\"); // remove consecutive dashes\n    string = string.toLowerCase();\n\n    return string;\n}\n\n// If the first argument is a number, it's returned concatenated with the suffix, otherwise it's returned unchanged\nexport function suffixNumber(value, suffix) {\n    if (typeof value === \"number\" || value instanceof Number) {\n        return value + suffix;\n    }\n    return value;\n}\n\nexport function setObjectPrototype(obj, Class) {\n    obj.__proto__ = Class.prototype;\n    return obj;\n}\n\nexport function isNumber(obj) {\n    return (typeof obj === \"number\") || (obj instanceof Number);\n}\n\nexport function isString(obj) {\n    return (typeof obj === \"string\") || (obj instanceof String);\n}\n\nexport function isPlainObject(obj) {\n    if (!obj || typeof obj !== \"object\" || obj.nodeType) {\n        return false;\n    }\n    if (obj.constructor && obj.constructor != Object) {\n        return false;\n    }\n    return true;\n}\n\nexport function deepCopy() {\n\tlet target = arguments[0] || {};\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (let i = 1; i < arguments.length; i += 1) {\n        let obj = arguments[i];\n        if (obj == null) {\n            continue;\n        }\n\n        // Extend the base object\n        for (let [key, value] of Object.entries(obj)) {\n            // Recurse if we're merging plain objects or arrays\n            if (value && isPlainObject(value) || Array.isArray(value)) {\n                let clone;\n                let src = target[key];\n\n                if (Array.isArray(value)) {\n                    clone = (src && Array.isArray(src)) ? src : [];\n                } else {\n                    clone = (src && isPlainObject(src)) ? src : {};\n                }\n\n                target[key] = deepCopy(clone, value);\n            } else {\n                // TODO: if value has .clone() method, use that?\n                target[key] = value;\n            }\n        }\n\t}\n\n\treturn target;\n}\n\nexport function objectFromKeyValue(key, value) {\n    return {\n        [key]: value,\n    }\n}\n\nexport function dashCase(str) {\n    let rez = \"\";\n    for (let i = 0; i < str.length; i++) {\n        if (\"A\" <= str[i] && str[i] <= \"Z\") {\n            if (i > 0) {\n                rez += \"-\";\n            }\n            rez += str[i].toLowerCase();\n        } else {\n            rez += str[i];\n        }\n    }\n    return (rez == str) ? str : rez;\n}\n\n// TODO: have a Cookie helper file\nexport function getCookie(name) {\n    let cookies = (document.cookie || \"\").split(\";\");\n    for (let cookie of cookies) {\n        cookie = cookie.trim();\n        if (cookie.startsWith(name + \"=\")) {\n            return decodeURIComponent(cookie.substring(name.length + 1));\n        }\n    }\n    return null;\n}\n\nexport function uniqueId(obj) {\n    if (!uniqueId.objectWeakMap) {\n        uniqueId.objectWeakMap = new WeakMap();\n        uniqueId.constructorWeakMap = new WeakMap();\n        uniqueId.totalObjectCount = 0;\n    }\n    let objectWeakMap = uniqueId.objectWeakMap;\n    let constructorWeakMap = uniqueId.constructorWeakMap;\n    if (!objectWeakMap.has(obj)) {\n        const objConstructor = obj.constructor || obj.__proto__ || Object;\n        // Increment the object count\n        const objIndex = (constructorWeakMap.get(objConstructor) || 0) + 1;\n        constructorWeakMap.set(objConstructor, objIndex);\n\n        const objUniqueId = objIndex + \"-\" + (++uniqueId.totalObjectCount);\n        objectWeakMap.set(obj, objUniqueId);\n    }\n    return objectWeakMap.get(obj);\n}\n\n// TODO: should be done with String.padLeft\nexport function padNumber(num, minLength) {\n    let strNum = String(num);\n    while (strNum.length < minLength) {\n        strNum = \"0\" + strNum;\n    }\n    return strNum;\n}\n\n// Returns the english ordinal suffix of a number\nexport function getOrdinalSuffix(num) {\n    let suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n    let lastDigit = num % 10;\n    let isTeen = Math.floor(num / 10) % 10 === 1;\n    return (!isTeen && suffixes[lastDigit]) || suffixes[0];\n}\n\nexport function suffixWithOrdinal(num) {\n    return num + getOrdinalSuffix(num);\n}\n\nexport function instantiateNative(BaseClass, NewClass, ...args) {\n    let obj = new BaseClass(...args);\n    obj.__proto__ = NewClass.prototype;\n    return obj;\n}\n\n// This function can be used as a decorator in case we're extending native classes (Map/Set/Date)\n// and we want to fix the way babel breaks this scenario\n// WARNING: it destroys the code in constructor\n// If you want a custom constructor, you need to implement a static create method that generates new objects\n// Check the default constructor this code, or an example where this is done.\nexport function extendsNative(targetClass) {\n    if (targetClass.toString().includes(\" extends \")) {\n        // Native extended classes are cool, leave them as they are\n        return;\n    }\n    let BaseClass = targetClass.__proto__;\n    let allKeys = Object.getOwnPropertySymbols(targetClass).concat(Object.getOwnPropertyNames(targetClass));\n\n    // Fill in the default constructor\n    let newClass = targetClass.create || function create() {\n        return instantiateNative(BaseClass, newClass, ...arguments);\n        };\n    for (const key of allKeys) {\n        let property = Object.getOwnPropertyDescriptor(targetClass, key);\n        Object.defineProperty(newClass, key, property);\n    }\n    newClass.prototype = targetClass.prototype;\n    newClass.__proto__ = targetClass.__proto__;\n\n    newClass.prototype.constructor = newClass;\n\n    return newClass;\n}\n\nexport const NOOP_FUNCTION = () => undefined;\n\n// Helpers to wrap iterators, to wrap all values in a function or to filter them\nexport function* mapIterator(iter, func) {\n    for (let value of iter) {\n        yield func(value);\n    }\n}\n\nexport function* filterIterator(iter, func) {\n    for (let value of iter) {\n        if (func(value)) {\n            yield value;\n        }\n    }\n}\n\nexport class CallModifier {\n    wrap(func) {\n        throw Error(\"Implement wrap method\");\n    }\n\n    call(func) {\n        return this.wrap(func)();\n    }\n\n    toFunction() {\n        return (func) => this.wrap(func);\n    }\n}\n\nexport class UnorderedCallDropper extends CallModifier {\n    index = 1;\n    lastExecuted = 0;\n\n    wrap(callback) {\n        const currentIndex = this.index++;\n        return (...args) => {\n            if (currentIndex > this.lastExecuted) {\n                this.lastExecuted = currentIndex;\n                return callback(...args);\n            }\n        }\n    }\n}\n\n/*\nCallThrottler acts both as a throttler and a debouncer, allowing you to combine both types of functionality.\nAvailable options:\n    - debounce (ms): delays the function call by x ms, each call extending the delay\n    - throttle (ms): keeps calls from happening with at most x ms between them. If debounce is also set, will make sure to\n    fire a debounced even if over x ms have passed. If equal to CallTimer.ON_ANIMATION_FRAME, means that we want to use\n    requestAnimationFrame instead of setTimeout, to execute before next frame redraw()\n    - dropThrottled (boolean, default false): any throttled function call is not delayed, but dropped\n */\nexport class CallThrottler extends CallModifier {\n    static ON_ANIMATION_FRAME = Symbol();\n    static AUTOMATIC = Symbol();\n\n    lastCallTime = 0;\n    pendingCall = null;\n    pendingCallArgs = [];\n    pendingCallExpectedTime = 0;\n    numCalls = 0;\n    totalCallDuration = 0;\n\n    constructor(options={}) {\n        super();\n        Object.assign(this, options);\n    }\n\n    isThrottleOnAnimationFrame() {\n        return this.throttle === this.constructor.ON_ANIMATION_FRAME;\n    }\n\n    clearPendingCall() {\n        this.pendingCall = null;\n        this.pendingCallArgs = [];\n        this.pendingCallExpectedTime = 0;\n    }\n\n    cancel() {\n        this.pendingCall && this.pendingCall.cancel();\n        this.clearPendingCall();\n    }\n\n    flush() {\n        this.pendingCall && this.pendingCall.flush();\n        this.clearPendingCall();\n    }\n\n    // API compatibility with cleanup jobs\n    cleanup() {\n        this.cancel();\n    }\n\n    computeExecutionDelay(timeNow) {\n        let executionDelay = null;\n        if (this.throttle != null) {\n            executionDelay = Math.max(this.lastCallTime + this.throttle - timeNow, 0);\n        }\n        if (this.debounce != null) {\n            executionDelay = Math.min(executionDelay != null ? executionDelay : this.debounce, this.debounce);\n        }\n        return executionDelay;\n    }\n\n    replacePendingCall(wrappedFunc, funcCall, funcCallArgs) {\n        this.cancel();\n        if (this.isThrottleOnAnimationFrame()) {\n            const cancelHandler = requestAnimationFrame(funcCall);\n            wrappedFunc.cancel = () => cancelAnimationFrame(cancelHandler);\n            return;\n        }\n\n        const timeNow = Date.now();\n        let executionDelay = this.computeExecutionDelay(timeNow);\n\n        if (this.dropThrottled) {\n            return executionDelay == 0 && funcCall();\n        }\n\n        const cancelHandler = setTimeout(funcCall, executionDelay);\n        wrappedFunc.cancel = () => clearTimeout(cancelHandler);\n        this.pendingCall = wrappedFunc;\n        this.pendingCallArgs = funcCallArgs;\n        this.pendingCallExpectedTime = timeNow + executionDelay;\n    }\n\n    updatePendingCall(args) {\n        this.pendingCallArgs = args;\n        if (!this.isThrottleOnAnimationFrame()) {\n            const timeNow = Date.now();\n            this.pendingCallExpectedTime = timeNow + this.computeExecutionDelay(timeNow);\n        }\n    }\n\n    wrap(func) {\n        const funcCall = () => {\n            const timeNow = Date.now();\n            // The expected time when the function should be executed next might have been changed\n            // Check if that's the case, while allowing a 1ms error for time measurement\n            if (!this.isThrottleOnAnimationFrame() &&\n                timeNow + 1 < this.pendingCallExpectedTime) {\n                this.replacePendingCall(wrappedFunc, funcCall, this.pendingCallArgs);\n            } else {\n                this.lastCallTime = timeNow;\n                this.clearPendingCall();\n                func(...this.pendingCallArgs);\n            }\n        };\n\n        const wrappedFunc = (...args) => {\n            // Check if it's our function, and update the arguments and next execution time only\n            if (this.pendingCall && func === this.pendingCall.originalFunc) {\n                // We only need to update the arguments, and maybe mark that we want to executed later than scheduled\n                // It's an optimization to not invoke too many setTimeout/clearTimeout pairs\n                return this.updatePendingCall(args);\n            }\n            return this.replacePendingCall(wrappedFunc, funcCall, args);\n        };\n\n        wrappedFunc.originalFunc = func;\n        wrappedFunc.cancel = NOOP_FUNCTION;\n        wrappedFunc.flush = () => {\n            if (wrappedFunc === this.pendingCall) {\n                this.cancel();\n                wrappedFunc();\n            }\n        };\n        return wrappedFunc;\n    }\n}\n\n// export function benchmarkThrottle(options={}) {\n//     const startTime = performance.now();\n//     const calls = options.calls || 100000;\n//\n//     const throttler = new CallThrottler({throttle: options.throttle || 300, debounce: options.debounce || 100});\n//\n//     const func = options.func || NOOP_FUNCTION;\n//\n//     const wrappedFunc = throttler.wrap(func);\n//\n//     for (let i = 0; i < calls; i += 1) {\n//         wrappedFunc();\n//     }\n//     console.warn(\"Throttle benchmark:\", performance.now() - startTime, \"for\", calls, \"calls\");\n// }","class DispatcherHandle {\n    constructor(dispatcher, callback) {\n        this.dispatcher = dispatcher;\n        this.callback = callback;\n    }\n\n    remove() {\n        if (!this.dispatcher) {\n            console.warn(\"Removing a dispatcher twice\");\n            return;\n        }\n        this.dispatcher.removeListener(this.callback);\n        this.dispatcher = undefined;\n        this.callback = undefined;\n    }\n\n    cleanup() {\n        this.remove();\n    }\n}\n\nclass Dispatcher {\n    constructor(options = {}) {\n        this.options = options;\n        this.listeners = [];\n    }\n\n    callbackExists(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    addListener(callback) {\n        if (!(typeof callback === \"function\")) {\n            console.error(\"The listener needs to be a function: \", callback);\n            return;\n        }\n        if (this.callbackExists(callback)) {\n            console.error(\"Can't re-register for the same callback: \", this, \" \", callback);\n            return;\n        }\n\n        this.listeners.push(callback);\n        return new DispatcherHandle(this, callback);\n    };\n\n    addListenerOnce(callback) {\n        let handler = this.addListener(function () {\n            callback(...arguments);\n            handler.remove();\n        });\n        return handler;\n    }\n\n    removeListener(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                // Erase and return\n                return this.listeners.splice(i, 1)[0];\n            }\n        }\n    };\n\n    removeAllListeners() {\n        this.listeners = [];\n    }\n\n    dispatch(payload) {\n        for (let i = 0; i < this.listeners.length; ) {\n            let listener = this.listeners[i];\n            // TODO: optimize common cases\n            listener(...arguments);\n            // In case the current listener deleted itself, keep the loop counter the same\n            // If it deleted listeners that were executed before it, that's just wrong and there are no guaranteed about\n            if (listener === this.listeners[i]) {\n                i++;\n            }\n        }\n    };\n}\n\nexport const DispatchersSymbol = Symbol(\"Dispatchers\");\n\nclass Dispatchable {\n    get dispatchers() {\n        return this[DispatchersSymbol] || (this[DispatchersSymbol] = new Map());\n    }\n\n    getDispatcher(name) {\n        return this.dispatchers.get(name);\n    }\n\n    dispatch(name, payload) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            // Optimize the average case\n            if (arguments.length <= 2) {\n                dispatcher.dispatch(payload);\n            } else {\n                let args = Array.prototype.slice.call(arguments, 1);\n                dispatcher.dispatch(...args);\n            }\n        }\n    }\n\n    addListener(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListener(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListener(callback);\n    }\n\n    // TODO: remove some duplicated logic with method above\n    addListenerOnce(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListenerOnce(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListenerOnce(callback);\n    }\n\n    removeListener(name, callback) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            dispatcher.removeListener(callback);\n        }\n    }\n\n    cleanup() {\n        this.runCleanupJobs();\n        delete this[DispatchersSymbol];\n    }\n\n    // These function don't really belong here, but they don't really hurt here and I don't want a long proto chain\n    // Add anything that needs to be called on cleanup here (dispatchers, etc)\n    addCleanupJob(cleanupJob) {\n        if (!this.hasOwnProperty(\"_cleanupJobs\")) {\n            this._cleanupJobs = new CleanupJobs();\n        }\n        this._cleanupJobs.add(cleanupJob);\n        return cleanupJob;\n    }\n\n    runCleanupJobs() {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.cleanup();\n        }\n    }\n\n    detachListener(dispatcherHandle) {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.remove(dispatcherHandle);\n        } else {\n            dispatcherHandle.remove();\n        }\n    }\n}\n\n// Creates a method that calls the method methodName on obj, and adds the result as a cleanup task\nfunction getAttachCleanupJobMethod(methodName) {\n    return function (obj) {\n        let args = Array.prototype.slice.call(arguments, 1);\n        let handler = obj[methodName](...args);\n        this.addCleanupJob(handler);\n        return handler;\n    }\n}\n\n// Not sure if these should be added here, but meh\nDispatchable.prototype.attachListener       = getAttachCleanupJobMethod(\"addListener\");\nDispatchable.prototype.attachEventListener  = getAttachCleanupJobMethod(\"addEventListener\");\nDispatchable.prototype.attachCreateListener = getAttachCleanupJobMethod(\"addCreateListener\");\nDispatchable.prototype.attachUpdateListener = getAttachCleanupJobMethod(\"addUpdateListener\");\nDispatchable.prototype.attachDeleteListener = getAttachCleanupJobMethod(\"addDeleteListener\");\n\nDispatcher.Global = new Dispatchable();\n\nclass RunOnce {\n    run(callback, timeout = 0) {\n        if (this.timeout) {\n            return;\n        }\n        this.timeout = setTimeout(() => {\n            callback();\n            this.timeout = undefined;\n        }, timeout);\n    }\n}\n\nclass CleanupJobs {\n    constructor(jobs = []) {\n        this.jobs = jobs;\n    }\n\n    add(job) {\n        this.jobs.push(job);\n    }\n\n    cleanup() {\n        for (let job of this.jobs) {\n            if (typeof job.cleanup === \"function\") {\n                job.cleanup();\n            } else if (typeof job.remove === \"function\" ) {\n                job.remove();\n            } else {\n                job();\n            }\n        }\n        this.jobs = [];\n    }\n\n    remove(job) {\n        if (job) {\n            const index = this.jobs.indexOf(job);\n            if (index >= 0) {\n                this.jobs.splice(index, 1);\n            }\n            job.remove();\n        } else {\n            this.cleanup();\n        }\n    }\n}\n\n// Class that can be used to pass around ownership of a resource.\n// It informs the previous owner of the change (once) and dispatches the new element for all listeners\n// TODO: a better name\nclass SingleActiveElementDispatcher extends Dispatcher {\n    setActive(element, addChangeListener, forceDispatch) {\n        if (!forceDispatch && element === this._active) {\n            return;\n        }\n        this._active = element;\n        this.dispatch(element);\n        if (addChangeListener) {\n            this.addListenerOnce((newElement) => {\n                if (newElement != element) {\n                    addChangeListener(newElement);\n                }\n            });\n        }\n    }\n\n    getActive() {\n        return this._active;\n    }\n}\n\nexport {Dispatcher, Dispatchable, RunOnce, CleanupJobs, SingleActiveElementDispatcher, getAttachCleanupJobMethod};\n","import {dashCase, setObjectPrototype} from \"../base/Utils\";\n\nexport const defaultToPixelsAttributes = new Set([\n    \"border-bottom-width\",\n    \"border-left-width\",\n    \"border-right-width\",\n    \"border-top-width\",\n    \"border-width\",\n    \"bottom\",\n    \"font-size\",\n    \"font-stretch\",\n    \"height\",\n    \"layer-grid-char\",\n    \"layer-grid-char-spacing\",\n    \"layer-grid-line\",\n    \"left\",\n    \"letter-spacing\",\n    \"line-height\",\n    \"margin\",\n    \"margin-bottom\",\n    \"margin-left\",\n    \"margin-right\",\n    \"margin-top\",\n    \"marker-offset\",\n    \"max-height\",\n    \"max-width\",\n    \"min-height\",\n    \"min-width\",\n    \"outline-width\",\n    \"padding\",\n    \"padding-bottom\",\n    \"padding-left\",\n    \"padding-right\",\n    \"padding-top\",\n    \"right\",\n    \"size\",\n    \"top\",\n    \"width\",\n    \"word-spacing\",\n]);\n\nexport function CreateNodeAttributesMap(oldAttributesMap, allowedAttributesArray) {\n    let allowedAttributesMap = new Map(oldAttributesMap);\n\n    for (let attribute of allowedAttributesArray || []) {\n        if (!attribute) continue;\n        if (!Array.isArray(attribute)) {\n            attribute = [attribute];\n        }\n        allowedAttributesMap.set(attribute[0], attribute[1] || {});\n    }\n\n    allowedAttributesMap.reverseNameMap = new Map();\n\n    for (let [key, value] of allowedAttributesMap) {\n        value = value || {};\n\n        value.domName = value.domName || key;\n\n        allowedAttributesMap.reverseNameMap.set(value.domName, key);\n\n        allowedAttributesMap.set(key, value);\n    }\n    return allowedAttributesMap;\n}\n\n// A class that can be used to work with a className field as with a Set, while having a toString() usable in the DOM\n// It's used when a UI object has a className attribute, that a string, but we still want it to be modified if we call addClass and removeClass\n// In that case, the string gets converted to a ClassNameSet\nexport class ClassNameSet extends Set {\n    // Can't use classic super in constructor since Set is build-in type and will throw an error\n    // TODO: see if could still be made to have this as constructor\n    static create(className) {\n        let value = new Set(String(className || \"\").split(\" \"));\n        return setObjectPrototype(value, this);\n    }\n\n    toString() {\n        return Array.from(this).join(\" \");\n    }\n}\n\nexport class NodeAttributes {\n    constructor(obj) {\n        Object.assign(this, obj);\n        // className and style should be deep copied to be modifiable, the others shallow copied\n        if (this.className instanceof ClassNameSet) {\n            this.className = ClassNameSet.create(String(this.className));\n        }\n        if (this.style) {\n            this.style = Object.assign({}, this.style);\n        }\n    }\n\n    // TODO: should this use the domName or the reverseName? Still needs work\n    setAttribute(key, value, node, attributesMap=this.constructor.defaultAttributesMap) {\n        // TODO: might want to find a better way than whitelistAttributes field to do this\n        if (!attributesMap.has(key)) {\n            this.whitelistedAttributes = this.whitelistedAttributes || {};\n            this.whitelistedAttributes[key] = true;\n        }\n        this[key] = value;\n        if (node) {\n            this.applyAttribute(key, node, attributesMap);\n        }\n    }\n\n    applyStyleToNode(key, value, node) {\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if ((value instanceof Number || typeof value === \"number\") &&\n            value != 0 && defaultToPixelsAttributes.has(dashCase(key))) {\n            value = value + \"px\";\n        }\n        if (node && node.style[key] !== value) {\n            node.style[key] = value;\n        }\n    }\n\n    setStyle(key, value, node) {\n        if (!(typeof key === \"string\" || key instanceof String)) {\n            // If the key is not a string, it should be a plain object\n            for (const styleKey of Object.keys(key)) {\n                this.setStyle(styleKey, key[styleKey], node);\n            }\n            return;\n        }\n        if (value === undefined) {\n            this.removeStyle(key, node);\n            return;\n        }\n        this.style = this.style || {};\n        this.style[key] = value;\n        this.applyStyleToNode(key, value, node);\n    }\n\n    removeStyle(key, node) {\n        if (this.style) {\n            delete this.style[key];\n        }\n        if (node && node.style[key]) {\n            delete node.style[key];\n        }\n    }\n\n    static getClassArray(classes) {\n        if (!classes) {\n            return [];\n        }\n        if (Array.isArray(classes)) {\n            return classes.map(x => String(x).trim());\n        } else {\n            return String(classes).trim().split(\" \");\n        }\n    }\n\n    getClassNameSet() {\n        if (!(this.className instanceof ClassNameSet)) {\n            this.className = ClassNameSet.create(this.className || \"\");\n        }\n        return this.className;\n    }\n\n    addClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().add(cls);\n            if (node) {\n                node.classList.add(cls);\n            }\n        }\n    }\n\n    removeClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().delete(cls);\n            if (node) {\n                node.classList.remove(cls);\n            }\n        }\n    }\n\n    hasClass(className) {\n        return this.getClassNameSet().has(className);\n    }\n\n    applyAttribute(key, node, attributesMap) {\n        let attributeOptions = attributesMap.get(key);\n        if (!attributeOptions) {\n            if (this.whitelistedAttributes && (key in this.whitelistedAttributes)) {\n                attributeOptions = {\n                    domName: key,\n                }\n            } else {\n                return;\n            }\n        }\n        let value = this[key];\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if (attributeOptions.noValue) {\n            if (value) {\n                value = \"\";\n            } else {\n                value = undefined;\n            }\n        }\n        if (typeof value !== \"undefined\") {\n            node.setAttribute(attributeOptions.domName, value);\n        } else {\n            node.removeAttribute(attributeOptions.domName);\n        }\n    }\n\n    applyClassName(node) {\n        if (this.className) {\n            const className = String(this.className);\n            if (node.className != className) {\n                node.className = className;\n            }\n        } else {\n            if (node.className) {\n                node.removeAttribute(\"class\");\n            }\n        }\n    }\n\n    apply(node, attributesMap) {\n        let addedAttributes = {};\n        let whitelistedAttributes = this.whitelistedAttributes || {};\n\n        // First update existing node attributes and delete old ones\n        // TODO: optimize to not run this if the node was freshly created\n        let nodeAttributes = node.attributes;\n        for (let i = nodeAttributes.length - 1; i >= 0; i--) {\n            let attr = nodeAttributes[i];\n            let attributeName = attr.name;\n            if (attributeName === \"style\" || attributeName === \"class\") {\n                // TODO: maybe should do work here?\n                continue;\n            }\n\n            let key = attributesMap.reverseNameMap.get(attributeName);\n\n            if (this.hasOwnProperty(key)) {\n                let value = this[key];\n                let attributeOptions = attributesMap.get(key);\n                if (attributeOptions && attributeOptions.noValue) {\n                    if (value) {\n                        value = \"\";\n                    } else {\n                        value = undefined;\n                    }\n                }\n                if (value != null) {\n                    node.setAttribute(attributeName, value);\n                    addedAttributes[key] = true;\n                } else {\n                    node.removeAttribute(attributeName);\n                }\n            } else {\n                node.removeAttribute(attributeName);\n            }\n        }\n        // Add new attributes\n        for (let key in this) {\n            if (addedAttributes[key]) {\n                continue;\n            }\n            this.applyAttribute(key, node, attributesMap);\n            // TODO: also whitelist data- and aria- keys here\n        }\n\n        this.applyClassName(node);\n\n        node.removeAttribute(\"style\");\n        if (this.style) {\n            for (let key in this.style) {\n                this.applyStyleToNode(key, this.style[key], node);\n            }\n        }\n    }\n}\n\n// Default node attributes, should be as few of these as possible\nNodeAttributes.defaultAttributesMap = CreateNodeAttributesMap([\n    [\"id\"],\n    [\"action\"],\n    [\"colspan\"],\n    [\"default\"],\n    [\"disabled\", {noValue: true}],\n    [\"fixed\"],\n    [\"forAttr\", {domName: \"for\"}], // TODO: have a consistent nomenclature for there!\n    [\"hidden\"],\n    [\"href\"],\n    [\"rel\"],\n    [\"minHeight\"],\n    [\"minWidth\"],\n    [\"role\"],\n    [\"target\"],\n    [\"HTMLtitle\", {domName: \"title\"}],\n    [\"type\"],\n    [\"placeholder\"],\n    [\"src\"],\n    [\"height\"],\n    [\"width\"],\n    //[\"value\"], // Value is intentionally disabled\n]);\n","import {unwrapArray, setObjectPrototype, suffixNumber, NOOP_FUNCTION} from \"../base/Utils\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {NodeAttributes} from \"./NodeAttributes\";\n\nvar UI = {\n    renderingStack: [], //keeps track of objects that are redrawing, to know where to assign refs automatically\n};\n\nclass BaseUIElement extends Dispatchable {\n    canOverwrite(existingChild) {\n        return this.constructor === existingChild.constructor &&\n               this.getNodeType() === existingChild.getNodeType();\n    }\n\n    applyRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            obj[name] = this;\n        }\n    }\n\n    removeRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            if (obj[name] === this) {\n                obj[name] = undefined;\n            }\n        }\n    }\n\n    // Lifecycle methods, called when the element was first inserted in the DOM, and before it's removed\n    onMount() {}\n\n    onUnmount() {}\n\n    destroyNode() {\n        this.onUnmount();\n        this.cleanup();\n        this.removeRef();\n        this.node && this.node.remove();\n        delete this.node; // Clear for gc\n    }\n}\n\nUI.TextElement = class UITextElement extends BaseUIElement {\n    constructor(value=\"\") {\n        super();\n        if (value && value.hasOwnProperty(\"value\")) {\n            this.value = value.value;\n            this.options = value;\n        } else {\n            this.value = (value != null) ? value : \"\";\n        }\n    }\n\n    mount(parent, nextSibling) {\n        this.parent = parent;\n        if (!this.node) {\n            this.createNode();\n            this.applyRef();\n        } else {\n            this.redraw();\n        }\n        parent.node.insertBefore(this.node, nextSibling);\n        this.onMount();\n    }\n\n    getNodeType() {\n        return Node.TEXT_NODE;\n    }\n\n    copyState(element) {\n        this.value = element.value;\n        this.options = element.options;\n    }\n\n    createNode() {\n        this.node = document.createTextNode(this.getValue());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    setValue(value) {\n        this.value = (value != null) ? value : \"\";\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    getValue() {\n        return String(this.value);\n    }\n\n    redraw() {\n        if (this.node) {\n            let newValue = this.getValue();\n            // TODO: check if this is best for performance\n            if (this.node.nodeValue !== newValue) {\n                this.node.nodeValue = newValue;\n            }\n        }\n        this.applyRef();\n    }\n};\n\n// TODO: rename to Element\nclass UIElement extends BaseUIElement {\n    constructor(options={}) {\n        super();\n        this.children = [];\n        this.options = options; // TODO: this is a hack, to not break all the code that references this.options in setOptions\n        this.setOptions(options);\n    };\n\n    getDefaultOptions(options) {}\n\n    getPreservedOptions() {}\n\n    setOptions(options) {\n        let defaultOptions = this.getDefaultOptions(options);\n        if (defaultOptions) {\n            options = Object.assign(defaultOptions, options);\n        }\n        this.options = options;\n    }\n\n    updateOptions(options) {\n        this.setOptions(Object.assign(this.options, options));\n        this.redraw();\n    }\n\n    setChildren(...args) {\n        this.updateOptions({children: unwrapArray(args)})\n    }\n\n    // Used when we want to reuse the current element, with the options from the passed in argument\n    // Is only called when element.canOverwrite(this) is true\n    copyState(element) {\n        let options = element.options;\n        let preservedOptions = this.getPreservedOptions();\n        if (preservedOptions) {\n            options = Object.assign({}, options, preservedOptions);\n        }\n        this.setOptions(options);\n        this.addListenersFromOptions();\n    }\n\n    getNodeType() {\n        return this.options.nodeType || \"div\";\n    }\n\n    static create(parentNode, options) {\n        let uiElement = new this(options);\n        uiElement.mount(parentNode, null);\n        return uiElement;\n    }\n\n    // TODO: should be renamed to renderContent\n    getGivenChildren() {\n        return this.options.children || [];\n    }\n\n    render() {\n        return this.options.children;\n    };\n\n    createNode() {\n        this.node = document.createElement(this.getNodeType());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    // Abstract, gets called when removing DOM node associated with the\n    cleanup() {\n        this.runCleanupJobs();\n        for (let child of this.children) {\n            child.destroyNode();\n        }\n        this.clearNode();\n        super.cleanup();\n    }\n\n    overwriteChild(existingChild, newChild) {\n        existingChild.copyState(newChild);\n        return existingChild;\n    }\n\n    getElementKeyMap(elements) {\n        if (!elements || !elements.length) {\n            return;\n        }\n        let childrenKeyMap = new Map();\n\n        for (let i = 0; i < elements.length; i += 1) {\n            let childKey = (elements[i].options && elements[i].options.key) || (\"autokey\" + i);\n\n            childrenKeyMap.set(childKey, elements[i]);\n        }\n\n        return childrenKeyMap;\n    }\n\n    getChildrenToRender() {\n        return this.render();\n    }\n\n    getChildrenForRedraw() {\n        UI.renderingStack.push(this);\n        let children = unwrapArray(this.getChildrenToRender());\n        UI.renderingStack.pop();\n        return children;\n    }\n\n    redraw() {\n        if (!this.node) {\n            console.error(\"Element not yet mounted. Redraw aborted!\", this);\n            return false;\n        }\n\n        let newChildren = this.getChildrenForRedraw();\n\n        if (newChildren === this.children) {\n            for (let i = 0; i < newChildren.length; i += 1) {\n                newChildren[i].redraw();\n            }\n            this.applyNodeAttributes();\n            this.applyRef();\n            return true;\n        }\n\n        let domNode = this.node;\n        let childrenKeyMap = this.getElementKeyMap(this.children);\n\n        for (let i = 0; i < newChildren.length; i++) {\n            let newChild = newChildren[i];\n            let prevChildNode = (i > 0) ? newChildren[i - 1].node : null;\n            let currentChildNode = (prevChildNode) ? prevChildNode.nextSibling : domNode.firstChild;\n\n            // Not a UIElement, to be converted to a TextElement\n            if (!newChild.getNodeType) {\n                newChild = newChildren[i] = new UI.TextElement(newChild);\n            }\n\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = childrenKeyMap && childrenKeyMap.get(newChildKey);\n\n            if (existingChild && newChildren[i].canOverwrite(existingChild)) {\n                // We're replacing an existing child element, it might be the very same object\n                if (existingChild !== newChildren[i]) {\n                    newChildren[i] = this.overwriteChild(existingChild, newChildren[i]);\n                }\n                newChildren[i].redraw();\n                if (newChildren[i].node !== currentChildNode) {\n                    domNode.insertBefore(newChildren[i].node, currentChildNode);\n                }\n            } else {\n                // Getting here means we are not replacing anything, should just render\n                newChild.mount(this, currentChildNode);\n            }\n        }\n\n        if (this.children.length) {\n            // Remove children that don't need to be here\n            let newChildrenSet = new Set(newChildren);\n\n            for (let i = 0; i < this.children.length; i += 1) {\n                if (!newChildrenSet.has(this.children[i])) {\n                    this.children[i].destroyNode();\n                }\n            }\n        }\n\n        this.children = newChildren;\n\n        this.applyNodeAttributes();\n\n        this.applyRef();\n\n        return true;\n    }\n\n    getOptionsAsNodeAttributes() {\n        return setObjectPrototype(this.options, NodeAttributes);\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new NodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    extraNodeAttributes(attr) {}\n\n    applyNodeAttributes() {\n        let attr;\n        if (this.extraNodeAttributes != NOOP_FUNCTION) {\n            // Create a copy of options, that is modifiable\n            attr = this.getNodeAttributes(true);\n            this.extraNodeAttributes(attr);\n        } else {\n            attr = this.getNodeAttributes(false);\n        }\n        attr.apply(this.node, this.constructor.domAttributesMap);\n    }\n\n    setAttribute(key, value) {\n        this.getOptionsAsNodeAttributes().setAttribute(key, value, this.node, this.constructor.domAttributesMap);\n    }\n\n    setStyle(key, value) {\n        this.getOptionsAsNodeAttributes().setStyle(key, value, this.node);\n    }\n\n    removeStyle(key) {\n        this.getOptionsAsNodeAttributes().removeStyle(key, this.node);\n    }\n\n    addClass(className) {\n        this.getOptionsAsNodeAttributes().addClass(className, this.node);\n    }\n\n    removeClass(className) {\n        this.getOptionsAsNodeAttributes().removeClass(className, this.node);\n    }\n\n    hasClass(className) {\n        return this.getOptionsAsNodeAttributes().hasClass(className);\n    }\n\n    toggleClass(className) {\n        if (!this.hasClass(className)) {\n            this.addClass(className);\n        } else {\n            this.removeClass(className);\n        }\n    }\n\n    get styleSheet() {\n        return this.getStyleSheet();\n    }\n\n    set styleSheet(value) {\n        this.options.styleSheet = value;\n        this.redraw();\n    }\n\n    addListenersFromOptions() {\n        for (const key in this.options) {\n            if (typeof key === \"string\" && key.startsWith(\"on\") && key.length > 2) {\n                const eventType = key.substring(2);\n\n                const addListenerMethodName = \"add\" + eventType + \"Listener\";\n                const handlerMethodName = \"on\" + eventType + \"Handler\";\n\n                // The handlerMethod might have been previously added\n                // by a previous call to this function or manually by the user\n                if (typeof this[addListenerMethodName] === \"function\" && !this.hasOwnProperty(handlerMethodName)) {\n                    this[handlerMethodName] = (event) => {\n                        UI.event = event;\n                        if (this.options[key]) {\n                            // TODO: arguments should be (event, this)!\n                            this.options[key](this, event);\n                        }\n                    };\n\n                    // Actually add the listener\n                    this[addListenerMethodName](this[handlerMethodName]);\n                }\n            }\n        }\n    }\n\n    refLink(name) {\n        return {parent: this, name: name};\n    }\n\n    refLinkArray(arrayName, index) {\n        if (!this.hasOwnProperty(arrayName)) {\n            this[arrayName] = [];\n        }\n        return {parent: this[arrayName], name: index};\n    }\n\n    bindToNode(node, doRedraw) {\n        this.node = node;\n        if (doRedraw) {\n            this.clearNode();\n            this.redraw();\n        }\n        return this;\n    }\n\n    mount(parent, nextSiblingNode) {\n        if (!parent.node) {\n            parent = new UI.Element().bindToNode(parent);\n        }\n        this.parent = parent;\n        if (this.node) {\n            parent.insertChildNodeBefore(this, nextSiblingNode);\n            this.dispatch(\"changeParent\", this.parent);\n            return;\n        }\n\n        this.createNode();\n        this.redraw();\n\n        parent.insertChildNodeBefore(this, nextSiblingNode);\n\n        this.addListenersFromOptions();\n\n        this.onMount();\n    }\n\n    // You need to overwrite the next child manipulation rutines if this.options.children !== this.children\n    appendChild(child) {\n        // TODO: the next check should be done with a decorator\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle appendChild, you need to implement it for \" + this.constructor;\n        }\n        this.options.children.push(child);\n        child.mount(this, null);\n        return child;\n    }\n\n    insertChild(child, position) {\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle insertChild, you need to implement it for \" + this.constructor;\n        }\n        position = position || 0;\n\n        this.options.children.splice(position, 0, child);\n\n        const nextChildNode = position + 1 < this.options.children.length ? this.children[position + 1].node : null;\n\n        child.mount(this, nextChildNode);\n\n        return child;\n    }\n\n    eraseChild(child, destroy = true) {\n        let index = this.options.children.indexOf(child);\n\n        if (index < 0) {\n            // child not found\n            return null;\n        }\n        return this.eraseChildAtIndex(index, destroy);\n    }\n\n    eraseChildAtIndex(index, destroy=true) {\n        if (index < 0 || index >= this.options.children.length) {\n            console.error(\"Erasing child at invalid index \", index, this.options.children.length);\n            return;\n        }\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle eraseChild, you need to implement it for \" + this.constructor;\n        }\n        let erasedChild = this.options.children.splice(index, 1)[0];\n        if (destroy) {\n            erasedChild.destroyNode();\n        } else {\n            this.node.removeChild(erasedChild.node);\n        }\n        return erasedChild;\n    }\n\n    eraseAllChildren() {\n        while (this.children.length > 0) {\n            this.eraseChildAtIndex(this.children.length - 1);\n        }\n    }\n\n    show() {\n        this.removeClass(\"hidden\");\n    }\n\n    hide() {\n        this.addClass(\"hidden\");\n    }\n\n    insertChildNodeBefore(childElement, nextSiblingNode) {\n        this.node.insertBefore(childElement.node, nextSiblingNode);\n    }\n\n    // TODO: should be renamed emptyNode()\n    clearNode() {\n        while (this.node && this.node.lastChild) {\n            this.node.removeChild(this.node.lastChild);\n        }\n    }\n\n    isInDocument() {\n        return document.body.contains(this.node);\n    }\n\n    // TODO: this method also doesn't belong here\n    getWidthOrHeight(parameter) {\n        let node = this.node;\n        if (!node) {\n            return 0;\n        }\n        let value = parseFloat(parameter === \"width\" ? node.offsetWidth : node.offsetHeight);\n        return value || 0;\n    }\n\n    getHeight() {\n        return this.getWidthOrHeight(\"height\");\n    };\n\n    getWidth() {\n        return this.getWidthOrHeight(\"width\");\n    }\n\n    setHeight(value) {\n        this.setStyle(\"height\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    };\n\n    setWidth(value) {\n        this.setStyle(\"width\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    }\n\n    addNodeListener(name, callback, ...args) {\n        this.node.addEventListener(name, callback, ...args);\n        const handler = {\n            remove: () => {\n                this.removeNodeListener(name, callback, ...args);\n            }\n        };\n        this.addCleanupJob(handler);\n        return handler;\n    }\n\n    removeNodeListener(name, callback) {\n        this.node.removeEventListener(name, callback);\n    }\n\n    // TODO: methods can be automatically generated by addNodeListener(UI.Element, \"dblclick\", \"DoubleClick\") for instance\n    addClickListener(callback) {\n        return this.addNodeListener(\"click\", callback);\n    }\n\n    removeClickListener(callback) {\n        this.removeNodeListener(\"click\", callback);\n    }\n\n    addDoubleClickListener(callback) {\n        return this.addNodeListener(\"dblclick\", callback);\n    }\n\n    removeDoubleClickListener(callback) {\n        this.removeNodeListener(\"dblclick\", callback);\n    }\n\n    addChangeListener(callback) {\n        return this.addNodeListener(\"change\", callback);\n    }\n}\n\nUI.createElement = function (tag, options, ...children) {\n    if (!tag) {\n        console.error(\"Create element needs a valid object tag, did you mistype a class name?\");\n        return;\n    }\n\n    options = options || {};\n\n    options.children = unwrapArray(children);\n\n    if (options.ref) {\n        if (typeof options.ref === \"string\") {\n            if (UI.renderingStack.length > 0) {\n                options.ref = {\n                    parent: UI.renderingStack[UI.renderingStack.length - 1],\n                    name: options.ref\n                };\n            } else {\n                throw Error(\"Failed to automatically link ref, there needs to be an element in the rendering stack\");\n            }\n        }\n\n        if (options.key) {\n            console.error(\"Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\\n\" +\n                          \"Are you using the options from another object? Shame!\", options);\n        }\n\n        options.key = \"_ref\" + options.ref.name;\n    }\n\n    if (options.hasOwnProperty(\"class\")) {\n        console.error(\"Invalid UI Element attribute: class. Did you mean className?\");\n    }\n\n    if (typeof tag === \"string\") {\n        options.nodeType = tag;\n        tag = UIElement;\n    }\n\n    return new tag(options);\n};\n\nUIElement.domAttributesMap = NodeAttributes.defaultAttributesMap;\n\n// Explicitly know that extraNodeAttributes doesn't do anything, but have it to be callable when doing inheritance\nUIElement.prototype.extraNodeAttributes = NOOP_FUNCTION;\n\nUI.Element = UIElement;\n\nUI.str = function (value) {\n    return new UI.TextElement(value);\n};\n\n// Keep a map for every base class, and for each base class keep a map for each nodeType, to cache classes\nlet primitiveMap = new WeakMap();\n\nUI.Primitive = (BaseClass, nodeType) => {\n    if (!nodeType) {\n        nodeType = BaseClass;\n        BaseClass = UI.Element;\n    }\n    let baseClassPrimitiveMap = primitiveMap.get(BaseClass);\n    if (!baseClassPrimitiveMap) {\n        baseClassPrimitiveMap = new Map();\n        primitiveMap.set(BaseClass, baseClassPrimitiveMap);\n    }\n    let resultClass = baseClassPrimitiveMap.get(nodeType);\n    if (resultClass) {\n        return resultClass;\n    }\n    resultClass = class Primitive extends BaseClass {\n        getNodeType() {\n            return nodeType;\n        }\n    };\n    baseClassPrimitiveMap.set(nodeType, resultClass);\n    return resultClass;\n};\n\nexport {UIElement, UI};\n","export const Orientation = {\n    HORIZONTAL: 1,\n    VERTICAL: 2,\n};\n\nexport const Direction = {\n    UP: \"up\",\n    LEFT: \"left\",\n    DOWN: \"down\",\n    RIGHT: \"right\",\n};\n\nexport const Level = {\n    NONE: null,\n    DEFAULT: \"default\",\n    INFO: \"info\",\n    PRIMARY: \"primary\",\n    SECONDARY: \"secondary\",\n    SUCCESS: \"success\",\n    WARNING: \"warning\",\n    DANGER: \"danger\",\n    ERROR: \"danger\",\n};\n\nexport const Size = {\n    NONE: null,\n    EXTRA_SMALL: \"xs\",\n    SMALL: \"sm\",\n    MEDIUM: \"default\",\n    DEFAULT: \"default\",\n    LARGE: \"lg\",\n    EXTRA_LARGE: \"xl\",\n};\n\nexport const VoteStatus = {\n    NONE: null,\n    LIKE: 1,\n    DISLIKE: 0,\n};\n\nexport const ActionStatus = {\n    DEFAULT: 1,\n    RUNNING: 2,\n    SUCCESS: 3,\n    FAILED: 4,\n};\n","import {UI} from \"./UIBase\";\n\nexport function getOffset(node) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    if (!node) {\n        return {left: 0, top: 0};\n    }\n    let nodePosition = node.style && node.style.position;\n    let left = 0;\n    let top = 0;\n    while (node) {\n        let nodeStyle = node.style || {};\n        if (nodePosition === \"absolute\" && nodeStyle.position === \"relative\") {\n            return {left: left, top: top};\n        }\n        left += node.offsetLeft;\n        top += node.offsetTop;\n        node = node.offsetParent;\n    }\n    return {left: left, top: top};\n}\n\nexport function getComputedStyle(node, attribute) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    let computedStyle = window.getComputedStyle(node, null);\n    return (attribute) ? computedStyle.getPropertyValue(attribute) : computedStyle;\n}\n\nexport function changeParent(element, newParent) {\n    const currentParent = element.parent;\n    currentParent.eraseChild(element, false);\n    newParent.appendChild(element);\n}\n","import {UI} from \"./UIBase\";\nimport {dashCase} from \"../base/Utils\";\nimport {NodeAttributes, defaultToPixelsAttributes} from \"./NodeAttributes\";\n\n// TODO: should this be actually better done throught the dynamic CSS API, without doing through the DOM?\n// So far it's actually better like this, since browsers like Chrome allow users to edit classes\nclass StyleInstance extends UI.TextElement {\n    constructor(options) {\n        super(options);\n        this.setOptions(options);\n    }\n\n    setOptions(options) {\n        this.options = options;\n        this.options.attributes = this.options.attributes || {};\n        this.attributes = new Map();\n        for (let key in this.options.attributes) {\n            this.attributes.set(key, this.options.attributes[key]);\n        }\n    }\n\n    getValue() {\n        let str = this.options.selector + \"{\";\n        for (let [key, value] of this.attributes) {\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            // Ignore keys with null or undefined value\n            if (value == null) {\n                continue;\n            }\n\n            key = dashCase(key);\n\n            // If it's a size property, and the value is a number, assume it's in pixels\n            if ((value instanceof Number || typeof value === \"number\") &&\n                value != 0 && defaultToPixelsAttributes.has(key)) {\n                value = value + \"px\";\n            }\n\n            // TODO: if key starts with vendor-, replace it with the browser specific one (and the plain one)\n            str += key + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    copyState(element) {\n        this.setOptions(element.options);\n    }\n\n    setAttribute(name, value) {\n        this.attributes.set(name, value);\n        this.redraw();\n    }\n\n    deleteAttribute(name) {\n        this.attributes.delete(name);\n        this.redraw();\n    }\n}\n\nclass StyleElement extends UI.Primitive(\"style\") {\n    getNodeAttributes() {\n        // TODO: allow custom style attributes (media, scoped, etc)\n        let attr = new NodeAttributes({});\n        if (this.options.name) {\n            attr.setAttribute(\"name\", this.options.name);\n        }\n        return attr;\n    }\n}\n\nconst ALLOWED_SELECTOR_STARTS = new Set([\":\", \">\", \" \", \"+\", \"~\", \"[\", \".\"]);\n\n// TODO: figure out how to work with animation frames, this only creates a wrapper class\nclass DynamicStyleElement extends StyleElement {\n    toString() {\n        return this.getClassName();\n    }\n\n    // Overwrite valueOf, so when using the + operator should seamlessly concatenate to create a valid className\n    valueOf() {\n        return \" \" + this.getClassName();\n    }\n\n    // TODO: use a cached decorator here\n    getClassName() {\n        if (this.className) {\n            return this.className;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.className = (this.options.name ||  \"autocls\") + \"-\" + this.constructor.instanceCounter;\n        return this.className;\n    }\n\n    getSelector() {\n        return this.options.selectorName || \".\" + this.getClassName();\n    }\n\n    // A cyclic dependency in the style object will cause an infinite loop here\n    getStyleInstances(selector, style) {\n        let result = [];\n        let ownStyle = {}, haveOwnStyle = false;\n        for (let key in style) {\n            let value = style[key];\n            if (value == null) {\n                continue;\n            }\n            let isProperValue = (typeof value === \"string\" || value instanceof String\n                              || typeof value === \"number\" || value instanceof Number\n                              || typeof value === \"function\");\n            if (isProperValue) {\n                ownStyle[key] = value;\n                haveOwnStyle = true;\n            } else {\n                // Check that this actually is a valid subselector\n                let firstChar = String(key).charAt(0);\n                if (!ALLOWED_SELECTOR_STARTS.has(firstChar)) {\n                    console.error(\"First character of your selector is invalid.\");\n                    continue;\n                }\n                // TODO: maybe optimize for waste here?\n                let subStyle = this.getStyleInstances(selector + key, value);\n                result.push(...subStyle);\n            }\n        }\n\n        if (haveOwnStyle) {\n            result.unshift(new StyleInstance({selector: selector, key: selector, attributes: ownStyle}));\n        }\n        return result;\n    }\n\n    render() {\n        let style = this.options.style || {};\n        if (typeof style === \"function\") {\n            style = style();\n        }\n        if (style.selectorName) {\n            this.options.selectorName = style.selectorName;\n            delete style.selectorName;\n        }\n        return this.getStyleInstances(this.getSelector(), style);\n    }\n\n    setStyle(key, value) {\n        this.options.style[key] = value;\n        this.children[0].setAttribute(key, value);\n    }\n\n    setSubStyle(selector, key, value) {\n        throw Error(\"Implement me!\");\n    }\n\n    getStyleObject() {\n        return this.options.style;\n    }\n}\n\nclass KeyframeElement extends StyleElement {\n    toString() {\n        return this.getKeyframeName();\n    }\n\n    getKeyframeName() {\n        if (this.keyframeName) {\n            return this.keyframeName;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.keyframeName = (this.options.name || \"autokeyframe\") + \"-\" + this.constructor.instanceCounter;\n        return this.keyframeName;\n    }\n\n    getValue(style) {\n        let str = \"{\";\n        for (let key in style) {\n            let value = style[key];\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            if (value == null) {\n                continue;\n            }\n            str += dashCase(key) + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    getKeyframeInstance(keyframe) {\n        let result = \"{\";\n        for (let key in keyframe) {\n            let value = keyframe[key];\n            result += key + \" \" + this.getValue(value);\n        }\n        return result + \"}\";\n    }\n\n    render() {\n        return \"@keyframes \" + this.getKeyframeName() + this.getKeyframeInstance(this.options.keyframe || {});\n    }\n}\n\nexport {StyleInstance, StyleElement, KeyframeElement, DynamicStyleElement}\n","export function isDescriptor(desc) {\n    if (!desc || !desc.hasOwnProperty) {\n        return false;\n    }\n\n    const keys = ['value', 'initializer', 'get', 'set'];\n\n    for (let key of keys) {\n        if (desc.hasOwnProperty(key)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function decorate(handleDescriptor, entryArgs) {\n    if (isDescriptor(entryArgs[entryArgs.length - 1])) {\n        return handleDescriptor(...entryArgs, []);\n    } else {\n        return function () {\n            return handleDescriptor(...arguments, entryArgs);\n        };\n    }\n}\n\nexport function createDefaultSetter(key) {\n    return function set(newValue) {\n        Object.defineProperty(this, key, {\n            configurable: true,\n            writable: true,\n            // IS enumerable when reassigned by the outside word\n            enumerable: true,\n            value: newValue\n        });\n\n        return newValue;\n    };\n}\n","import {decorate, createDefaultSetter} from './Utils';\n\nfunction handleDescriptor(target, key, descriptor) {\n    const { configurable, enumerable, initializer, value } = descriptor;\n    // The \"key\" property is constructed with accessor descriptor (getter / setter),\n    // but the first time the getter is used, the property is reconstructed with data descriptor.\n    return {\n        configurable,\n        enumerable,\n\n        get() {\n            // This happens if someone accesses the property directly on the prototype\n            if (this === target) {\n                return;\n            }\n\n            const ret = initializer ? initializer.call(this) : value;\n\n            Object.defineProperty(this, key, {\n                configurable,\n                enumerable,\n                writable: true,\n                value: ret\n            });\n\n            return ret;\n        },\n\n        set: createDefaultSetter(key)\n    };\n}\n\nexport function lazyInitialize(...args) {\n    return decorate(handleDescriptor, args);\n}\n\nlet lazyInit = lazyInitialize;\n\nexport {lazyInit};\n","import {deepCopy} from \"../base/Utils\";\nimport {decorate} from \"./Utils\";\nimport {lazyInit} from \"./LazyInitialize\";\n\nfunction evaluateStyleRuleObject(target, initializer, value, options) {\n    let result = initializer ? initializer.call(target) : value;\n    if (typeof result === \"function\") {\n        result = result();\n    }\n    if (Array.isArray(result)) {\n        result = Object.assign({}, ...result);\n    }\n    return result;\n}\n\nfunction getStyleRuleKey(key) {\n    return \"__style__\" + key;\n}\n\nfunction getKeyframesRuleKey(key) {\n    return \"__keyframes__\" + key;\n}\n\n// TODO: this function can be made a lot more generic, to wrap plain object initializer with inheritance support\nfunction styleRuleWithOptions() {\n    let options = Object.assign({}, ...arguments); //Simpler notation?\n    // TODO: Remove this if you don't think it's appropiate, I thought a warning would do no harm\n    if (!options.targetMethodName) {\n        console.error(\"WARNING: targetMethodName not specified in the options (default is \\\"css\\\")\");\n    }\n    let targetMethodName = options.targetMethodName || \"css\";\n\n    function styleRuleDecorator(target, key, descriptor) {\n        const {initializer, value} = descriptor;\n\n        descriptor.objInitializer = function () {\n            let style = evaluateStyleRuleObject(this, initializer, value, options);\n\n            // TODO: a bit of a hack, clean this up\n            style[\"prefferedClassName\"] = key;\n\n            if (options.selector) {\n                style[\"selectorName\"] = options.selector;\n            }\n\n            if (options.inherit) {\n                // Get the value we set in the prototype of the parent class\n                let parentDesc = Object.getPrototypeOf(target)[getStyleRuleKey(key)];\n                if (!parentDesc) {\n                    console.error(\"You're trying to inherit a rule that isn't implemented in the parent: \" + key);\n                }\n                let parentStyle = evaluateStyleRuleObject(this, parentDesc.objInitializer, parentDesc.value, options);\n                style = deepCopy({}, parentStyle, style);\n                return style;\n            }\n\n            return style;\n        };\n\n        // Change the prototype of this object to be able to access the old descriptor/value\n        target[options.getKey(key)] = Object.assign({}, descriptor);\n\n        descriptor.initializer = function () {\n            let style = descriptor.objInitializer.call(this);\n            return this[targetMethodName](style);\n        };\n\n        delete descriptor.value;\n\n        return lazyInit(target, key, descriptor);\n    }\n\n    return styleRuleDecorator;\n}\n\n// TODO: Second argument is mostly useless (implied from targetMethodName)\nlet styleRule = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: false,\n});\n\nlet styleRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: true,\n});\n\nexport function styleRuleCustom(options) {\n    return styleRuleWithOptions(Object.assign({\n        targetMethodName: \"css\",\n        getKey: getStyleRuleKey,\n        inherit: false,\n    }, options));\n}\n\nlet keyframesRule = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: false,\n});\n\n// TODO: This is currently not working (I think)\nlet keyframesRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: true,\n});\n\nexport {styleRule, styleRuleInherit, keyframesRule, keyframesRuleInherit, styleRuleWithOptions}\n\n","import {StyleElement, KeyframeElement, DynamicStyleElement} from \"./StyleElement\";\nimport {Dispatchable} from \"../base/Dispatcher\";\n\n// Class meant to group multiple classes inside a single <style> element, for convenience\n// TODO: pattern should be more robust, to be able to only update classes\nclass StyleSheet extends Dispatchable {\n    constructor(options={}) {\n        super();\n        this.options = Object.assign({\n            parent: document.head,\n            name: options.name || this.constructor.getElementName(), // call only if needed\n        }, options);\n        this.elements = new Set();\n        if (!this.options.delayedMount) {\n            this.ensureMounted();\n        }\n        this.getTheme().addStyleSheet(this);\n    }\n\n    ensureMounted() {\n        if (this.styleElement) {\n            return;\n        }\n        const styleElementOptions = {\n            children: [],\n            name: this.options.name,\n        };\n        this.styleElement = StyleElement.create(this.options.parent, styleElementOptions);\n    }\n\n    static getInstance() {\n        if (!this.hasOwnProperty(\"singletonInstance\")) {\n            this.singletonInstance = new this();\n        }\n        return this.singletonInstance;\n    }\n\n    // Generate an instance, and also make sure to instantiate all style elements\n    static initialize() {\n        const styleSheet = this.getInstance();\n\n        for (const key in this.prototype) {\n            // Just hit the getter to instantiate the style\n            if (!styleSheet[key]) {\n                console.log(\"This is here to prevent a bundling optimization bug\");\n            }\n        }\n    }\n\n    static getElementName() {\n        this.elementNameCounter = (this.elementNameCounter || 0) + 1;\n        let name = this.name;\n        if (this.elementNameCounter > 1) {\n            name += \"-\" + this.elementNameCounter;\n        }\n        return name;\n    }\n\n    getTheme() {\n        return this.options.theme || this.constructor.theme;\n    }\n\n    setTheme(theme) {\n        this.options.theme = theme;\n    }\n\n    getThemeProperty(key, defaultValue) {\n        const theme = this.getTheme();\n        return (theme && theme.getProperty(key, defaultValue)) || defaultValue;\n    }\n\n    get themeProperties() {\n        const theme = this.getTheme();\n        return (theme && theme.getProperties()) || {};\n    }\n\n    ensureFirstUpdate() {\n        if (this._firstUpdate) {\n            return;\n        }\n\n        this._firstUpdate = true;\n        this.ensureMounted();\n        // Call all listeners before update for the very first time, to update any possible variables\n        this.dispatch(\"beforeUpdate\", this);\n    }\n\n    css(style) {\n        this.ensureFirstUpdate();\n        if (arguments.length > 1) {\n            style = Object.assign({}, ...arguments);\n        }\n        let elementOptions = {style: style};\n\n        // Get the preferred name, maybe cleanup later\n        const nameKey = \"prefferedClassName\";\n        if (style[nameKey]) {\n            elementOptions.name = style[nameKey];\n            delete style[nameKey];\n        }\n\n        let element = new DynamicStyleElement(elementOptions);\n        this.elements.add(element);\n        let styleInstances = element.render();\n        for (let styleInstance of styleInstances) {\n            this.styleElement.appendChild(styleInstance);\n        }\n        return element;\n    }\n\n    keyframes(keyframes) {\n        this.ensureFirstUpdate();\n        // This is not really necessarily as I don't believe it will ever be used\n        if (arguments.length > 1) {\n            keyframes = Object.assign({}, ...arguments);\n        }\n        let element = new KeyframeElement({keyframe: keyframes});\n        this.elements.add(element);\n        this.styleElement.appendChild(element);\n        return element;\n    }\n\n    addBeforeUpdateListener(callback) {\n        return this.addListener(\"beforeUpdate\", callback);\n    }\n\n    update() {\n        if (!this._firstUpdate) {\n            return;\n        }\n        this.dispatch(\"beforeUpdate\", this);\n\n        for (const key of Object.keys(this)) {\n            if (this[key] instanceof DynamicStyleElement) {\n                const desc = this[\"__style__\" + key];\n                const func = desc && desc.objInitializer;\n                if (func) {\n                    this[key].options.style = func.call(this);\n                }\n            }\n        }\n\n        let children = [];\n        for (let value of this.elements) {\n            if (value instanceof StyleElement) {\n                let styleElements = value.render();\n                children.push(...styleElements);\n            }\n        }\n        this.styleElement.options.children = children;\n        this.styleElement.redraw();\n    }\n}\n\n// Helper class, meant to only keep one class active for an element from a set of classes\n// TODO: move to another file\nclass ExclusiveClassSet {\n    constructor(classList, element) {\n        // TODO: check that classList is an array (or at least iterable)\n        this.classList = classList;\n        this.element = element;\n    }\n\n    static fromObject(obj, element) {\n        let classList = [];\n        for (let key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                classList.push(obj[key]);\n            }\n        }\n        return Object.assign(new ExclusiveClassSet(classList, element), obj);\n    }\n\n    set(element, classInstance) {\n        if (!classInstance) {\n            classInstance = element;\n            element = this.element;\n        }\n        for (let cls of this.classList) {\n            if (cls === classInstance) {\n                element.addClass(cls);\n            } else {\n                element.removeClass(cls);\n            }\n        }\n    }\n}\n\nfunction wrapCSS(context, style) {\n    return {\n        [context]: style\n    };\n}\n\nfunction hover(style) {\n    return wrapCSS(\":hover\", style);\n}\n\nfunction active(style) {\n    return wrapCSS(\":active\", style);\n}\n\nfunction focus(style) {\n    return wrapCSS(\":focus\", style);\n}\n\nlet styleMap = new WeakMap();\n\nexport {StyleSheet, ExclusiveClassSet, styleMap, wrapCSS, hover, focus, active};\n\nexport * from \"../decorators/Style\";\n","// Primitive utils for wrapping browser info\nclass Device {\n    static isTouchDevice() {\n        if (!this.hasOwnProperty(\"_isTouchDevice\")) {\n            this._isTouchDevice = !!((\"createTouch\" in window.document) ||\n                                            (navigator.MaxTouchPoints > 0) ||\n                                            (navigator.msMaxTouchPoints > 0) ||\n                                            (\"ontouchstart\" in window));\n        }\n        return this._isTouchDevice;\n    }\n\n    static isMobileDevice() {\n        if (!this.hasOwnProperty(\"_isMobileDevice\")) {\n            const mobileDevices = [\"Android\", \"webOS\", \"iPad\", \"iPhone\", \"iPod\", \"BlackBerry\", \"Windows Phone\"];\n            this._isMobileDevice = false;\n            for (let device of mobileDevices) {\n                if (navigator.userAgent.indexOf(device) !== -1) {\n                    this._isMobileDevice = true;\n                }\n            }\n        }\n        return this._isMobileDevice;\n    }\n\n    static getEventTouchIdentifier(event) {\n        return Math.min(...[...event.touches].map(touch => touch.identifier));\n    }\n\n    static getEventTouch(event) {\n        const identifier = this.getEventTouchIdentifier(event);\n        return [...event.touches].find(touch => touch.identifier === identifier);\n    }\n\n    static getEventCoord(event, axis, reference=\"client\") {\n        let coordName = reference + axis;\n        if (event[coordName]) {\n            return event[coordName];\n        }\n        if (event.touches) {\n            return this.getEventTouch(event)[coordName];\n        }\n        if (event.originalEvent) {\n            return this.getEventCoord(event.originalEvent, axis, reference);\n        }\n\n        console.warn(\"Couldn't find coordinates for event. Maybe wrong reference point? (client/page/screen)\");\n    }\n\n    static getEventX(event, reference=\"client\") {\n        return this.getEventCoord(event, \"X\", reference);\n    }\n\n    static getEventY(event, reference=\"client\") {\n        return this.getEventCoord(event, \"Y\", reference);\n    }\n\n    static getBrowser() {\n        // TODO: should try to use navigator\n        if ((!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {\n            return \"Opera\";\n        }\n        if (typeof InstallTrigger !== 'undefined') {\n            return \"Firefox\";\n        }\n        if (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) {\n            return \"Safari\";\n        }\n        if (document.documentMode) {\n            return \"Internet Explorer\";\n        }\n        if (window.StyleMedia) {\n            return \"Edge\";\n        }\n        if (window.chrome && window.chrome.webstore) {\n            return \"Chrome\";\n        }\n        return \"Unknown\";\n    }\n\n    static supportsEvent(eventName) {\n        if (!this.cachedSupportedValues.has(eventName)) {\n            var element = document.createElement(\"div\");\n            let onEventName = \"on\" + eventName;\n            var isSupported = (onEventName in element);\n            if (!isSupported) {\n                element.setAttribute(onEventName, \"return;\");\n                isSupported = typeof element[onEventName] === \"function\";\n            }\n            element = null;\n            this.cachedSupportedValues.set(eventName, isSupported);\n        }\n        return this.cachedSupportedValues.get(eventName);\n    }\n}\n\nDevice.cachedSupportedValues = new Map();\n\nexport {Device};","import {Device} from \"../base/Device\";\n\nexport const Draggable = (BaseClass) => class Draggable extends BaseClass {\n    _clickCallbacks = new Map();\n    _clickDragListeners = new Map();\n\n    addClickListener(callback) {\n        if (this._clickCallbacks.has(callback)) {\n            return;\n        }\n        let callbackWrapper = () => {\n            if (this._okForClick) {\n                callback();\n            }\n        };\n        this._clickCallbacks.set(callback, callbackWrapper);\n        super.addClickListener(callbackWrapper);\n\n        if (this._clickDragListeners.has(callback)) {\n            return;\n        }\n        let clickDragListener = {\n            onStart: () => { this.dragForClickStarted(); },\n            onDrag: () => { this.dragForClick(); }\n        };\n        this._clickDragListeners.set(callback, clickDragListener);\n        this.addDragListener(clickDragListener);\n    }\n\n    dragForClickStarted() {\n        this._okForClick = true;\n    }\n\n    dragForClick() {\n        this._okForClick = false;\n    }\n\n    removeClickListener(callback) {\n        let callbackWrapper = this._clickCallbacks.get(callback);\n        if (callbackWrapper) {\n            this._clickCallbacks.delete(callback);\n            super.removeClickListener(callbackWrapper);\n        }\n        if (!this._clickDragListeners) {\n            return;\n        }\n        let clickDragListener = this._clickDragListeners.get(callback);\n        if (clickDragListener) {\n            this._clickDragListeners.delete(callback);\n            this.removeDragListener(clickDragListener);\n        }\n    }\n\n    createDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    createTouchDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n            listenerWrapper.touchEventIdentifier = Device.getEventTouchIdentifier(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n            event.preventDefault();\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (event.touches.length && Device.getEventTouchIdentifier(event) === listenerWrapper.touchEventIdentifier) {\n                return;\n            }\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    addDragListener(listeners) {\n        let listenerWrapper = this.createDragListenerWrapper(listeners);\n        let touchListenerWrapper = this.createTouchDragListenerWrapper(listeners);\n        this.addNodeListener(\"touchstart\", touchListenerWrapper.onWrapperStart);\n        this.addNodeListener(\"mousedown\", listenerWrapper.onWrapperStart);\n        // TODO: Replace with our body\n        document.body.addEventListener(\"touchend\", touchListenerWrapper.onWrapperEnd);\n        document.body.addEventListener(\"mouseup\", listenerWrapper.onWrapperEnd);\n\n        if (!this.hasOwnProperty(\"_dragListeners\")) {\n            this._dragListeners = [];\n        }\n        this._dragListeners.push(touchListenerWrapper);\n        this._dragListeners.push(listenerWrapper);\n    }\n\n    removeDragListener(listeners) {\n        if (this._dragListeners) {\n            for (let i = this._dragListeners.length - 1; i >= 0; i -= 1) {\n                if (this._dragListeners[i].onStart === listeners.onStart &&\n                    this._dragListeners[i].onDrag === listeners.onDrag &&\n                    this._dragListeners[i].onEnd === listeners.onEnd) {\n\n                    this.removeNodeListener(\"touchstart\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperEnd);\n                    this.removeNodeListener(\"mousedown\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperEnd);\n\n                    this._dragListeners.splice(i, 1);\n                }\n            }\n        }\n    }\n};\n","export const COLORS_BY_NAME = {\n    aliceblue: \"#f0f8ff\",\n    antiquewhite: \"#faebd7\",\n    aqua: \"#00ffff\",\n    aquamarine: \"#7fffd4\",\n    azure: \"#f0ffff\",\n    beige: \"#f5f5dc\",\n    bisque: \"#ffe4c4\",\n    black: \"#000000\",\n    blanchedalmond: \"#ffebcd\",\n    blue: \"#0000ff\",\n    blueviolet: \"#8a2be2\",\n    brown: \"#a52a2a\",\n    burlywood: \"#deb887\",\n    cadetblue: \"#5f9ea0\",\n    chartreuse: \"#7fff00\",\n    chocolate: \"#d2691e\",\n    coral: \"#ff7f50\",\n    cornflowerblue: \"#6495ed\",\n    cornsilk: \"#fff8dc\",\n    crimson: \"#dc143c\",\n    cyan: \"#00ffff\",\n    darkblue: \"#00008b\",\n    darkcyan: \"#008b8b\",\n    darkgoldenrod: \"#b8860b\",\n    darkgray: \"#a9a9a9\",\n    darkgreen: \"#006400\",\n    darkkhaki: \"#bdb76b\",\n    darkmagenta: \"#8b008b\",\n    darkolivegreen: \"#556b2f\",\n    darkorange: \"#ff8c00\",\n    darkorchid: \"#9932cc\",\n    darkred: \"#8b0000\",\n    darksalmon: \"#e9967a\",\n    darkseagreen: \"#8fbc8f\",\n    darkslateblue: \"#483d8b\",\n    darkslategray: \"#2f4f4f\",\n    darkturquoise: \"#00ced1\",\n    darkviolet: \"#9400d3\",\n    deeppink: \"#ff1493\",\n    deepskyblue: \"#00bfff\",\n    dimgray: \"#696969\",\n    dodgerblue: \"#1e90ff\",\n    firebrick: \"#b22222\",\n    floralwhite: \"#fffaf0\",\n    forestgreen: \"#228b22\",\n    fuchsia: \"#ff00ff\",\n    gainsboro: \"#dcdcdc\",\n    ghostwhite: \"#f8f8ff\",\n    gold: \"#ffd700\",\n    goldenrod: \"#daa520\",\n    gray: \"#808080\",\n    green: \"#008000\",\n    greenyellow: \"#adff2f\",\n    honeydew: \"#f0fff0\",\n    hotpink: \"#ff69b4\",\n    indianred: \"#cd5c5c\",\n    indigo: \"#4b0082\",\n    ivory: \"#fffff0\",\n    khaki: \"#f0e68c\",\n    lavender: \"#e6e6fa\",\n    lavenderblush: \"#fff0f5\",\n    lawngreen: \"#7cfc00\",\n    lemonchiffon: \"#fffacd\",\n    lightblue: \"#add8e6\",\n    lightcoral: \"#f08080\",\n    lightcyan: \"#e0ffff\",\n    lightgoldenrodyellow: \"#fafad2\",\n    lightgray: \"#d3d3d3\",\n    lightgreen: \"#90ee90\",\n    lightpink: \"#ffb6c1\",\n    lightsalmon: \"#ffa07a\",\n    lightseagreen: \"#20b2aa\",\n    lightskyblue: \"#87cefa\",\n    lightslategray: \"#778899\",\n    lightsteelblue: \"#b0c4de\",\n    lightyellow: \"#ffffe0\",\n    lime: \"#00ff00\",\n    limegreen: \"#32cd32\",\n    linen: \"#faf0e6\",\n    magenta: \"#ff00ff\",\n    maroon: \"#800000\",\n    mediumaquamarine: \"#66cdaa\",\n    mediumblue: \"#0000cd\",\n    mediumorchid: \"#ba55d3\",\n    mediumpurple: \"#9370db\",\n    mediumseagreen: \"#3cb371\",\n    mediumslateblue: \"#7b68ee\",\n    mediumspringgreen: \"#00fa9a\",\n    mediumturquoise: \"#48d1cc\",\n    mediumvioletred: \"#c71585\",\n    midnightblue: \"#191970\",\n    mintcream: \"#f5fffa\",\n    mistyrose: \"#ffe4e1\",\n    moccasin: \"#ffe4b5\",\n    navajowhite: \"#ffdead\",\n    navy: \"#000080\",\n    oldlace: \"#fdf5e6\",\n    olive: \"#808000\",\n    olivedrab: \"#6b8e23\",\n    orange: \"#ffa500\",\n    orangered: \"#ff4500\",\n    orchid: \"#da70d6\",\n    palegoldenrod: \"#eee8aa\",\n    palegreen: \"#98fb98\",\n    paleturquoise: \"#afeeee\",\n    palevioletred: \"#db7093\",\n    papayawhip: \"#ffefd5\",\n    peachpuff: \"#ffdab9\",\n    peru: \"#cd853f\",\n    pink: \"#ffc0cb\",\n    plum: \"#dda0dd\",\n    powderblue: \"#b0e0e6\",\n    purple: \"#800080\",\n    red: \"#ff0000\",\n    rosybrown: \"#bc8f8f\",\n    royalblue: \"#4169e1\",\n    saddlebrown: \"#8b4513\",\n    salmon: \"#fa8072\",\n    sandybrown: \"#f4a460\",\n    seagreen: \"#2e8b57\",\n    seashell: \"#fff5ee\",\n    sienna: \"#a0522d\",\n    silver: \"#c0c0c0\",\n    skyblue: \"#87ceeb\",\n    slateblue: \"#6a5acd\",\n    slategray: \"#708090\",\n    snow: \"#fffafa\",\n    springgreen: \"#00ff7f\",\n    steelblue: \"#4682b4\",\n    tan: \"#d2b48c\",\n    teal: \"#008080\",\n    thistle: \"#d8bfd8\",\n    tomato: \"#ff6347\",\n    turquoise: \"#40e0d0\",\n    violet: \"#ee82ee\",\n    wheat: \"#f5deb3\",\n    white: \"#ffffff\",\n    whitesmoke: \"#f5f5f5\",\n    yellow: \"#ffff00\",\n    yellowgreen: \"#9acd32\"\n};\n\n\n/*\n * This class contains methods for operating with colors. Its objects are kept in hsva format with normalized\n * attributes (each attribute has value between 0 and 1 inclusive), and can be converted from/to rgba.\n */\nexport class Color {\n    constructor(color) {\n        if (color) {\n            this.setColor(color);\n        }\n    }\n\n    setColor(color) {\n        this.color = this.constructor.parseColor(color);\n    }\n\n    getColor() {\n        let rgba = this.getRgba();\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    /*\n     * @param color A color string of the types: native name, hex3, hex6, rgb, rgba, hsl, hsla\n     *              or a Color object, or a hsla color array\n     */\n    static parseColor(color) {\n        if (color instanceof Color) {\n            return color.color;\n        } else if (color instanceof Array) {\n            // Add the alpha parameter at the end\n            if (color.length === 3) {\n                color.push(1);\n            }\n            return color;\n        }\n\n        color = color.trim().toLowerCase();\n\n        // Check if color is given by name\n        if (COLORS_BY_NAME.hasOwnProperty(color)) {\n            color = COLORS_BY_NAME[color];\n        }\n\n        let values = [];\n\n        // Check for hex3 (e.g. \"#f00\")\n        let hex3 = color.match(/^#([0-9a-f]{3})$/i);\n        if (hex3) {\n            values = [\n                parseInt(hex3[1].charAt(0), 16) * 0x11,\n                parseInt(hex3[1].charAt(1), 16) * 0x11,\n                parseInt(hex3[1].charAt(2), 16) * 0x11,\n                1\n            ];\n        }\n\n        // Check for hex6 (e.g. \"#ff0000\")\n        let hex6 = color.match(/^#([0-9a-f]{6})$/i);\n        if (hex6) {\n            values = [\n                parseInt(hex6[1].substr(0, 2), 16),\n                parseInt(hex6[1].substr(2, 2), 16),\n                parseInt(hex6[1].substr(4, 2), 16),\n                1\n            ];\n        }\n\n        // Check for rgba (e.g. \"rgba(255, 0, 0, 0.5)\")\n        let rgba = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+.*\\d*)\\s*\\)$/i);\n        if (rgba) {\n            values = [\n                parseInt(rgba[1]),\n                parseInt(rgba[2]),\n                parseInt(rgba[3]),\n                parseFloat(rgba[4])\n            ];\n        }\n\n        // Check for rgb (e.g. \"rgb(255, 0, 0)\")\n        let rgb = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n        if (rgb) {\n            values = [\n                parseInt(rgb[1]),\n                parseInt(rgb[2]),\n                parseInt(rgb[3]),\n                1\n            ];\n        }\n        return values;\n    }\n\n    // TODO: this should be implemented as a factory that generates an interpolator object, that just takes in a t\n    static interpolate(firstColor, secondColor, t = 0.5) {\n        let firstColorArray = Color.parseColor(firstColor);\n        let secondColorArray = Color.parseColor(secondColor);\n\n        return Color.convertToRgba([\n            parseInt(firstColorArray[0] * (1 - t) + secondColorArray[0] * t),\n            parseInt(firstColorArray[1] * (1 - t) + secondColorArray[1] * t),\n            parseInt(firstColorArray[2] * (1 - t) + secondColorArray[2] * t),\n            parseInt(firstColorArray[3] * (1 - t) + secondColorArray[3] * t)\n        ]);\n    }\n\n    static addOpacity(color, opacity) {\n        let colorArray = Color.parseColor(color);\n        return Color.convertToRgba([\n            parseInt(colorArray[0]),\n            parseInt(colorArray[1]),\n            parseInt(colorArray[2]),\n            opacity\n        ]);\n    }\n\n    static convertToRgba(rgba) {\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    static isLight(color) {\n        let values = Color.parseColor(color);\n        return values[0] * 0.3 + values[1] * 0.59 + values[2] * 0.11 > 188;\n    }\n}\n\n\nexport function lighten(color, amount) {\n    if (amount >= 0) {\n        return Color.interpolate(color, \"#fff\", amount);\n    } else {\n        return darken(color, -amount);\n    }\n}\n\n\nexport function darken(color, amount) {\n    if (amount >= 0) {\n        let rgba = Color.parseColor(Color.interpolate(color, \"#000\", amount));\n        for (let i = 0; i < 3; i += 1) {\n            let root = Math.pow(255 - rgba[i], 0.7);\n            rgba[i] = parseInt(rgba[i] - root * amount);\n            if (rgba[i] < 0) {\n                rgba[i] = 0;\n            }\n        }\n        return Color.convertToRgba(rgba);\n    } else {\n        return lighten(color, -amount);\n    }\n}\n\n\nexport function enhance(color, amount) {\n    if (Color.isLight(color)) {\n        return darken(color, amount);\n    } else {\n        return lighten(color, amount);\n    }\n}\n\n\nexport function buildColors(color, dark=true) {\n    let colors = [];\n    let darkenPercents;\n    if (!dark) {\n        darkenPercents = [0.1, 0, -0.2, -0.3, -0.35, -0.2, -1];\n    } else if (Color.isLight(color)) {\n        darkenPercents = [0.05, 0, 0.05, 0.1, 0.15, 0.3, 0.8];\n    } else {\n        darkenPercents = [-0.3, 0, 0.1, 0.2, 0.23, 0.1, -1];\n    }\n    for (let i = 0; i < darkenPercents.length; i += 1) {\n        colors.push(darken(color, darkenPercents[i]));\n    }\n    return colors;\n}\n\n\nexport class ColorGenerator {\n    static FIRST_COLORS = [\"#337ab7\", \"#5cb85c\",  \"#f0ad4e\", \"#5bc0de\", \"#d9534f\"];\n    static cache = new Map();\n\n    static getPersistentColor(uniqueId) {\n        if (uniqueId < this.FIRST_COLORS.length) {\n            return this.FIRST_COLORS[uniqueId];\n        }\n        if (!this.cache.has(uniqueId)) {\n            this.cache.set(uniqueId, this.getRandomColor());\n        }\n        return this.cache.get(uniqueId);\n    }\n\n    static getRandomColor() {\n        const allowed = \"3456789ABC\";\n        let color = \"#\";\n        for (let i = 0; i < 6; i += 1) {\n            color += allowed.charAt(parseInt(Math.random() * allowed.length));\n        }\n        return color;\n    }\n}\n","import {Dispatchable} from \"../../base/Dispatcher\";\nimport {UI} from \"../UIBase\";\nimport {StyleSheet} from \"../Style\";\nimport {CallThrottler} from \"../../base/Utils\";\n\nfunction getInstance(styleSheet) {\n    if (typeof styleSheet === \"function\") {\n        if (typeof styleSheet.getInstance === \"function\") {\n            styleSheet = styleSheet.getInstance();\n        } else {\n            styleSheet = styleSheet();\n        }\n    }\n    return styleSheet;\n}\n\nfunction getInstanceForObject(obj) {\n    if (!obj) {\n        return null;\n    }\n    let styleSheet = (obj.theme && obj.theme.get(obj)) || obj.styleSheet;\n    return getInstance(styleSheet);\n}\n\nclass Theme extends Dispatchable {\n    constructor(name=\"\") {\n        super();\n        this.styleSheetSymbol = Symbol(\"Theme\" + name);\n        this.classSet = new Set();\n        this.styleSheetSet = new Set();\n        this.properties = {};\n        this.updateThrottler = new CallThrottler({throttle: 50});\n        this.updateThrottled = this.updateThrottler.wrap(() => this.updateStyleSheets());\n        window.addEventListener(\"resize\", this.updateThrottled);\n    }\n\n    register(cls, styleSheet) {\n        cls.theme = this;\n        if (!cls.styleSheet) {\n            cls.styleSheet = styleSheet;\n        }\n        this.set(cls, styleSheet);\n    }\n\n    set(cls, styleSheet) {\n        cls[this.styleSheetSymbol] = styleSheet;\n        this.classSet.add(cls);\n    }\n\n    get(cls) {\n        if (!(typeof cls === \"function\")) {\n            cls = cls.constructor;\n        }\n        return cls[this.styleSheetSymbol];\n    }\n\n    getProperties() {\n        return this.properties;\n    }\n\n    getProperty(key, defaultValue) {\n        const value = this.properties[key] || defaultValue;\n        return (typeof value === \"function\") ? value() : value;\n    }\n\n    setProperties(properties, update=true) {\n        Object.assign(this.properties, properties);\n        if (update) {\n            this.updateThrottled();\n        }\n    }\n\n    setProperty(key, value) {\n        this.properties[key] = value;\n    }\n\n    getAllStyleSheets() {\n        let styleSheetSet = new Set(this.styleSheetSet);\n        for (const cls of this.classSet.values()) {\n            styleSheetSet.add(this.get(cls));\n        }\n        return Array.from(styleSheetSet).map(styleSheet => {\n            if (styleSheet.getInstance) {\n                return styleSheet.getInstance();\n            }\n            return styleSheet;\n        });\n    }\n\n    addStyleSheet(styleSheet) {\n        this.styleSheetSet.add(styleSheet);\n    }\n\n    removeStyleSheet(styleSheet) {\n        this.styleSheetSet.delete(styleSheet);\n    }\n\n    updateStyleSheets() {\n        for (const styleSheet of this.getAllStyleSheets()) {\n            if (styleSheet.update) {\n                styleSheet.update();\n            }\n\n        }\n    }\n\n    static register(cls, styleSheet) {\n        return this.Global.register(...arguments);\n    }\n\n    static get(cls) {\n        return this.Global.get(...arguments);\n    }\n\n    static addStyleSheet(styleSheet) {\n        this.Global.addStyleSheet(styleSheet);\n    }\n\n    static setProperties(properties) {\n        this.Global.setProperties(...arguments);\n    }\n\n    static getProperties() {\n        return this.Global.getProperties();\n    }\n}\n\nTheme.Global = new Theme(\"Global\");\n\nUI.Element.prototype.getStyleSheet = function styleSheetGetter() {\n    return getInstanceForObject(this.options) || getInstanceForObject(this.constructor);\n};\n\nfunction registerStyle(styleClass, theme=Theme.Global) {\n    return (target) => {\n        theme.register(target, styleClass);\n    }\n}\n\nStyleSheet.theme = Theme.Global;\n\nexport {Theme, registerStyle};\n","import {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {enhance} from \"./Color\";\nimport {Device} from \"../base/Device\";\nimport {Orientation, Level, Size} from \"./Constants\";\nimport {Theme} from \"style/Theme\";\n\n// TODO: export these properly, don't use a namespace here\nlet GlobalStyle = {\n};\n\nexport function getTextColor(backgroundColor) {\n    return enhance(backgroundColor, 1);\n}\n\nTheme.setProperties({\n    COLOR_BACKGROUND: \"#fff\",\n    COLOR_BACKGROUND_ALTERNATIVE: \"#eee\",\n    COLOR_BACKGROUND_BODY: \"#f8f8f8\",\n    COLOR_FOREGROUND_BODY: \"#f2f2f2\",\n    COLOR_BACKGROUND_BADGE: \"#777\",\n    COLOR_PRIMARY: \"#337ab7\",\n    COLOR_SECONDARY: \"#358ba4\",\n    COLOR_SUCCESS: \"#5cb85c\",\n    COLOR_INFO: \"#5bc0de\",\n    COLOR_WARNING: \"#f0ad4e\",\n    COLOR_DANGER: \"#d9534f\",\n\n    COLOR_LINK: \"#337ab7\",\n\n    FONT_SIZE_EXTRA_SMALL: \"10px\",\n    FONT_SIZE_SMALL: \"12px\",\n    FONT_SIZE_DEFAULT: \"14px\",\n    FONT_SIZE_LARGE: \"17px\",\n    FONT_SIZE_EXTRA_LARGE: \"21px\",\n\n    BASE_BORDER_RADIUS: 0,\n    BASE_BOX_SHADOW: \"0px 0px 10px rgb(160, 162, 168)\",\n    BASE_BORDER_WIDTH: 0,\n    BASE_BORDER_STYLE: \"solid\",\n    BASE_BORDER_COLOR: \"#ddd\",\n\n    BUTTON_BORDER_RADIUS: \"0.2rem\",\n\n    CARD_PANEL_HEADER_HEIGHT: 30,\n    CARD_PANEL_HEADER_HEIGHT_LARGE: 40,\n    CARD_PANEL_HEADING_PADDING: 10,\n    CARD_PANEL_HEADING_PADDING_LARGE: 20,\n    CARD_PANEL_TEXT_TRANSFORM: \"inherit\",\n\n    DARK_BOX_SHADOW: \"0px 0px 10px rgba(0, 0, 0, .6)\",\n\n    ROW_LIST_ROW_HEIGHT: 30,\n    ROW_LIST_ROW_HEIGHT_LARGE: 40,\n    ROW_LIST_ROW_PADDING: 10,\n    ROW_LIST_ROW_PADDING_LARGE: 20,\n    ROW_LIST_ROW_BORDER_WIDTH: 1,\n\n    FONT_FAMILY_SANS_SERIF: \"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif\",\n    FONT_FAMILY_SERIF: \"serif\",\n    FONT_FAMILY_MONOSPACE: \"'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace\",\n    FONT_FAMILY_DEFAULT: () => Theme.getProperties().FONT_FAMILY_SANS_SERIF,\n\n    NAV_MANAGER_NAVBAR_HEIGHT: 50,\n    NAV_MANAGER_BOX_SHADOW_NAVBAR: \"0px 0px 10px rgb(0, 0, 0)\",\n    NAV_MANAGER_BOX_SHADOW_SIDE_PANEL: \"0px 0px 10px #202e3e\",\n\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE: 0,\n\n    FLAT_TAB_AREA_COLOR_BACKGROUND: \"#f3f3f3\",\n    FLAT_TAB_AREA_LINE_HEIGHT: 30,\n    FLAT_TAB_AREA_PADDING_SIDES: 10,\n});\n\nexport class BasicLevelSizeStyleSheet extends StyleSheet {\n    Level(level) {\n        if (this[level]) {\n            return this[level];\n        }\n        for (let type of Object.keys(Level)) {\n            if (level == Level[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n}\n\nexport const BasicLevelStyleSheet = (colorToStyleFunction) => class BasicLevelStyleClass extends BasicLevelSizeStyleSheet {\n    colorStyleRule(color, textColor) {\n        return colorToStyleFunction(color, textColor || getTextColor(color));\n    }\n\n    @styleRule\n    BASE = this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND);\n\n    @styleRule\n    PRIMARY = this.colorStyleRule(this.themeProperties.COLOR_PRIMARY);\n\n    @styleRule\n    SECONDARY = this.colorStyleRule(this.themeProperties.COLOR_SECONDARY);\n\n    @styleRule\n    SUCCESS = this.colorStyleRule(this.themeProperties.COLOR_SUCCESS);\n\n    @styleRule\n    INFO = this.colorStyleRule(this.themeProperties.COLOR_INFO);\n\n    @styleRule\n    WARNING = this.colorStyleRule(this.themeProperties.COLOR_WARNING);\n\n    @styleRule\n    DANGER = this.colorStyleRule(this.themeProperties.COLOR_DANGER);\n};\n\n\nclass FlexContainerStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        display: \"flex\",\n        \">*\": {\n            marginLeft: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginLeft: \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">*\": {\n            marginTop: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginTop: \"0px\",\n        }\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nclass ContainerStyle extends StyleSheet {\n    getSizeStyle(mobilePixels, desktopPercent) {\n        return {\n            margin: Device.isMobileDevice() ? `0 ${mobilePixels}px` : `0% ${desktopPercent}%`,\n        }\n    }\n\n    @styleRule\n    EXTRA_SMALL = this.getSizeStyle(6, 15);\n\n    @styleRule\n    SMALL = this.getSizeStyle(4, 10);\n\n    @styleRule\n    MEDIUM = this.getSizeStyle(4, 6);\n\n    @styleRule\n    LARGE = this.getSizeStyle(2, 3);\n\n    @styleRule\n    EXTRA_LARGE = this.getSizeStyle(2, 1);\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\n\nclass Utils extends StyleSheet {\n    extraTop = () => this.themeProperties[Device.isMobileDevice() ? \"MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE\" :\n        \"MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\"];\n\n    @styleRule\n    fullHeight = {\n        height: \"100%\",\n    };\n\n    @styleRule\n    hidden = {\n        display: \"hidden\"\n    };\n\n    // Use this class for content that has no space between it and the navbar.\n    @styleRule\n    fullContainer = {\n        width: \"100%\",\n        height: () => \"calc(100% + \" + this.extraTop() + \"px)\",\n        marginTop: () => -this.extraTop()\n    }\n}\n\nGlobalStyle.FlexContainer = FlexContainerStyle.getInstance();\nGlobalStyle.Container = ContainerStyle.getInstance();\nGlobalStyle.Utils = Utils.getInstance();\n\nexport {GlobalStyle};\n","import {UI} from \"./UIBase\";\nimport {BasicLevelStyleSheet, GlobalStyle} from \"./GlobalStyle\";\nimport {Orientation} from \"./Constants\";\nimport {registerStyle} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\n\nclass SimpleStyledElement extends UI.Element {\n    getLevel() {\n        return this.options.level || (this.parent && this.parent.getLevel && this.parent.getLevel());\n    }\n\n    setLevel(level) {\n        this.updateOptions({level});\n    }\n\n    getSize() {\n        return this.options.size || (this.parent && this.parent.getSize && this.parent.getSize());\n    }\n\n    setSize(size) {\n        this.updateOptions({size});\n    }\n}\n\n\nclass IconableInterface extends SimpleStyledElement {\n    render() {\n        return [this.beforeChildren(), this.getLabel(), super.render()];\n    };\n\n    getLabel() {\n        return (this.options.label != null) ? this.options.label : \"\";\n    }\n\n    setLabel(label) {\n        this.updateOptions({label: label});\n    }\n\n    //TODO: this should live in a base iconable class, of which you'd only use this.beforeChildren\n    getFaIcon() {\n        return this.options.faIcon;\n    }\n\n    setFaIcon(value) {\n        this.options.faIcon = value;\n        this.redraw();\n    }\n\n    beforeChildren() {\n        if (!this.getFaIcon()) {\n            return null;\n        }\n        let iconOptions = {\n            className: \"fa fa-\" + this.getFaIcon(),\n        };\n        if (this.getLabel()) {\n            iconOptions.style = {\n                marginRight: \"5px\",\n            }\n        }\n\n        return <span {...iconOptions} />;\n    }\n}\n\nlet labelColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker = {\n        backgroundColor: colors[2],\n        color: colors[6],\n        textDecoration: \"none\",\n    };\n    let regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    return Object.assign({}, regular, {\n        \":hover\": darker,\n        \":hover:disabled\": regular,\n        \":focus\": darker,\n        \":active\": darker,\n    });\n};\n\nexport class LabelStyle extends BasicLevelStyleSheet(labelColorToStyle) {\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [{\n        fontWeight: \"bold\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.07em 0.4em\",\n        borderRadius: \"0.3em\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"bottom\",\n        lineHeight: 4/3 + \"\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.05em 0.2em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.05em 0.2em\",\n    };\n}\n\n\n@registerStyle(LabelStyle)\nclass Label extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet badgeColorToStyle = (color) => {\n    const colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n};\n\nexport class BadgeStyle extends BasicLevelStyleSheet(badgeColorToStyle) {\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [{\n        display: \"inline-block\",\n        padding: \"0.25em 0.55em\",\n        fontWeight: \"700\",\n        lineHeight: \"1\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        backgroundColor: \"#777\",\n        borderRadius: \"0.8em\",\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.1em 0.2em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n\n@registerStyle(BadgeStyle)\nclass Badge extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet progressBarColorToStyle = (color) => {\n    let colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n    };\n};\n\nclass ProgressBarStyle extends BasicLevelStyleSheet(progressBarColorToStyle) {\n    @styleRule\n    container = {\n        height: \"20px\",\n        marginBottom: \"20px\",\n        overflow: \"hidden\",\n        backgroundColor: \"#f5f5f5\",\n        borderRadius: \"4px\",\n        boxShadow: \"inset 0 1px 2px rgba(0, 0, 0, .1)\",\n    };\n\n    @styleRule\n    DEFAULT = [{\n        float: \"left\",\n        width: \"0\",\n        height: \"100%\",\n        lineHeight: \"20px\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        backgroundColor: \"#337ab7\",\n        boxShadow: \"inset 0 -1px 0 rgba(0, 0, 0, .15)\",\n        transition: \"width .6s ease\",\n        fontColor: \"#ffffff\",\n    }, {\n        fontSize: \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)];\n\n    @styleRule\n    striped = {\n        backgroundImage: \"linear-gradient(45deg, rgba(255, 255, 255, .15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .15) 50%, rgba(255, 255, 255, .15) 75%, transparent 75%, transparent)\",\n        backgroundSize: \"40px 40px\",\n    };\n\n    @styleRule\n    active = {\n        animation: \"progress-bar-stripes 2s linear infinite\",\n    };\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"8px\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n@registerStyle(ProgressBarStyle)\nclass ProgressBar extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        let valueInPercent = (this.options.value || 0) * 100;\n        let orientation = Orientation.HORIZONTAL;\n        if (this.options.hasOwnProperty(\"orientation\")) {\n            orientation = this.options.orientation;\n        }\n        let barStyle;\n        if (orientation === Orientation.HORIZONTAL) {\n            barStyle = {\n                width: valueInPercent + \"%\",\n                height: this.options.height + \"px\",\n            };\n        } else {\n            barStyle = {\n                height: valueInPercent + \"%\",\n                width: \"5px\",\n            }\n        }\n        let barOptions = {\n            className: this.styleSheet.DEFAULT,\n            style: barStyle,\n        };\n\n        if (this.options.disableTransition) {\n            Object.assign(barOptions.style, {\n                transition: \"none\",\n            });\n        }\n\n        if (this.options.level) {\n            barOptions.className += \" \" + this.styleSheet.Level(this.getLevel());\n        }\n        if (this.options.striped) {\n            barOptions.className += \" \" + this.styleSheet.striped;\n        }\n        if (this.options.active) {\n            barOptions.className += \" \" + this.styleSheet.active;\n        }\n        if (this.options.color) {\n            barOptions.style.backgroundColor = this.options.color;\n        }\n\n        return <div {...barOptions}>\n            <span>{this.options.label}</span>\n        </div>;\n    }\n\n    set(value) {\n        if (value < 0)\n            value = 0;\n        else if (value > 1)\n            value = 1;\n        this.options.value = value;\n        this.redraw();\n    }\n}\n\n\nexport {SimpleStyledElement, IconableInterface, Label, Badge, ProgressBar};\n","// TODO: this file existed to hold generic classes in a period of fast prototyping, has a lot of old code\nimport {UI} from \"./UIBase\";\nimport {Device} from \"../base/Device\";\nimport {Draggable} from \"./Draggable\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {getOffset} from \"./Utils\";\nimport {Orientation} from \"./Constants\";\nimport {ProgressBar} from \"./Bootstrap3\";\n\n// A very simple class, all this does is implement the `getTitle()` method\nclass Panel extends UI.Element {\n    getTitle() {\n        return this.options.title;\n    }\n}\n\nclass SlideBar extends Draggable(UI.Element) {\n    getDefaultOptions() {\n        return {\n            value: 0,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"display\", \"inline-block\");\n        attr.setStyle(\"position\", \"relative\");\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getSliderValue() {\n        return this.options.value * this.options.size - (this.options.barSize / 2);\n    }\n\n    render() {\n        return [\n            <ProgressBar ref=\"progressBar\" active=\"true\" value={this.options.value} disableTransition={true}\n                            orientation={this.getOrientation()}\n                            style={Object.assign({\n                                position: \"relative\",\n                            }, this.getProgressBarStyle())}\n            />,\n            <div ref=\"slider\" style={Object.assign({\n                                backgroundColor: \"black\",\n                                position: \"absolute\",\n                            }, this.getSliderStyle())}>\n            </div>\n        ];\n    }\n\n    setValue(value) {\n        value = Math.max(value, 0);\n        value = Math.min(value, 1);\n\n        this.options.value = value;\n        this.progressBar.set(this.options.value);\n        this.slider.setStyle(this.getOrientationAttribute(), this.getSliderValue() + \"px\");\n\n        this.dispatch(\"change\", this.options.value);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    onMount() {\n        this.addDragListener(this.getDragConfig());\n    }\n}\n\nclass HorizontalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.width || 100;\n        options.barSize = options.barSize || options.barWidth || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: \"5px\",\n            width: this.options.size + \"px\",\n            top: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            width: this.options.barSize + \"px\",\n            height: \"20px\",\n            left: this.getSliderValue() + \"px\",\n            top: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"left\";\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventX(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaX / this.options.size);\n            },\n        };\n    }\n}\nclass VerticalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.height || 100;\n        options.barSize = options.barSize || options.barHeight || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: this.options.size + \"px\",\n            width: \"5px\",\n            left: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            height: this.options.barSize + \"px\",\n            width: \"20px\",\n            top: this.getSliderValue() + \"px\",\n            left: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"top\";\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventY(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaY / this.options.size);\n            },\n        };\n    }\n}\n\nclass Link extends UI.Primitive(\"a\") {\n    extraNodeAttributes(attr) {\n        // TODO: do we want this as a default?\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n\n        if (this.options.newTab) {\n            this.options.target = \"_blank\";\n        }\n\n        return options;\n    }\n\n    render() {\n        if (this.options.value) {\n            return [this.options.value];\n        }\n        return super.render();\n    }\n}\n\nclass Image extends UI.Primitive(\"img\") {\n}\n\n// Beware coder: If you ever use this class, you should have a well documented reason\nclass RawHTML extends UI.Element {\n    getInnerHTML() {\n        return this.options.innerHTML || this.options.__innerHTML;\n    }\n\n    redraw() {\n        this.node.innerHTML = this.getInnerHTML();\n        this.applyNodeAttributes();\n        this.applyRef();\n    }\n}\n\nclass ViewportMeta extends UI.Primitive(\"meta\") {\n    getDefaultOptions() {\n        return {\n            scale: this.getDesiredScale(),\n            initialScale: 1,\n            maximumScale: 1,\n        }\n    }\n\n    getDesiredScale() {\n        const MIN_WIDTH = this.options.minDeviceWidth;\n        return (MIN_WIDTH) ? Math.min(window.screen.availWidth, MIN_WIDTH) / MIN_WIDTH : 1;\n    }\n\n    getContent() {\n        let rez = \"width=device-width\";\n        rez += \",initial-scale=\" + this.options.scale;\n        rez += \",maximum-scale=\" + this.options.scale;\n        rez += \",user-scalable=no\";\n        return rez;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setAttribute(\"name\", \"viewport\");\n        attr.setAttribute(\"content\", this.getContent());\n    }\n\n    maybeUpdate() {\n        const desiredScale = this.getDesiredScale();\n        if (desiredScale != this.options.scale) {\n            this.updateOptions({scale: desiredScale});\n        }\n    }\n\n    onMount() {\n        window.addEventListener(\"resize\", () => this.maybeUpdate());\n    }\n}\n\nclass TemporaryMessageArea extends UI.Primitive(\"span\") {\n    getDefaultOptions() {\n        return {\n            margin: 10\n        };\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.value || \"\"}/>];\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        // TODO: nope, not like this\n        attr.setStyle(\"marginLeft\", this.options.margin + \"px\");\n        attr.setStyle(\"marginRight\", this.options.margin + \"px\");\n        return attr;\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.textElement.setValue(value);\n    }\n\n    setColor(color) {\n        this.setStyle(\"color\", color);\n    }\n\n    showMessage(message, color=\"black\", displayDuration=2000) {\n        this.setColor(color);\n        this.clear();\n        this.setValue(message);\n        if (displayDuration) {\n            this.clearValueTimeout = setTimeout(() => this.clear(), displayDuration);\n        }\n    }\n\n    clear() {\n        this.setValue(\"\");\n        if (this.clearValueTimeout) {\n            clearTimeout(this.clearValueTimeout);\n            this.clearValueTimeout = null;\n        }\n    }\n}\n\n// Just putting in a lot of methods, to try to think of an interface\nclass ScrollableMixin extends UI.Element {\n    getDesiredExcessHeightTop() {\n        return 600;\n    }\n\n    getDesiredExcessHeightBottom() {\n        return 600;\n    }\n\n    getHeightScrollPercent() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        if (scrollHeight === height) {\n            return 0;\n        }\n        return this.node.scrollTop / (scrollHeight - height);\n    }\n\n    getExcessTop() {\n        return this.node.scrollTop;\n    }\n\n    getExcessBottom() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        return scrollHeight - height - this.node.scrollTop;\n    }\n\n    haveExcessTop() {\n        return this.getExcessTop() > this.getDesiredExcessHeightTop();\n    }\n\n    haveExcessBottom() {\n        return this.getExcessBottom() > this.getDesiredExcessHeightBottom();\n    }\n\n    popChildTop() {\n        this.eraseChildAtIndex(0);\n    }\n\n    popChildBottom() {\n        this.eraseChildAtIndex(this.children.length - 1);\n    }\n\n    removeExcessTop() {\n        while (this.haveExcessTop()) {\n            this.popChildTop();\n        }\n    }\n\n    removeExcessBottom() {\n        while (this.haveExcessBottom()) {\n            this.popChildBottom();\n        }\n    }\n\n    pushChildTop(element, removeExcessBottom=true) {\n        if (removeExcessBottom) {\n            this.removeExcessBottom();\n        }\n        this.insertChild(element, 0);\n    }\n\n    pushChildBottom(element, removeExcessTop=true) {\n        if (removeExcessTop) {\n            this.removeExcessTop();\n        }\n        this.appendChild(element);\n        this.appendChild(element);\n    }\n\n    saveScrollPosition() {\n        // If at top or bottom, save that\n        // If anywhere in the middle, save the offset of the first child with a positive offset, and keep that constant\n        this.options.scrollTop = this.node.scrollTop;\n        let maxScrollTop = this.node.scrollHeight - this.node.clientHeight;\n        this.options.scrollInfo = {\n            scrollAtTop: (this.options.scrollTop === 0),\n            scrollAtBottom: (this.options.scrollTop === maxScrollTop),\n            // visibleChildrenOffsets: {}\n        };\n    }\n\n    applyScrollPosition() {\n        this.node.scrollTop = this.options.scrollTop || this.node.scrollTop;\n    }\n\n    scrollToHeight(height) {\n        this.node.scrollTop = height;\n    }\n\n    scrollToTop() {\n        this.scrollToHeight(0);\n    }\n\n    scrollToBottom() {\n        this.scrollToHeight(this.node.scrollHeight);\n    }\n};\n\n//TODO: this class would need some binary searches\nclass InfiniteScrollable extends ScrollableMixin {\n    setOptions(options) {\n        options = Object.assign({\n            entries: [],\n            entryComparator: (a, b) => {\n                return a.id - b.id;\n            },\n            firstRenderedEntry: 0,\n            lastRenderedEntry: -1,\n        }, options);\n        super.setOptions(options);\n        // TODO: TEMP for testing\n        this.options.children = [];\n        if (this.options.staticTop) {\n            this.options.children.push(this.options.staticTop);\n        }\n        for (let entry of this.options.entries) {\n            this.options.children.push(this.renderEntry(entry));\n        }\n    }\n\n    getFirstVisibleIndex() {\n    }\n\n    getLastVisibleIndex() {\n    }\n\n    renderEntry(entry) {\n        if (this.options.entryRenderer) {\n            return this.options.entryRenderer(entry);\n        } else {\n            console.error(\"You need to pass option entryRenderer or overwrite the renderEntry method\");\n        }\n    }\n\n    pushEntry(entry) {\n        this.insertEntry(entry, this.options.entries.length);\n    }\n\n    insertEntry(entry, index) {\n        let entries = this.options.entries;\n        if (index == null) {\n            index = 0;\n            while (index < entries.length &&\n                this.options.entryComparator(entries[index], entry) <= 0) {\n                index++;\n            }\n        }\n        entries.splice(index, 0, entry);\n\n        // Adjust to the children\n        if (this.options.staticTop) {\n            index += 1;\n        }\n\n        // TODO: only if in the rendered range, insert in options.children;\n        let uiElement = this.renderEntry(entry);\n        this.insertChild(uiElement, index);\n    }\n}\n\nclass TimePassedSpan extends UI.Primitive(\"span\") {\n    render() {\n        return this.getTimeDeltaDisplay(this.options.timeStamp);\n    }\n\n    getDefaultOptions() {\n        return {\n            style: {\n                color: \"#aaa\"\n            }\n        }\n    }\n\n    getTimeDeltaDisplay(timeStamp) {\n        let timeNow = Date.now();\n        let timeDelta = parseInt((timeNow - timeStamp * 1000) / 1000);\n        let timeUnitsInSeconds = [31556926, 2629743, 604800, 86400, 3600, 60];\n        let timeUnits = [\"year\", \"month\", \"week\", \"day\", \"hour\", \"minute\"];\n        if (timeDelta < 0) {\n            timeDelta = 0;\n        }\n        for (let i = 0; i < timeUnits.length; i += 1) {\n            let value = parseInt(timeDelta / timeUnitsInSeconds[i]);\n            if (timeUnitsInSeconds[i] <= timeDelta) {\n                return value + \" \" + timeUnits[i] + (value > 1 ? \"s\" : \"\") + \" ago\";\n            }\n        }\n        return \"Few seconds ago\";\n    }\n\n    static addIntervalListener(callback) {\n        if (!this.updateFunction) {\n            this.TIME_DISPATCHER = new Dispatchable();\n            this.updateFunction = setInterval(() => {\n                this.TIME_DISPATCHER.dispatch(\"updateTimeValue\");\n            }, 5000);\n        }\n        return this.TIME_DISPATCHER.addListener(\"updateTimeValue\", callback);\n    }\n\n    onMount() {\n        this._updateListener = this.constructor.addIntervalListener(() => {\n            this.redraw();\n        })\n    }\n\n    onUnmount() {\n        this._updateListener && this._updateListener.remove();\n    }\n};\n\n\nexport {Link, Panel, Image, RawHTML, TimePassedSpan, TemporaryMessageArea, SlideBar, VerticalSlideBar,\n    HorizontalSlideBar, ScrollableMixin, InfiniteScrollable, ViewportMeta};","import {StyleSheet, styleRule} from \"../Style\";\n\nclass InputStyle extends StyleSheet {\n    @styleRule\n    inputElement = {\n        transition: \"border-color ease-in-out .15s, box-shadow ease-in-out .15s\",\n        padding: \"0.4em 0.54em\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"4px\",\n        fontSize: \"90%\",\n        \":focus\": {\n            outline: \"0\",\n            borderColor: \"#66afe9\",\n            boxShadow: \"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6)\",\n        },\n    };\n\n    @styleRule\n    checkboxInput = {\n        marginLeft: \"0.2em\",\n        display: \"inline-block\",\n        width: \"initial !important\",\n        marginRight:\"0.5em\",\n        marginBottom: \"-.1em\",\n        height: \"1em\",\n    };\n\n    @styleRule\n    select = {\n        height: \"2.12em\",\n    };\n}\n\nexport {InputStyle};\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {InputStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n\n@registerStyle(InputStyle)\nclass InputableElement extends UI.Element {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.inputElement);\n    }\n}\n\n\nclass Input extends UI.Primitive(InputableElement, \"input\") {\n    extraNodeAttributes(attr) {\n        let type = this.getInputType();\n        if (type) {\n            attr.setAttribute(\"type\", type);\n        }\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.setValue(this.options.value);\n        }\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    setValue(newValue) {\n        this.node.value = newValue;\n    }\n\n    getInputType() {\n        // Must be overloaded\n        return null;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\nInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"autocomplete\"],\n    [\"autofocus\", {noValue: true}],\n    [\"formaction\"],\n    [\"maxLength\", {domName: \"maxlength\"}],\n    [\"minLength\", {domName: \"minlength\"}],\n    [\"name\"],\n    [\"placeholder\"],\n    [\"readonly\"],\n    [\"required\"],\n    [\"value\"],\n]);\n\n\nclass SubmitInput extends Input {\n    getInputType() {\n        return \"submit\";\n    }\n}\nSubmitInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"formenctype\"],\n    [\"formmethod\"],\n    [\"formnovalidate\"],\n    [\"formtarget\"]\n]);\n\n\nclass TextInput extends Input {\n    getInputType() {\n        return \"text\";\n    }\n}\n\n\nclass NumberInput extends Input {\n    getInputType() {\n        return \"number\";\n    }\n\n    getValue() {\n        let val = super.getValue();\n        return parseInt(val) || parseFloat(val);\n    }\n}\nNumberInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"min\"],\n    [\"max\"],\n    [\"step\"],\n]);\n\n\nclass EmailInput extends Input {\n    getInputType() {\n        return \"email\";\n    }\n}\n\n\nclass PasswordInput extends Input {\n    getInputType() {\n        return \"password\";\n    }\n}\n\n\nclass FileInput extends Input {\n    getInputType() {\n        return \"file\";\n    }\n\n    getFiles() {\n        return this.node.files;\n    }\n\n    getFile() {\n        // TODO: this is valid only if multipleFiles is false\n        return this.getFiles()[0];\n    }\n\n    getAsFormData() {\n        let formData = new FormData();\n        for (let file of this.getFiles()) {\n            formData.append(file.name, file);\n        }\n        return formData;\n    }\n}\nFileInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"multipleFiles\", {domName: \"multiple\", noValue: true}],\n    [\"fileTypes\", {domName: \"accept\"}],\n]);\n\n\nclass CheckboxInput extends Input {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.checkboxInput);\n    }\n\n    getInputType() {\n        return \"checkbox\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nCheckboxInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"checked\", {noValue: true}]\n]);\n\n\nclass RadioInput extends CheckboxInput {\n    getInputType() {\n        return \"radio\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nRadioInput.domAttributesMap = CreateNodeAttributesMap(CheckboxInput.domAttributesMap, [\n    [\"name\"]\n]);\n\n\nclass TextArea extends UI.Primitive(InputableElement, \"textarea\") {\n    applyNodeAttributes() {\n        super.applyNodeAttributes();\n        this.node.readOnly = this.options.readOnly || false;\n    }\n\n    setReadOnly(value) {\n        this.options.readOnly = value;\n        this.node.readOnly = value;\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.node.value = this.options.value + \"\";\n        }\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.node.value = value;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\n\n\nclass Select extends UI.Primitive(InputableElement, \"select\") {\n    render() {\n        this.givenOptions = this.options.options || [];\n        let selectOptions = [];\n\n        for (let i = 0; i < this.givenOptions.length; i += 1) {\n            let options = {\n                key: i\n            };\n            if (this.givenOptions[i] == this.options.selected) {\n                options.selected = true;\n            }\n            selectOptions.push(<option {...options}>{this.givenOptions[i].toString()}</option>);\n        }\n\n        return selectOptions;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.select);\n    }\n\n    get() {\n        let selectedIndex = this.getIndex();\n        return this.givenOptions[selectedIndex];\n    }\n\n    set(value) {\n        for (let i = 0; i < this.givenOptions.length; i++) {\n            if (this.givenOptions[i] === value) {\n                this.setIndex(i);\n                return;\n            }\n        }\n        console.error(\"Can't set the select option \", value, \"\\nAvailable options: \", this.givenOptions);\n    }\n\n    getIndex() {\n        return this.node.selectedIndex;\n    }\n\n    setIndex(index) {\n        this.node.selectedIndex = index;\n        this.options.selected = this.givenOptions[index];\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.selected) {\n            this.set(this.options.selected);\n        }\n    }\n}\n\nexport {InputStyle, Input, SubmitInput, TextInput, NumberInput, EmailInput, PasswordInput, FileInput,\n        CheckboxInput, RadioInput, TextArea, Select};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FormStyle extends StyleSheet {\n    @styleRule\n    form = {\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    formGroup = {\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    formField = {\n        \">label\": {\n            width: \"100%\",\n        },\n        display: \"block\",\n        padding: \"6px 0px\",\n        lineHeight: \"1.42857143\",\n        color: \"#555\",\n        maxWidth: \"600px\",\n        margin: \"0 auto\",\n        \"[disabled]\": {\n            opacity: \"1\",\n            cursor: \"not-allowed\",\n        },\n        \"[readonly]\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    sameLine = {\n        \">label>*:nth-child(1)\": {\n            display: \"inline-block\",\n            textAlign: \"right\",\n            paddingRight: \"1em\",\n            width: \"30%\",\n            verticalAlign: \"middle\",\n        },\n        \">label>*:nth-child(2)\": {\n            display: \"inline-block\",\n            width: \"70%\",\n            verticalAlign: \"middle\",\n        },\n    };\n\n    separatedLineInputStyle = {\n        marginRight: \"0.5em\",\n        width: \"100%\",\n        height: \"2.4em\",\n    };\n\n    @styleRule\n    separatedLine = {\n        padding: \"6px 10px\",\n        \">label>*:nth-child(1)\": {\n            verticalAlign: \"sub\",\n        },\n        \">label>input\": this.separatedLineInputStyle,\n        \">label>select\": this.separatedLineInputStyle,\n        \">label>textarea\": this.separatedLineInputStyle,\n        \">label>input[type='checkbox']\": {\n            marginLeft: \"10px\",\n            verticalAlign: \"middle\",\n        }\n    };\n\n    @styleRule\n    hasError = {\n        color: \"#a94442\",\n    };\n}\n\nexport {FormStyle};\n","import {FormStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FormStyle)\nclass Form extends UI.Primitive(\"form\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.form);\n    }\n\n    onMount() {\n        // Form elements by default refresh the page when a button inside them is clicked, so we prevent that.\n        this.addNodeListener(\"submit\", (event) => event.preventDefault());\n    }\n}\n\n@registerStyle(FormStyle)\nclass FormGroup extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formGroup);\n    }\n\n    setError(errorMessage) {\n        this.errorField.node.textContent = errorMessage;\n        this.addClass(this.styleSheet.hasError);\n    }\n\n    removeError() {\n        this.errorField.node.textContent = \"\";\n        this.removeClass(this.styleSheet.hasError);\n    }\n\n    getErrorField() {\n        return <span ref=\"errorField\" style={{float: \"right\"}}></span>;\n    }\n\n    getChildrenToRender() {\n        return [this.render(), this.getErrorField()];\n    }\n}\n\n\nclass FormField extends FormGroup {\n    inline() {\n        return !(this.options.inline === false ||\n                 (this.parent && this.parent.options && this.parent.options.inline === false));\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formField);\n        if (this.inline()) {\n            attr.addClass(this.styleSheet.sameLine);\n        } else {\n            attr.addClass(this.styleSheet.separatedLine);\n        }\n    }\n\n    getLabel() {\n        if (this.options.label) {\n            return <strong>{this.options.label}</strong>;\n        }\n        return null;\n    }\n\n    render() {\n        if (this.options.contentFirst) {\n            return [<label>{[super.render(),this.getLabel()]}</label>];\n        } else {\n            return [<label>{[this.getLabel(),super.render()]}</label>];\n        }\n    }\n}\n\nexport {Form, FormGroup, FormField};\n","import {NodeAttributes} from \"../NodeAttributes\";\n\n// Setting these attributes as styles in mozilla has no effect.\n// To maintain compatibility between moz and webkit, whenever\n// one of these attributes is set as a style, it is also set as a\n// node attribute.\nconst MozStyleElements = new Set([\"width\", \"height\", \"rx\", \"ry\", \"cx\", \"cy\", \"x\", \"y\"]);\n\nexport class SVGNodeAttributes extends NodeAttributes {\n    fixMozAttributes(node) {\n        if (this.hasOwnProperty(\"style\")) {\n            for (let attributeName of MozStyleElements.values()) {\n                if (this.style.hasOwnProperty(attributeName) && !this.hasOwnProperty(attributeName)) {\n                    this.setAttribute(attributeName, this.style[attributeName], node);\n                }\n            }\n        }\n    }\n\n    setStyle(attributeName, value, node) {\n        super.setStyle(attributeName, value, node);\n        if (MozStyleElements.has(attributeName)) {\n            this.setAttribute(attributeName, value, node);\n        }\n    }\n\n    applyClassName(node) {\n        // SVG elements have a different API for setting the className than regular DOM nodes\n        if (this.className) {\n            node.setAttribute(\"class\", String(this.className));\n        } else {\n            node.removeAttribute(\"class\");\n        }\n    }\n\n    apply(node, attributesMap) {\n        this.transform = this.transform || this.translate;\n        super.apply(node, attributesMap);\n        this.fixMozAttributes(node);\n    }\n}\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {uniqueId} from \"../../base/Utils\";\nimport {SVGNodeAttributes} from \"./SVGNodeAttributes\";\nimport {Device} from \"../../base/Device\";\n\nlet SVG = {};\n\nSVG.Element = class SVGElement extends UI.Element {\n    createNode() {\n        this.node = document.createElementNS(\"http://www.w3.org/2000/svg\", this.getNodeType());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    getScreenCoordinatedForPoint(point) {\n        const node = this.node;\n        // TODO: this is a good argument to always keep a reference to the Stem element in the nodes\n        const svgNode = node.ownerSVGElement || node;\n\n        if (svgNode.createSVGPoint) {\n            // Using native SVG transformations\n            // See https://msdn.microsoft.com/en-us/library/hh535760(v=vs.85).aspx\n            let svgPoint = svgNode.createSVGPoint();\n            svgPoint.x = point.x;\n            svgPoint.y = point.y;\n            return svgPoint.matrixTransform(node.getScreenCTM().inverse());\n        }\n\n        const rect = this.getBoundingClientRect();\n        return {\n        \tx: point.x - rect.left - node.clientLeft,\n        \ty: point.y - rect.top - node.clientTop,\n        };\n    }\n\n    getMouseCoordinatesForEvent(event=window.event) {\n        return this.getScreenCoordinatedForPoint({x: Device.getEventX(event), y: Device.getEventY(event)});\n    }\n\n    saveState() {\n        let state = {};\n        state.options = Object.assign({}, this.options);\n        return state;\n    }\n\n    setState(state) {\n        this.setOptions(state.options);\n    }\n\n    getOptionsAsNodeAttributes() {\n        let attr = this.options;\n        attr.__proto__ = SVGNodeAttributes.prototype;\n        return attr;\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new SVGNodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    translate(x=0, y=0) {\n        this.options.translate = \"translate(\" + x + \",\" + y + \")\";\n    }\n\n    getHashCode() {\n        return uniqueId(this);\n    }\n\n    //TODO(@all) : getBoundingClientRect is unreliable, reimplement it.\n    getBoundingClientRect() {\n        let element = this.node;\n        let x = 0;\n        let y = 0;\n        while(element && element !== document.body) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n            element = element.offsetParent || element.parentNode;\n        }\n        if (element) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n        }\n        let pos = this.node.getBoundingClientRect();\n        return {\n            top: pos.top - y,\n            left: pos.left - x,\n            width: pos.width,\n            bottom: pos.bottom - y,\n            height: pos.height,\n            right: pos.right - x\n        };\n    }\n\n    getBBox() {\n        return this.node.getBBox();\n    }\n\n    getHeight() {\n        return this.getBoundingClientRect().height;\n    }\n\n    getWidth() {\n        return this.getBoundingClientRect().width;\n    }\n\n    toFront() {\n        const parentNode = this.node && this.node.parentElement;\n        if (parentNode) {\n            parentNode.removeChild(this.node);\n            parentNode.appendChild(this.node);\n        }\n    }\n\n    toBack() {\n    }\n\n    setOpacity(newOpacity) {\n        this.options.opacity = newOpacity;\n        if (this.node) {\n            this.node.setAttribute(\"opacity\", newOpacity);\n        }\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"stroke\", color);\n            this.node.setAttribute(\"fill\", color)\n        }\n    }\n\n    remove() {\n    }\n\n    getSvg() {\n        return this.parent.getSvg();\n    }\n};\n\nSVG.Element.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"fill\"],\n    [\"height\"],\n    [\"opacity\"],\n    [\"stroke\"],\n    [\"strokeWidth\", {domName: \"stroke-width\"}],\n    [\"clipPath\", {domName: \"clip-path\"}],\n    [\"transform\"],\n    [\"width\"],\n    [\"cx\"],\n    [\"cy\"],\n    [\"rx\"],\n    [\"ry\"],\n    [\"x\"],\n    [\"y\"],\n    [\"x1\"],\n    [\"y1\"],\n    [\"x2\"],\n    [\"y2\"],\n    [\"offset\"],\n    [\"stopColor\", {domName: \"stop-color\"}],\n    [\"strokeDasharray\", {domName: \"stroke-dasharray\"}],\n    [\"strokeLinecap\", {domName: \"stroke-linecap\"}],\n    [\"viewBox\", {domName: \"viewBox\"}],\n]);\n\nexport {SVG};\n","import {SVG} from \"./SVGBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {UI} from \"../UIBase\";\n\nSVG.Text = class SVGText extends SVG.Element {\n    getNodeType() {\n        return \"text\";\n    }\n\n    getDefaultOptions() {\n        return {\n            text: \"\",\n            fontSize: \"15px\",\n            color: \"black\",\n            dy: \"0.35em\",\n            textAnchor: \"middle\",\n            selectable: false\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        // TODO: For some reason, still selectable in mozilla...\n        if (!this.options.selectable) {\n            attr.setStyle(\"-webkit-user-select\", \"none\");\n            attr.setStyle(\"-khtml-user-select\", \"none\");\n            attr.setStyle(\"-moz-user-select\", \"none\");\n            attr.setStyle(\"-ms-user-select\", \"none\");\n            attr.setStyle(\"user-select\", \"none\");\n        }\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.text + \"\"} />];\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    setText(text) {\n        this.options.text = text;\n        this.textElement.setValue(text + \"\");\n    }\n\n    getText() {\n        return this.options.text;\n    }\n\n    setPosition(x, y) {\n        this.setX(x);\n        this.setY(y);\n    }\n\n    getColor() {\n        return this.options.color;\n    }\n\n    setColor(color, fillOnly=false) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"fill\", color);\n            if (!fillOnly) {\n                this.node.setAttribute(\"stroke\", color);\n            }\n        }\n    }\n};\n\nSVG.Text.domAttributesMap = CreateNodeAttributesMap(SVG.Element.domAttributesMap, [\n    [\"dx\"],\n    [\"dy\"],\n    [\"fontFamily\", {domName: \"font-family\"}],\n    [\"fontSize\", {domName: \"font-size\"}],\n    [\"textAnchor\", {domName: \"text-anchor\"}]\n]);","// TODO: this whole file is mosly here to not break compatibility with pre-Stem code, need refactoring\nexport var EPS = 1e-6;\n\n// Check if a value is equal to zero. Use epsilon check.\nexport var isZero = function (val, epsilon=EPS) {\n    return (Math.abs(val) < epsilon);\n};\n\n// Simulate C/C++ rand() function\nexport var rand = function (mod) {\n    return Math.floor(Math.random() * mod);\n};\n\nexport var equal = function (val1, val2, epsilon=EPS) {\n    return isZero(val1-val2, epsilon);\n};\n\nexport var equalPoints = function (p1, p2, epsilon=EPS) {\n    return isZero(p1.x - p2.x, epsilon) && isZero(p1.y - p2.y, epsilon);\n};\n\n// Compute square of a number\nexport var sqr = function (x) {\n    return x * x;\n};\n\n// Compute the distance between 2 points\nexport var distance = function (p1, p2) {\n    return Math.sqrt(sqr(p1.x - p2.x) + sqr(p1.y - p2.y));\n};\n\nexport var signedDistancePointLine = function (point, line) {\n    return (line.a * point.x + line.b * point.y + line.c) / Math.sqrt(sqr(line.a) + sqr(line.b));\n};\n\nexport var distancePointLine = function (point, line) {\n    return Math.abs(signedDistancePointLine(point, line));\n};\n\nexport var pointOnSegment = function (point, segmentStart, segmentEnd, epsilon) {\n    epsilon = epsilon || EPS;\n    return Math.abs(distance(point, segmentStart) + distance(point, segmentEnd) -\n        distance(segmentStart, segmentEnd)) <= epsilon;\n};\n\nexport var perpendicularFoot = function (point, line) {\n    var distance = (line.a * point.x + line.b * point.y + line.c) / (sqr(line.a) + sqr(line.b));\n    return {\n        x: point.x - line.a * distance,\n        y: point.y - line.b * distance\n    }\n};\n\nexport var lineEquation = function (A, B) {\n    return {\n        a: B.y - A.y,\n        b: A.x - B.x,\n        c: A.y * B.x - A.x * B.y\n    }\n};\n\n// Compute angle between 2 points in grad\nexport var angleGrad = function (p1, p2) {\n    return gradian(angleRad(p1, p2));\n};\n\n// Transform gradian in radian\nexport var radian = function (angle) {\n    return angle * Math.PI / 180;\n};\n\n// Transform radian in gradian\nexport var gradian = function (angle) {\n    return angle * 180 / Math.PI;\n};\n\n// Compute angle between 2 points in rad\nexport var angleRad = function (p1, p2) {\n    p2 = p2 || {'x': 0, 'y': 0};\n    return Math.atan2(p1.y - p2.y, p1.x - p2.x);\n};\n\n// TODO: lots of these should be methods of the point class, not global functions\nexport var crossProduct = function (p1, p2, p0) {\n    p0 = p0 || {x:0, y:0};\n    return (p1.x - p0.x) * (p2.y - p0.y) - (p1.y - p0.y) * (p2.x - p0.x);\n};\n\nexport var rotatePoint = function (point, orig, angle) {\n    // TODO: WTF, default argument value in the middle of argument list?\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: Math.cos(angle) * (point.x - orig.x) - Math.sin(angle) * (point.y - orig.y) + orig.x,\n        y: Math.sin(angle) * (point.x - orig.x) + Math.cos(angle) * (point.y - orig.y) + orig.y\n    };\n};\n\nexport var translatePoint = function (point, dx, dy) {\n    return {\n        x: point.x + dx,\n        y: point.y + dy\n    };\n};\n\nexport var scalePoint = function (point, orig, sx, sy) {\n    sy = sy || sx;\n    return {\n        x: (point.x - orig.x) * sx + orig.x,\n        y: (point.y - orig.y) * sy + orig.y\n    }\n};\n\nexport var polarToCartesian = function (angle, radius, orig) {\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: radius * Math.cos(angle) + orig.x,\n        y: radius * Math.sin(angle) + orig.y\n    };\n};\n\nexport var circlesIntersection = function (circle1, circle2) {\n    var points;\n    var centerDistance;\n    // TODO(@all) These vars are magic. Find out what they do and add comments\n    var l;\n    var h;\n\n    centerDistance = distance(circle1, circle2);\n    if (centerDistance > circle1.r + circle2.r) {\n        return [];\n    }\n\n    l = (sqr(circle1.r)- sqr(circle2.r) + sqr(centerDistance)) / (2 * centerDistance);\n    if (sqr(circle1.r) - sqr(l) < 0) {\n        return [];\n    }\n\n    h = Math.sqrt(sqr(circle1.r) - sqr(l));\n\n    points = [];\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) + h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) - h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) - h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) + h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n\n    return points;\n};\n\nexport var bound = function (value, minValue, maxValue) {\n    if (value < minValue) {\n        return minValue;\n    }\n    if (value > maxValue) {\n        return maxValue;\n    }\n    return value;\n};\n\nexport var getVector = function (startPoint, endPoint) {\n    return {\n        x: endPoint.x - startPoint.x,\n        y: endPoint.y - startPoint.y\n    };\n};\n\nexport var vectorLength = function (vector) {\n    return distance({x:0, y:0}, vector);\n};\n\nexport var normalizeVector = function (vector) {\n    let len = vectorLength(vector);\n    if (Math.abs(len) < EPS) {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n    return {\n        x: vector.x / len,\n        y: vector.y / len\n    };\n};\n\nexport var scaleVector = function (vector, scalar) {\n    return {\n        x: vector.x * scalar,\n        y: vector.y * scalar\n    };\n};\n\nexport var addVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x + vector2.x,\n        y: vector1.y + vector2.y\n    };\n};\n\nexport var subtractVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x - vector2.x,\n        y: vector1.y - vector2.y\n    };\n};\n\nexport var triangleArea = function (point1, point2, point3) {\n    return 0.5 * Math.abs(crossProduct(point1, point2, point3));\n};\n\nexport var inRange = function (value, minValue, maxValue) {\n    if (isNaN(value)) {\n        return false;\n    }\n    return minValue <= value && value <= maxValue;\n};\n\nexport var interpolationValue = function (interpolationArray, X) {\n    var Y = 0;\n    var aux;\n    var i;\n    var j;\n\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        if (interpolationArray.x === X) {\n           return interpolationArray.y;\n        }\n    }\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        aux = interpolationArray[i].y;\n        for (j = 0; j < interpolationArray.length; j += 1) {\n            if (i !== j) {\n                aux = aux * (X - interpolationArray[j].x) / (interpolationArray[i].x - interpolationArray[j].x);\n            }\n        }\n        Y += aux;\n    }\n\n    return Y;\n};\n","import {SVG} from \"./SVGBase\";\nimport * as math from \"../../math\";\n\nSVG.SVGRoot = class SVGRoot extends SVG.Element {\n    getNodeType() {\n        return \"svg\";\n    }\n\n    getSvg() {\n        return this;\n    }\n};\n\nSVG.RawSVG = class RawSVG extends SVG.SVGRoot {\n    redraw() {\n        super.redraw();\n        this.node.innerHTML = this.options.innerHTML;\n    }\n};\n\nSVG.Group = class SVGGroup extends SVG.Element {\n    getNodeType() {\n        return \"g\";\n    }\n\n    setColor(color) {\n        for (let i = 0; i < this.children.length; i += 1) {\n            this.children[i].setColor(color);\n        }\n    }\n};\n\nSVG.Defs = class SVGDefs extends SVG.Element {\n    getNodeType() {\n        return \"defs\";\n    }\n};\n\nSVG.ClipPath = class ClipPath extends SVG.Element {\n    getNodeType() {\n        return \"clipPath\";\n    }\n};\n\nSVG.Path = class SVGPath extends SVG.Element {\n    getNodeType() {\n        return \"path\";\n    }\n\n    getDefaultOptions() {\n        return {\n            d: \"\"\n        }\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPath());\n        return attr;\n    }\n\n    getPath() {\n        return this.options.d;\n    }\n\n    setPath(newPath) {\n        this.options.d = newPath;\n        this.node.setAttribute(\"d\", this.options.d);\n    }\n\n    getLength() {\n        return this.node.getTotalLength();\n    }\n\n    getPointAtLength(len) {\n        return this.node.getPointAtLength(len);\n    }\n\n    getPointAtLengthWithAngle(len) {\n        let totalLength = this.getLength();\n        let epsilon;\n        if (totalLength <= 1) {\n            epsilon = totalLength / 1000;\n        } else {\n            epsilon = Math.min(totalLength / 1000, Math.log(totalLength), 1);\n        }\n        let p1 = this.getPointAtLength(len);\n        let p2 = this.getPointAtLength(Math.min(len + epsilon, totalLength));\n        let p3 = this.getPointAtLength(Math.max(len - epsilon, 0));\n        return {\n            x: p1.x,\n            y: p1.y,\n            alpha: 180 * Math.atan2(p3.y - p2.y, p3.x - p2.x) / Math.PI\n        };\n    }\n};\n\nSVG.Circle = class SVGCircle extends SVG.Element {\n    getNodeType() {\n        return \"circle\";\n    }\n\n    getDefaultOptions() {\n        return {\n            radius: 0,\n            center: {x: 0, y: 0}\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"r\", this.options.radius);\n        attr.setAttribute(\"cx\", this.options.center.x);\n        attr.setAttribute(\"cy\", this.options.center.y);\n        return attr;\n    }\n\n    getRadius() {\n        return this.options.radius;\n    }\n\n    setRadius(radius) {\n        this.options.radius = radius;\n\n        this.setAttribute(\"r\", radius);\n    }\n\n    setCenter(x, y) {\n        this.options.center.x = x;\n        this.options.center.y = y;\n\n        this.setAttribute(\"cx\", x);\n        this.setAttribute(\"cy\", y);\n    }\n\n    getCenter() {\n        return this.options.center;\n    }\n\n    toPath() {\n        let r = this.options.radius;\n        let cx = this.options.center.x;\n        let cy = this.options.center.y;\n        let pathString = \"M\" + (cx - r) + \" \" + cy +            // Starting point is W\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + (-r) +    // Move to N\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + r +       // Move to E\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + r +    // Move to S\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + (-r);  // Finally, move back to W\n        return new SVG.Path({d: pathString});\n    }\n};\n\nSVG.Stop = class SVGStop extends SVG.Element {\n    getNodeType() {\n        return \"stop\";\n    }\n};\n\nSVG.RadialGradient = class SVGRadialGradient extends SVG.Element {\n    getNodeType() {\n        return \"radialGradient\";\n    }\n};\n\n//TODO Complete this class\nSVG.Ellipse = class SVGEllipse extends SVG.Element {\n    getNodeType() {\n        return \"ellipse\";\n    }\n};\n\nSVG.CircleArc = class SVGCircleArc extends SVG.Path {\n    getPath() {\n        let startAngle = this.options.startAngle;\n        let endAngle = this.options.endAngle;\n        let radius = this.options.radius;\n        let center = this.options.center;\n\n        var angleDiff = endAngle - startAngle + (endAngle < startAngle ? (2 * Math.PI) : 0);\n        var startPoint = math.polarToCartesian(startAngle, radius, center);\n        var endPoint = math.polarToCartesian(endAngle, radius, center);\n        var sweepFlag;\n        var largeArcFlag;\n\n        // Set largeArcFlag and sweepFlag\n        if (angleDiff <= Math.PI) {\n            largeArcFlag = 0;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 0;\n            } else {\n                sweepFlag = 1;\n            }\n        } else {\n            largeArcFlag = 1;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 1;\n            } else {\n                sweepFlag = 0;\n            }\n        }\n\n        return \"M \" + startPoint.x + \" \" + startPoint.y +\n            \" A \" + radius + \" \" + radius + \" 0 \" + largeArcFlag + \" \" + sweepFlag + \" \" +\n            endPoint.x + \" \" + endPoint.y;\n    }\n};\n\nSVG.Rect = class SVGRect extends SVG.Element {\n    getNodeType() {\n        return \"rect\";\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    getWidth() {\n        return this.options.width;\n    }\n\n    setWidth(width) {\n        this.options.width = width;\n        this.node.setAttribute(\"width\", this.options.width);\n    }\n\n    getHeight() {\n        return this.options.height;\n    }\n\n    setHeight(height) {\n        this.options.height = height;\n        this.node.setAttribute(\"height\", this.options.height);\n    }\n};\n\nSVG.Line = class SVGLine extends SVG.Element {\n    getNodeType() {\n        return \"line\";\n    }\n\n    getDefaultOptions() {\n        return {\n            fill: \"black\",\n            stroke: \"black\"\n        };\n    }\n\n    //TODO(@all): Make the getters for x1, y1, x2, y2\n\n    setLine(x1, y1, x2, y2) {\n        this.options.x1 = x1;\n        this.options.y1 = y1;\n        this.options.x2 = x2;\n        this.options.y2 = y2;\n\n        this.setAttribute(\"x1\", x1);\n        this.setAttribute(\"y1\", y1);\n        this.setAttribute(\"x2\", x2);\n        this.setAttribute(\"y2\", y2);\n    }\n};\n\nSVG.Polygon = class Polygon extends SVG.Path {\n    getDefaultOptions() {\n        return {\n            points: []\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPolygonPath());\n        return attr;\n    }\n\n    getPolygonPath() {\n        let pathString = \"\";\n        for (let i = 0; i < this.options.points.length; ++i) {\n            if (i == 0) {\n                pathString += \"M \";\n            }\n            else {\n                pathString += \"L \";\n            }\n            pathString += this.options.points[i].x + \" \" + this.options.points[i].y + \" \";\n        }\n        pathString += \"Z\";\n        return pathString;\n    }\n\n    setPoints(points) {\n        this.options.points = points;\n        this.setPath(this.getPolygonPath());\n    }\n};","import {equal} from \"../math\";\n\nclass Transition {\n    constructor(options) {\n        this.func = options.func;\n        this.context = options.context;\n        this.duration = options.duration || 0;\n        this.startTime = options.startTime || 0;\n        this.dependsOn = options.dependsOn || [];\n        this.speedFactor = 1;\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    hasDependencyOn(t) {\n        for (let transition of this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    setStartTime(time) {\n        this.startTime = time;\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        return this;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += (now - this.pauseTime);\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    forceStart() {\n        this.restart();\n        this.func(0.0, this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(1.0, this.context);\n        this.stop();\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n    }\n\n    restart() {\n        delete this.stopped;\n        return this;\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    nextStep(now=Date.now()) {\n        // Return if transition is stopped\n        if (this.isStopped()) {\n            return this;\n        }\n        this.lastT = this.getFraction(now);\n        // Return if transitions not started yet\n        if (this.lastT < 0) {\n            return this;\n        }\n        // Call the animation function\n        this.func(this.lastT, this.context);\n        // Stop the animation if it's the last step\n        if (this.lastT === 1) {\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime + this.duration / this.speedFactor;\n    }\n}\n\nclass Modifier extends Transition {\n    constructor(options) {\n        super(options);\n        this.reverseFunc = options.reverseFunc;\n        this.context = options.context;\n    }\n\n    // WTF, so basically JSON.stringify??\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"   reverseFunc: \" + this.reverseFunc.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    forceStart() {\n        this.restart();\n        this.reverseFunc(this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(this.context);\n        this.stop();\n        return this;\n    }\n\n    nextStep(now=Date.now()) {\n        if (this.isStopped()) {\n            return this;\n        }\n        if (now >= this.startTime) {\n            this.func(this.context);\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime;\n    }\n}\n\nclass TransitionList {\n    constructor(startTime=0) {\n        this.startTime = startTime;\n        this.speedFactor = 1;\n        this.transitions = [];\n        this.dependsOn = [];\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   transitions: [\" + (this.transitions.length ? this.transitions[0].toString() : \"\") + \" ...]\\n\"+\n                \"}\\n\";\n    }\n\n    add(transition, forceFinish=true) {\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    push(transition, forceFinish=true) {\n        transition.setStartTime(this.getLength());\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    setStartTime(startTime) {\n        let timeDelta = startTime - this.startTime;\n        this.startTime = startTime;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.setStartTime(transition.startTime + timeDelta);\n        }\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.stop();\n        }\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].pause(now);\n            }\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += now - this.pauseTime;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].resume(now);\n            }\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    nextStep() {\n        // Return if transition list is stopped\n        if (this.isStopped()) {\n            return;\n        }\n\n        if (this.onNewFrame) {\n            this.onNewFrame(this.getFraction());\n        }\n\n        let finished = true;\n        let stk = [];\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (!transition.isStopped()) {\n                if (transition.canAdvance()) {\n                    transition.nextStep();\n                    while (stk.length !== 0 && this.transitions[stk[stk.length - 1]].canAdvance()) {\n                        this.transitions[stk[stk.length - 1]].nextStep();\n                        stk.pop();\n                    }\n                } else {\n                    stk.push(i);\n                }\n                finished = false;\n            }\n        }\n        if (finished) {\n            this.stop();\n        }\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            this.transitions[i].setSpeedFactor(speedFactor, now);\n        }\n        return this;\n    }\n\n    restart() {\n        delete this.stopped;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.restart();\n        }\n        this.sortByEndTime();\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    getEndTime() {\n        let endTime = 0;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transitionEndTime = this.transitions[i].getEndTime();\n            if (transitionEndTime > endTime) {\n                endTime = transitionEndTime;\n            }\n        }\n        return endTime;\n    }\n\n    hasDependencyOn(t) {\n        for (let transition in this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    sortByStartTime() {\n        // TODO: this comparator should be global\n        this.transitions.sort((a, b) => {\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return b.startTime - a.startTime;\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return b.getEndTime() - a.getEndTime();\n            }\n            if (a.hasDependencyOn(b)) {\n                return 1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n    sortByEndTime() {\n        this.transitions.sort((a, b) => {\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return a.getEndTime() - b.getEndTime();\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return a.startTime - b.startTime;\n            }\n            if (a.hasDependencyOn(b)) {\n                return -1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n\n    forceStart(now=Date.now()) {\n        this.sortByStartTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.startTime <= now) {\n                transition.forceStart(now);\n            }\n        }\n        return this;\n    }\n\n    forceFinish(now=Date.now(), startTime=-1) {\n        this.sortByEndTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.getEndTime() >= startTime) {\n                if (transition instanceof TransitionList) {\n                transition.forceFinish(now, startTime);\n                } else {\n                    if (typeof now === \"undefined\" || transition.getEndTime() < now) {\n                        transition.forceFinish();\n                    }\n                }\n            }\n        }\n        return this;\n    }\n\n    startAtPercent(startPercent, now=Date.now()) {\n        cancelAnimationFrame(this.animationFrameId);\n        this.restart();\n        // TODO(@wefgef): Buggy\n        let paused = this.pauseTime;\n        if (paused) {\n            this.resume();\n        }\n        this.forceStart(now);\n        this.setStartTime(now - startPercent * this.getLength());\n        this.forceFinish(now);\n        // TODO(@wefgef): Huge hack to deal with force transition\n        this.nextStep();\n        this.nextStep();\n        if (paused) {\n            this.pause();\n        }\n\n        let functionWrapper = () => {\n            if (this.isStopped()) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            this.animationFrameId = requestAnimationFrame(functionWrapper);\n        };\n        this.animationFrameId = requestAnimationFrame(functionWrapper);\n    }\n}\n\nexport {Transition, Modifier, TransitionList};","import {SVG} from \"./SVGBase\";\nimport {Transition} from \"../Transition\";\nimport {Color} from \"../Color\";\n\nSVG.AnimatedSVG = class AnimatedSVG extends SVG.SVGRoot {\n    onMount() {\n        if (this.options.transition) {\n            this.options.transition.setStartTime(Date.now());\n            let animationWrapper = () => {\n                if (this.options.transition.isStopped()) {\n                    if (this.options.repeat) {\n                        this.options.transition.setStartTime(Date.now());\n                        this.options.transition.restart();\n                        requestAnimationFrame(animationWrapper);\n                    }\n                    return;\n                }\n                if (!this.options.transition.pauseTime) {\n                    this.options.transition.nextStep();\n                }\n                requestAnimationFrame(animationWrapper);\n            };\n            requestAnimationFrame(animationWrapper);\n        }\n    }\n};\n\nSVG.Element.prototype.blinkTransition = function (options) {\n    let config = {\n        duration: 2000,\n        times: 2,\n        firstColor: \"grey\",\n        secondColor: \"black\",\n        executeLastStep: true,\n        startTime: 0,\n        dependsOn: []\n    };\n    Object.assign(config, options);\n    return new Transition({\n        func: (t, context) => {\n            if (t > 1 - context.interval && !context.executeLastStep) {\n                this.setColor(context.firstColor);\n            } else {\n                this.setColor(Math.floor((1 - t) / context.interval) % 2 === 1 ? context.firstColor : context.secondColor);\n            }\n        },\n        context: {\n            firstColor: config.firstColor,\n            secondColor: config.secondColor,\n            interval: 1 / (2 * config.times),\n            executeLastStep: config.executeLastStep\n        },\n        duration: config.duration,\n        startTime: config.startTime,\n        dependsOn: config.dependsOn\n    });\n};\nSVG.Element.prototype.changeOpacityTransition = function(opacity, duration, dependsOn=[], startTime=0) {\n    if (!this.options.hasOwnProperty(\"opacity\")) {\n        this.options.opacity = 1;\n    }\n    return new Transition({\n        func: (t, context) => {\n            this.setOpacity((1 - t) * context.opacity + t * opacity);\n        },\n        context: {\n            opacity: this.options.opacity\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};\nSVG.Element.prototype.changeColorTransition = function(color, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setColor(Color.interpolate(context.color, color, t));\n            },\n            context: {\n                color: this.getColor()\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\n\nSVG.Text.prototype.moveTransition = function(coords, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setPosition(\n                    (1 - t) * context.x + t * coords.x,\n                    (1 - t) * context.y + t * coords.y\n                );\n            },\n            context: {\n                x: this.options.x,\n                y: this.options.y\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\nSVG.Text.prototype.changeFillTransition = function(color, duration, dependsOn=[], startTime=0) {\n    return new Transition({\n        func: (t, context) => {\n            this.setColor(Color.interpolate(context.color, color, t), true);\n        },\n        context: {\n            color: this.getColor()\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};","import {UI} from \"./UIBase\";\nimport {GlobalStyle} from \"./GlobalStyle\";\n\nclass Switcher extends UI.Element {\n    constructor(options) {\n        super(options);\n        this.childMap = new WeakMap();\n        this.numRedraws = 0;\n    }\n\n    getDefaultOptions() {\n        return {\n            fullHeight: false,\n            preserveScroll: true,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.fullHeight) {\n            attr.addClass(GlobalStyle.Utils.fullHeight);\n        }\n    }\n\n    copyState(element) {\n        let options = Object.assign({}, element.options, {\n            children: this.overwriteElements(this.options.children || [], element.options.children || []),\n        });\n\n        this.setOptions(options);\n\n        for (let child of this.options.children) {\n            if (child.options.active) {\n                this.activeChild = child;\n            }\n        }\n    }\n\n    render() {\n        return this.activeChild || this.options.children[0];\n    }\n\n    overwriteElements(existingElements, newElements) {\n        let keyMap = this.getElementKeyMap(existingElements) || new Map();\n        for (let i = 0; i < newElements.length; i += 1) {\n            let newChild = newElements[i];\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = keyMap.get(newChildKey);\n            if (existingChild === newChild) {\n                continue;\n            }\n            if (existingChild && newChild.canOverwrite(existingChild)) {\n                newElements[i] = newChild = this.overwriteChild(existingChild, newChild);\n            }\n        }\n        return newElements;\n    }\n\n    redraw() {\n        this.numRedraws += 1;\n\n        //basic things for our current node\n        this.applyNodeAttributes();\n        this.applyRef();\n\n        // This render may be required to update this.options.children\n        UI.renderingStack.push(this);\n        this.render();\n        UI.renderingStack.pop();\n\n        if (this.options.children.length == 0) {\n            return;\n        }\n\n        for (let child of this.options.children) {\n            if (this.options.lazyRender) {\n                this.getChildProperties(child).isUpToDate = false;\n                child.applyRef();\n            } else {\n                this.updateChild(child);\n            }\n        }\n\n        this.updateActiveChild(this.activeChild || this.options.children[0]);\n    }\n\n    getChildProperties(child) {\n        if (!this.childMap.has(child)) {\n            this.childMap.set(child, {\n                isMounted: !!child.node,\n                redrawIndex: -1,\n            });\n        }\n        return this.childMap.get(child);\n    }\n\n    updateChild(child) {\n        if (this.getChildProperties(child).redrawIndex < this.numRedraws) {\n            if (!child.node) {\n                child.mount(this);\n            } else {\n                child.redraw();\n            }\n            this.getChildProperties(child).redrawIndex = this.numRedraws;\n        }\n    }\n\n    appendChild(child, doMount=false) {\n        this.options.children.push(child);\n        if (doMount) {\n            child.mount(this);\n        }\n        if (this.options.children.length == 1) {\n            this.setActive(child);\n        }\n        return child;\n    }\n\n    getActive() {\n        return this.activeChild;\n    }\n\n    insertChildNodeBefore(child, nextSibling) {\n        let childProperties = this.getChildProperties(child);\n        childProperties.isMounted = true;\n        childProperties.redrawIndex = this.numRedraws;\n    }\n\n    updateActiveChild(element) {\n        while (this.node.firstChild) {\n            //TODO: would be useful here to be able to access the matching UI Element\n            this.node.removeChild(this.node.firstChild);\n        }\n\n        if (element == null) {\n            this.activeChild = null;\n            return;\n        }\n\n        this.updateChild(element);\n\n        this.node.appendChild(element.node);\n        this.children[0] = this.activeChild = element;\n    }\n\n    deactivateChild(child) {\n        child.dispatch(\"hide\");\n        child.dispatch(\"setActive\", false);\n        if (this.options.preserveScroll) {\n            this.getChildProperties(child).scrollTop = this.node.scrollTop;\n        }\n    }\n\n    activateChild(child) {\n        child.dispatch(\"setActive\", true);\n        child.dispatch(\"show\");\n        if (this.options.preserveScroll) {\n            this.node.scrollTop = this.getChildProperties(child).scrollTop || 0;\n        }\n    }\n\n    setActive(element) {\n        if (this.activeChild === element) {\n            return;\n        }\n        if (this.activeChild) {\n            this.deactivateChild(this.activeChild);\n        }\n        this.updateActiveChild(element);\n        if (this.activeChild) {\n            this.activateChild(this.activeChild);\n        }\n    }\n\n    hasChild(element) {\n        return this.childMap.has(element);\n    }\n\n    onMount() {\n        this.addListener(\"shouldRedrawChild\", (event) => {\n            if (event.child.isInDocument()) {\n                event.child.redraw();\n            } else {\n                this.getChildProperties(event.child).isUpToDate = false;\n            }\n        });\n    }\n}\n\nexport {Switcher};\n","import {UI} from \"./UIBase\";\nimport {Switcher} from \"./Switcher\";\nimport {Dispatcher} from \"../base/Dispatcher\";\nimport {PageTitleManager} from \"../base/PageTitleManager\";\nimport {unwrapArray} from \"../base/Utils\";\n\nexport class Router extends Switcher {\n    static parseURL(path=location.pathname) {\n        if (!Array.isArray(path)) {\n            path = path.split(\"/\");\n        }\n        return path.filter(str => str != \"\");\n    }\n\n    static joinURLParts(urlParts) {\n        if (urlParts.length) {\n            return \"/\" + urlParts.join(\"/\") + \"/\";\n        } else {\n            return \"/\";\n        }\n    }\n\n    static changeURL(url, replaceHistory=false) {\n        if (Array.isArray(url)) {\n            url = this.joinURLParts(url);\n        }\n\n        if (url === window.location.pathname) {\n            return;\n        }\n        const historyArgs = [{}, PageTitleManager.getTitle(), url];\n        if (replaceHistory) {\n            window.history.replaceState(...historyArgs);\n        } else {\n            window.history.pushState(...historyArgs);\n        }\n\n        this.updateURL();\n    }\n\n    static updateURL() {\n        this.Global.setURL(this.parseURL());\n    }\n\n    static setGlobalRouter(router) {\n        this.Global = router;\n        window.onpopstate = () => {\n            this.updateURL();\n            Dispatcher.Global.dispatch(\"externalURLChange\");\n        };\n\n        this.updateURL();\n    }\n\n    // TODO: should be named getRootRoute() :)\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getPageNotFound() {\n        const element = UI.createElement(\"h1\", {children: [\"Can't find url, make sure you typed it correctly\"]});\n        element.pageTitle = \"Page not found\";\n        return element;\n    }\n\n    setURL(urlParts) {\n        urlParts = unwrapArray(urlParts);\n\n        const page = this.getRoutes().getPage(urlParts) || this.getPageNotFound();\n\n        const activePage = this.getActive();\n\n        if (activePage !== page) {\n            activePage && activePage.dispatch(\"urlExit\");\n            this.setActive(page);\n            page.dispatch(\"urlEnter\");\n        }\n\n        if (this === this.constructor.Global) {\n            PageTitleManager.setTitle(page.pageTitle);\n        }\n\n        this.dispatch(\"change\", urlParts, page, activePage);\n    }\n\n    addChangeListener(callback) {\n        return this.addListener(\"change\", callback);\n    }\n\n    onMount() {\n        if (!Router.Global) {\n            this.constructor.setGlobalRouter(this);\n        }\n    }\n}\n\nexport class Route {\n    static ARG_KEY = \"%s\";\n    cachedPages = new Map();\n\n    constructor(expr, pageGenerator, subroutes=[], options={}) {\n        this.expr = (expr instanceof Array) ? expr : [expr];\n        this.pageGenerator = pageGenerator;\n        this.subroutes = unwrapArray(subroutes);\n        if (typeof options === \"string\") {\n            options = {title: options}\n        }\n        this.options = options;\n        this.cachedPages = new Map();\n    }\n\n    matches(urlParts) {\n        if (urlParts.length < this.expr.length) {\n            return null;\n        }\n        let args = [];\n        for (let i = 0; i < this.expr.length; i += 1) {\n            const isArg = this.expr[i] === this.constructor.ARG_KEY;\n            if (urlParts[i] != this.expr[i] && !isArg) {\n                return null;\n            }\n            if (isArg) {\n                args.push(urlParts[i]);\n            }\n        }\n        return {\n            args: args,\n            urlParts: urlParts.slice(this.expr.length)\n        }\n    }\n\n    getPageTitle() {\n        return this.options.title;\n    }\n\n    generatePage(...argsArray) {\n        if (!this.pageGenerator) {\n            return null;\n        }\n\n        const serializedArgs = argsArray.toString();\n        if (!this.cachedPages.has(serializedArgs)) {\n            const pageGenerator = this.pageGenerator;\n            const args = unwrapArray(argsArray);\n            const generatorArgs = {args, argsArray};\n            const page = (pageGenerator.prototype instanceof UI.Element) ? new pageGenerator(generatorArgs) : pageGenerator(generatorArgs);\n            if (!page.pageTitle) {\n                const myPageTitle = this.getPageTitle();\n                if (myPageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n            }\n            this.cachedPages.set(serializedArgs, page);\n        }\n        return this.cachedPages.get(serializedArgs);\n    }\n\n    matchesOwnNode(urlParts) {\n        return urlParts.length === 0;\n    }\n\n    getPage(urlParts, router, ...argsArray) {\n        if (this.matchesOwnNode(urlParts)) {\n            return this.generatePage(...argsArray);\n        }\n        for (const subroute of this.subroutes) {\n            const match = subroute.matches(urlParts);\n            if (match) {\n                if (match.args.length) {\n                    argsArray.push(match.args);\n                }\n                let page = subroute.getPage(match.urlParts, router, ...argsArray);\n                if (page && !page.pageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n                return page;\n            }\n        }\n    }\n}\n\nexport class TerminalRoute extends Route {\n    constructor(expr, pageGenerator, options={}) {\n        super(expr, pageGenerator, [], options);\n    }\n\n    matchesOwnNode(urlParts) {\n        return true;\n    }\n\n    getPage(urlParts, router) {\n        const page = super.getPage(...arguments);\n        setTimeout(() => {\n            page.setURL(urlParts);\n        });\n        return page;\n    }\n}\n","import {UI} from \"./UIBase\";\n\n// This is the object that will be used to translate text\nlet translationMap = null;\n\n// Keep a set of all UI Element that need to be updated when the language changes\n// Can't use a weak set here unfortunately because we need iteration\n// That's why we must make sure to remove all nodes from the set when destroying them\nUI.TranslationElements = new Set();\n\nUI.TranslationTextElement = class TranslationTextElement extends UI.TextElement {\n    constructor(value) {\n        if (arguments.length === 1) {\n            super(value);\n        } else {\n            super(\"\");\n            this.setValue(...arguments);\n        }\n    }\n\n    setValue(value) {\n        if (arguments.length > 1) {\n            this.value = Array.from(arguments);\n        } else {\n            this.value = value;\n        }\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    evaluateSprintf(str, ...values) {\n        throw Error(\"Not yet implemented\");\n    }\n\n    evaluate(strings, ...values) {\n        if (!Array.isArray(strings)) {\n            return this.evaluateSprintf(...arguments);\n            // This means strings is a string with the sprintf pattern\n        } else {\n            // Using template literals https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals\n            if (arguments.length != strings.length) {\n                console.error(\"Invalid arguments to evaluate \", Array.from(arguments));\n            }\n            let result = strings[0];\n            for (let i = 1; i < arguments.length; i++) {\n                result += arguments[i];\n                result += strings[i];\n            }\n            return result;\n        }\n    }\n\n    getValue() {\n        let value = this.value;\n        if (Array.isArray(this.value)) {\n            value = (translationMap && translationMap.get(...value)) || this.evaluate(...value);\n        } else {\n            // TODO: if translationMap.get() returns \"\", keep, skip only if returning null\n            value = (translationMap && translationMap.get(value)) || value;\n        }\n        return value;\n    }\n\n    onMount() {\n        UI.TranslationElements.add(this);\n    }\n\n    onUnmount() {\n        UI.TranslationElements.delete(this);\n    }\n};\n\n// This method is a shorthand notation to create a new translatable text element\n// TODO: should also support being used as a string template\nUI.T = (str) => {\n    return new UI.TranslationTextElement(str);\n};\n\n// TODO @mciucu this should be wrapped in a way that previous requests that arrive later don't get processed\n// TODO: should this be done with promises?\n// Function to be called with a translation map\n// The translationMap object needs to implement .get(value) to return the translation for value\nfunction setTranslationMap(_translationMap) {\n    if (translationMap === _translationMap) {\n        return;\n    }\n    translationMap = _translationMap;\n    for (let textElement of UI.TranslationElements.values()) {\n        textElement.redraw();\n    }\n}\n\nlet languageStore = null;\n\n// This function should be called to set the language store to watch for changes\n// The languageStore argumenent needs to implement .getLocale(), addListener(\"localChange\", (language) =>{})\n// The language objects need to implement .buildTranslation(callback), where callback should be called with a translationMap\nfunction setLanguageStore(_languageStore) {\n    languageStore = _languageStore;\n\n    let currentLocale = languageStore.getLocale();\n    // If there's a default language already set, build the translation table for it\n    if (currentLocale) {\n        currentLocale.buildTranslation(setTranslationMap);\n    }\n\n    // Add a listener for whenever the language changes\n    languageStore.addListener(\"localeChange\", (language) => {\n        language.buildTranslation(setTranslationMap);\n    });\n}\n\nfunction getTranslationMap() {\n    return translationMap;\n}\n\nexport {setLanguageStore, setTranslationMap, getTranslationMap};\n","import {StyleSheet, styleRule} from \"../Style\";\nimport {enhance} from \"../Color\";\nimport {Device} from \"../../base/Device\";\n\n\n\nexport class HorizontalOverflowStyle extends StyleSheet {\n    baseColor = () =>  this.themeProperties.COLOR_PRIMARY;\n    arrowColor = () => enhance(this.baseColor(), .8);\n    arrowBackground = () => this.baseColor();\n    arrowHoverColor = () => enhance(this.baseColor(), 1);\n    arrowHoverBackground = () => enhance(this.baseColor(), -.3);\n\n    transitionTime = .15;\n\n    arrow = {\n        zIndex: \"1\",\n        alignItems: \"center\",\n        padding: \".3em\",\n        fontSize: \"150% !important\",\n        height: \"100%\",\n        position: \"absolute\",\n        cursor: \"pointer\",\n        top: 0,\n        color: () => this.arrowColor(),\n        backgroundColor: () => this.arrowBackground(),\n        \":hover\": {\n            color: () => this.arrowHoverColor(),\n            backgroundColor: () => this.arrowHoverBackground(),\n        }\n    };\n\n    @styleRule\n    leftArrow = Object.assign({}, this.arrow, {\n        left: 0,\n        borderRight: () => \"2px solid \" + this.arrowHoverBackground(),\n    });\n\n    @styleRule\n    rightArrow = Object.assign({}, this.arrow, {\n        right: 0,\n        borderLeft: () => \"2px solid \" + this.arrowHoverBackground(),\n    });\n\n    @styleRule\n    horizontalOverflow = {\n        position: \"relative\",\n        width: \"100%\",\n        \">:first-child\": {\n            display: \"flex\",\n        },\n        \">:last-child\": {\n            display: \"flex\",\n        },\n    };\n\n    @styleRule\n    childrenContainer = {\n        width: \"100%\",\n        overflow: Device.isMobileDevice() ? \"auto\" : \"hidden\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    swipeAnimation = {\n        transition: \"margin-left \" + this.transitionTime + \"s ease\",\n    };\n\n    @styleRule\n    hiddenArrow = {\n        display: \"none !important\",\n    };\n\n    @styleRule\n    pusherContainer = {\n        overflow: Device.isMobileDevice() ? \"auto\" : \"hidden\",\n        position: \"relative\",\n        display: \"flex\",\n        width: \"100%\",\n    }\n}\n","import {enhance} from \"Color\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\nimport {HorizontalOverflowStyle} from \"../horizontal-overflow/Style\";\n\nclass BaseTabAreaStyle extends StyleSheet {\n    @styleRule\n    tab = {\n        userSelect: \"none\",\n        display: \"inline-block\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    activeTab = {};\n\n    @styleRule\n    nav = {\n        listStyle: \"none\",\n    };\n\n    @styleRule\n    switcher = {\n        flex: \"1\",\n        overflow: \"auto\",\n    };\n\n    @styleRule\n    tabArea = {\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nclass DefaultTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        marginBottom: \"-1px\",\n        textDecoration: \"none !important\",\n        marginRight: \"2px\",\n        lineHeight: \"1.42857143\",\n        border: \"1px solid transparent\",\n        borderRadius: \"4px 4px 0 0\",\n        padding: \"8px\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        \":hover\": {\n            cursor: \"pointer\",\n            backgroundColor: \"#eee\",\n            color: \"#555\",\n            border: \"1px solid #ddd\",\n            borderBottomColor: \"transparent\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: \"#555 !important\",\n        cursor: \"default !important\",\n        backgroundColor: \"#fff !important\",\n        border: \"1px solid #ddd !important\",\n        borderBottomColor: \"transparent !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        borderBottom: \"1px solid #ddd\",\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n    };\n}\n\nclass MinimalistTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        lineHeight: \"1.42857143\",\n        paddingTop: \"6px\",\n        paddingLeft: \"8px\",\n        paddingRight: \"8px\",\n        paddingBottom: \"4px\",\n        color: \"#666\",\n        borderBottom: \"2px solid transparent\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: \"rgba(51,122,183,1)\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        fontWeight: \"bold\",\n        color: \"rgba(51,122,183,1)\",\n        cursor: \"default !important\",\n        borderBottom: \"2px solid rgba(51,122,183,1) !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        position: \"relative\",\n        borderBottom: \"1px solid #aaa\",\n    };\n}\n\nclass FlatTabAreaStyle extends BaseTabAreaStyle {\n    transitionTime = .3;\n\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        padding: () => this.themeProperties.FLAT_TAB_AREA_PADDING_SIDES,\n        letterSpacing: \"0.5px\",\n        color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.4) + \"!important\",\n        fontWeight: \"bold\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.6) + \"!important\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.8) + \"!important\",\n        cursor: \"default !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        whiteSpace: \"nowrap\",\n        position: \"relative\",\n        paddingTop: \"4px\",\n        backgroundColor: () => this.themeProperties.COLOR_FOREGROUND_BODY,\n    };\n\n    @styleRule\n    activeBar = {\n        height: 3,\n        backgroundColor: () => this.themeProperties.COLOR_PRIMARY,\n        position: \"absolute\",\n        left: 0,\n        bottom: 0,\n    };\n\n    @styleRule\n    activeBarAnimated = {\n        transition: `${this.transitionTime}s width, ${this.transitionTime}s left`,\n    };\n\n    @styleRule\n    activeOnRender = {\n        paddingBottom: () => this.themeProperties.FLAT_TAB_AREA_PADDING_SIDES - 3,\n        borderBottom: () => \"3px solid \" + this.themeProperties.COLOR_PRIMARY,\n    };\n}\n\nclass FlatTabAreaHorizontalOverflowStyle extends HorizontalOverflowStyle {\n    baseColor = () => this.themeProperties.COLOR_FOREGROUND_BODY;\n    arrowColor = () => enhance(this.baseColor(), .4);\n    arrowBackground = () => this.baseColor();\n    arrowHoverColor = () => enhance(this.baseColor(), .8);\n    arrowHoverBackground = () => enhance(this.baseColor(), .1);\n}\n\nexport {BaseTabAreaStyle, DefaultTabAreaStyle, MinimalistTabAreaStyle, FlatTabAreaStyle,\n    FlatTabAreaHorizontalOverflowStyle};\n","import {UI} from \"../UIBase\";\nimport {Switcher} from \"../Switcher\";\nimport {Link} from \"../UIPrimitives\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {DefaultTabAreaStyle, FlatTabAreaStyle} from \"./Style\";\nimport {unwrapArray} from \"../../base/Utils\";\n\n\nclass BasicTabTitle extends Link {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tab);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.activeTab);\n        }\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    canOverwrite(existingElement) {\n        // Disable reusing with different panels, since we want to attach listeners to the panel\n        return super.canOverwrite(existingElement) && this.options.panel === existingElement.options.panel;\n    }\n\n    setActive(active) {\n        this.options.active = active;\n        this.redraw();\n        if (active) {\n            this.options.activeTabDispatcher.setActive(this.getPanel(), () => {\n                this.setActive(false);\n            });\n        }\n    }\n\n    getPanel() {\n        return this.options.panel;\n    }\n\n    getTitle() {\n        if (this.options.title) {\n            return this.options.title;\n        }\n        let panel = this.getPanel();\n        if (typeof panel.getTitle === \"function\") {\n            return panel.getTitle();\n        }\n        return panel.options.title;\n    }\n\n    render() {\n        return [this.getTitle()];\n    }\n\n    onMount() {\n        super.onMount();\n\n        if (this.options.active) {\n            this.setActive(true);\n        }\n\n        this.addClickListener(() => {\n            this.setActive(true);\n        });\n\n        if (this.options.panel && this.options.panel.addListener) {\n            this.attachListener(this.options.panel, \"show\", () => {\n                this.setActive(true);\n            });\n        }\n    }\n}\n\n\nclass TabTitleArea extends UI.Element {\n}\n\n\n@registerStyle(DefaultTabAreaStyle)\nclass TabArea extends UI.Element {\n    activeTabDispatcher = new SingleActiveElementDispatcher();\n\n    getDefaultOptions() {\n        return {\n            autoActive: true, // means the first Tab will be automatically selected\n            // lazyRender: true, // TODO: should be true by default\n            panelClass: null, // Custom css class can be added to panels\n            titleAreaClass: null, // Custom css class can be added to title area\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tabArea);\n    }\n\n    createTabPanel(panel) {\n        let tab = <BasicTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                 active={panel.options.active} href={panel.options.tabHref}\n                                 styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n\n    appendChild(panel, doMount) {\n        let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n        this.options.children.push(panel);\n\n        this.titleArea.appendChild(tabTitle);\n        this.switcherArea.appendChild(tabPanel, doMount || !this.options.lazyRender);\n    };\n\n    getTitleArea(tabTitles) {\n        let titleAreaClass = this.styleSheet.nav;\n        if (this.options.titleAreaClass) {\n            titleAreaClass += \" \" + this.options.titleAreaClass;\n        }\n        return <TabTitleArea ref=\"titleArea\" className={titleAreaClass}>\n            {tabTitles}\n        </TabTitleArea>;\n    }\n\n    getSwitcher(tabPanels) {\n        let switcherClass = this.styleSheet.switcher;\n        if (this.options.panelClass) {\n            switcherClass += \" \" + this.options.panelClass;\n        }\n        return <Switcher className={switcherClass} ref=\"switcherArea\" lazyRender={this.options.lazyRender}>\n            {tabPanels}\n        </Switcher>;\n    }\n\n    getChildrenToRender() {\n        let tabTitles = [];\n        let tabPanels = [];\n        let activeTab;\n\n        for (const panel of unwrapArray(this.render())) {\n            let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n            if (this.activePanel === tabPanel) {\n                activeTab = tabTitle;\n            }\n\n            tabTitles.push(tabTitle);\n            tabPanels.push(tabPanel);\n        }\n\n        if (!activeTab) {\n            for (const tabTitle of tabTitles) {\n                if (tabTitle.options.active) {\n                    activeTab = tabTitle;\n                }\n            }\n        } else {\n            for (let i = 0; i < tabPanels.length; i += 1) {\n                const tabTitle = tabTitles[i];\n                const tabPanel = tabPanels[i];\n\n                if (tabTitle.options.active) {\n                    tabTitle.options.active = false;\n                }\n                if (tabPanels.options.active) {\n                    tabPanels.options.active = false;\n                }\n\n                if (activeTab === tabTitle) {\n                    tabPanel.options.active = true;\n                    tabTitle.options.active = true;\n                }\n            }\n        }\n\n        if (this.options.autoActive && !activeTab && tabTitles.length > 0) {\n            tabTitles[0].options.active = true;\n        }\n\n        return [\n            this.getTitleArea(tabTitles),\n            this.getSwitcher(tabPanels),\n        ];\n    };\n\n    setActive(panel) {\n        this.activeTabDispatcher.setActive(panel);\n    }\n\n    getActive() {\n        return this.activeTabDispatcher.getActive();\n    }\n\n    onSetActive(panel) {\n        this.switcherArea.setActive(panel);\n        this.activePanel = panel;\n    }\n\n    onMount() {\n        this.attachListener(this.activeTabDispatcher, (panel) => {\n            this.onSetActive(panel);\n        });\n\n        this.addListener(\"resize\", () => {\n            this.switcherArea.dispatch(\"resize\");\n        });\n    }\n}\n\nexport * from \"./Style\";\nexport {TabTitleArea, BasicTabTitle, TabArea};\n","// Contains classes to abstract some generic Font Awesome usecases.\nimport {UI} from \"./UIBase\";\nimport {Direction} from \"./Constants\";\n\nclass FAIcon extends UI.Primitive(\"i\") {\n    getIcon() {\n        return this.options.icon;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(\"fa\");\n        attr.addClass(\"fa-\" + this.getIcon());\n        if (this.options.size) {\n            attr.addClass(\"fa-\" + this.options.size);\n        }\n    }\n\n    setIcon(icon) {\n        this.options.icon = icon;\n        this.redraw();\n    }\n}\n\nclass FACollapseIcon extends FAIcon {\n    getIcon() {\n        if (this.options.collapsed) {\n            return \"angle-right\";\n        } else {\n            return \"angle-down\";\n        }\n    }\n\n    setCollapsed(collapsed) {\n        this.options.collapsed = collapsed;\n        this.redraw();\n    }\n\n    toggleCollapsed() {\n        this.setCollapsed(!this.options.collapsed);\n    }\n}\n\nclass FASortIcon extends FAIcon {\n    getIcon() {\n        if (this.options.direction === Direction.UP) {\n            return \"sort-asc\";\n        } else if (this.options.direction === Direction.DOWN){\n            return \"sort-desc\";\n        } else {\n            return \"sort\";\n        }\n    }\n\n    setDirection(direction) {\n        this.options.direction = direction;\n        this.redraw();\n    }\n}\n\nexport {FAIcon, FACollapseIcon, FASortIcon};\n","import {UI} from \"../UIBase\";\nimport {FAIcon} from \"../FontAwesome\";\nimport {registerStyle} from \"../style/Theme\";\nimport {HorizontalOverflowStyle} from \"./Style\";\n\n\n\n@registerStyle(HorizontalOverflowStyle)\nexport class HorizontalOverflow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            swipePercent: .5,\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.horizontalOverflow);\n    }\n\n    getChildrenToRender() {\n        return [\n            <FAIcon ref=\"leftArrow\" icon=\"chevron-left\" className={`${this.styleSheet.leftArrow} ${this.styleSheet.hiddenArrow}`}/>,\n            <div ref=\"childrenContainer\" className={this.styleSheet.childrenContainer}>\n                <div ref=\"swipeHelperChild\"/>\n                <div ref=\"pusherContainer\" className={this.styleSheet.pusherContainer}>\n                    {this.render()}\n                </div>\n            </div>,\n            <FAIcon ref=\"rightArrow\" icon=\"chevron-right\" className={`${this.styleSheet.rightArrow} ${this.styleSheet.hiddenArrow}`}/>\n        ];\n    }\n\n    appendChild(...args) {\n        this.pusherContainer.appendChild(...args);\n    }\n\n    eraseChild(...args) {\n        this.pusherContainer.eraseChild(...args);\n    }\n\n    checkForOverflow() {\n        const children = this.pusherContainer.children;\n\n        if (!children.length) {\n            return;\n        }\n\n        let shouldOverflowRight = false;\n        let shouldOverflowLeft = false;\n\n        const elementRect = this.node.getBoundingClientRect();\n\n        for (let child of children) {\n            const childRect = child.node.getBoundingClientRect();\n            shouldOverflowRight |= elementRect.left + elementRect.width < childRect.left + childRect.width - 1;\n            shouldOverflowLeft |= elementRect.left > childRect.left;\n        }\n\n        const leftArrowHidden = !this.leftArrow.getWidth();\n        if (shouldOverflowLeft && leftArrowHidden) {\n            this.leftArrow.removeClass(this.styleSheet.hiddenArrow);\n        } else if (!shouldOverflowLeft && !leftArrowHidden) {\n            this.leftArrow.addClass(this.styleSheet.hiddenArrow);\n        }\n\n        const rightArrowHidden = !this.rightArrow.getWidth();\n        if (shouldOverflowRight && rightArrowHidden) {\n            this.rightArrow.removeClass(this.styleSheet.hiddenArrow);\n        } else if (!shouldOverflowRight && !rightArrowHidden) {\n            this.rightArrow.addClass(this.styleSheet.hiddenArrow);\n        }\n    }\n\n    scrollContent(amount) {\n        let scrollLeft;\n        const containerNode = this.pusherContainer.node;\n        if (amount < 0) {\n            scrollLeft = Math.max(0, containerNode.scrollLeft + amount * this.getWidth());\n        } else {\n            scrollLeft = Math.min(containerNode.scrollWidth - this.getWidth(), containerNode.scrollLeft + amount * this.getWidth());\n        }\n\n        if (amount < 0) {\n            this.swipeHelperChild.setStyle(\"marginLeft\", scrollLeft - containerNode.scrollLeft);\n            containerNode.scrollLeft = scrollLeft;\n        }\n\n        this.pusherContainer.setWidth(\"fit-content\");\n        this.swipeHelperChild.addClass(this.styleSheet.swipeAnimation);\n\n        if (amount < 0) {\n            this.swipeHelperChild.setStyle(\"marginLeft\", 0);\n        } else {\n            this.swipeHelperChild.setStyle(\"marginLeft\", containerNode.scrollLeft - scrollLeft);\n        }\n\n        setTimeout(() => {\n            this.pusherContainer.setWidth(\"100%\");\n            this.swipeHelperChild.removeClass(this.styleSheet.swipeAnimation);\n            containerNode.scrollLeft = scrollLeft;\n            this.swipeHelperChild.setStyle(\"marginLeft\", 0);\n            this.checkForOverflow();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    scrollContentLeft() {\n        this.scrollContent(-this.options.swipePercent);\n    }\n\n    scrollContentRight() {\n        this.scrollContent(this.options.swipePercent);\n    }\n\n    // This method should be overwritten, and it is called whenever the position of the elements is changed.\n    handleEventAndHandlePositionChange(callback) {\n        callback();\n    }\n\n    onMount() {\n        this.pusherContainer.addNodeListener(\"scroll\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        this.addListener(\"resize\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        this.rightArrow.addClickListener(() => this.handleEventAndHandlePositionChange(() => this.scrollContentRight()));\n        this.leftArrow.addClickListener(() => this.handleEventAndHandlePositionChange(() => this.scrollContentLeft()));\n\n        // TODO: Create a resizeable-aware UI Element to be extended by this class and manage these listeners.\n        window.addEventListener(\"resize\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        setTimeout(() => this.checkForOverflow());\n    }\n}","import {UI} from \"../UIBase\";\nimport {FlatTabAreaStyle, FlatTabAreaHorizontalOverflowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {TabTitleArea, BasicTabTitle, TabArea} from \"./TabArea\";\nimport {HorizontalOverflow} from \"../horizontal-overflow/HorizontalOverflow\";\nimport {unwrapArray} from \"../../base/Utils\";\n\n\n\nclass FlatTabTitle extends BasicTabTitle {\n    setActive(active) {\n        super.setActive(active);\n        if (active) {\n            this.options.activeTabTitleDispatcher.setActive(this, () => {\n                this.setActive(false);\n            });\n        }\n    }\n}\n\n\n// This class displays a bottom bar on the active tab, and when changing tabs it also moves the bottom bar.\n@registerStyle(FlatTabAreaStyle)\nclass FlatTabTitleArea extends TabTitleArea {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.nav);\n    }\n\n    getChildrenToRender() {\n        return [\n            <HorizontalOverflow ref=\"horizontalOverflow\" styleSheet={FlatTabAreaHorizontalOverflowStyle}>\n                {this.render()}\n                <div ref=\"bar\" className={this.styleSheet.activeBar} />\n            </HorizontalOverflow>,\n        ]\n    }\n\n    setActiveBar(activeTab) {\n        let barLeft = 0;\n        let barWidth = 0;\n        for (const tab of unwrapArray(this.render())) {\n            const tabWidth = tab.getWidth();\n            if (tab === activeTab) {\n                barWidth = tabWidth;\n                break;\n            }\n            barLeft += tabWidth;\n        }\n        this.bar.setStyle({\n            left: barLeft,\n            width: barWidth,\n        });\n    }\n\n    setActive(activeTab) {\n        if (this.activeTab) {\n            // Remove the border from the active tab and \"prepare\" the bar on the current active tab.\n            this.setActiveBar(this.activeTab);\n            this.activeTab.removeClass(this.styleSheet.activeOnRender);\n        }\n\n        // Animate the bar.\n        setTimeout(() => {\n            this.bar.addClass(this.styleSheet.activeBarAnimated);\n            this.setActiveBar(activeTab);\n        });\n\n        setTimeout(() => {\n            // Sometimes, another tab has been clicked between the start and end of an animation, so remove the\n            // active class on that tab, just in case.\n            if (this.activeTab) {\n                this.activeTab.removeClass(this.styleSheet.activeOnRender);\n            }\n            // Add the active class on the current tab.\n            activeTab.addClass(this.styleSheet.activeOnRender);\n            // Restore the bar to its \"unused\" state.\n            this.bar.removeClass(this.styleSheet.activeBarAnimated);\n            this.bar.setWidth(0);\n            // Update the active tab.\n            this.activeTab = activeTab;\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    onMount() {\n        super.onMount();\n        for (const child of this.options.children) {\n            if (child.options.active) {\n                this.setActive(child);\n            }\n        }\n        this.attachListener(this.options.activeTabTitleDispatcher, (tab) => this.setActive(tab));\n        this.addListener(\"resize\", () => this.horizontalOverflow.dispatch(\"resize\"));\n    }\n}\n\n\n@registerStyle(FlatTabAreaStyle)\nexport class FlatTabArea extends TabArea {\n    activeTabTitleDispatcher = new SingleActiveElementDispatcher();\n\n    getTitleArea(tabTitles) {\n        return <FlatTabTitleArea ref=\"titleArea\" activeTabTitleDispatcher={this.activeTabTitleDispatcher}\n                                 className={this.options.titleAreaClass || \"\"}>\n            {tabTitles}\n        </FlatTabTitleArea>;\n    }\n\n    createTabPanel(panel) {\n        let tab = <FlatTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                activeTabTitleDispatcher={this.activeTabTitleDispatcher}\n                                active={panel.options.active} href={panel.options.tabHref}\n                                styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n}\n","import {mapIterator} from \"../base/Utils\";\n\n// A map that supports multiple values to the same key\nclass MultiMap {\n    constructor() {\n        this.map = new Map();\n    }\n\n    static iterator(items) {\n        return items[Symbol.iterator];\n    }\n\n    // Methods that are called before every access inside\n    // the internal map\n    normalizeKey(key) {\n        return key;\n    }\n    \n    normalizeValue(value) {\n        return value;\n    }\n\n    append(key, value) {\n        let nKey = this.normalizeKey(key);\n        let nValue = this.normalizeValue(value);\n        if (this.map.has(nKey)) {\n            this.map.get(nKey).push(nValue);\n        } else {\n            this.map.set(nKey, [nValue]);\n        }\n    }\n\n    has(key) {\n        return this.map.has(this.normalizeKey(key));\n    }\n\n    delete(key) {\n        this.map.delete(this.normalizeKey(key));\n    }\n\n    set(key, value) {\n        this.map.set(this.normalizeKey(key), [this.normalizeValue(value)]);\n    }\n\n    get(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey)[0];\n        }\n        return null;\n    }\n\n    getAll(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey).slice();\n        }\n        return null;\n    }\n\n    forEach(callback, context) {\n        for (let [key, value] of this.entries()) {\n            callback.call(context, value, key, this);\n        }\n    }\n\n    keys() {\n        return mapIterator(this.entries(), entry => entry[0]);\n    }\n\n    values() {\n        return mapIterator(this.entries(), entry => entry[1]);\n    }\n\n    *entries() {\n        for (let [key, values] of this.map.entries()) {\n            for (let value of values) {\n                yield [key, value];\n            }\n        }\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n}\n\nexport {MultiMap};\n","import {MultiMap} from \"../data-structures/MultiMap\";\n\n// This class currently mirrors the functionality of Headers on Chrome at the time of implementation\n// TODO: It is specified that the function get() should return the result of getAll() and getAll() deprecated\nclass Headers extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj) {\n        super();\n        if (obj instanceof Headers) {\n            for (let [key, value] of obj) {\n                this.append(key, value);\n            }\n        } else if (obj) {\n            for (let key of Object.keys(obj)) {\n                this.append(key, obj[key]);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        if (typeof key !== 'string') {\n            key = String(key);\n        }\n        if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(key)) {\n            throw new TypeError('Invalid character in header field name');\n        }\n        return key.toLowerCase();\n    }\n\n    normalizeValue(value) {\n        if (typeof value !== \"string\") {\n            value = String(value);\n        }\n        return value;\n    }\n}\n\nfunction polyfillHeaders(global) {\n    global.Headers = global.Headers || Headers;\n}\n\nexport {Headers, polyfillHeaders};","import {MultiMap} from \"../data-structures/MultiMap\";\n\nclass URLSearchParams extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj=\"\") {\n        super(obj);\n        let str = String(obj);\n        if (str.indexOf(\"?\") === 0) {\n            str = str.slice(1);\n        }\n        for (let parameter of str.split(\"&\")) {\n            let index = parameter.indexOf(\"=\");\n            if (index !== -1) {\n                let key = this.constructor.decode(parameter.slice(0, index));\n                let value = this.constructor.decode(parameter.slice(index + 1));\n                this.append(key, value);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        return key.toString();\n    }\n\n    normalizeValue(value) {\n        return value.toString();\n    }\n\n    static encode(str) {\n        let replace = {\n            '!': '%21',\n            \"'\": '%27',\n            '(': '%28',\n            ')': '%29',\n            '~': '%7E',\n            '%20': '+',\n            '%00': '\\x00'\n        };\n        return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, (match) => {\n            return replace[match];\n        });\n    }\n\n    static decode(str) {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    }\n\n    toString() {\n        let query = [];\n        for (let [key, values] of this.map.entries()) {\n            let name = this.constructor.encode(key);\n            for (let value of values) {\n                query.push(name + \"=\" + this.constructor.encode(value));\n            }\n        }\n        return query.join(\"&\");\n    }\n}\n\nfunction polyfillURLSearchParams(global) {\n    global.URLSearchParams = global.URLSearchParams || URLSearchParams;\n}\n\nexport {URLSearchParams, polyfillURLSearchParams};","import {polyfillHeaders} from \"./Headers\";\nimport {polyfillURLSearchParams} from \"./URLSearchParams\";\n\nfunction fileReaderReady(reader) {\n    return new Promise((resolve, reject) => {\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject(reader.error);\n        };\n    });\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise;\n}\n\nfunction readBlobAsText(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise;\n}\n\nclass Body {\n    constructor() {\n        this.bodyUsed = false;\n    }\n\n    setBodyUsed() {\n        if (this.bodyUsed) {\n            return Promise.reject(new TypeError(\"Already read\"));\n        }\n        this.bodyUsed = true;\n    }\n\n    static decode(body) {\n        let form = new FormData();\n        for (let bytes of body.trim().split('&')) {\n            if (bytes) {\n                let split = bytes.split('=');\n                let name = split.shift().replace(/\\+/g, ' ');\n                let value = split.join('=').replace(/\\+/g, ' ');\n                form.append(decodeURIComponent(name), decodeURIComponent(value));\n            }\n        }\n        return form;\n    }\n\n    static cloneBuffer(buffer) {\n        if (buffer.slice) {\n            return buffer.slice();\n        } else {\n            let view = new Uint8Array(buffer.byteLength);\n            view.set(new Uint8Array(buffer));\n            return view.buffer;\n        }\n    }\n\n    initialize(bodyInit) {\n        this._bodyInit = bodyInit;\n        if (!bodyInit) {\n            this._bodyText = \"\";\n        } else if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n            this._bodyText = bodyInit;\n        } else if (Blob.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyBlob = bodyInit;\n        } else if (FormData.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyFormData = bodyInit;\n        } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyText = bodyInit.toString();\n        } else if (DataView.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit.buffer);\n            this._bodyInit = new Blob([this._bodyArrayBuffer]);\n        } else if (ArrayBuffer.prototype.isPrototypeOf(bodyInit) || ArrayBuffer.isView(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit);\n        } else {\n            throw new Error(\"unsupported BodyInit type\");\n        }\n\n        if (!this.headers.get(\"content-type\")) {\n            if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n                this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n            } else if (this._bodyBlob && this._bodyBlob.type) {\n                this.headers.set(\"content-type\", this._bodyBlob.type);\n            } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n                this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\");\n            }\n        }\n    }\n\n    blob() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return Promise.resolve(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n        }\n        if (this._bodyFormData) {\n            // I know this is technically wrong, but only we can create this scenario\n            return Promise.resolve(this._bodyFormData);\n        }\n        return Promise.resolve(new Blob([this._bodyText]));\n    }\n\n    arrayBuffer() {\n        if (this._bodyArrayBuffer) {\n            return this.setBodyUsed() || Promise.resolve(this._bodyArrayBuffer);\n        } else {\n            return this.blob().then(readBlobAsArrayBuffer);\n        }\n    }\n\n    readArrayBufferAsText() {\n        let view = new Uint8Array(this._bodyArrayBuffer);\n        let chars = new Array(view.length);\n\n        for (let i = 0; i < view.length; i++) {\n            chars[i] = String.fromCharCode(view[i]);\n        }\n        return chars.join(\"\");\n    }\n\n    text() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return readBlobAsText(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(this.readArrayBufferAsText());\n        }\n        if (this._bodyFormData) {\n            throw new Error(\"could not read FormData body as text\");\n        }\n        return Promise.resolve(this._bodyText);\n    }\n\n    formData() {\n        return this.text().then(this.constructor.decode);\n    }\n\n    json() {\n        return this.text().then(JSON.parse);\n    }\n}\n\nfunction polyfillBody(global) {\n    // TODO: Might want to polyfill other stuff\n    polyfillURLSearchParams(global);\n    polyfillHeaders(global);\n    global.Body = global.Body || Body;\n}\n\nexport {Body, polyfillBody};","import {Body} from \"./Body\";\n\nclass Request extends Body {\n    constructor(input, options={}) {\n        super();\n        let body = options.body;\n\n        if ((typeof input === \"string\") || (input instanceof String)) {\n            input = {\n                url: input\n            };\n        }\n\n        if (input.bodyUsed) {\n            throw new TypeError(\"Already read\");\n        }\n        if (!body && input.hasOwnProperty(\"_bodyInit\") && input._bodyInit != null) {\n            body = input._bodyInit;\n            input.bodyUsed = true;\n        }\n\n        this.method = this.constructor.normalizeMethod(options.method || input.method || \"GET\");\n        this.url = input.url;\n\n        let headerArgs = options.headers || input.headers || null;\n        this.headers = headerArgs ? new Headers(headerArgs) : new Headers();\n        this.context = options.context || input.context || \"\";\n        this.referrer = options.referrer || input.referrer || \"about:client\";\n        this.referrerPolicy = options.referrerPolicy || input.referrerPolicy || \"\";\n        this.mode = options.mode || input.mode || null;\n        this.credentials = options.credentials || input.credentials || \"omit\";\n        this.cache = options.cache || input.cache || \"default\";\n\n        if ((this.method === \"GET\" || this.method === \"HEAD\") && body) {\n            throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n        }\n        this.initialize(body);\n    }\n\n    static methods = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n    static normalizeMethod(method) {\n        let upcased = method.toUpperCase();\n        return (this.methods.indexOf(upcased) > -1) ? upcased : method;\n    }\n\n    clone() {\n        return new Request(this, {body: this._bodyInit});\n    }\n}\n\nfunction polyfillRequest(global) {\n    global.Request = global.Request || Request;\n}\n\nexport {Request, polyfillRequest};","import {Body} from \"Body\";\n\nclass Response extends Body {\n    constructor(bodyInit, options) {\n        super();\n        options = options || {};\n\n        this.type = \"default\";\n        if (options.hasOwnProperty(\"status\")) {\n            this.status = options.status;\n        } else {\n            this.status = 200;\n        }\n        this.ok = (this.status >= 200 && this.status < 300);\n        if (options.hasOwnProperty(\"statusText\")) {\n            this.statusText = options.statusText;\n        } else {\n            this.statusText = \"OK\";\n        }\n        this.headers = new Headers(options.headers);\n        this.url = options.url || \"\";\n        this.initialize(bodyInit);\n    }\n\n    clone() {\n        return new Response(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new Headers(this.headers),\n            url: this.url\n        });\n    }\n\n    static error() {\n        let response = new Response(null, {status: 0, statusText: \"\"});\n        response.type = \"error\";\n        return response;\n    }\n    static redirectStatuses = [301, 302, 303, 307, 308];\n    static redirect(url, status) {\n        if (this.redirectStatuses.indexOf(status) === -1) {\n            throw new RangeError(\"Invalid status code\");\n        }\n        return new Response(null, {status: status, headers: {location: url}});\n    }\n}\n\nfunction polyfillResponse(global) {\n    global.Response = global.Response || Response;\n}\n\nexport {Response, polyfillResponse};","// Tries to be a more flexible implementation of fetch()\n// Still work in progress\n\nimport {isPlainObject} from \"./Utils\";\n\n// May need to polyfill Headers, Request, Response, Body, URLSearchParams classes, so import them\nimport {polyfillRequest} from \"../polyfill/Request\";\nimport {polyfillResponse} from \"../polyfill/Response\";\nimport {polyfillHeaders} from \"../polyfill/Headers\";\nimport {polyfillURLSearchParams} from \"../polyfill/URLSearchParams\";\n\n// TODO: should only call this in the first call to fetch, to not create unneeded dependencies?\nif (window) {\n    polyfillRequest(window);\n    polyfillResponse(window);\n    polyfillHeaders(window);\n    polyfillURLSearchParams(window);\n}\n\n// Parse the headers from an xhr object, to return a native Headers object\nfunction parseHeaders(xhr) {\n    const rawHeader = xhr.getAllResponseHeaders() || \"\";\n    const rawHeaderLines = rawHeader.split(/\\r?\\n/);\n    let headers = new Headers();\n\n    for (let line of rawHeaderLines) {\n        let parts = line.split(\":\");\n        let key = parts.shift().trim();\n        if (key) {\n            let value = parts.join(\":\").trim();\n            headers.append(key, value);\n        }\n    }\n    return headers;\n}\n\n// Creates a new URLSearchParams object from a plain object\n// Fields that are arrays are spread\nfunction getURLSearchParams(data) {\n    if (!isPlainObject(data)) {\n        return data;\n    }\n\n    let urlSearchParams = new URLSearchParams();\n    for (const key of Object.keys(data)) {\n        let value = data[key];\n        if (Array.isArray(value)) {\n            for (let instance of value) {\n                urlSearchParams.append(key + \"[]\", instance);\n            }\n        } else {\n            urlSearchParams.set(key, value);\n        }\n    }\n    return urlSearchParams;\n}\n\n// Appends search parameters from an object to a given URL or Request, and returns the new URL\nfunction composeURL(url, params) {\n    if (url.url) {\n        url = url.url;\n    }\n    // TODO: also extract the preexisting arguments in the url\n    if (params) {\n        url += \"?\" + getURLSearchParams(params);\n    }\n    return url;\n}\n\nexport function toFormData(data) {\n    let formData = new FormData();\n    for (const key of Object.keys(data)) {\n        formData.append(key, data[key]);\n    }\n    return formData;\n}\n\nclass XHRPromise {\n    constructor(request, options = {}) {\n        request = new Request(request, options);\n        let xhr = new XMLHttpRequest();\n        this.options = options;\n        this.request = request;\n        this.xhr = xhr;\n\n        this.promise = new Promise((resolve, reject) => {\n            this.promiseResolve = resolve;\n            this.promiseReject = reject;\n\n            xhr.onload = () => {\n                let headers = this.getResponseHeaders();\n\n                let body = xhr.response || xhr.responseText;\n                let responseInit = {\n                    status: xhr.status,\n                    statusText: xhr.statusText,\n                    headers: headers,\n                    url: xhr.responseURL || headers.get(\"X-Request-URL\"),\n                };\n                let response = new Response(body, responseInit);\n                // In case dataType is \"arrayBuffer\", \"blob\", \"formData\", \"json\", \"text\"\n                // Response has methods to return these as promises\n                if (typeof response[options.dataType] === \"function\") {\n                    // TODO: should whitelist dataType to json, blob\n                    response[options.dataType]().then((data) => {\n                        this.resolve(data);\n                    });\n                } else {\n                    this.resolve(response);\n                }\n            };\n\n            // TODO: also dispatch all arguments here on errors\n            xhr.onerror = () => {\n                this.reject(new TypeError(\"Network error\"));\n            };\n\n            // TODO: need to have an options to pass setting to xhr (like timeout value)\n            xhr.ontimeout = () => {\n                this.reject(new TypeError(\"Network timeout\"));\n            };\n\n            xhr.open(request.method, request.url, true);\n\n            if (request.credentials === \"include\") {\n                xhr.withCredentials = true;\n            }\n\n            // TODO: come back to this\n            xhr.responseType = \"blob\";\n\n            request.headers.forEach((value, name) => {\n                if (options.body instanceof FormData && name.toLowerCase() === \"content-type\") {\n                    return;\n                }\n                xhr.setRequestHeader(name, value);\n            });\n\n            // TODO: there's no need to send anything on a GET or HEAD\n            if (options.body instanceof FormData) {\n                this.send(options.body);\n            } else {\n                request.blob().then((blob) => {\n                    // The blob can be a FormData when we're polyfilling the Request class\n                    let body = ((blob instanceof FormData) || blob.size) ? blob : null;\n                    this.send(body);\n                });\n            }\n        });\n    }\n\n    getResponseHeaders() {\n        return parseHeaders(this.xhr);\n    }\n\n    send(body) {\n        this.getXHR().send(body);\n    }\n\n    getPostprocessors() {\n        return this.options.postprocessors || fetch.defaultPostprocessors;\n    }\n\n    getErrorPostprocessors() {\n        return this.options.errorPostprocessors || fetch.defaultErrorPostprocessors;\n    }\n\n    resolve(payload) {\n        for (const postprocessor of this.getPostprocessors()) {\n            try {\n                payload = postprocessor(payload, this) || payload;\n            } catch (exception) {\n                this.reject(exception);\n                return;\n            }\n        }\n\n        if (this.options.onSuccess) {\n            this.options.onSuccess(...arguments);\n        } else {\n            this.promiseResolve(...arguments);\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    reject(error) {\n        for (const postprocessor of this.getErrorPostprocessors()) {\n            error = postprocessor(error) || error;\n        }\n\n        if (this.options.onError) {\n            this.options.onError(...arguments);\n        } else {\n            if (this._chained) {\n                this.promiseReject(...arguments);\n            } else {\n                if (this.options.errorHandler) {\n                    this.options.errorHandler(...arguments);\n                } else {\n                    console.error(\"Unhandled fetch error\", ...arguments);\n                }\n            }\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    // TODO: next 2 functions should throw an exception if you have onSuccess/onError\n    then(onResolve, onReject) {\n        this._chained = true;\n        onReject = onReject || this.options.errorHandler;\n        return this.getPromise().then(onResolve, onReject);\n    }\n\n    catch() {\n        this._chained = true;\n        return this.getPromise().catch(...arguments);\n    }\n\n    getXHR() {\n        return this.xhr;\n    }\n\n    getPromise() {\n        return this.promise;\n    }\n\n    getRequest() {\n        return this.request;\n    }\n\n    abort() {\n        this.getXHR().abort();\n    }\n\n    addXHRListener(name, callback) {\n        this.getXHR().addEventListener(...arguments);\n    }\n\n    addProgressListener(callback) {\n        this.addXHRListener(\"progress\", ...arguments);\n    }\n}\n\n// TODO: this offers only partial compatibility with $.ajax\nfunction jQueryCompatibilityPreprocessor(options) {\n    if (options.type) {\n        options.method = options.type.toUpperCase();\n    }\n\n    if (options.contentType) {\n        options.headers.set(\"Content-Type\", options.contentType);\n    }\n\n    options.headers.set(\"X-Requested-With\", \"XMLHttpRequest\");\n\n    if (isPlainObject(options.data)) {\n        let method = options.method.toUpperCase();\n        if (method === \"GET\" || method === \"HEAD\") {\n            options.urlParams = options.urlParams || options.data;\n            if (options.cache === false) {\n                options.urlParams = getURLSearchParams(options.urlParams);\n                options.urlParams.set(\"_\", Date.now());\n            }\n        } else {\n            let formData = new FormData();\n            for (const key of Object.keys(options.data)) {\n                const value = options.data[key];\n                if (Array.isArray(value)) {\n                    for (const arrayValue of value) {\n                        formData.append(key + \"[]\", arrayValue);\n                    }\n                } else {\n                    formData.append(key, value);\n                }\n\n            }\n            options.body = formData;\n        }\n    } else {\n        options.body = options.body || options.data;\n    }\n\n    return options;\n}\n\n// Can either be called with\n// - 1 argument: (Request)\n// - 2 arguments: (url/Request, options)\nfunction fetch(input, ...args) {\n    // In case we're being passed in a single plain object (not Request), assume it has a url field\n    if (isPlainObject(input)) {\n        return fetch(input.url, ...arguments);\n    }\n\n    let options = Object.assign({}, ...args);\n\n    // Ensure that there's a .headers field for preprocessors\n    options.headers = new Headers(options.headers || {});\n\n    const preprocessors = options.preprocessors || fetch.defaultPreprocessors || [];\n\n    for (const preprocessor of preprocessors) {\n        options = preprocessor(options) || options;\n    }\n\n    options.onSuccess = options.onSuccess || options.success;\n    options.onError = options.onError || options.error;\n    options.onComplete = options.onComplete || options.complete;\n\n    if (typeof options.cache === \"boolean\") {\n        options.cache = options.cache ? \"force-cache\" : \"reload\";\n        // TODO: cache still isn't fully done\n    }\n\n    options.method = options.method || \"GET\";\n\n    // If there are any url search parameters, update the url from the urlParams or urlSearchParams fields\n    // These fields can be plain objects (jQuery style) or can be URLSearchParams objects\n    const urlParams = options.urlParams || options.urlSearchParams;\n    if (urlParams) {\n        // Change the URL of the request to add a query\n        if (input instanceof Request) {\n            input = new Request(composeURL(input.url, urlParams), input);\n        } else {\n            input = new Request(composeURL(input, urlParams), {});\n        }\n    }\n\n    return new XHRPromise(input, options);\n}\n\nfetch.defaultPreprocessors = [jQueryCompatibilityPreprocessor];\nfetch.defaultPostprocessors = [];\nfetch.defaultErrorPostprocessors = [];\n\nfetch.polyfill = true;\n\nexport {XHRPromise, fetch, composeURL, parseHeaders, getURLSearchParams, jQueryCompatibilityPreprocessor};\n","import {fetch} from \"./Fetch\";\n\nexport class AjaxHandler {\n    constructor(ajaxHandler=Ajax, errorHandler=null) {\n        this.parentHandler = ajaxHandler;\n        this.preprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPreprocessors);\n        this.postprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPostprocessors);\n        this.errorPostprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultErrorPostprocessors);\n        this.errorHandler = errorHandler;\n    }\n\n    fetch(request, ...args) {\n        let baseOptions = {\n            preprocessors: this.getPreprocessors(),\n            postprocessors: this.getPostprocessors(),\n            errorPostprocessors: this.getErrorPostprocessors(),\n            errorHandler: this.getErrorHandler(),\n        };\n\n        // Request may be a plain object or a url, not going to duplicate code from fetch\n        for (const key of Object.keys(baseOptions)) {\n            if (request[key]) {\n                delete baseOptions[key];\n            }\n        }\n\n        return fetch(request, baseOptions, ...args);\n    }\n\n    request() {\n        return this.fetch(...arguments)\n    }\n\n    // Feel free to modify the post and get methods for your needs\n    get(url, options) {\n        return this.fetch(...arguments, {method: \"GET\"});\n    }\n\n    getJSON(url, data, ...args) {\n        return this.get(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    post(url, options) {\n        return this.fetch(...arguments, {method: \"POST\"});\n    }\n\n    postJSON(url, data, ...args) {\n        return this.post(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    addPreprocessor(preprocessor) {\n        this.preprocessors.push(preprocessor);\n    }\n\n    getPreprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPreprocessors()) || [];\n        return [...this.preprocessors, ...inherited];\n    }\n\n    addPostprocessor(postprocessor) {\n        this.postprocessors.push(postprocessor);\n    }\n\n    getPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPostprocessors()) || [];\n        return [...inherited, ...this.postprocessors];\n    }\n\n    addErrorPostprocessor(postprocessor) {\n        this.errorPostprocessors.push(postprocessor);\n    }\n\n    getErrorPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getErrorPostprocessors()) || [];\n        return [...inherited, ...this.errorPostprocessors];\n    }\n\n    getErrorHandler() {\n        return this.errorHandler || (this.parentHandler && this.parentHandler.getErrorHandler());\n    }\n}\n\nexport class FixedURLAjaxHandler extends AjaxHandler {\n    constructor(url, ajaxHandler=Ajax, errorHandler=null) {\n        super(ajaxHandler, errorHandler);\n        this.url = url;\n    }\n\n    get(options) {\n        return super.get(this.url, ...arguments);\n    }\n\n    getJSON(data) {\n        return super.getJSON(this.url, data);\n    }\n\n    post(options) {\n        return super.post(this.url, ...arguments);\n    }\n\n    postJSON(data) {\n        return super.postJSON(this.url, data);\n    }\n}\n\nexport let Ajax = new AjaxHandler();","import {buildColors} from \"../Color\";\nimport {BasicLevelStyleSheet} from \"../GlobalStyle\";\nimport {styleRule} from \"../../decorators/Style\";\nimport {StyleSheet} from \"../Style\";\nimport {Orientation} from \"../Constants\";\n\nexport const buttonColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker1 = {\n        backgroundColor: colors[2],\n    };\n    let darker2 = {\n        backgroundColor: colors[3],\n    };\n    let darker3 = {\n        backgroundColor: colors[4],\n    };\n    const regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    const hoverDisabled = Object.assign({}, regular);\n    return Object.assign({}, regular, {\n        \":hover\": darker1,\n        \":hover:disabled\": hoverDisabled,\n        \":focus\": darker1,\n        \":active\": darker2,\n        \":hover:active\": darker3,\n        \":focus:active\": darker3,\n        \".active\": darker3,\n    });\n};\n\nexport class ButtonStyle extends BasicLevelStyleSheet(buttonColorToStyle) {\n    base = {\n        outline: \"0\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.4em 0.8em\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS || this.themeProperties.BASE_BORDER_RADIUS,\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        lineHeight: 4/3 + \"\",\n        marginBottom: \"0\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        userSelect: \"none\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    };\n\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [this.base, {\n        fontSize: \"14px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND)];\n\n    getLevel(level) {\n        return super.getLevel(level) || this.INFO;\n    }\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"12px\",\n        padding: \"0.2em 0.4em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"12px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"17px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"21px\",\n        padding: \"0.2em 0.4em\",\n    };\n}\n\nexport class ButtonGroupStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        pointerEvents: \"none\",\n        \">*\": {\n            \"margin-left\": \"5px\",\n            \"display\": \"inline-block\",\n            pointerEvents: \"initial\",\n        },\n        \">:first-child\": {\n            \"margin-left\": \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        pointerEvents: \"none\",\n        \">*\": {\n            \"margin-top\": \"5px\",\n            \"display\": \"block\",\n            pointerEvents: \"initial\",\n        },\n        \">:first-child\": {\n            \"margin-top\": \"0px\",\n        },\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nexport class RadioButtonGroupStyle extends StyleSheet {\n    @styleRule\n    DEFAULT = {\n        pointerEvents: \"none\",\n        \">*\": {\n            pointerEvents: \"initial\",\n            borderRadius: \"0\",\n        },\n        \">:last-child\": {\n            borderTopRightRadius: \"0.3em\",\n            borderBottomRightRadius: \"0.3em\",\n        },\n        \">:first-child\": {\n            borderTopLeftRadius: \"0.3em\",\n            borderBottomLeftRadius: \"0.3em\",\n        }\n    };\n}\n","import {Ajax} from \"../../base/Ajax\";\nimport {IconableInterface} from \"../Bootstrap3\";\nimport {UI} from \"../UIBase\";\nimport {ActionStatus} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonStyle)\nclass Button extends UI.Primitive(IconableInterface, \"button\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n\n    disable() {\n        this.options.disabled = true;\n        this.node.disabled = true;\n    }\n\n    enable() {\n        this.options.disabled = false;\n        this.node.disabled = false;\n    }\n\n    setEnabled(enabled) {\n        this.options.disabled = !enabled;\n        this.node.disabled = !enabled;\n    };\n}\n\n\nclass StateButton extends Button {\n    setOptions(options) {\n        options.state = (this.options && this.options.state) || options.state || ActionStatus.DEFAULT;\n\n        super.setOptions(options);\n\n        this.options.statusOptions = this.options.statusOptions || [];\n        for (let i = 0; i < 4; i += 1) {\n            if (typeof this.options.statusOptions[i] === \"string\") {\n                let statusLabel = this.options.statusOptions[i];\n                this.options.statusOptions[i] = {\n                    label: statusLabel,\n                    faIcon: \"\"\n                }\n            }\n        }\n    }\n\n    setState(status) {\n        this.options.state = status;\n        if (status === ActionStatus.DEFAULT) {\n            this.enable();\n        } else if (status === ActionStatus.RUNNING) {\n            this.disable();\n        } else if (status === ActionStatus.SUCCESS) {\n        } else if (status === ActionStatus.FAILED) {\n        }\n\n        this.redraw();\n    }\n\n    render() {\n        let stateOptions = this.options.statusOptions[this.options.state - 1];\n\n        this.options.label = stateOptions.label;\n        this.options.faIcon = stateOptions.faIcon;\n\n        return super.render();\n    }\n}\n\n\nclass AjaxButton extends StateButton {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions() || {}, {\n            resetToDefaultTimeout: 1000\n        });\n    }\n\n    getAjaxHandler() {\n        return this.options.ajaxHandler || Ajax;\n    }\n\n    setAjaxHandler(ajaxHandler) {\n        this.options.ajaxHandler = ajaxHandler;\n    }\n\n    clearResetTimeout() {\n        if (this.stateResetTimeout) {\n            clearTimeout(this.stateResetTimeout);\n            delete this.stateResetTimeout;\n        }\n    }\n\n    scheduleStateReset() {\n        this.clearResetTimeout();\n        this.stateResetTimeout = setTimeout(() => {\n            this.setState(ActionStatus.DEFAULT);\n            this.clearResetTimeout();\n        }, this.resetToDefaultTimeout);\n    }\n\n    ajax(methodName, ...args) {\n        this.setState(ActionStatus.RUNNING);\n        let ajaxPromise = this.getAjaxHandler()[methodName](...args);\n        ajaxPromise.getPromise().then(\n            (data) => {\n                this.setState(ActionStatus.SUCCESS);\n                this.scheduleStateReset();\n            },\n            (error) => {\n                this.setState(ActionStatus.FAILED);\n                this.scheduleStateReset();\n            }\n        );\n        return ajaxPromise;\n    }\n\n    ajaxCall(data) {\n        return this.ajax(\"fetch\", data);\n    }\n}\nfor (const methodName of [\"fetch\", \"request\", \"get\", \"post\", \"getJSON\", \"postJSON\"]) {\n    AjaxButton.prototype[methodName] = function(...args) {\n        return this.ajax(methodName, ...args);\n    }\n}\n\nexport {Button, StateButton, AjaxButton};\n","import {UI} from \"../UIBase\";\nimport {Button} from \"./Button\";\nimport {SimpleStyledElement} from \"../Bootstrap3\";\nimport {Orientation} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonGroupStyle, RadioButtonGroupStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonGroupStyle)\nclass ButtonGroup extends SimpleStyledElement {\n    getDefaultOptions() {\n        return {\n            orientation: Orientation.HORIZONTAL,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.Orientation(this.options.orientation));\n    }\n}\n\n\n@registerStyle(RadioButtonGroupStyle)\nclass RadioButtonGroup extends SimpleStyledElement {\n    setOptions(options) {\n        super.setOptions(options);\n        this.index = this.options.index || 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n    }\n\n    render() {\n        this.buttons = [];\n        for (let i = 0; i < this.options.givenOptions.length; i += 1) {\n            this.buttons.push(\n                <Button key={i} onClick={() => {this.setIndex(i);}} size={this.getSize()}\n                  label={this.options.givenOptions[i].toString()} level={this.getLevel()}\n                  className={this.index === i ? \"active\" : \"\"}/>);\n        }\n        return this.buttons;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    getValue() {\n        return this.options.givenOptions[this.index];\n    }\n\n    setIndex(index) {\n        this.dispatch(\"setIndex\", {\n            index: index,\n            oldIndex: this.index,\n            value: this.options.givenOptions[index],\n            oldValue: this.options.givenOptions[this.index]\n        });\n        this.buttons[this.index].removeClass(\"active\");\n        this.index = index;\n        this.buttons[this.index].addClass(\"active\");\n    }\n}\n\nexport {ButtonGroup, RadioButtonGroup};\n","import {UI} from \"./UIBase\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelStyleSheet, GlobalStyle} from \"./GlobalStyle\";\nimport {registerStyle, Theme} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\nimport {Level} from \"./Constants\";\n\nexport function cardPanelColorToStyle(color) {\n    let colors = buildColors(color);\n    return {\n        borderColor: colors[4],\n    };\n}\n\nexport class CardPanelStyle extends BasicLevelStyleSheet(cardPanelColorToStyle) {\n    @styleRule\n    DEFAULT = [{\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n        flexDirection: \"row\",\n        padding: \"5px\",\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT,\n        textTransform: this.themeProperties.CARD_PANEL_TEXT_TRANSFORM,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n    },\n        cardPanelHeaderColorToStyle(this.themeProperties.COLOR_BACKGROUND)\n    ];\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n    };\n\n    @styleRule\n    body = {\n    };\n\n    @styleRule\n    panel = [{\n        borderWidth: this.themeProperties.BASE_BORDER_WIDTH,\n        borderRadius: this.themeProperties.BASE_BORDER_RADIUS,\n        boxShadow: this.themeProperties.BASE_BOX_SHADOW,\n        borderStyle: this.themeProperties.BASE_BORDER_STYLE,\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND,\n    },\n        cardPanelColorToStyle(this.themeProperties.COLOR_BACKGROUND)\n    ];\n\n    @styleRule\n    centered = {\n        textAlign: \"center\",\n        justifyContent: \"center\",\n    };\n}\n\nfunction cardPanelHeaderColorToStyle(color){\n    let colors = buildColors(color);\n    return {\n        color: colors[6],\n        backgroundColor: colors[1],\n        borderBottomColor: colors[4],\n    };\n}\n\nexport const CardPanelHeaderStyle = BasicLevelStyleSheet(cardPanelHeaderColorToStyle);\n\n@registerStyle(CardPanelStyle)\nclass CardPanel extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.panel);\n    }\n\n    getLevel() {\n        return super.getLevel() || Level.PRIMARY;\n    }\n\n    getTitle() {\n        return this.options.title;\n    }\n\n    getHeaderStyleSheet() {\n        return CardPanelHeaderStyle.getInstance();\n    }\n\n    getDefaultOptions() {\n        return {\n            headingCentered: true,\n            bodyCentered: false,\n        };\n    }\n\n    getHeadingClasses() {\n        let headingClasses = \"\";\n        const headingLevel = this.getHeaderStyleSheet().Level(this.getLevel()),\n            {headingCentered} = this.options;\n\n        if (headingLevel) {\n            headingClasses = headingClasses + headingLevel;\n        }\n\n        headingClasses = headingClasses + this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            headingClasses = headingClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        if (headingCentered) {\n            headingClasses = headingClasses + this.styleSheet.centered;\n        }\n\n        return headingClasses;\n    }\n\n    getBodyClasses() {\n        const {bodyCentered} = this.options;\n\n        let bodyClasses = this.styleSheet.body;\n        if (bodyCentered) {\n            bodyClasses = bodyClasses + this.styleSheet.centered;\n        }\n\n        return bodyClasses;\n    }\n\n    getChildrenToRender() {\n        const headingClasses = this.getHeadingClasses();\n        const bodyClasses = this.getBodyClasses();\n\n        return [\n            <div ref=\"panelTitle\" className={headingClasses}>\n                {this.getTitle()}\n            </div>,\n            <div ref=\"panelBody\" className={bodyClasses} style={this.options.bodyStyle}>\n                {this.render()}\n            </div>,\n        ];\n    }\n}\n\nexport {CardPanel};\n","import {UI, registerStyle} from \"UI\";\nimport {StyleSheet, styleRule} from \"Style\";\nimport {Size} from \"./Constants\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelSizeStyleSheet} from \"./GlobalStyle\";\n\n\nclass RowListStyle extends BasicLevelSizeStyleSheet {\n    @styleRule\n    rowList = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    DEFAULT = {\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n\n        minHeight: this.themeProperties.ROW_LIST_ROW_HEIGHT,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING,\n\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND,\n    };\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.ROW_LIST_ROW_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n    };\n\n    @styleRule\n    alternativeColorsOddRow = {\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE,\n    };\n\n    @styleRule\n    noAlternativeColors = {\n        borderTopWidth: this.themeProperties.ROW_LIST_ROW_BORDER_WIDTH,\n        borderTopStyle: this.themeProperties.BASE_BORDER_STYLE,\n        borderTopColor: this.themeProperties.BASE_BORDER_COLOR,\n    };\n}\n\n\n@registerStyle(RowListStyle)\nexport class RowList extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.rowList);\n    }\n\n    getDefaultOptions(options) {\n        return {\n            alternateColors: true,\n        }\n    }\n\n    getRowClasses(index) {\n        let rowClasses = this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            rowClasses = rowClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        const {alternateColors} = this.options;\n\n        if (alternateColors && index % 2 === 1) {\n            rowClasses = rowClasses + this.styleSheet.alternativeColorsOddRow;\n        } else if (!alternateColors && index > 0) {\n            rowClasses = rowClasses + this.styleSheet.noAlternativeColors;\n        }\n\n        return rowClasses;\n    }\n\n    render() {\n        const {rows, rowParser} = this.options;\n\n        return rows.map((row, index) => {\n            return <div className={this.getRowClasses(index)}>\n                {rowParser(row)}\n            </div>\n        });\n    }\n}","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\nimport {CardPanelStyle} from \"../CardPanel\";\n\nclass CollapsibleStyle extends StyleSheet {\n    transitionDuration = 0.4;\n\n    @styleRule\n    collapsing = {\n        marginTop: \"0\",\n        transitionTimingFunction: \"ease\",\n        transitionDuration: `${this.transitionDuration}s`,\n        transitionProperty: \"margin-top\",\n        transitionDelay: \"-0.15s\",\n    };\n\n    @styleRule\n    collapsed = {\n        marginTop: \"-100% !important\",\n        transitionDelay: \"0s !important\",\n    };\n}\n\n\nclass CollapsiblePanelStyle extends CardPanelStyle {\n    @styleRuleInherit\n    panel = {\n        boxShadow: null,\n        borderWidth: \"1px\",\n        borderColor: \"#ccc !important\",\n        borderRadius: \"3px\",\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        borderBottom: \"1px solid transparent\",\n        borderTopLeftRadius: \"3px\",\n        borderTopRightRadius: \"3px\",\n        backgroundColor: \"#fefefe\",\n        \":hover\": {\n            backgroundColor: \"#f3f3f3\",\n        }\n    };\n\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":before\": {\n            transition: \"transform .2s linear\",\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            display: \"inline-block\",\n            lineHeight: \"0.7em\",\n            width: \"0.7em\",\n            fontSize: \"150%\",\n            verticalAlign: \"bottom\",\n            height: \"0.7em\",\n            textAlign: \"center\",\n            transform: \"rotate(0deg)\",\n            marginRight: \".2em\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":before\": {\n            transform: \"rotate(-90deg) !important\",\n        },\n    };\n}\n\nexport {CollapsibleStyle, CollapsiblePanelStyle};\n","import {CollapsibleStyle} from \"./Style\";\n\nfunction CollapsibleMixin(BaseClass, CollapsibleClass = CollapsibleStyle) {\n    class CollapsibleElement extends BaseClass {\n        getDefaultOptions() {\n            return {\n                collapsed: true,\n            };\n        }\n\n        static collapsibleStyleSheet = new CollapsibleClass();\n\n        getCollapsibleStyleSheet() {\n            return this.options.collapsibleStyleSheet || this.constructor.collapsibleStyleSheet;\n        }\n\n        expand(panel) {\n            this.options.collapsed = false;\n            this.dispatch(\"expand\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.removeClass(\"hidden\");\n            setTimeout(() => {\n                panel.removeClass(collapsibleStyle.collapsed);\n            }, 100);\n        }\n\n        collapse(panel) {\n            this.options.collapsed = true;\n            this.dispatch(\"collapse\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.addClass(collapsibleStyle.collapsed);\n            let transitionEndFunction = () => {\n                if (this.options.collapsed) {\n                    panel.addClass(\"hidden\");\n                }\n            };\n            panel.addNodeListener(\"transitionend\", transitionEndFunction);\n        }\n    }\n\n    return CollapsibleElement;\n}\n\n\nexport {CollapsibleMixin};\n","import {UI} from \"../UIBase\";\nimport {CollapsibleMixin} from \"./CollapsibleMixin\";\nimport {CardPanel} from \"../CardPanel\";\nimport {CollapsiblePanelStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(CollapsiblePanelStyle)\nclass CollapsiblePanel extends CollapsibleMixin(CardPanel) {\n    toggle() {\n        if (this.options.collapsed) {\n            this.expand();\n        } else {\n            this.collapse();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(this.styleSheet.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        this.toggleButton.addClass(this.styleSheet.collapsedButton);\n    }\n\n    setTitle(title) {\n        this.options.title = title;\n        this.toggleButton.setChildren(title);\n    }\n\n    getChildrenToRender() {\n        let collapsedPanelClass = \"\";\n        let collapsedHeadingClass = \"\";\n        let hiddenClass = \"\";\n        let contentStyle = {};\n\n        if (this.options.collapsed) {\n            collapsedHeadingClass = this.styleSheet.collapsedButton;\n            collapsedPanelClass = this.styleSheet.collapsed;\n            hiddenClass = \"hidden\";\n        }\n        if (!this.options.noPadding) {\n            contentStyle = {\n                padding: \"8px 8px\",\n            };\n        }\n\n        return [<div className={this.styleSheet.heading}>\n                    <div ref=\"toggleButton\"  className={`${this.styleSheet.button} ${collapsedHeadingClass}`}\n                        onClick={() => this.toggle()}>\n                        {this.getTitle()}\n                    </div>\n                </div>,\n                <div style={{overflow: \"hidden\"}}>\n                  <div ref=\"contentArea\" className={`${collapsedPanelClass} ${hiddenClass}`}\n                       style={contentStyle}>\n                        {this.render()}\n                    </div>\n                </div>\n        ];\n    }\n}\n\n\nclass DelayedCollapsiblePanel extends CollapsiblePanel {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            UI.renderingStack.push(this);\n            this.contentArea.options.children = this.render();\n            UI.renderingStack.pop();\n            this.contentArea.redraw();\n            this.delayedMount();\n        }\n        super.toggle();\n    }\n\n    render() {\n        if (!this._haveExpanded) {\n            return [];\n        }\n        return this.getDelayedChildren();\n    }\n}\n\nexport {CollapsiblePanel, DelayedCollapsiblePanel};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FloatingWindowStyle extends StyleSheet {\n    @styleRule\n    hiddenAnimated = {\n        visibility: \"hidden\",\n        opacity: \"0\",\n        transition: \"opacity 0.1s linear\",\n    };\n\n    @styleRule\n    visibleAnimated = {\n        visibility: \"visible\",\n        opacity: \"1\",\n        transition: \"opacity 0.1s linear\",\n    };\n}\n\n\nclass ModalStyle extends FloatingWindowStyle {\n    @styleRule\n    container = {\n        position: \"fixed\",\n        top: \"0px\",\n        left: \"0px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: \"9999\",\n    };\n\n    @styleRule\n    background = {\n        position: \"fixed\",\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.5)\",\n    };\n\n    @styleRule\n    header = {\n        padding: \"15px\",\n        borderBottom: \"1px solid #e5e5e5\",\n    };\n\n    @styleRule\n    body = {\n        position: \"relative\",\n        padding: \"15px\",\n    };\n\n    @styleRule\n    footer = {\n        padding: \"15px\",\n        textAlign: \"right\",\n        borderTop: \"1px solid #e5e5e5\",\n    };\n}\n\nexport {FloatingWindowStyle, ModalStyle};\n","import {UI} from \"../UIBase\";\nimport {FloatingWindowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FloatingWindowStyle)\nclass FloatingWindow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            transitionTime: 0,\n            style: {\n                zIndex: 2016,\n            }\n        };\n    }\n\n    fadeOut() {\n        this.removeClass(this.styleSheet.visibleAnimated);\n        this.addClass(this.styleSheet.hiddenAnimated);\n    }\n\n    fadeIn() {\n        this.removeClass(this.styleSheet.hiddenAnimated);\n        this.addClass(this.styleSheet.visibleAnimated);\n    }\n\n    show() {\n        // TODO: refactor this to use this.parent and UI.Element appendChild\n        if (!this.isInDocument()) {\n            this.parentNode.appendChild(this.node);\n            this.redraw();\n            setTimeout(() => {\n                this.fadeIn();\n            }, 0);\n        }\n    }\n\n    setParentNode(parentNode) {\n        this.options.parentNode = parentNode;\n    }\n\n    get parentNode() {\n        if (!this.options.parentNode) {\n            if (this.parent) {\n                if (this.parent instanceof HTMLElement) {\n                    this.options.parentNode = this.parent;\n                } else {\n                    this.options.parentNode = this.parent.node;\n                }\n            } else {\n                this.options.parentNode = document.body;\n            }\n        }\n        return this.options.parentNode;\n    }\n\n    hide() {\n        // TODO: refactor this to use this.parent and UI.Element removeChild\n        if (this.isInDocument()) {\n            this.fadeOut();\n            setTimeout(() => {\n                if (this.isInDocument()) {\n                    this.parentNode.removeChild(this.node);\n                }\n            }, this.options.transitionTime);\n        }\n    }\n}\n\n\nclass VolatileFloatingWindow extends FloatingWindow {\n    bindWindowListeners() {\n        this.hideListener = this.hideListener || (() => {this.hide();});\n        window.addEventListener(\"click\", this.hideListener);\n    }\n\n    unbindWindowListeners() {\n        window.removeEventListener(\"click\", this.hideListener);\n    }\n\n    toggle() {\n        if (!this.isInDocument()) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    show() {\n        if (!this.isInDocument()) {\n            this.bindWindowListeners();\n            super.show();\n        }\n    }\n\n    hide() {\n        if (this.isInDocument()) {\n            this.unbindWindowListeners();\n            super.hide();\n        }\n    }\n\n    onMount() {\n        if (!this.options.notVisible) {\n            this.bindWindowListeners();\n        } else {\n            setTimeout(() => {\n                this.hide();\n            });\n        }\n\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\nexport {FloatingWindow, VolatileFloatingWindow};\n","import {ButtonGroup} from \"../button/ButtonGroup\";\nimport {Button} from \"../button/Button\";\nimport {FloatingWindow} from \"./FloatingWindow\";\nimport {ModalStyle} from \"./Style\";\nimport {Panel, TemporaryMessageArea} from \"../UIPrimitives\";\nimport {UI} from \"../UIBase\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {Level, Size} from \"../Constants\";\n\n@registerStyle(ModalStyle)\nclass Modal extends UI.Element {\n    getDefaultOptions() {\n        return {\n            closeButton: true,\n            destroyOnHide: true,\n            visible: false,\n        };\n    }\n\n    getChildrenToRender() {\n        return [\n            <Panel ref=\"modalContainer\" className={(this.options.visible ? \"\" : \"hidden\") + this.styleSheet.container}>\n                <Panel ref=\"behindPanel\" className={this.styleSheet.hiddenAnimated + this.styleSheet.background} onClick={() => this.hide()}/>\n                {this.getModalWindow()}\n            </Panel>\n        ];\n    }\n\n    getModalWindow() {\n        let closeButton = null;\n        if (this.options.closeButton) {\n            // TODO: this should be in a method\n            closeButton = <div style={{right: \"10px\", zIndex: \"10\", position: \"absolute\"}}>\n                <Button className=\"close\" size={Size.EXTRA_LARGE} style={{border: \"none\"}} label=\"&times;\" onClick={() => this.hide()}/>\n            </div>;\n        }\n\n        return <FloatingWindow ref=\"modalWindow\" style={this.getModalWindowStyle()}>\n            {closeButton}\n            {this.render()}\n        </FloatingWindow>;\n    }\n\n    getModalWindowStyle() {\n        if (this.options.fillScreen) {\n            this.options.width = \"85%\";\n        }\n        // TODO(@Rocky): I don't like this very much, honestly...\n        return {\n            position: \"relative\",\n            padding: \"1%\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            borderRadius: \"10px\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: this.options.width || \"50%\",\n            height: this.options.height || \"auto\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    isVisible() {\n        return this.options.visible;\n    }\n\n    hide() {\n        if (!this.isVisible()) {\n            return;\n        }\n\n        this.options.visible = false;\n        this.modalWindow.fadeOut();\n\n        setTimeout(() => {\n            this.behindPanel.removeClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.addClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalContainer.addClass(\"hidden\");\n                if (this.options.destroyOnHide) {\n                    this.destroyNode();\n                }\n            }, this.modalWindow.options.transitionTime || 0);\n\n            this.detachListener(this.closeListenerHandler);\n        }, this.modalWindow.options.transitionTime || 0);\n        document.body.classList.remove(\"unscrollable\");\n    }\n\n    show() {\n        this.options.visible = true;\n        if (!this.node) {\n            this.mount(document.body);\n        }\n        this.modalContainer.removeClass(\"hidden\");\n        setTimeout(() => {\n            this.behindPanel.addClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.removeClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalWindow.fadeIn();\n            }, this.modalWindow.options.transitionTime);\n        }, 0);\n        this.closeListenerHandler = this.attachListener(Dispatcher.Global, \"closeAllModals\", () => {\n            this.hide();\n        });\n        document.body.classList.add(\"unscrollable\");\n    }\n\n    static show(options={}) {\n        let modal = new this(options);\n        modal.show();\n        return modal;\n    }\n}\n\n\nclass ActionModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            closeButton: false\n        });\n    }\n\n    getActionName() {\n        return this.options.actionName;\n    }\n\n    getActionLevel() {\n        return this.options.level || Level.DEFAULT;\n    }\n\n    getCloseName() {\n        return this.options.closeName || \"Close\";\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>{this.getHeader()}</div>,\n            (this.getBody() ? <div className={this.styleSheet.body}>{this.getBody()}</div> : null),\n            (this.getFooter() ? <div className={this.styleSheet.footer}>{this.getFooter()}</div> : null)\n        ];\n    }\n\n    getHeader() {\n        return <h4>{this.getTitle()}</h4>;\n    }\n\n    getTitle() {\n        return this.options.title || this.getActionName();\n    }\n\n    getBody() {\n        return null;\n    }\n\n    getActionButton() {\n        return <Button level={this.getActionLevel()} label={this.getActionName()} onClick={() => this.action()}/>;\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label={this.getCloseName()} onClick={() => this.hide()}/>\n                  {this.getActionButton()}\n            </ButtonGroup>\n        ];\n    }\n\n    action() {}\n}\n\n\nconst ActionModalButton = (ActionModal) => class ActionModalButton extends Button {\n    getModalOptions() {\n        let modalOptions = {\n            actionName: this.options.label,\n            level: this.options.level\n        };\n\n        Object.assign(modalOptions, this.options.modalOptions);\n        return modalOptions;\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            ActionModal.show(this.getModalOptions());\n        });\n    }\n};\n\n\nclass ErrorModal extends ActionModal {\n    getTitle() {\n        return \"An Error occurred\";\n    }\n\n    getBody() {\n        return this.options.error.message || this.options.error;\n    }\n\n    getFooter() {\n        return <Button level={Level.DANGER} label=\"Dismiss\" onClick={() => this.hide()}/>;\n    }\n}\n\nexport {Modal, ErrorModal, ActionModal, ActionModalButton};\n","import {styleRule, StyleSheet} from \"../Style\";\nimport {Device} from \"../../base/Device\";\nimport {Theme} from \"../style/Theme\";\n\nclass GlobalContainerStyle extends StyleSheet {\n    constructor() {\n        super({updateOnResize: Device.isMobileDevice()});\n    }\n\n    @styleRule\n    default = {\n        height: () => {return Device.isMobileDevice() ? `${window.innerHeight}px` : \"100vh\"},\n        paddingTop: this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT,\n        background: this.themeProperties.COLOR_BACKGROUND_BODY,\n        width: \"100%\",\n        \">*\": {\n            height: \"100%\",\n            width: \"100%\",\n            paddingTop:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\n                ),\n            paddingBottom:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP\n                ),\n            overflow: Device.isMobileDevice() ? \"\" : \"auto\",\n        }\n    };\n}\n\nexport {GlobalContainerStyle};","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {GlobalContainerStyle} from \"./Style\";\nimport {Device} from \"../../base/Device\";\n\n@registerStyle(GlobalContainerStyle)\nclass GlobalContainer extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.default);\n    }\n\n    onMount() {\n        if (!Device.isTouchDevice() || !Device.isMobileDevice()) {\n            Object.assign(document.body.style, {\n                overflow: \"hidden\",\n            });\n        }\n        GlobalContainer.Global = GlobalContainer.Global || this;\n    }\n}\n\nexport {GlobalContainer};","import {UI} from \"../UIBase\";\n\nclass Divider extends UI.Element {\n    dragMousedown(event) {};\n\n    dragMousemove(event) {};\n\n    dragMouseup(event) {};\n\n    dividerMousedownFunction(event) {\n        this.dragMousedown(event);\n        this.parent.dispatch(\"dividerMousedown\", {divider: this, domEvent: event});\n\n        let dragMousemoveFunction = (event) => {\n            this.dragMousemove(event);\n            event.preventDefault(); // for touch devices\n            this.parent.dispatch(\"dividerMousemove\", event);\n        };\n\n        this.parent.addNodeListener(\"touchmove\", dragMousemoveFunction);\n        this.parent.addNodeListener(\"mousemove\", dragMousemoveFunction);\n\n        let dragMouseupFunction = (event) => {\n            this.dragMouseup(event);\n            this.parent.dispatch(\"dividerMouseup\", event);\n            this.parent.removeNodeListener(\"touchmove\", dragMousemoveFunction);\n            window.removeEventListener(\"touchend\", dragMouseupFunction);\n            this.parent.removeNodeListener(\"mousemove\", dragMousemoveFunction);\n            window.removeEventListener(\"mouseup\", dragMouseupFunction);\n        };\n\n        window.addEventListener(\"touchend\", dragMouseupFunction);\n        window.addEventListener(\"mouseup\", dragMouseupFunction);\n    }\n\n    onMount() {\n        // TODO: fix this hack when Device.isTouchDevice works\n        this.addNodeListener(\"touchstart\", (event) => {this.touchDeviceTriggered = true; this.dividerMousedownFunction(event);});\n        this.addNodeListener(\"mousedown\", (event) => {if (!this.touchDeviceTriggered) {this.dividerMousedownFunction(event);}});\n    }\n}\n\nexport {Divider};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\n\nclass DividerStyle extends StyleSheet {\n    @styleRule\n    noTextSelection = {\n        \"-webkit-user-select\": \"none\",\n        \"-moz-user-select\": \"none\",\n        \"-ms-user-select\": \"none\",\n        \"-o-user-select\": \"none\",\n        userSelect: \"none\",\n    };\n}\n\nclass AccordionStyle extends DividerStyle {\n    @styleRule\n    accordion = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">:nth-of-type(even)\": {\n            flexGrow: \"1\",\n            flexShrink: \"1\",\n            flexBasis: \"auto\",\n            overflow: \"auto\",\n            position: \"relative\",\n        },\n        \">:nth-of-type(odd)\": {\n            fontSize: \"1em\",\n            textTransform: \"uppercase\",\n            padding: \"8px 8px\",\n        }\n    };\n\n    @styleRule\n    grab = {\n        cursor: \"grab\",\n        cursor: \"-moz-grab\",\n        cursor: \"-webkit-grab\",\n    };\n\n    @styleRule\n    grabbing = {\n        cursor: \"grabbing\",\n        cursor: \"-moz-grabbing\",\n        cursor: \"-webkit-grabbing\",\n    };\n\n    @styleRule\n    collapseIcon = {\n        width: \"0.7em\",\n        fontSize: \"120% !important\",\n        fontWeight: \"900 !important\",\n        textAlign: \"center\",\n        marginRight: \"0.2em\",\n    };\n}\n\n\nclass SectionDividerStyle extends DividerStyle {\n    barThickness = 2;\n    barPadding = 3;\n    dividerColor = () => \"#DDD\";\n\n    @styleRule\n    horizontalDivider = {\n        zIndex: \"10\",\n        position: \"absolute\",\n        height: \"100%\",\n        cursor: \"col-resize\",\n        width: this.barThickness + 2 * this.barPadding + \"px\",\n        background: () => this.dividerColor(),\n        backgroundClip: \"padding-box\",\n        borderLeft: `${this.barPadding}px solid transparent`,\n        borderRight: `${this.barPadding}px solid transparent`,\n        marginLeft: `${-this.barThickness / 2 - this.barPadding}px`,\n        marginRight: `${-this.barThickness / 2}px`,\n        display: \"inline-block\",\n    };\n\n    @styleRule\n    verticalDivider = {\n        zIndex: \"10\",\n        position: \"absolute\",\n        cursor: \"row-resize\",\n        width: \"100%\",\n        height: this.barThickness + 2 * this.barPadding +  \"px\",\n        background: () => this.dividerColor(),\n        backgroundClip: \"padding-box\",\n        borderBottom: `${this.barPadding}px solid transparent`,\n        borderTop: `${this.barPadding}px solid transparent`,\n        marginBottom: `${-this.barThickness / 2  - this.barPadding}px`,\n        marginTop: `${-this.barThickness / 2 - this.barPadding}px`,\n    };\n\n    @styleRule\n    horizontalSection = {\n        position: \"relative\",\n        whiteSpace: \"nowrap\",\n        \">*\": {\n            whiteSpace: \"initial\",\n            verticalAlign: \"top\",\n            paddingLeft: `${this.barThickness / 2 + this.barPadding}px`,\n            paddingRight: `${this.barThickness / 2 + this.barPadding}px`,\n        },\n        \">:first-child\": {\n            paddingLeft: \"0\",\n        },\n        \">:last-child\": {\n            paddingRight: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n        \">:nth-of-type(odd)\": {\n            display: \"inline-block\",\n        }\n    };\n\n    @styleRule\n    verticalSection = {\n        position: \"relative\",\n        \">*\": {\n            paddingTop: `${this.barThickness / 2 + this.barPadding}px`,\n            paddingBottom: `${this.barThickness / 2 + this.barPadding}px`,\n        },\n        \">:first-child\": {\n            paddingTop: \"0\",\n        },\n        \">:last-child\": {\n            paddingBottom: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n    };\n}\n\nclass TitledDividerStyle extends SectionDividerStyle {\n    barThickness = 16;\n    barPadding = 1;\n    transitionTime = .3;\n\n    dividerStyle = {\n        backgroundColor: \"white\",\n        borderColor: \"#DDD !important\",\n    };\n\n    @styleRuleInherit\n    horizontalDivider = Object.assign(this.dividerStyle, {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        \">*\": {\n            flex: \"1\",\n            display: \"flex\",\n            color: \"rgba(0,0,0, .4)\",\n        },\n        \">:first-child\": {\n            alignItems: \"flex-end\",\n        },\n        \">:last-child\": {\n            alignItems: \"flex-start\",\n        },\n        \">:nth-child(2)\": {\n            flex: \".2\",\n            alignItems: \"center\",\n        }\n    });\n\n    @styleRule\n    horizontalDots = {\n        transform: \"rotate(90deg) scaleX(5)\",\n    };\n\n    @styleRuleInherit\n    verticalDivider = Object.assign(this.dividerStyle, {\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n\n    @styleRule\n    verticalDots = {\n        flex: \"1\",\n        fontSize: \"70% !important\",\n        height: 0,\n        textAlign: \"center\",\n        transform: \"scaleX(10) translateY(-.4em)\",\n    };\n\n    @styleRule\n    arrowButton = {\n        fontSize: \"230% !important\",\n        padding: \"1em .2em\",\n        color: \"rgba(0,0,0, .4)\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"black\",\n        }\n    };\n\n    @styleRule\n    buttonsDisabled = {\n        \">:first-child\": {\n            pointerEvents: \"none\",\n        },\n        \">:last-child\": {\n            pointerEvents: \"none\",\n        },\n    };\n\n    @styleRule\n    barCollapsePanel = {\n        position: \"relative\",\n        \">:first-child\": {\n            width: \"100%\",\n            height: \"100%\",\n        },\n        \">:nth-child(2)\": {\n            display: \"none\",\n            opacity: \"0\",\n            transition: \"opacity \" + this.transitionTime + \"s ease\",\n        },\n    };\n\n    @styleRule\n    hiddenContent = {\n        \">:first-child\": {\n            display: \"none\",\n        },\n        \">:nth-child(2)\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    collapsedBarTitle = {\n        cursor: \"pointer\",\n        borderLeft: \"1px solid #ccc\",\n        borderRight: \"1px solid #ccc\",\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        backgroundColor: \"#fff\",\n        flexDirection: \"column\",\n        zIndex: 5,\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        \":hover\": {\n            backgroundColor: \"#f3f3f3\",\n        },\n        \">:nth-child(2)\": {\n            flex: \"1\",\n            transform: \"rotate(90deg)\",\n        },\n        \">:nth-child(2)>:first-child\": {\n            textTransform: \"uppercase\",\n            fontWeight: \"bold\",\n            fontSize: \"130%\",\n            whiteSpace: \"nowrap\",\n            marginTop: \"-.4em\",\n            transform: \"translateY(10%)\",\n        },\n        \">*\": {\n            display: \"flex\",\n            alignItems: \"center\",\n        },\n        \">:first-child\": {\n            flex: \".5\",\n            fontSize: \"180%\",\n        },\n        \">:last-child\": {\n            flex: \".5\",\n            fontSize: \"180%\",\n        },\n    };\n\n    @styleRule\n    animatedSectionDivider = {\n        \">*\": {\n            transition: this.transitionTime + \"s height ease, \" + this.transitionTime + \"s width ease\",\n        }\n    };\n\n    @styleRule\n    paddingRemoved = {\n        \">*\": {\n            padding: \"0 !important\",\n            overflow: \"hidden\",\n        },\n        \">:nth-of-type(even)\": {\n            display: \"none !important\",\n        }\n    };\n}\n\nexport {AccordionStyle, SectionDividerStyle, TitledDividerStyle};\n","// TODO: Too much \"hidden\"\nimport {Device} from \"../../base/Device\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Divider} from \"./Divider\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../UI\";\nimport {SectionDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\n\n\n\n// options.orientation is the orientation of the divided elements\n@registerStyle(SectionDividerStyle)\nexport class DividerBar extends Divider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            orientation: Orientation.HORIZONTAL,\n        });\n    }\n\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalDivider);\n        } else {\n            attr.addClass(this.styleSheet.horizontalDivider);\n        }\n    }\n}\n\n\n/* SectionDivider class should take in:\n    - Vertical or horizontal separation\n    - All the children it's dividing\n    - An option on how to redivide the sizes of the children\n */\n@registerStyle(SectionDividerStyle)\nexport class SectionDivider extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({\n            autoCollapse: false,\n        }, super.getDefaultOptions())\n    }\n\n    constructor(options) {\n        super(options);\n        this.uncollapsedSizes = new WeakMap();\n    }\n\n    getDividerBarClass() {\n        return DividerBar;\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalSection);\n        } else {\n            attr.addClass(this.styleSheet.horizontalSection);\n        }\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n\n    getDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            return element.getWidth();\n        } else {\n            return element.getHeight();\n        }\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    getMinDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL && element.options.hasOwnProperty(\"minWidth\")) {\n            return element.options.minWidth;\n        } else if (this.getOrientation() === Orientation.VERTICAL && element.options.hasOwnProperty(\"minHeight\")) {\n            return element.options.minHeight;\n        } else {\n            return this.getDimension(this) / this.panels.length / 4;\n        }\n    }\n\n    getHiddenDivider(index) {\n        let divider;\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i + 1].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        divider = null;\n        for(let i = index - 1; i >= 0; i -= 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        return null;\n    }\n\n    getVisibleDivider(index) {\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        return null;\n    }\n\n    collapseChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getVisibleDivider(index);\n        if (divider) {\n            divider.hide();\n        }\n\n        this.setDimension(child, \"0\");\n        child.hide();\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) !== 0 && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + childSize / unCollapsedCount) * 100\n                                  / parentSize - 0.5 / this.children.length + \"%\");\n            }\n        }\n\n        this.recalculateDimensions();\n    }\n\n    expandChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getHiddenDivider(index);\n        if (divider) {\n            divider.show();\n        }\n\n        child.show();\n        let childSize = this.uncollapsedSizes.get(child);\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - childSize / (unCollapsedCount - 1)) * 100\n                                  / parentSize - this.panels.length / 2 + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n        this.recalculateDimensions();\n    }\n\n    isCollapsed(child) {\n        return !this.getDimension(child);\n    }\n\n    toggleChild(index) {\n        if (this.isCollapsed(this.panels[index])) {\n            this.expandChild(index);\n        } else {\n            this.collapseChild(index);\n        }\n    }\n\n    recalculateDimensions() {\n        if (!this.isInDocument()) {\n            return;\n        }\n        let parentSize = this.getDimension(this);\n        let fixedTotalSize = 0;\n        let unfixedTotalSize = 0;\n        for (let panel of this.panels) {\n            if (panel.options.fixed) {\n                fixedTotalSize += this.getDimension(panel);\n            } else {\n                unfixedTotalSize += this.getDimension(panel);\n            }\n        }\n        let ratio = (parentSize - fixedTotalSize) / parentSize;\n        for (let panel of this.panels) {\n            if (!panel.options.fixed && !panel.hasClass(\"hidden\")) {\n                this.setDimension(panel, this.getDimension(panel) * 100 * ratio / unfixedTotalSize + \"%\");\n            }\n        }\n    }\n\n    getPreviousUnfixedChild(index) {\n        for (let i = index; i >= 0 ; i -= 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    getNextUnfixedChild(index) {\n        for (let i = index + 1; i < this.panels.length; i += 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    dividerMouseDownFunction(dividerEvent) {\n        let previousEvent = dividerEvent.domEvent;\n        const index = this.dividers.indexOf(dividerEvent.divider);\n\n        const previousPanel = this.getPreviousUnfixedChild(index);\n        const nextPanel = this.getNextUnfixedChild(index);\n\n        if (previousPanel && nextPanel) {\n            const parentSize = this.getDimension(this);\n            let panelsSize = parentSize;\n\n            for (let panel of this.panels) {\n                if (panel.options.fixed) {\n                    panelsSize -= this.getDimension(panel);\n                }\n            }\n\n            const deltaFunction = (this.getOrientation() === Orientation.HORIZONTAL ?\n                                 (event) => Device.getEventX(event) :  (event) => Device.getEventY(event));\n\n            const mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n                const delta = deltaFunction(event) - deltaFunction(previousEvent);\n\n                const nextSize = this.getDimension(nextPanel) - delta;\n                const previousSize = this.getDimension(previousPanel) + delta;\n\n                if (this.options.autoCollapse) {\n                    if ((delta > 0 && nextPanel.collapsed) || (delta < 0 && previousPanel.collapsed)) {\n                        return;\n                    }\n\n                    if (delta < 0 && nextPanel.collapsed && this.options.autoCollapse) {\n                        this.expandChild(index + 1);\n                        return;\n                    }\n\n                    if (delta > 0 && previousPanel.collapsed) {\n                        this.expandChild(index);\n                        return;\n                    }\n\n                    if (nextSize < this.getMinDimension(nextPanel)) {\n                        this.collapseChild(index + 1);\n                        return;\n                    }\n\n                    if (previousSize < this.getMinDimension(previousPanel)) {\n                        this.collapseChild(index);\n                        return;\n                    }\n                } else {\n                    if (nextSize < this.getMinDimension(nextPanel) || previousSize < this.getMinDimension(previousPanel)) {\n                        return;\n                    }\n                }\n\n                this.setDimension(nextPanel, nextSize * 100 / parentSize + \"%\");\n                this.setDimension(previousPanel, previousSize * 100 / parentSize + \"%\");\n\n                previousEvent = event;\n            });\n\n            const mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n                if (this.clearListeners) {\n                    this.clearListeners();\n                }\n            });\n\n            this.clearListeners = () => {\n                mouseMoveListener.remove();\n                mouseUpListener.remove();\n                this.clearListeners = null;\n            }\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMouseDownFunction(dividerEvent));\n        setTimeout(() => {\n            this.recalculateDimensions();\n        });\n    }\n\n    getChildrenToRender() {\n        const children = [];\n        this.dividers = [];\n        this.panels = [];\n        let leftChildVisible = false;\n        const DividerBarClass = this.getDividerBarClass();\n\n        for (let child of unwrapArray(this.render())) {\n            if (this.panels.length) {\n                let hiddenClass = \"hidden\";\n                if (leftChildVisible && !child.hasClass(\"hidden\")) {\n                    hiddenClass = \"\";\n                }\n                let divider = <DividerBarClass className={hiddenClass} orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            leftChildVisible |= !child.hasClass(\"hidden\");\n            children.push(child);\n            this.panels.push(child);\n        }\n        return children;\n    }\n}","// TODO: This class is incomplete for horizontal orientation and more than 2 panels.\n\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {DividerBar, SectionDivider} from \"./SectionDivider\";\nimport {TitledDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\nimport {FAIcon} from \"../FontAwesome\";\n\n\n\n@registerStyle(TitledDividerStyle)\nclass TitledSectionDividerBar extends DividerBar {\n    render() {\n        if (this.options.orientation === Orientation.VERTICAL) {\n            return [\n\n                <FAIcon icon=\"ellipsis-h\" className={this.styleSheet.verticalDots} />,\n\n            ]\n        } else {\n            return [\n                <div><FAIcon ref=\"rightButton\" icon=\"caret-right\" className={this.styleSheet.arrowButton}/></div>,\n                <div><FAIcon icon=\"bars\" className={this.styleSheet.horizontalDots}/></div>,\n                <div><FAIcon ref=\"leftButton\" icon=\"caret-left\" className={this.styleSheet.arrowButton} /></div>,\n            ];\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.leftButton.addNodeListener(\"mousedown\", (event) => {\n            event.stopPropagation();\n        });\n        this.leftButton.addClickListener(() => {\n            this.dispatch(\"collapsePrevious\");\n        });\n        this.rightButton.addNodeListener(\"mousedown\", (event) => {\n            event.stopPropagation();\n        });\n        this.rightButton.addClickListener(() => {\n            this.dispatch(\"collapseNext\");\n        })\n    }\n}\n\n\n@registerStyle(TitledDividerStyle)\nclass BarCollapsePanel extends UI.Element {\n    extraNodeAttributes(attr) {\n        const panelChild = this.getGivenChildren()[0];\n        attr.addClass(this.styleSheet.barCollapsePanel);\n        let panelSize = panelChild.options.size;\n        if (this.collapsed) {\n            attr.addClass(this.styleSheet.hiddenContent);\n            panelSize = this.options.collapsedSize;\n        }\n        if (panelSize) {\n            if (this.options.orientation === Orientation.VERTICAL) {\n                attr.setStyle(\"height\", panelSize);\n            } else {\n                attr.setStyle(\"width\", panelSize);\n            }\n        }\n\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.setStyle(\"width\", \"100%\");\n        } else {\n            attr.setStyle(\"height\", \"100%\");\n        }\n    }\n\n    getChildrenToRender() {\n        this.collapsed = this.getGivenChildren()[0].options.collapsed;\n        const isFirst = this.parent.panels.indexOf(this) === 0;\n        const isLast = this.parent.panels.indexOf(this) === this.parent.panels.length - 1;\n        const firstCaret = isLast ? \"left\" : \"right\";\n        const lastCaret = isFirst ? \"right\" : \"left\";\n        return [\n            this.render(),\n            <div ref=\"collapsedBarTitle\" style={{display: this.collapsed ? \"flex\": \" none\"}}\n                 className={this.styleSheet.collapsedBarTitle}>\n                <div><FAIcon icon={\"caret-\" + firstCaret}/></div>\n                <div className={this.styleSheet.title}>\n                    <div>\n                        {this.options.title}\n                    </div>\n                </div>\n                <div><FAIcon icon={\"caret-\" + lastCaret}/></div>\n            </div>\n        ]\n    }\n\n    toggle() {\n        if (this.collapsed) {\n            this.collapsed = false;\n            this.removeClass(this.styleSheet.hiddenContent);\n            this.collapsedBarTitle.setStyle(\"display\", \"none\");\n        } else {\n            this.collapsed = true;\n            this.collapsedBarTitle.setStyle(\"display\", \"flex\");\n            setTimeout(() => {\n                this.addClass(this.styleSheet.hiddenContent);\n            }, 100)\n\n        }\n    }\n\n    onMount() {\n         this.collapsedBarTitle.addClickListener(() => {\n             this.dispatch(\"expand\");\n         });\n         this.addListener(\"resize\", () => {\n             for (const child of unwrapArray(this.render())) {\n                 child.dispatch(\"resize\");\n             }\n         })\n    }\n}\n\n\n@registerStyle(TitledDividerStyle)\nexport class TitledSectionDivider extends SectionDivider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            collapsedSize: 40,\n            autoCollapse: true,\n        });\n    }\n\n    getDividerBarClass() {\n        return TitledSectionDividerBar;\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    collapseChild(index) {\n        if (this.clearListeners) {\n            this.clearListeners();\n        }\n\n        this.addClass(this.styleSheet.paddingRemoved);\n        this.addClass(this.styleSheet.animatedSectionDivider);\n\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        this.setDimension(child, this.options.collapsedSize);\n        child.toggle();\n\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + (childSize - this.options.collapsedSize)/ unCollapsedCount) * 100\n                                  / parentSize + \"%\");\n            }\n        }\n\n        setTimeout(() => {\n            this.removeClass(this.styleSheet.animatedSectionDivider);\n            this.recalculateDimensions();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    expandChild(index) {\n        this.removeClass(this.styleSheet.paddingRemoved);\n        this.addClass(this.styleSheet.animatedSectionDivider);\n\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let childSize = this.uncollapsedSizes.get(child);\n        child.toggle();\n\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - (childSize - this.options.collapsedSize)/ (unCollapsedCount - 1)) * 100\n                                  / parentSize + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n\n\n        setTimeout(() => {\n            this.removeClass(this.styleSheet.animatedSectionDivider);\n            this.recalculateDimensions();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n\n    getChildrenToRender() {\n        const children = [];\n        this.dividers = [];\n        this.panels = [];\n        const DividerBarClass = this.getDividerBarClass();\n\n        for (const child of unwrapArray(this.render())) {\n            if (child.options.collapsed) {\n                this.addClass(this.styleSheet.paddingRemoved);\n            }\n            if (this.panels.length) {\n                let divider = <DividerBarClass orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            const wrappedChild = <BarCollapsePanel orientation={this.options.orientation} collapsedSize={this.options.collapsedSize}\n                                                   title={child.options.title || \"...\"}>{child}</BarCollapsePanel>;\n            children.push(wrappedChild);\n            this.panels.push(wrappedChild);\n        }\n        return children;\n    }\n\n    onMount() {\n        super.onMount();\n        for (let i = 0; i < this.panels.length; i += 1) {\n            const panel = this.panels[i];\n            this.attachListener(panel, \"expand\", () => {\n                this.uncollapsedSizes.set(panel, this.getDimension(this) / this.panels.length);\n                this.expandChild(i);\n            });\n        }\n        for (let i = 0; i < this.dividers.length; i += 1) {\n            this.attachListener(this.dividers[i], \"collapseNext\", () => this.collapseChild(i + 1));\n            this.attachListener(this.dividers[i], \"collapsePrevious\", () => this.collapseChild(i));\n        }\n    }\n}","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../UI\";\nimport {getComputedStyle} from \"../Utils\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Device} from \"../../base/Device\";\nimport {AccordionStyle} from \"./Style\";\nimport {FACollapseIcon} from \"../../ui/FontAwesome\";\nimport {Divider} from \"./Divider\";\n\n@registerStyle(AccordionStyle)\nclass AccordionDivider extends Divider {\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n        this.addClass(this.styleSheet.grabbing);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n        this.removeClass(this.styleSheet.grabbing);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.grab);\n    }\n\n    render() {\n        return [<FACollapseIcon ref=\"collapseIcon\" collapsed={false} className={this.styleSheet.collapseIcon}/>, this.options.children];\n    }\n\n    setCollapsed(value) {\n        this.collapseIcon.setCollapsed(value);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addListener(\"togglePanel\", () => {this.collapseIcon.toggleCollapsed();});\n    }\n}\n\n\n@registerStyle(AccordionStyle)\nclass Accordion extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.accordion);\n    }\n\n    getChildrenToRender() {\n        let children = [];\n        this.dividers = [];\n        this.panels = [];\n        for (let child of unwrapArray(this.render())) {\n            let title = (child.getTitle ? child.getTitle() : (child.options.title ? child.options.title : \"\"));\n            let divider = <AccordionDivider>{title}</AccordionDivider>;\n            this.dividers.push(divider);\n            this.panels.push(child);\n            children.push(divider);\n            children.push(child);\n        }\n        return children;\n    }\n\n    getNextVisibleChild(index) {\n        for (let i = index; i < this.panels.length; i += 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    getPreviousVisibleChild(index) {\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    dividerMousedownFunction(dividerEvent) {\n        let dragTriggered, panelsHeight, totalFlex;\n\n        let previousEvent = dividerEvent.domEvent;\n        let index = this.dividers.indexOf(dividerEvent.divider);\n\n        let previousPanel = this.getPreviousVisibleChild(index);\n        let nextPanel = this.getNextVisibleChild(index);\n\n        panelsHeight = this.getHeight();\n        for (let divider of this.dividers) {\n            panelsHeight -= divider.getHeight();\n        }\n        totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n\n        let mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n            dragTriggered = true;\n            if (index != -1 && nextPanel && previousPanel) {\n                // Calculate the height to transfer from one panel to another\n                let delta = (Device.getEventY(event) - Device.getEventY(previousEvent)) * totalFlex / panelsHeight;\n\n                let nextSize = parseFloat(getComputedStyle(nextPanel.node, \"flex\"));\n                let previousSize = parseFloat(getComputedStyle(previousPanel.node, \"flex\"));\n\n                // Cap the delta value, to at most zero our panels\n                delta = Math.sign(delta) * Math.min(Math.abs(delta), (delta > 0 ? nextSize : previousSize));\n\n                nextPanel.setStyle(\"flex\", nextSize - delta);\n                previousPanel.setStyle(\"flex\", previousSize + delta);\n\n                previousEvent = event;\n\n                this.dispatch(\"dragging\");\n            }\n        });\n\n        let mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n            if (!dragTriggered) {\n                dividerEvent.divider.dispatch(\"togglePanel\");\n                this.toggleChild(this.panels[index]);\n            }\n            mouseMoveListener.remove();\n            mouseUpListener.remove();\n            this.dispatch(\"childrenStatusChange\");\n        });\n    }\n\n    toggleChild(child) {\n        let totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n        let sign = child.hasClass(\"hidden\") ? 1 : -1;\n        totalFlex += sign * parseFloat(getComputedStyle(child, \"flex\"));\n        child.toggleClass(\"hidden\");\n        if (totalFlex < 1) {\n            for (let panel of this.panels) {\n                if (!panel.hasClass(\"hidden\") && parseFloat(getComputedStyle(panel.node, \"flex\")) < 1) {\n                    panel.setStyle(\"flex\", 1);\n                }\n            }\n        }\n    }\n\n    getChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: getComputedStyle(panel.node, \"flex\"),\n                collapsed: panel.hasClass(\"hidden\")\n            });\n        }\n        return childrenStatus;\n    }\n\n    getDefaultChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: 1,\n                collapsed: false\n            })\n        }\n        return childrenStatus;\n    }\n\n    setChildrenStatus(childrenStatus) {\n        for (let i = 0; i < childrenStatus.length; i += 1) {\n            this.panels[i].setStyle(\"flex\", childrenStatus[i].flex);\n            let collapsed = childrenStatus[i].collapsed;\n            if (collapsed) {\n                this.panels[i].addClass(\"hidden\");\n            } else {\n                this.panels[i].removeClass(\"hidden\");\n            }\n            this.dividers[i].setCollapsed(collapsed);\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMousedownFunction(dividerEvent));\n    }\n}\n\nexport {Accordion};\n","import {UI, getComputedStyle, registerStyle} from \"./UI\";\nimport {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {FAIcon} from \"../ui/FontAwesome\";\nimport {Orientation} from \"./Constants\";\n\nclass CarouselStyle extends StyleSheet {\n    navigatorHeight = \"35px\";\n    hoverColor = \"#364251\";\n    transitionTime = \"0.3\";\n    textColor = \"inherit\";\n    navigatorTransitionTime = \"0s\";\n\n    @styleRule\n    carousel = {\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    container = {\n        whiteSpace: \"nowrap\",\n        height: \"100%\",\n        \">*\": {\n            width: \"100%\",\n            height: \"100%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n        },\n        \">:first-child\": {\n            width: \"0\",\n            transition: `margin-left ease ${this.transitionTime}s`,\n        }\n    };\n\n    @styleRule\n    navigator = {\n        width: \"100%\",\n        height: this.navigatorHeight,\n        display: \"flex\",\n    };\n\n    @styleRule\n    navigatorIcon = {\n        color: this.textColor,\n        fontSize: \"180% !important\",\n        textAlign: \"center\",\n        cursor: \"pointer\",\n        flex: \"1\",\n        fontWeight: \"900 !important\",\n        lineHeight: this.navigatorHeight + \" !important\",\n        transition: `background-color ${this.navigatorTransitionTime}`,\n        \":hover\": {\n            backgroundColor: this.hoverColor,\n        },\n    };\n}\n\nclass CarouselNavigator extends UI.Element {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.navigator);\n    }\n\n    render() {\n        return [\n            <FAIcon icon=\"angle-left\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"previousPage\");}} />,\n            <FAIcon icon=\"angle-right\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"nextPage\");}} />,\n        ];\n    }\n}\n\n\n@registerStyle(CarouselStyle)\nclass Carousel extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.carousel);\n    }\n\n    appendChild(child, doMount) {\n        this.options.children.push(child);\n        if (doMount) {\n            this.setActive(child);\n        }\n        child.mount(this, null);\n        this.redraw();\n    }\n\n    eraseChild(child) {\n        if (this.options.children.indexOf(child) === this.options.children.length - 1) {\n            this.setActiveIndex(Math.max(this.options.children.length - 2, 0));\n        }\n        this.options.children.splice(this.options.children.indexOf(child), 1);\n        this.redraw();\n    }\n\n    render() {\n        if (this.activeIndex == null) {\n            this.activeIndex = 0;\n            for (let i = 0; i < this.options.children.length; i += 1) {\n                if (this.options.children[i].options.active) {\n                    this.activeIndex = i;\n                    break;\n                }\n            }\n        }\n\n        return [<CarouselNavigator className={this.options.children.length > 1 ? \"\" : \"hidden\"}/>,\n            <div className={this.styleSheet.container}>\n                <div ref=\"pusher\" style={{marginLeft: `${-this.activeIndex * 100}%`}}/>\n                {this.options.children}\n            </div>];\n    }\n\n    setActive(panel) {\n        this.setActiveIndex(this.options.children.indexOf(panel));\n    }\n\n    setActiveIndex(index) {\n        this.activeIndex = index;\n        this.pusher.setStyle(\"margin-left\", `${-index * this.getWidth()}px`);\n    }\n\n    getActive() {\n        return this.options.children[this.activeIndex];\n    }\n\n    onMount() {\n        this.addListener(\"nextPage\", () => this.setActiveIndex((this.activeIndex + 1) % this.options.children.length));\n        this.addListener(\"previousPage\", () => this.setActiveIndex((this.activeIndex + this.options.children.length - 1) % this.options.children.length));\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n}\n\nexport {Carousel, CarouselStyle};\n","import {StyleSheet, styleRule} from \"./Style\";\n\nclass RangePanelStyle extends StyleSheet {\n    rowHeight = 52;\n\n    @styleRule\n    default = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        overflow: \"auto\",\n        overflowY: \"hidden\",\n    };\n\n    @styleRule\n    tableContainer = {\n        flex: \"1\",\n        height: \"100%\",\n        width: \"100%\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    scrollablePanel = {\n        overflow: \"auto\",\n        height: \"calc(100% - 30px)\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    fakePanel = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    footer = {\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        position: \"absolute\",\n        bottom: \"0px\",\n        width: \"100%\",\n        whiteSpace: \"nowrap\",\n        paddingBottom: \"15px\",\n        paddingTop: \"3px\",\n    };\n\n    @styleRule\n    jumpToButton = {\n        marginLeft: \"5px\",\n        padding: \"2.3px 10px\",\n        verticalAlign: \"bottom\",\n    };\n\n    @styleRule\n    table = {\n        width: \"calc(100% - 15px)\",\n        marginBottom: \"0px\",\n        top: \"0px\",\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        \">tbody>tr>td\": {\n            height: `${this.rowHeight}px !important`,\n            whiteSpace: \"nowrap !important\",\n        }\n    };\n}\n\nexport {RangePanelStyle};\n","import {UI, UIElement, NumberInput, Button} from \"./UI\";\nimport {RangePanelStyle} from \"./RangePanelStyle\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {Size} from \"./Constants\";\n\nfunction RangePanelInterface(PanelClass) {\n    class RangePanel extends PanelClass {\n    }\n    return RangePanel;\n}\n\n\nclass EntriesManager extends Dispatchable {\n    constructor(entries, options={}) {\n        super();\n        this.rawEntries = entries;\n        this.options = options;\n        this.cacheEntries();\n    }\n\n    getRawEntries() {\n        return this.rawEntries;\n    }\n\n    cacheEntries() {\n        this.cachedEntries = this.sortEntries(this.filterEntries(this.getRawEntries()));\n        this.dispatch(\"update\");\n    }\n\n    getEntries() {\n        return this.cachedEntries;\n    }\n\n    getEntriesCount() {\n        return this.cachedEntries.length;\n    }\n\n    getEntriesRange(low, high) {\n        return this.cachedEntries.slice(low, high);\n    }\n\n    updateEntries(entries) {\n        this.rawEntries = entries;\n        this.cacheEntries();\n    }\n\n    sortEntries(entries) {\n        return this.getComparator() ? entries.sort(this.getComparator()) : entries;\n    }\n\n    filterEntries(entries) {\n        const filter = this.getFilter();\n        return filter ? entries.filter(filter) : entries;\n    }\n\n    getComparator() {\n        return this.options.comparator;\n    }\n\n    setComparator(comparator) {\n        this.options.comparator = comparator;\n        this.cacheEntries();\n    }\n\n    getFilter() {\n        return this.options.filter;\n    }\n\n    setFilter(filter) {\n        this.options.filter = filter;\n        this.cacheEntries();\n    }\n}\n\n\n// A wrapper for tables which optimizes rendering when many entries / updates are involved. It currently has hardcoded\n// row height for functionality reasons.\nfunction RangeTableInterface(TableClass) {\n    class RangeTable extends UI.Primitive(TableClass, \"div\") {\n        constructor(options) {\n            super(options);\n            this.lowIndex = 0;\n            this.highIndex = 0;\n        }\n\n        getRangePanelStyleSheet() {\n            return RangePanelStyle.getInstance();\n        }\n\n        getRowHeight() {\n            return this.options.rowHeight || this.getRangePanelStyleSheet().rowHeight;\n        }\n\n        getEntriesManager() {\n            if (!this.entriesManager) {\n                this.entriesManager = new EntriesManager(super.getEntries());\n            }\n            return this.entriesManager;\n        }\n\n        extraNodeAttributes(attr) {\n            attr.addClass(this.getRangePanelStyleSheet().default);\n        }\n\n        render() {\n            const rangePanelStyleSheet = this.getRangePanelStyleSheet();\n            const fakePanelHeight = (this.getRowHeight() * this.getEntriesManager().getEntriesCount() + 1) + \"px\";\n            const headHeight = this.containerHead ? this.containerHead.getHeight() : 0;\n            this.computeIndices();\n\n            // Margin is added at redraw for the case when the scoreboard has horizontal scrolling during a redraw.\n            const margin = (this.node &&  this.node.scrollLeft) || 0;\n\n            return [\n                <div ref=\"tableContainer\" className={rangePanelStyleSheet.tableContainer}\n                     style={{paddingTop: headHeight + \"px\", marginLeft: margin + \"px\"}}>\n                    <div ref=\"scrollablePanel\" className={rangePanelStyleSheet.scrollablePanel}>\n                        <div ref=\"fakePanel\" className={rangePanelStyleSheet.fakePanel} style={{height: fakePanelHeight}}/>\n                        <table ref=\"container\" className={`${this.styleSheet.table} ${rangePanelStyleSheet.table}`}\n                                               style={{marginLeft: -margin + \"px\"}}>\n                            <thead ref=\"containerHead\">\n                            {this.renderContainerHead()}\n                            </thead>\n                            <tbody ref=\"containerBody\">\n                            {this.renderContainerBody()}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>,\n                <div ref=\"footer\" className={rangePanelStyleSheet.footer} style={{marginLeft: margin + \"px\"}}>\n                    <span ref=\"tableFooterText\">\n                        {this.getFooterContent()}\n                    </span>\n                    <NumberInput ref=\"jumpToInput\" placeholder=\"jump to...\" style={{textAlign: \"center\",}}/>\n                    <Button ref=\"jumpToButton\" size={Size.SMALL} className={rangePanelStyleSheet.jumpToButton}>Go</Button>\n                </div>\n            ];\n        }\n\n        applyScrollState() {\n            this.scrollablePanel.node.scrollTop = this.scrollState;\n        }\n\n        saveScrollState() {\n            if (this.scrollablePanel && this.scrollablePanel.node) {\n                this.scrollState = this.scrollablePanel.node.scrollTop;\n            }\n        }\n\n        renderContainerHead() {\n            return this.renderTableHead();\n        }\n\n        renderContainerBody() {\n            // TODO: this method should not be here, and tables should have a method \"getEntriesToRender\" which will be overwritten in this class.\n            this.rows = [];\n\n            const entries = this.getEntriesManager().getEntriesRange(this.lowIndex, this.highIndex);\n\n            for (let i = 0; i < entries.length; i += 1) {\n                const entry = entries[i];\n                const RowClass = this.getRowClass(entry);\n                this.rows.push(<RowClass key={this.getEntryKey(entry, i + this.lowIndex)} index={i + this.lowIndex}\n                                         {...this.getRowOptions(entry)} parent={this}/>);\n            }\n            return this.rows;\n        }\n\n        getFooterContent() {\n            if (this.lowIndex + 1 > this.highIndex) {\n                return `No results. Jump to `;\n            }\n            return `${this.lowIndex + 1}  ${this.highIndex} of ${this.getEntriesManager().getEntriesCount()}. `;\n        }\n\n        jumpToIndex(index) {\n            // Set the scroll so that the requested position is in the center.\n            const lowIndex = parseInt(index - (this.highIndex - this.lowIndex) / 2 + 1);\n            const scrollRatio = lowIndex / (this.getEntriesManager().getEntriesCount() + 0.5);\n            this.scrollablePanel.node.scrollTop = scrollRatio * this.scrollablePanel.node.scrollHeight;\n        }\n\n        computeIndices() {\n            if (!this.tableContainer || !this.containerHead || !this.footer) {\n                return;\n            }\n            const scrollRatio = this.scrollablePanel.node.scrollTop / this.scrollablePanel.node.scrollHeight;\n            const entriesCount = this.getEntriesManager().getEntriesCount();\n            // Computing of entries range is made using the physical scroll on the fake panel.\n            this.lowIndex = parseInt(scrollRatio * (entriesCount + 0.5));\n            if (isNaN(this.lowIndex)) {\n                this.lowIndex = 0;\n            }\n            this.highIndex = Math.min(this.lowIndex + parseInt((this.getHeight() - this.containerHead.getHeight()\n                    - this.footer.getHeight()) / this.getRowHeight()), entriesCount);\n        }\n\n        setScroll() {\n            // This is the main logic for rendering the right entries. Right now, it best works with a fixed row height,\n            // for other cases no good results are guaranteed. For now, that row height is hardcoded in the class'\n            // stylesheet.\n\n            if (this.inSetScroll) {\n                return;\n            }\n            if (!document.body.contains(this.node)) {\n                this.tableFooterText.setChildren(this.getFooterContent());\n                this.containerBody.setChildren(this.renderContainerBody());\n                return;\n            }\n            this.inSetScroll = true;\n            this.computeIndices();\n            // Ugly hack for chrome stabilization.\n            // This padding top makes the scrollbar appear only on the tbody side\n            this.tableContainer.setStyle(\"paddingTop\", this.containerHead.getHeight() + \"px\");\n            this.fakePanel.setHeight(this.getRowHeight() * this.getEntriesManager().getEntriesCount() + \"px\");\n            // The scrollable panel must have the exact height of the tbody so that there is consistency between entries\n            // rendering and scroll position.\n            this.scrollablePanel.setHeight(this.getRowHeight() * (this.highIndex - this.lowIndex) + \"px\");\n            // Update the entries and the footer info.\n            this.tableFooterText.setChildren(this.getFooterContent());\n            this.containerBody.setChildren(this.renderContainerBody());\n            // This is for setting the scrollbar outside of the table area, otherwise the scrollbar wouldn't be clickable\n            // because of the logic in \"addCompatibilityListeners\".\n            this.container.setWidth(this.fakePanel.getWidth() + \"px\");\n            this.inSetScroll = false;\n        }\n\n        addCompatibilityListeners() {\n            // The physical table has z-index -1 so it does not respond to mouse events, as it is \"behind\" fake panel.\n            // The following listeners repair that.\n            this.addNodeListener(\"mousedown\", () => {\n                this.container.setStyle(\"pointerEvents\", \"all\");\n            });\n            this.container.addNodeListener(\"mouseup\", (event) => {\n                const mouseDownEvent = new MouseEvent(\"click\", event);\n                const domElement = document.elementFromPoint(parseFloat(event.clientX), parseFloat(event.clientY));\n                setTimeout(() => {\n                    this.container.setStyle(\"pointerEvents\", \"none\");\n                    domElement.dispatchEvent(mouseDownEvent);\n                }, 100);\n            });\n\n            // Adding listeners that force resizing\n            this.addListener(\"setActive\", () => {\n                this.setScroll();\n            });\n            this.addListener(\"resize\", () => {\n                this.setScroll();\n            });\n            window.addEventListener(\"resize\", () => {\n                this.setScroll();\n            });\n        }\n\n        addTableAPIListeners() {\n            // This event isn't used anywhere but this is how range updates should be made.\n            this.addListener(\"entriesChange\", (event) => {\n                if (!(event.leftIndex >= this.highIndex || event.rightIndex < this.lowIndex)) {\n                    this.setScroll();\n                }\n            });\n            this.addListener(\"showCurrentUser\", () => {\n                const index = this.getEntriesManager().getEntries().map(entry => entry.userId).indexOf(USER.id) + 1;\n                this.jumpToIndex(index);\n            });\n            // Delay is added for smoother experience of scrolling.\n            this.attachListener(this.getEntriesManager(), \"update\", () => {\n                this.setScroll();\n            });\n        }\n\n        addSelfListeners() {\n            this.scrollablePanel.addNodeListener(\"scroll\", () => {\n                this.setScroll();\n            });\n            this.addNodeListener(\"scroll\", () => {\n                this.tableContainer.setStyle(\"marginLeft\", this.node.scrollLeft);\n                this.footer.setStyle(\"marginLeft\", this.node.scrollLeft);\n                this.container.setStyle(\"marginLeft\", -this.node.scrollLeft);\n            });\n            window.addEventListener(\"resize\", () => {\n                this.tableContainer.setStyle(\"marginLeft\", 0);\n                this.footer.setStyle(\"marginLeft\", 0);\n                this.container.setStyle(\"marginLeft\", 0);\n            });\n            this.jumpToInput.addNodeListener(\"keyup\", (event) => {\n                if (event.code === \"Enter\") {\n                    this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n                }\n            });\n            this.jumpToButton.addClickListener(() => {\n                this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n            });\n        }\n\n        onMount() {\n            super.onMount();\n\n            this.addCompatibilityListeners();\n\n            this.addTableAPIListeners();\n\n            this.addSelfListeners();\n\n            setTimeout(() => {\n                this.redraw();\n            })\n        }\n    }\n    return RangeTable;\n}\n\nexport {RangePanelInterface, RangeTableInterface, EntriesManager};\n","import {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\n\nclass TableStyle extends StyleSheet {\n    cellStyle =  {\n        padding: \"8px\",\n        lineHeight: \"1.42857143\",\n        verticalAlign: \"top\",\n        borderTop: \"1px solid #ddd\",\n    };\n\n    theadCellStyle = {\n        borderBottom: \"2px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    table = {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        marginBottom: \"20px\",\n        borderSpacing: \"0\",\n        borderCollapse: \"collapse\",\n        \">*>*>td\": this.cellStyle,\n        \">*>*>th\": this.cellStyle,\n        \">*>thead>*>*\": this.theadCellStyle,\n    };\n\n    @styleRule\n    tableStripped = {\n        \">tbody>tr:nth-of-type(odd)\": {\n            backgroundColor: \"#f5f5f5\",\n        }\n    };\n\n}\n\nclass SortableTableStyle extends TableStyle {\n    @styleRule\n    sortIcon = {\n        position: \"absolute\",\n        right: \"0px\",\n        bottom: \"0px\",\n        visibility: \"hidden\",\n        float: \"right\",\n    };\n\n    @styleRuleInherit\n    table = {\n        [\" th:hover .\" + this.sortIcon.getClassName()]: {\n            visibility: \"inherit\",\n        },\n        \" th:hover\": {\n            cursor: \"pointer\",\n        }\n    };\n}\n\nexport {TableStyle, SortableTableStyle};\n","import {TableStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n// TODO: the whole table architecture probably needs a rethinking\nclass TableRow extends UI.Primitive(\"tr\") {\n    render() {\n        let rowCells = [];\n\n        for (let column of this.options.columns) {\n            rowCells.push(this.renderEntryCell(column));\n        }\n\n        return rowCells;\n    }\n\n    renderEntryCell(column) {\n        return <td style={column.cellStyle} key={column.id}>{column.value(this.options.entry, this.options.index)}</td>;\n    }\n};\n\n@registerStyle(TableStyle)\nclass Table extends UI.Primitive(\"table\") {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.setColumns(options.columns || []);\n        this.entries = options.entries || [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.table);\n    }\n\n    getRowClass() {\n        return TableRow;\n    }\n\n    getRowOptions(entry) {\n        return {\n            entry: entry,\n            columns: this.columns,\n        };\n    }\n\n    render() {\n        return [\n            <thead>\n                {this.renderTableHead()}\n            </thead>,\n            <tbody>\n                {this.renderTableBody()}\n            </tbody>\n        ];\n    }\n\n    renderTableHead() {\n        return <tr>{this.columns.map(this.renderHeaderCell, this)}</tr>;\n    }\n\n    getEntryKey(entry, index) {\n        return entry.id != null ? entry.id : index;\n    }\n\n    renderTableBody() {\n        this.rows = [];\n\n        let entries = this.getEntries();\n        for (let i = 0; i < entries.length; i += 1) {\n            let entry = entries[i];\n            let RowClass = this.getRowClass(entry);\n            this.rows.push(<RowClass key={this.getEntryKey(entry, i)} index={i} {...this.getRowOptions(entry)} parent={this}/>);\n        }\n        return this.rows;\n    }\n\n    // Renders the whole header cell based on a column\n    renderHeaderCell(column) {\n        return <th style={column.headerStyle} ref={\"columnHeader\" + column.id}>\n                {this.renderColumnHeader(column)}\n            </th>;\n    }\n\n    // Only renders the content of the header cell\n    renderColumnHeader(column) {\n        if (typeof column.headerName === \"function\") {\n            return column.headerName();\n        }\n        return column.headerName;\n    }\n\n    // Original entries should not be modified. Overwrite this function to appy any modification in a new array.\n    getEntries() {\n        return this.entries || [];\n    }\n\n    columnDefaults(column, index) {\n        column.id = index;\n    }\n\n    setColumns(columns) {\n        this.columns = columns;\n        for (let i = 0; i < this.columns.length; i += 1) {\n            this.columnDefaults(this.columns[i], i);\n        }\n    }\n}\n\nexport * from \"./Style\";\nexport {Table, TableRow};\n","import {UI} from \"../UIBase\";\nimport {Table, TableRow} from \"./Table\";\nimport {CollapsibleMixin} from \"../collapsible/CollapsibleMixin\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule} from \"../../decorators/Style\";\n\nclass TableRowInCollapsibleTable extends TableRow {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    render() {\n        return <tr>{super.render()}</tr>;\n    }\n}\n\nclass CollapsibleTableStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":after\": {\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            float: \"left\",\n            fontWeight: \"bold\",\n            width: \"0.7em\",\n            fontSize: \"130%\",\n            verticalAlign: \"top\",\n            height: \"0.7em\",\n            marginTop: \"-0.2em\",\n            textAlign: \"center\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":after\": {\n            content: \"\\\"\\\\f105\\\" !important\",\n        },\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        backgroundColor: \"initial !important\",\n    };\n}\n\nlet collapsibleTableStyle = new CollapsibleTableStyle();\n\n// TODO: refactor this to support redraw and render override\nclass CollapsibleTableRow extends CollapsibleMixin(TableRow) {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    getDefaultOptions() {\n        return {\n            collapsed: true,\n        }\n    }\n\n    onMount() {\n        this.toggleButton.addClickListener(() => this.toggle());\n    }\n\n    toggle() {\n        if (!this.options.collapsed) {\n            this.collapse();\n        } else {\n            this.expand();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        setTimeout(() => {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n        }, this.getCollapsibleStyleSheet().transitionDuration * 500);\n    }\n\n    // TODO: Very bad redraw practice here\n    redraw() {\n        if (!super.redraw()) {\n            return false;\n        }\n\n        if (this.options.collapsed) {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.addClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.addClass(\"hidden\");\n        } else {\n            this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.removeClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.removeClass(\"hidden\");\n        }\n        return true;\n    }\n\n    getInitialCollapsedContent() {\n        return this.renderCollapsible(this.options.entry);\n    }\n\n    render() {\n        return [\n            <tr className={collapsibleTableStyle.heading}>{super.render()}</tr>,\n            <tr>\n                <td style={{overflow: \"hidden\", padding: \"0px\"}}\n                    colspan={this.options.columns.length}>\n                    <div ref=\"contentArea\"\n                         className={`${this.getCollapsibleStyleSheet().collapsed} hidden`}>\n                            {this.getInitialCollapsedContent()}\n                    </div>\n                </td>\n            </tr>\n        ];\n    }\n}\n\nclass DelayedCollapsibleTableRow extends CollapsibleTableRow {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            this.redrawCollapsible();\n        }\n        super.toggle();\n    }\n\n    redrawCollapsible() {\n        UI.renderingStack.push(this);\n        this.contentArea.options.children = this.renderCollapsible(this.options.entry);\n        UI.renderingStack.pop();\n        this.contentArea.redraw();\n    }\n\n    getInitialCollapsedContent() {\n        return [];\n    }\n}\n\nfunction CollapsibleTableInterface(BaseTableClass) {\n    return class CollapsibleTable extends BaseTableClass {\n        setOptions(options) {\n            super.setOptions(options);\n\n            if (options.renderCollapsible) {\n                this.renderCollapsible = options.renderCollapsible;\n            }\n        }\n\n        render() {\n            return [\n                <thead>\n                    {this.renderTableHead()}\n                </thead>,\n                this.renderTableBody()\n            ];\n        }\n\n        getRowClass() {\n            return CollapsibleTableRow;\n        }\n\n        setColumns(columns) {\n            let toggleColumn = {\n                value: (entry) => {\n                    let rowClass = this.getRowClass(entry);\n                    // TODO: Fix it lad!\n                    if (rowClass === CollapsibleTableRow || rowClass.prototype instanceof CollapsibleTableRow) {\n                        return <a ref=\"toggleButton\"\n                        className={`${collapsibleTableStyle.button} ${collapsibleTableStyle.collapsedButton}`}/>;\n                    }\n                    return <a ref=\"toggleButton\"/>;\n                },\n                cellStyle: {\n                    width: \"1%\",\n                    \"whiteSpace\": \"nowrap\",\n                }\n            };\n\n            super.setColumns([toggleColumn].concat(columns));\n        }\n    };\n}\n\nlet CollapsibleTable = CollapsibleTableInterface(Table);\n\nexport {CollapsibleTable, CollapsibleTableInterface, CollapsibleTableRow, DelayedCollapsibleTableRow,\n        TableRowInCollapsibleTable, collapsibleTableStyle};\n","import {SortableTableStyle} from \"./Style\";\nimport {FASortIcon} from \"../FontAwesome\";\nimport {UI} from \"../UIBase\";\nimport {Table} from \"./Table\";\nimport {defaultComparator} from \"../../base/Utils\";\nimport {Direction} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\n\nfunction SortableTableInterface(BaseTableClass, SortIconClass = FASortIcon) {\n    @registerStyle(SortableTableStyle)\n    class SortableTable extends BaseTableClass {\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.addClass(this.styleSheet.table);\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n\n            this.columnSortingOrder = options.columnSortingOrder || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            // TODO: fix multiple clicks registered here\n            // Sort table by clicked column\n            for (let column of this.columns) {\n                this[\"columnHeader\" + column.id].addClickListener(() => {\n                    this.sortByColumn(column);\n                    this.dispatch(\"reorder\");\n                });\n            }\n        }\n\n        renderColumnHeader(column) {\n            let sortIcon = <SortIconClass className={this.styleSheet.sortIcon}/>;\n            if (this.sortBy === column) {\n                if (this.sortDescending) {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.DOWN}/>;\n                } else {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.UP}/>;\n                }\n            }\n\n            return <div style={{position: \"relative\"}}>{super.renderColumnHeader(column)} {sortIcon}</div>;\n        }\n\n        sortByColumn(column) {\n            if (column === this.sortBy) {\n                this.sortDescending = (this.sortDescending != true);\n            } else {\n                this.sortDescending = true;\n            }\n\n            this.sortBy = column;\n\n            this.redraw();\n        }\n\n        getComparator() {\n            if (!this.sortBy && this.columnSortingOrder.length === 0) {\n                return null;\n            }\n\n            const colCmp = (a, b, col) => {\n                if (!col) return 0;\n\n                let keyA = col.rawValue ? col.rawValue(a) : col.value(a);\n                let keyB = col.rawValue ? col.rawValue(b) : col.value(b);\n                return col.cmp(keyA, keyB);\n            };\n\n            return (a, b) => {\n                let cmpRes;\n\n                if (this.sortBy) {\n                    cmpRes = colCmp(a, b, this.sortBy);\n                    if (cmpRes !== 0) {\n                        return (this.sortDescending ? -cmpRes : cmpRes);\n                    }\n                }\n\n                for (let i = 0; i < this.columnSortingOrder.length; i += 1) {\n                    cmpRes = colCmp(a, b, this.columnSortingOrder[i]);\n                    if (this.columnSortingOrder[i].sortDescending) {\n                        cmpRes = -cmpRes;\n                    }\n\n                    if (cmpRes !== 0) {\n                        return cmpRes;\n                    }\n                }\n                return 0;\n            }\n        }\n\n        sortEntries(entries) {\n            let sortedEntries = entries.slice();\n\n            if (this.getComparator()) {\n                sortedEntries.sort(this.getComparator());\n            }\n\n            return sortedEntries;\n        }\n\n        getEntries() {\n            return this.sortEntries(super.getEntries());\n        }\n\n        columnDefaults(column, index) {\n            super.columnDefaults(column, index);\n\n            if (!column.hasOwnProperty(\"cmp\")) {\n                column.cmp = defaultComparator;\n            }\n        }\n    }\n    return SortableTable;\n}\n\nlet SortableTable = SortableTableInterface(Table);\n\nexport {SortableTable, SortableTableInterface};\n","import {isPlainObject, isNumber} from \"../base/Utils\";\n\nexport class TimeUnit {\n    static CANONICAL = {};\n    static ALL = [];\n    static FIXED_DURATION = [];\n    static VARIABLE_DURATION = [];\n\n    constructor(name, baseUnit, multiplier, options = {}) {\n        this.name = name;\n        this.pluralName = name + \"s\";\n        this.baseUnit = baseUnit;\n        this.multiplier = multiplier;\n        this.milliseconds = ((baseUnit && baseUnit.getMilliseconds()) || 1) * multiplier;\n        this.variableMultiplier = options.variableMultiplier || false;\n        this.variableDuration = this.variableMultiplier || (baseUnit && baseUnit.isVariable());\n    }\n\n    static toTimeUnit(timeUnit) {\n        if (timeUnit instanceof TimeUnit) {\n            return timeUnit;\n        }\n        return this.CANONICAL[timeUnit];\n    }\n\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    getPluralName() {\n        return this.pluralName;\n    }\n\n    getMilliseconds() {\n        return this.milliseconds;\n    }\n\n    isVariable() {\n        return this.variableDuration;\n    }\n\n    hasVariableMultiplier() {\n        return this.variableMultiplier;\n    }\n\n    getDateValue(date) {\n\n    }\n\n    setDateValue(date, value) {\n    }\n}\n\nTimeUnit.MILLISECOND = new TimeUnit(\"millisecond\", null, 1);\nTimeUnit.SECOND = new TimeUnit(\"second\", TimeUnit.MILLISECOND, 1000);\nTimeUnit.MINUTE = new TimeUnit(\"minute\", TimeUnit.SECOND, 60);\nTimeUnit.HOUR = new TimeUnit(\"hour\", TimeUnit.MINUTE, 60);\nTimeUnit.DAY = new TimeUnit(\"day\", TimeUnit.HOUR, 24, {variableMultiplier: true});\nTimeUnit.WEEK = new TimeUnit(\"week\", TimeUnit.DAY, 7);\nTimeUnit.MONTH =  new TimeUnit(\"month\", TimeUnit.DAY, 30, {variableMultiplier: true});\nTimeUnit.QUARTER = new TimeUnit(\"quarter\", TimeUnit.MONTH, 3);\nTimeUnit.TRIMESTER = new TimeUnit(\"trimester\", TimeUnit.MONTH, 4);\nTimeUnit.SEMESTER = new TimeUnit(\"semester\", TimeUnit.MONTH, 6);\nTimeUnit.YEAR = new TimeUnit(\"year\", TimeUnit.DAY, 365, {variableMultiplier: true});\n\nTimeUnit.DAY.dateMethodSuffix = \"Date\";\nTimeUnit.MONTH.dateMethodSuffix = \"Month\";\nTimeUnit.YEAR.dateMethodSuffix = \"FullYear\";\n\nexport class Duration {\n    constructor(duration) {\n        if (duration instanceof self.Date) {\n            throw new Error(\"Can't automatically transform Date to Duration, use date.getTime() if you really want to\");\n        }\n        if (isNumber(duration)) {\n            this.milliseconds = duration;\n            return;\n        }\n        if (duration instanceof Duration) {\n            Object.assign(this, duration);\n            return;\n        }\n        if (isPlainObject(duration)) {\n            this.milliseconds = 0;\n            for (const key of Object.keys(duration)) {\n                let timeUnit = TimeUnit.CANONICAL[key];\n                if (!timeUnit) {\n                    throw Error(\"Unknown time unit:\", key);\n                }\n                // TODO: throw an error if can't parse these values\n                if (timeUnit.isVariable()) {\n                    this[key] = parseInt(duration[key]);\n                    this.relativeDuration = true;\n                } else {\n                    this.milliseconds += parseFloat(duration[key]) * timeUnit.milliseconds;\n                }\n            }\n            return;\n        }\n        if (arguments.length > 0) {\n            throw Error(\"Invalid Duration arguments: \", ...arguments);\n        }\n        this.milliseconds = 0;\n    }\n\n    static toDuration(duration) {\n        if (duration instanceof Duration) {\n            return duration;\n        }\n        return new this(duration);\n    }\n\n    increment(duration) {\n        duration = this.constructor.toDuration(duration);\n        for (const key in duration) {\n            if (!(key in TimeUnit.CANONICAL)) {\n                continue;\n            }\n            if (this.hasOwnProperty(key)) {\n                this[key] += duration[key];\n            } else {\n                this[key] = duration[key];\n            }\n        }\n        return this;\n    }\n\n    add(duration) {\n        return this.clone().increm(duration);\n    }\n\n    subtract(duration) {\n        duration = this.constructor.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    // Returns true if was defined terms of absolute primitives (anything less than a day)\n    isAbsolute() {\n        return !this.isVariable();\n    }\n\n    isVariable() {\n        return this.relativeDuration;\n    }\n\n    negate() {\n        let duration = new Duration(this);\n        for (const key in duration) {\n            if (key in TimeUnit.CANONICAL) {\n                duration[key] = -duration[key];\n            }\n        }\n        return duration;\n    }\n\n    // Returns a new Duration with a positive length\n    abs() {\n        return new Duration(Math.abs(+this));\n    }\n\n    clone() {\n        return new Duration(this);\n    }\n\n    // The primitive value\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    toNanoseconds() {\n        return Math.floor(+this * 1e6);\n    }\n\n    // TODO: for all these units, should have a way to get the float and int value\n    toMilliseconds() {\n        return Math.floor(+this);\n    }\n\n    getMilliseconds() {\n        return this.toMilliseconds() % 1000;\n    }\n\n    toSeconds() {\n        return Math.floor(+this / 1000);\n    }\n\n    getSeconds() {\n        return this.toSeconds() % 60;\n    }\n\n    toMinutes() {\n        return Math.floor(+this / (1000 * 60));\n    }\n\n    getMinutes() {\n        return this.toMinutes() % 60;\n    }\n\n    toHours() {\n        return Math.floor(+this / (1000 * 60 * 60));\n    }\n\n    getHours() {\n        return this.toHours() % 24;\n    }\n\n    toDays() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24));\n    }\n\n    toMonths() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 30));\n    }\n\n    toYears() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 365));\n    }\n\n    toString(locale) {\n        // Humanize the duration (should work with localization)\n    }\n}\n\nexport function addCanonicalTimeUnit(key, timeUnit) {\n    TimeUnit.ALL.push(timeUnit);\n    if (timeUnit.isVariable()) {\n        TimeUnit.VARIABLE_DURATION.push(timeUnit);\n    } else {\n        TimeUnit.FIXED_DURATION.push(timeUnit);\n    }\n\n    TimeUnit.CANONICAL[timeUnit.name] = timeUnit;\n    if (timeUnit.pluralName) {\n        TimeUnit.CANONICAL[timeUnit.pluralName] = timeUnit;\n    }\n\n    const timeUnitsName = timeUnit.pluralName;\n\n    // TODO: not sure about this anymore\n    Duration[key] = new Duration({\n        [timeUnitsName]: 1,\n    });\n}\n\nexport function addCanonicalTimeUnits() {\n    for (const key in TimeUnit) {\n        const timeUnit = TimeUnit[key];\n        if (timeUnit instanceof TimeUnit) {\n            addCanonicalTimeUnit(key, timeUnit);\n        }\n    }\n}\n\naddCanonicalTimeUnits();\n","import {padNumber, suffixWithOrdinal, extendsNative, instantiateNative, isNumber} from \"../base/Utils\";\nimport {TimeUnit, Duration} from \"./Duration\";\n\n// MAX_UNIX_TIME is either ~Feb 2106 in unix seconds or ~Feb 1970 in unix milliseconds\n// Any value less than this is interpreted as a unix time in seconds\n// If you want to go around this behavious, you can use the static method .fromUnixMilliseconds()\n// To disable, set this value to 0\nexport let MAX_AUTO_UNIX_TIME = Math.pow(2, 32);\n\nconst BaseDate = self.Date;\n\n@extendsNative\nclass StemDate extends BaseDate {\n    // Still need to do this mess because of Babel, should be removed when moving to native ES6\n    static create(value) {\n        // Try to do an educated guess if this date is in unix seconds or milliseconds\n        if (arguments.length === 1 && isNumber(value) && value < MAX_AUTO_UNIX_TIME) {\n            return instantiateNative(BaseDate, StemDate, value * 1000.0);\n        } else {\n            return instantiateNative(BaseDate, StemDate, ...arguments);\n        }\n    }\n\n    static toDate(date) {\n        if (date instanceof StemDate) {\n            return date;\n        } else {\n            return new this(date);\n        }\n    }\n\n    static now() {\n        return new this(BaseDate.now());\n    }\n\n    toDate() {\n        return this;\n    }\n\n    static fromUnixMilliseconds(unixMilliseconds) {\n        return this.create(new BaseDate(unixMilliseconds));\n    }\n\n    static fromUnixSeconds(unixSecons) {\n        return this.fromUnixMilliseconds(unixSecons * 1000);\n    }\n\n    // Creates a Date object from an instance of DOMHighResTimeStamp, returned by performance.now() for instance\n    static fromHighResTimestamp(highResTimestamp) {\n        return this.fromUnixMilliseconds(highResTimestamp + self.performance.timing.navigationStart)\n    }\n\n    // You don't usually need to call this in most cases, constructor uses MAX_AUX_UNIX_TIME\n    static unix(unixTime) {\n        return this.fromUnixSeconds(unixTime);\n    }\n\n    set(date) {\n        date = this.constructor.toDate(date);\n        this.setTime(date.setTime());\n    }\n\n    clone() {\n        return new this.constructor(this.getTime());\n    }\n\n    toUnix() {\n        return this.getTime() / 1000;\n    }\n\n    unix() {\n        return Math.floor(this.toUnix());\n    }\n\n    isBefore(date) {\n        return this.getTime() < StemDate.toDate(date).getTime();\n    }\n\n    equals(date) {\n        return this.getTime() === StemDate.toDate(date).getTime();\n    }\n\n    get(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        return timeUnit.getDateValue(this);\n    }\n\n    isSame(date, timeUnit) {\n        if (!timeUnit) {\n            return this.equals(date);\n        }\n\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        date = this.constructor.toDate(date);\n        let diff = this.diff(date);\n        if (diff >= 2 * timeUnit) {\n            // If the distance between the two dates is more than 2 standard lengths of the time unit\n            // This would be wrong if you would have time unit that can sometimes last more than twice their canonical duration\n            // Works correctly for all implemented time units\n            return false;\n        }\n        return this.get(timeUnit) == date.get(timeUnit);\n    }\n\n    isAfter(date) {\n        return this.getTime() > StemDate.toDate(date).getTime();\n    }\n\n    isSameOrBefore(date) {\n        return this.isBefore(date) || this.equals(date);\n    }\n\n    isSameOrAfter(date) {\n        return this.isAfter(date) || this.equals(date);\n    }\n\n    isBetween(a, b) {\n        return this.isSameOrAfter(a) && this.isSameOrBefore(b);\n    }\n\n    getWeekDay() {\n        return this.getDay();\n    }\n\n    addUnit(timeUnit, count = 1) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        count = parseInt(count);\n\n        if (!timeUnit.isVariable()) {\n            this.setTime(this.getTime() + timeUnit.getMilliseconds() * count);\n            return this;\n        }\n\n        while (!timeUnit.dateMethodSuffix) {\n            count *= timeUnit.multiplier;\n            timeUnit = timeUnit.baseUnit;\n        }\n\n        const dateMethodSuffix = timeUnit.dateMethodSuffix;\n        const currentValue = this[\"get\" + dateMethodSuffix]();\n        this[\"set\" + dateMethodSuffix](currentValue + count);\n\n        return this;\n    }\n\n    static min() {\n        // TODO: simplify and remove code duplication\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isBefore(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    static max() {\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isAfter(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    // Assign the given date if current value if greater than it\n    capUp(date) {\n        date = this.constructor.toDate(date);\n        if (this.isAfter(date)) {\n            this.set(date);\n        }\n    }\n\n    // Assign the given date if current value if less than it\n    capDown(date) {\n        date = this.constructor.toDate(date);\n        if (this.isBefore(date)) {\n            this.set(date);\n        }\n    }\n\n    roundDown(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        // TODO: this is wrong for semester, etc, should be different then\n        while (timeUnit = timeUnit.baseUnit) {\n            this[\"set\" + timeUnit.dateMethodSuffix](0);\n        }\n        return this;\n    }\n\n    roundUp(timeUnit) {\n        const roundDown = this.clone().roundDown(timeUnit);\n        if (this.equals(roundDown)) {\n            this.set(roundDown);\n            return this;\n        }\n        this.addUnit(timeUnit);\n        return this.roundDown(timeUnit);\n    }\n\n\n    round(timeUnit) {\n        let roundUp = this.clone().roundUp(timeUnit);\n        let roundDown = this.clone().roundDown(timeUnit);\n        // At a tie, preffer to round up, that's where time's going\n        if (this.diff(roundUp) <= this.diff(roundDown)) {\n            this.setTime(roundUp.getTime());\n        } else {\n            this.setTime(roundDown.getTime());\n        }\n        return this;\n    }\n\n    add(duration) {\n        duration = Duration.toDuration(duration);\n        if (duration.isAbsolute()) {\n            this.setTime(this.getTime() + duration.toMilliseconds());\n            return this;\n        }\n        for (const key in duration) {\n            const timeUnit = TimeUnit.CANONICAL[key];\n            if (timeUnit) {\n                this.addUnit(timeUnit, duration[key]);\n            }\n        }\n        return this;\n    }\n\n    subtract(duration) {\n        duration = Duration.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    diffDuration(date) {\n        return new Duration(this.diff(date));\n    }\n\n    // TODO: this should be a duration\n    diff(date) {\n        date = this.constructor.toDate(date);\n        return Math.abs(+this - date);\n    }\n\n    // Just to keep moment compatibility, until we actually implement locales\n    locale(loc) {\n        return this;\n    }\n\n    static splitToTokens(str) {\n        // TODO: \"[HH]HH\" will be split to [\"HH\", \"HH\"], so the escape does not solve the problem\n        let tokens = [];\n        let lastIsLetter = null;\n        let escapeByCurlyBracket = false;\n        let escapeBySquareBracket = false;\n        for (let i = 0; i < str.length; i++) {\n            let charCode = str.charCodeAt(i);\n            if (charCode === 125 && escapeByCurlyBracket) { // '}' ending the escape\n                escapeByCurlyBracket = false;\n                lastIsLetter = null;\n            } else if (charCode === 93 && escapeBySquareBracket) { // ']' ending the escape\n                escapeBySquareBracket = false;\n                lastIsLetter = null;\n            } else if (escapeByCurlyBracket || escapeBySquareBracket) { // The character is escaped no matter what it is\n                tokens[tokens.length - 1] += str[i];\n            } else if (charCode === 123) { // '{' starts a new escape\n                escapeByCurlyBracket = true;\n                tokens.push(\"\");\n            } else if (charCode === 91) { // '[' starts a new escape\n                escapeBySquareBracket = true;\n                tokens.push(\"\");\n            } else {\n                let isLetter = (65 <= charCode && charCode <= 90) || (97 <= charCode && charCode <= 122);\n                if (isLetter === lastIsLetter) {\n                    tokens[tokens.length - 1] += str[i];\n                } else {\n                    tokens.push(str[i]);\n                }\n                lastIsLetter = isLetter;\n            }\n        }\n        if (escapeByCurlyBracket || escapeBySquareBracket) {\n            console.warn(\"Unfinished escaped sequence!\");\n        }\n        return tokens;\n    }\n\n    evalToken(token) {\n        let func = this.constructor.tokenFormattersMap.get(token);\n        if (!func) {\n            return token;\n        }\n        return func(this);\n    }\n\n    format(str=\"ISO\") {\n        let tokens = this.constructor.splitToTokens(str);\n        tokens = tokens.map(token => this.evalToken(token));\n        return tokens.join(\"\");\n    }\n\n    isValid() {\n        return (this.toString() !== \"Invalid Date\");\n    }\n\n    utc() {\n        // Temp hack\n        return this.constructor.fromUnixMilliseconds(+this + this.getTimezoneOffset() * 60 * 1000);\n    }\n\n    isLeapYear() {\n        let year = this.getFullYear();\n        return (year % 4 == 0) && ((year % 100 != 0) || (year % 400 == 0));\n    }\n\n    daysInMonth() {\n        // The 0th day of the next months is actually the last day in the current month\n        let lastDayInMonth = new BaseDate(this.getFullYear(), this.getMonth() + 1, 0);\n        return lastDayInMonth.getDate();\n    }\n\n    getDaysCountPerMonth(index) {\n        const months = [31, 28 + this.isLeapYear(), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        return months[index];\n    }\n\n    getDayInYear() {\n        const month = this.getMonth();\n        let totalDays = 0;\n        for (let i = 0; i < month; i += 1) {\n            totalDays += this.getDaysCountPerMonth(i);\n        }\n        return totalDays + this.getDate() - 1;\n    }\n\n    getWeekInYear() {\n        return (this.getDayInYear() - this.getWeekDay()) / 7;\n    }\n}\n\nDuration.prototype.format = function (pattern) {\n    return StemDate.fromUnixMilliseconds(this.toMilliseconds()).utc().format(pattern);\n};\n\nconst miniWeekDays = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\nconst shortWeekDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nconst longWeekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconst shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nconst longMonths = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\nclass DateLocale {\n    constructor(obj={}) {\n        Object.assign(this, obj);\n        this.formats = this.formats || {};\n    }\n\n    getFormat(longDate) {\n        return this.formats[longDate];\n    }\n\n    setFormat(pattern, func) {\n        this.formats[pattern] = func;\n    }\n\n    format(date, pattern) {\n        return date.format(pattern);\n    }\n\n    getRelativeTime() {\n        throw Error(\"Not implemented\");\n    }\n}\n\nStemDate.tokenFormattersMap = new Map([\n    [\"ISO\", date => date.toISOString()],\n\n    [\"Y\", date => date.getFullYear()],\n    [\"YY\", date => padNumber(date.getFullYear() % 100, 2)],\n    [\"YYYY\", date => date.getFullYear()],\n\n    [\"M\", date => (date.getMonth() + 1)],\n    [\"MM\", date => padNumber(date.getMonth() + 1, 2)],\n    [\"MMM\", date => shortMonths[date.getMonth()]],\n    [\"MMMM\", date => longMonths[date.getMonth()]],\n\n    [\"D\", date => date.getDate()],\n    [\"Do\", date => suffixWithOrdinal(date.getDate())],\n    [\"DD\", date => padNumber(date.getDate(), 2)],\n\n    [\"d\", date => date.getWeekDay()],\n    [\"do\", date => suffixWithOrdinal(date.getWeekDay())],\n    [\"dd\", date => miniWeekDays[date.getWeekDay()]],\n    [\"ddd\", date => shortWeekDays[date.getWeekDay()]],\n    [\"dddd\", date => longWeekdays[date.getWeekDay()]],\n\n    [\"H\", date => date.getHours()],\n    [\"HH\", date => padNumber(date.getHours(), 2)],\n    [\"h\", date => date.getHours() % 12],\n    [\"hh\", date => padNumber(date.getHours() % 12, 2)],\n\n    [\"m\", date => date.getMinutes()],\n    [\"mm\", date => padNumber(date.getMinutes(), 2)],\n\n    [\"s\", date => date.getSeconds()],\n    [\"ss\", date => padNumber(date.getSeconds(), 2)],\n\n    [\"S\", date => Math.floor(date.getMilliseconds() / 100)],\n    [\"SS\", date => padNumber(Math.floor(date.getMilliseconds() / 10), 2)],\n    [\"SSS\", date => padNumber(date.getMilliseconds(), 3)],\n    [\"ms\", date => padNumber(date.getMilliseconds(), 3)],\n\n    [\"LL\", date => date.format(\"MMMM Do, YYYY\")],\n]);\n\nlet Date = StemDate;\n\nexport {Date, StemDate};\n","import {StemDate} from \"./Date\";\nimport {TimeUnit} from \"./Duration\"\n\n// File meant to handle server time/client time differences\nlet ServerTime = {\n    now() {\n        return StemDate().subtract(this.getOffset());\n    },\n\n    getOffset() {\n        return this.offset;\n    },\n\n    set(date, onlyIfMissing=false) {\n        if (!onlyIfMissing || this.offset == null) {\n            this.offset = Date.now() - (new StemDate(date));\n        }\n    },\n\n    setPageLoadTime(unixTime, estimatedLatency=0) {\n        this.serverPageLoad = unixTime;\n        this.offset = performance.timing.responseStart - unixTime * 1000;\n    }\n};\n\n// TODO: should use +TimeUnit.DAY\nexport const DAY_IN_MILLISECONDS = 24 * 60 * 60 * 1000;\n\n// TODO: should have a generic method time1.isSame(\"x\", time);\nexport function isDifferentDay(timeA, timeB) {\n    // return !StemDate(timeA).same(TimeUnit.DAY, timeB);\n    timeA = StemDate(timeA);\n    timeB = StemDate(timeB);\n\n    // First check if difference is gre\n    if (timeA.diff(timeB) > +TimeUnit.DAY) {\n        return true;\n    }\n    // Check if different day of the month, when difference is less than a day\n    return (timeA.getDate() !== timeB.getDate());\n}\n\nexport {ServerTime};\n\nexport * from \"./Date\";\nexport * from \"./Duration\";\n","import {UI, TextInput, VolatileFloatingWindow, getOffset, VerticalSlideBar} from \"./UI\";\nimport {StemDate, DAY_IN_MILLISECONDS} from \"../time/Time\";\n// import {Button} from \"./button/Button\";\n\nclass DatePickerTable extends UI.Element {\n\n}\n\nclass TimePickerWidget extends UI.Element {\n    render() {\n        let hours = parseInt(this.options.time / (60 * 60 * 1000));\n        let minutes = parseInt((this.options.time - 60 * 60 * 1000 * hours) / (60 * 1000));\n        let seconds = parseInt((this.options.time - 60 * 60 * 1000 * hours - 60 * 1000 * minutes) / (1000));\n        let textSpanStyle = {\n            display: \"inline-block\",\n            flex: 1,\n            textAlign: \"center\",\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            padding: \"0 5px\"\n        };\n        return [\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <div style={textSpanStyle} ref=\"hours\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"minutes\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"seconds\" />\n            </div>,\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <VerticalSlideBar value={hours / 23} ref=\"hourSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={minutes / 59} ref=\"minuteSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={seconds / 59} ref=\"secondSlider\" height={200} barHeight={5} style={{flex: 1, marginRight: \"5px\"}}/>\n            </div>\n        ];\n    }\n\n    onMount() {\n        let changeCallback = () => {\n            let hours = parseInt(this.hourSlider.getValue() * 23);\n            let minutes = parseInt(this.minuteSlider.getValue() * 59);\n            let seconds = parseInt(this.secondSlider.getValue() * 59);\n            this.hours.node.innerHTML = (hours < 10 ? \"0\" : \"\") + hours;\n            this.minutes.node.innerHTML = (minutes < 10 ? \"0\" : \"\") + minutes;\n            this.seconds.node.innerHTML = (seconds < 10 ? \"0\" : \"\") + seconds;\n            let time = (hours * 60 * 60  + minutes * 60 + seconds) * 1000;\n            this.dispatch(\"changeTime\", time);\n        };\n        this.hourSlider.addListener(\"change\", changeCallback);\n        this.minuteSlider.addListener(\"change\", changeCallback);\n        this.secondSlider.addListener(\"change\", changeCallback);\n        changeCallback();\n    }\n}\n\nclass DateTimeWindow extends VolatileFloatingWindow {\n    setOptions(options) {\n        options.style = Object.assign({\n            marginBottom: \"5px\",\n            border: \"1px solid #bbb\",\n            borderRadius: \"2px\",\n            position: \"absolute\",\n            overflow: \"auto\",\n            boxShadow: \"0 6px 12px rgba(0,0,0,.175)\",\n            backgroundColor: \"white\",\n            padding: \"10px\",\n            zIndex: 10000\n        }, options.style || {});\n        super.setOptions(options);\n        this.computeInitial();\n    }\n\n    render() {\n        return [\n            <DatePickerTable ref=\"datePicker\" date={this.date} />,\n            <TimePickerWidget ref=\"timePicker\" time={this.time} />\n        ];\n    }\n\n    computeInitial() {\n        let initialDateTime = StemDate.parse(this.formatISO(this.options.initialDateTime)) || StemDate.now();\n        this.time = initialDateTime % DAY_IN_MILLISECONDS;\n        this.date = parseInt(initialDateTime / DAY_IN_MILLISECONDS);\n    }\n\n    formatISO(str) {\n        if (!str) {\n            return \"\";\n        }\n        while (str.indexOf(\"/\") !== -1) {\n            str = str.replace(\"/\", \" \");\n        }\n        while (str.indexOf(\":\") !== -1) {\n            str = str.replace(\":\", \" \");\n        }\n        let tokens = str.split(\" \");\n        return tokens[2] + \"-\" + tokens[1] + \"-\" + tokens[0] + \"T\" + tokens[3] + \":\" + tokens[4] + \":\" + tokens[5] + \".000Z\";\n    }\n\n    getValue() {\n        let currentDate = this.time + DAY_IN_MILLISECONDS * this.date;\n        currentDate = StemDate.create(currentDate);\n        let date = currentDate.toISOString();\n        date = date.slice(8, 10) + \"/\" + date.slice(5, 7) + \"/\" + date.slice(0, 4);\n        return date + \" \" + currentDate.toTimeString().slice(0, 8);\n    }\n\n    onMount() {\n        this.options.output.setValue(this.getValue());\n        this.datePicker.addListener(\"changeDate\", (date) => {\n            this.date = date;\n            this.options.output.setValue(this.getValue());\n        });\n        this.timePicker.addListener(\"changeTime\", (time) => {\n            this.time = time;\n            this.options.output.setValue(this.getValue());\n        });\n    }\n}\n\nclass DateTimePicker extends UI.Element {\n    setOptions(options) {\n        options.format = options.format || \"DD/MM/YYYY HH:mm:ss\";\n        super.setOptions(options);\n        if (this.options.date) {\n            this.setDate(this.options.date);\n        }\n    }\n\n    parseDateFromString(str, format) {\n        if (format !== \"DD/MM/YYYY HH:mm:ss\") {\n            throw Error(\"Format not supported!\");\n        }\n        // Just parsing DD/MM/YYYY HH:mm:ss for now\n        while (str.indexOf('/') !== -1) {\n            str = str.replace('/', ' ');\n        }\n        while (str.indexOf(':') !== -1) {\n            str = str.replace(':', ' ');\n        }\n        let tokens = str.split(' ');\n        let integerTokens = [];\n        for (let token of tokens) {\n            let number = parseFloat(token);\n            if (!isNaN(number)) {\n                integerTokens.push(number);\n            }\n        }\n        let years = (integerTokens.length >= 3 ? integerTokens[2] : 0);\n        let months = (integerTokens.length >= 2 ? integerTokens[1] - 1 : 0);\n        let days = (integerTokens.length >= 1 ? integerTokens[0] : 0);\n        let hours = (integerTokens.length >= 4 ? integerTokens[3] : 0);\n        let minutes = (integerTokens.length >= 5 ? integerTokens[4] : 0);\n        let seconds = (integerTokens.length >= 6 ? integerTokens[5] : 0);\n        let date = new StemDate(years, months, days, hours, minutes, seconds);\n        if (!date.getTime()) {\n            return null;\n        }\n        return date;\n    }\n\n    getDate() {\n        let str = this.textInput.getValue();\n        if (!str) {\n            return null;\n        }\n        let format = this.options.format;\n        return this.parseDateFromString(str, format);\n    }\n\n    setDate(date) {\n        this.options.date = date;\n        this.options.dateString = date.format(this.options.format);\n        if (this.textInput) {\n            this.textInput.setValue(this.options.dateString);\n        }\n    }\n\n    render() {\n        return [\n            <TextInput ref=\"textInput\" placeholder={this.options.format} value={this.options.dateString || \"\"} />,\n            /*<Button ref=\"calendarSpan\" faIcon=\"calendar\"/>*/\n        ]\n    }\n\n    // onMount() {\n    //     this.calendarSpan.addClickListener((event) => {\n    //         if (!this.dateTimeWindow) {\n    //             let textInputOffset = getOffset(this.textInput);\n    //             this.dateTimeWindow = DateTimeWindow.create(document.body, {\n    //                 style: {\n    //                     top: textInputOffset.top + 5 + this.textInput.getHeight() + \"px\",\n    //                     left: textInputOffset.left + 5 + \"px\"\n    //                 },\n    //                 initialDateTime: this.textInput.getValue(),\n    //                 output: this.textInput\n    //             });\n    //         } else {\n    //             this.dateTimeWindow.hide();\n    //             delete this.dateTimeWindow;\n    //         }\n    //         event.stopPropagation();\n    //     });\n    // }\n}\n\nexport {DateTimePicker};\n","export function enqueueIfNotLoaded(target, key, descriptor) {\n    const method = descriptor.value;\n    return Object.assign({}, descriptor, {\n        value: function() {\n            if (this.isLoaded()) {\n                return method.call(this, ...arguments);\n            } else {\n                this.enqueueMethodCall(method, arguments);\n                return null;\n            }\n        }\n    });\n}\n\n\nexport const EnqueueableMethodMixin = (BaseClass) => class EnqueueableMethodClass extends BaseClass {\n    isLoaded() {\n        throw Error(\"Not implemented!\");\n    }\n\n    enqueueMethodCall(method, args) {\n        this.methodCallQueue = this.methodCallQueue || [];\n        this.methodCallQueue.push([method, args]);\n    }\n\n    resolveQueuedMethods() {\n        if (!this.isLoaded()) {\n            throw Error(\"Cannot process scheduled jobs, element not loaded\");\n        }\n        for (let methodCall of this.methodCallQueue || []) {\n            methodCall[0].call(this, ...methodCall[1]);\n        }\n        delete this.methodCallQueue;\n    }\n};\n","// Wrapper over the Ace code editor, needs ace to be loaded\n// TODO: should be renamed to AceCodeEditor?\nimport {UI} from \"./UIBase\";\nimport {StyleSheet, styleRule} from \"./Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {EnqueueableMethodMixin, enqueueIfNotLoaded} from \"../base/EnqueueableMethodMixin\";\n\n\nclass CodeEditor extends EnqueueableMethodMixin(UI.Element) {\n    static requireAce(callback) {\n        throw Error(\"You need to implement requireAce\");\n    }\n\n    isLoaded() {\n        return !!this.getAce();\n    }\n\n    setOptions(options) {\n        let defaultOptions = {\n            aceMode: \"text\",\n            readOnly: false,\n            aceTheme: \"dawn\",\n            aceKeyboardHandler: \"ace\",\n            fontSize: 14,\n            tabSize: 4,\n            showLineNumber: true,\n            showPrintMargin: false,\n            printMarginSize: 80,\n        };\n        options = Object.assign(defaultOptions, options);\n\n        super.setOptions(options);\n\n        if (this.options.aceMode) {\n            this.options.aceMode = this.options.aceMode.toLowerCase();\n        }\n\n        if (this.options.aceMode === \"cpp\" || this.options.aceMode === \"c\") {\n            this.options.aceMode = \"c_cpp\";\n        }\n\n        if (this.getAce()) {\n            this.applyAceOptions();\n        }\n    }\n\n    redraw() {\n        if (this.getAce()) {\n            this.aceResize();\n            this.applyRef();\n            return;\n        }\n        super.redraw();\n    }\n\n    whenLoaded(callback) {\n        if (this.isLoaded()) {\n            callback();\n        } else {\n            this.addListenerOnce(\"aceReady\", callback);\n        }\n    }\n\n    onMount() {\n        // Sometimes when the parent div resizes the ace editor doesn't fully update.\n        this.addListener(\"resize\", () => {\n            this.aceResize();\n        });\n\n        this.addListener(\"change\", () => {\n            this.aceResize();\n        });\n\n        if (!window.ace) {\n            this.constructor.requireAce(() => {\n                this.onDelayedMount();\n            });\n            return;\n        }\n        this.onDelayedMount();\n    }\n\n    onDelayedMount() {\n        this.ace = window.ace.edit(this.node);\n\n        // Removes some warnings\n        this.getAce().$blockScrolling = Infinity;\n\n        this.resolveQueuedMethods();\n\n        this.applyAceOptions();\n\n        //#voodoo was here to automatically redraw when unhiding\n        //This Ace event listener might be useful in the future\n        this.getAce().renderer.$textLayer.addEventListener(\"changeCharacterSize\", (event) => {\n            this.aceResize();\n        });\n        this.dispatch(\"aceReady\");\n    }\n\n    getAce() {\n        return this.ace;\n    }\n\n    getValue() {\n        return this.getAce().getValue();\n    }\n\n    @enqueueIfNotLoaded\n    applyAceOptions() {\n        //set the language mode\n        this.setAceMode(this.options.aceMode);\n        this.setAceKeyboardHandler(this.options.aceKeyboardHandler);\n        this.setAceTheme(this.options.aceTheme);\n        this.setAceFontSize(this.options.fontSize);\n        this.setAceTabSize(this.options.tabSize);\n        this.setAceLineNumberVisible(this.options.showLineNumber);\n        this.setAcePrintMarginVisible(this.options.showPrintMargin);\n        this.setAcePrintMarginSize(this.options.printMarginSize);\n        this.setReadOnly(this.options.readOnly);\n        this.setUseWrapMode(this.options.lineWrapping || false);\n\n        if (this.options.numLines) {\n            this.options.maxLines = this.options.minLines = this.options.numLines;\n        }\n\n        if (this.options.maxLines) {\n            this.setAceOptions({\n                maxLines: this.options.maxLines\n            });\n        }\n\n        if (this.options.minLines) {\n            this.setAceOptions({\n                minLines: this.options.minLines\n            });\n        }\n\n        if (this.options.value) {\n            this.setValue(this.options.value, -1);\n        }\n        if (this.options.hasOwnProperty(\"enableBasicAutocompletion\") ||\n            this.options.hasOwnProperty(\"enableLiveAutocompletion\")) {\n            let langTools =\"/static/js/ext/ace/ext-language_tools.js\";\n            require([langTools], () => {\n                this.setBasicAutocompletion(this.options.enableBasicAutocompletion);\n                this.setLiveAutocompletion(this.options.enableLiveAutocompletion);\n                this.setSnippets(this.options.enableSnippets);\n            });\n        }\n    }\n\n    @enqueueIfNotLoaded\n    aceResize() {\n        this.getAce().resize();\n    }\n\n    @enqueueIfNotLoaded\n    setValue(sourceCode, fakeUserChange) {\n        // We need to wrap the ace call in these flags so any event listeners can know if this change\n        // was done by us or by the user\n        this.apiChange = !fakeUserChange;\n        this.getAce().setValue(sourceCode, -1);\n        this.apiChange = false;\n    }\n\n    @enqueueIfNotLoaded\n    setAceOptions(options) {\n        this.getAce().setOptions(options);\n    }\n\n    // TODO: should this be setEditable?\n    @enqueueIfNotLoaded\n    setReadOnly(value) {\n        this.getAce().setReadOnly(value);\n    };\n\n    @enqueueIfNotLoaded\n    setAceMode(aceMode) {\n        if (aceMode.hasOwnProperty(\"aceMode\")) {\n            aceMode = aceMode.aceMode;\n        }\n        this.getAce().getSession().setMode(\"ace/mode/\" + aceMode);\n    }\n\n    getAceKeyboardHandler() {\n        return this.getAce().$keybindingId;\n    }\n\n    @enqueueIfNotLoaded\n    setAceKeyboardHandler(keyboardHandler) {\n        if (keyboardHandler.hasOwnProperty(\"aceName\")) {\n            keyboardHandler = keyboardHandler.aceName;\n        }\n        this.getAce().setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n    }\n\n    getAceMode() {\n        return this.getAce().getSession().getMode();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTheme(theme) {\n        if (theme.hasOwnProperty(\"aceName\")) {\n            theme = theme.aceName;\n        }\n        this.getAce().setTheme(\"ace/theme/\" + theme);\n    }\n\n    getAceTheme() {\n        return this.getAce().getTheme();\n    }\n\n    @enqueueIfNotLoaded\n    setAceFontSize(fontSize) {\n        this.getAce().setOptions({\n            fontSize: fontSize + \"px\"\n        });\n    }\n\n    getAceFontSize() {\n        return this.getAce().getFontSize();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTabSize(tabSize) {\n        this.getAce().setOptions({\n            tabSize: tabSize\n        });\n    }\n\n    getAceTabSize() {\n        return this.getAce().getOption(\"tabSize\");\n    }\n\n    @enqueueIfNotLoaded\n    setAceLineNumberVisible(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getAceLineNumberVisible() {\n        return this.getAce().renderer.getShowGutter();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginVisible(value) {\n        this.getAce().setShowPrintMargin(value);\n    }\n\n    getAcePrintMarginVisible() {\n        return this.getAce().getShowPrintMargin();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginSize(printMarginSize) {\n        this.getAce().setPrintMarginColumn(printMarginSize);\n    }\n\n    getAcePrintMarginSize() {\n        return this.getAce().getPrintMarginColumn();\n    }\n\n    @enqueueIfNotLoaded\n    setBasicAutocompletion(value) {\n        this.getAce().setOptions({\n            enableBasicAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setLiveAutocompletion(value) {\n        this.getAce().setOptions({\n            enableLiveAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setSnippets(value) {\n        this.getAce().setOptions({\n            enableSnippets: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setAnnotations(annotations) {\n        this.getAce().getSession().setAnnotations(annotations);\n    }\n\n    @enqueueIfNotLoaded\n    setUseWrapMode(value) {\n        this.getAce().getSession().setUseWrapMode(value);\n    }\n\n    @enqueueIfNotLoaded\n    setIndentedSoftWrap(value) {\n        this.getAce().setOption(\"indentedSoftWrap\", value);\n    }\n\n    @enqueueIfNotLoaded\n    blockScroll() {\n        this.getAce().$blockScrolling = Infinity;\n    }\n\n    @enqueueIfNotLoaded\n    setFoldStyle(foldStyle) {\n        this.getAce().getSession().setFoldStyle(foldStyle);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightActiveLine(value) {\n        this.getAce().setHighlightActiveLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightGutterLine(value) {\n        this.getAce().setHighlightGutterLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setShowGutter(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getScrollTop() {\n        return this.getAce().getSession().getScrollTop();\n    }\n\n    @enqueueIfNotLoaded\n    setScrollTop(value) {\n        this.getAce().getSession().setScrollTop(value);\n    }\n\n    @enqueueIfNotLoaded\n    addMarker(startLine, startCol, endLine, endCol, ...args) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().addMarker(new Range(startLine, startCol, endLine, endCol), ...args);\n    }\n\n    @enqueueIfNotLoaded\n    removeMarker(marker) {\n        this.getAce().getSession().removeMarker(marker);\n    }\n\n    getRendererLineHeight() {\n        return this.getAce().renderer.lineHeight;\n    }\n\n    getTextRange(startLine, startCol, endLine, endCol) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().doc.getTextRange(new Range(startLine, startCol, endLine, endCol));\n    }\n\n    @enqueueIfNotLoaded\n    setTextRange(startLine, startCol, endLine, endCol, text) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().replace(new Range(startLine, startCol, endLine, endCol), text);\n    }\n\n    @enqueueIfNotLoaded\n    removeLine(line) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().remove(new Range(line, 0, line + 1, 0));\n    }\n\n    @enqueueIfNotLoaded\n    insertAtLine(line, str) {\n        let column = this.getAce().session.getLine(line - 1).length;\n        this.getAce().gotoLine(line, column);\n        this.insert(str);\n    }\n\n    @enqueueIfNotLoaded\n    replaceLine(line, str) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().replace(new Range(line, 0, line + 1, 0), str);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionEventListener(event, callback) {\n        this.getAce().getSession().addEventListener(event, callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionChangeListener(callback) {\n        this.addAceSessionEventListener(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceChangeListener(callback) {\n        this.getAce().on(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceEventListener() {\n        this.getAce().addEventListener(...arguments);\n    }\n\n    @enqueueIfNotLoaded\n    focus() {\n        this.getAce().focus();\n    }\n\n    @enqueueIfNotLoaded\n    gotoEnd() {\n        let editor = this.getAce();\n        let editorRow = editor.session.getLength() - 1;\n        let editorColumn = editor.session.getLine(editorRow).length;\n        editor.gotoLine(editorRow + 1, editorColumn);\n    }\n\n    @enqueueIfNotLoaded\n    setUndoManager(undoManager) {\n        this.getAce().getSession().setUndoManager(undoManager);\n    }\n\n    @enqueueIfNotLoaded\n    setAceRendererOption(key, value) {\n        this.getAce().renderer.setOption(key, value);\n    }\n\n    // Inserts the text at the current cursor position\n    @enqueueIfNotLoaded\n    insert(text) {\n        this.getAce().insert(text);\n    }\n\n    // Appends the text at the end of the document\n    @enqueueIfNotLoaded\n    append(text) {\n        var lastRow = this.getAce().getSession().getLength() - 1;\n        if (lastRow < 0) {\n            lastRow = 0;\n        }\n        var lastRowLength = this.getAce().getSession().getLine(lastRow).length;\n        var scrolledToBottom = this.getAce().isRowFullyVisible(lastRow);\n        // console.log(\"Scroll to bottom \", scrolledToBottom);\n        this.getAce().getSession().insert({\n            row: lastRow,\n            column: lastRowLength\n        }, text);\n\n        this.aceResize();\n\n        if (scrolledToBottom) {\n            // TODO: Include scroll lock option!\n            // TODO: See if scrolling to bottom can be done better\n            // TODO: for some reason the scroll bar height is not being updated, this needs to be fixed\n            this.getAce().scrollToLine(this.getAce().getSession().getLength() - 1, true, true, function () {});\n        }\n    }\n\n    copyTextToClipboard() {\n        this.getAce().selectAll();\n        this.getAce().focus();\n        document.execCommand('copy');\n    }\n}\n\n\nclass StaticCodeHighlighterStyle extends StyleSheet {\n    @styleRule\n    hideActive = {\n        \" .ace_gutter-active-line\": {\n            display: \"none\",\n        },\n        \" .ace_active-line\": {\n            display: \"none\",\n        },\n        \" .ace_cursor\": {\n            display: \"none\",\n        }\n    }\n}\n\n\n@registerStyle(StaticCodeHighlighterStyle)\nclass StaticCodeHighlighter extends CodeEditor {\n    setOptions(options) {\n        options = Object.assign({\n            fontSize: 13,\n            readOnly: true,\n            lineWrapping: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.hideActive)\n    }\n}\n\nexport {CodeEditor, StaticCodeHighlighter};\n","import {UI, Image, Link, registerStyle, StyleSheet, styleRule} from \"UI\";\n\n\n\nconst getPathPrefix = () => window.location.hostname === \"localhost\" ? \"../../\" : \"dbribeapp/\";\n\nlet transitionDelay = .9;\n\nconst getTransitionDelay = () => {\n    transitionDelay += .1;\n    return transitionDelay;\n};\n\nclass ImportedSVG extends Image {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            src: getPathPrefix() + \"static/svg/\" + this.getSVGName() + \".svg\",\n        });\n    }\n\n    getSVGName() {\n        return this.options.svgName;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            opacity: 0,\n            transform: \"translateY(-69px)\",\n            backdropFilter: \"blur(10px)\",\n            transition: \"transform, opacity, backdrop-filter\",\n            transitionDuration: \"1s\",\n            transitionTimingFunction: \"ease\",\n            transitionDelay: getTransitionDelay() + \"s\",\n        });\n    }\n\n    onMount() {\n        super.onMount();\n        setTimeout(() => {\n            this.setStyle({\n                opacity: 1,\n                transform: \"translateY(0)\",\n                backdropFilter: \"blur(0)\",\n            });\n        });\n    }\n}\n\n\nclass LogoStyle extends StyleSheet {\n    @styleRule\n    logo = {\n        display: \"inline-block\",\n        margin: \"20px\",\n        height: \"80px\",\n        width: \"80px\",\n        transitionProperty: \"transform\",\n        transitionTimingFunction: \"ease\",\n        transform: \"translateY(0) scale(1)\",\n        transitionDuration: \".3s\",\n        \":hover\": {\n            transform: \"translateY(-8px) scale(1.1)\",\n        }\n    }\n}\n\n\n@registerStyle(LogoStyle)\nexport class Logo extends Link {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            href: this.getHref(),\n            newTab: true,\n        });\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.logo);\n    }\n\n    render() {\n        return [<ImportedSVG svgName={this.getSVGName()}/>];\n    }\n}\n\n\nexport class MediumLogo extends Logo {\n    getSVGName() {return \"medium\";}\n\n    getHref() {return \"https://medium.com/@dbribe\";}\n}\n\n\nexport class FacebookLogo extends Logo {\n    getSVGName() {return \"facebook\";}\n\n    getHref() {return \"https://www.facebook.com/k1r496\";}\n}\n\n\nexport class GitHubLogo extends Logo {\n    getSVGName() {return \"github\";}\n\n    getHref() {return \"https://github.com/dbribe\";}\n}\n\n\nexport class InstagramLogo extends Logo {\n    getSVGName() {return \"instagram\";}\n\n    getHref() {return \"https://www.instagram.com/dbribe/\";}\n}\n\n\nexport class LinkedInLogo extends Logo {\n    getSVGName() {return \"linkedin\";}\n\n    getHref() {return \"https://www.linkedin.com/in/denis-mita/\";}\n}\n\n\nexport class PinterestLogo extends Logo {\n    getSVGName() {return \"pinterest\";}\n\n    getHref() {return \"https://www.pinterest.co.uk/skywalkerrr1996/\";}\n}\n\n\nexport class TwitterLogo extends Logo {\n    getSVGName() {return \"twitter\";}\n\n    getHref() {return \"https://twitter.com/d_bribe\";}\n}\n\n\nexport class YouTubeLogo extends Logo {\n    getSVGName() {return \"youtube\";}\n\n    getHref() {return \"https://www.youtube.com/channel/UC0k47b8_h6x2I7R5vMTLpMg?view_as=subscriber\";}\n}\n\n\nexport class Shadow extends ImportedSVG {\n    getSVGName() {return \"shadow\";}\n}\n\n\nexport class DBribe extends ImportedSVG {\n    getSVGName() {return \"dbribe\";}\n}","import {UI, Link, registerStyle, RawHTML} from \"UI\";\nimport {StyleSheet, styleRule} from \"UI\";\nimport {MediumLogo, FacebookLogo, InstagramLogo, GitHubLogo, LinkedInLogo, PinterestLogo, YouTubeLogo, TwitterLogo,\n    Shadow, DBribe} from \"./SVGComponents\";\n\n\nclass IndexPageStyle extends StyleSheet {\n    @styleRule\n    container = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n    };\n}\n\n\n@registerStyle(IndexPageStyle)\nexport class IndexPage extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        return [\n            <div style={{flex: 1, width: \"-webkit-fill-available\", maxWidth: \"550px\", padding: \"30px\", paddingTop: 0}}>\n                <DBribe style={{display: \"block\", margin: \"10vh auto\", marginBottom: \"5vh\", width: \"100%\"}}/>\n            </div>,\n            <div style={{ minHeight: \"40vh\", margin: \"0 auto\", textAlign: \"center\"}}>\n                <YouTubeLogo/>\n                <LinkedInLogo/>\n                <FacebookLogo/>\n                <InstagramLogo/>\n                <TwitterLogo/>\n                <MediumLogo/>\n                <PinterestLogo/>\n                <GitHubLogo/>\n            </div>\n        ];\n    }\n}","import {Dispatchable} from \"../base/Dispatcher\";\n\nclass State extends Dispatchable {\n    constructor() {\n        super();\n        this.stores = new Map();\n        // A version of applyEvent that's binded to this\n        // TODO: applyEvent should use the @bind decorator\n        this.applyEventWrapper = (event) => {\n            this.applyEvent(event);\n        }\n    }\n\n    getStore(objectType) {\n        objectType = objectType && objectType.toLowerCase();\n        return this.stores.get(objectType);\n    }\n\n    getStoreForEvent(event) {\n        const objectType = event.objectType || event.store;\n        return this.getStore(objectType);\n    }\n\n    addStore(store) {\n        let objectType = store.objectType.toLowerCase();\n        if (!this.stores.has(objectType)) {\n            this.stores.set(objectType, store);\n        } else {\n            throw Error(\"GlobalState: Adding a store for an existing object type: \" + store.objectType);\n        }\n    }\n\n    applyEvent(event) {\n        if (event == null) {\n            return;\n        }\n        if (Array.isArray(event)) {\n            for (let individualEvent of event) {\n                this.applyEvent(individualEvent);\n            }\n            return;\n        }\n        if (event.state) {\n            this.importState(event.state);\n            // We can have events that only have a state\n            if (!this.getStoreForEvent(event)) {\n                return;\n            }\n        }\n        let store = this.getStoreForEvent(event);\n        if (store) {\n            return store.applyEvent(event);\n        } else {\n            console.log(\"GlobalState: Missing store for event: \", event);\n        }\n    }\n\n    get(objectType, objectId) {\n        let store = this.getStore(objectType);\n        if (store) {\n            let args = Array.prototype.slice.call(arguments, 1);\n            return store.get(...args);\n        } else {\n            console.error(\"GlobalState: Can't find store \", objectType);\n            return null;\n        }\n    }\n\n    // Import the store for objectType and remove it from stateMap\n    importStateFromTempMap(objectType, stateMap) {\n        let storeState = stateMap.get(objectType);\n        stateMap.delete(objectType);\n\n        let store = this.getStore(objectType);\n\n        if (!store) {\n            console.error(\"Failed to import state, can't find store \", objectType);\n            return;\n        }\n        for (let dependency of store.getDependencies()) {\n            this.importStateFromTempMap(dependency.toLowerCase(), stateMap);\n        }\n        store.importState(storeState);\n    }\n\n    // Imports the state information from a plain object\n    importState(state) {\n        if (Array.isArray(state)) {\n            for (let obj of state) {\n                this.importState(obj);\n            }\n            return;\n        }\n        // Import everything in a map and then do an implicit topological sort by dependencies\n        let stateMap = new Map();\n        for (let objectType in state) {\n            stateMap.set(objectType.toLowerCase(), state[objectType]);\n        }\n        while (stateMap.size > 0) {\n            let allKeys = stateMap.keys();\n            let objectType = allKeys.next().value;\n            this.importStateFromTempMap(objectType, stateMap);\n        }\n    }\n}\n\nlet GlobalState = new State();\n\n// When creating a store without an explicit state, this value should be assumes\n// Change it to null for instance of you don't want stores to be added to any state by default\nlet DefaultState = GlobalState;\n\nself.GlobalState = GlobalState;\n\nexport {State, GlobalState, DefaultState};\n","import {Dispatchable, CleanupJobs} from \"../base/Dispatcher\";\nimport {DefaultState} from \"./State\";\n\n// The store information is kept in a symbol, to not interfere with serialization/deserialization\nexport const StoreSymbol = Symbol(\"Store\");\n\nclass StoreObject extends Dispatchable {\n    constructor(obj, event, store) {\n        super();\n        Object.assign(this, obj);\n        this.setStore(store);\n    };\n\n    static getStoreName() {\n        return this.name;\n    }\n\n    setStore(store) {\n        this[StoreSymbol] = store;\n    }\n\n    getStore() {\n        return this[StoreSymbol];\n    }\n\n    // By default, applying an event just shallow copies the fields from event.data\n    applyEvent(event) {\n        Object.assign(this, event.data);\n    };\n\n    // Add a listener for all updates, callback will receive the events after they were applied\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n\n    // Add a listener on updates from events with this specific type.\n    // Can accept an array as eventType\n    // Returns an object that implements the Cleanup interface.\n    addEventListener(eventType, callback) {\n        if (Array.isArray(eventType)) {\n            const handlers = eventType.map(e => this.addEventListener(e, callback));\n            return new CleanupJobs(handlers);\n        }\n        // Ensure the private event dispatcher exists\n        if (!this._eventDispatcher) {\n            this._eventDispatcher = new Dispatchable();\n            this.addUpdateListener((event) => {\n                this._eventDispatcher.dispatch(event.type, event, this);\n            });\n        }\n        return this._eventDispatcher.addListener(eventType, callback);\n    }\n\n    getStreamName() {\n        throw \"getStreamName not implemented\";\n    }\n\n    registerToStream() {\n        this.getStore().getState().registerStream(this.getStreamName());\n    }\n}\n\nclass BaseStore extends Dispatchable {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super();\n        this.options = options;\n        this.objectType = objectType.toLowerCase();\n        this.ObjectWrapper = ObjectWrapper;\n        this.attachToState();\n    }\n\n    attachToState() {\n        if (this.getState()) {\n            this.getState().addStore(this);\n        }\n    }\n\n    getState() {\n        // Allow explicit no state\n        if (this.options.hasOwnProperty(\"state\")) {\n            return this.options.state;\n        } else {\n            return DefaultState;\n        }\n    }\n\n    // Is used by the state object to see which stores need to be loaded first\n    getDependencies() {\n        return this.options.dependencies || [];\n    }\n}\n\n// Store type primarily intended to store objects that come from a server DB, and have a unique numeric .id field\nclass GenericObjectStore extends BaseStore {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super(...arguments);\n        this.objects = new Map();\n    }\n\n    has(id) {\n        return !!this.get(id);\n    }\n\n    get(id) {\n        if (id == null) {\n            return null;\n        }\n        return this.objects.get(parseInt(id));\n    }\n\n    getObjectIdForEvent(event) {\n        return event.objectId || event.data.id;\n    }\n\n    getObjectForEvent(event) {\n        let objectId = this.getObjectIdForEvent(event);\n        return this.get(objectId);\n    }\n\n    // TODO: should this default to iterable?\n    all(asIterable) {\n        let values = this.objects.values();\n        if (!asIterable) {\n            values = Array.from(values);\n        }\n        return values;\n    }\n\n    createObject(event) {\n        const obj = new this.ObjectWrapper(event.data, event, this);\n        obj.setStore(this);\n        return obj;\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        let existingObject = this.getObjectForEvent(event);\n\n        if (existingObject) {\n            let refreshEvent = Object.assign({}, event);\n            refreshEvent.type = \"refresh\";\n            existingObject.applyEvent(refreshEvent);\n            existingObject.dispatch(\"update\", event);\n            return existingObject;\n        } else {\n            let newObject = this.createObject(event);\n            this.objects.set(this.getObjectIdForEvent(event), newObject);\n\n            if (sendDispatch) {\n                this.dispatch(\"create\", newObject, event);\n            }\n            return newObject;\n        }\n    }\n\n    applyUpdateOrCreateEvent(event) {\n        var obj = this.getObjectForEvent(event);\n        if (!obj) {\n            obj = this.applyCreateEvent(event, false);\n            this.dispatch(\"create\", obj, event);\n        } else {\n            this.applyEventToObject(obj, event);\n        }\n        this.dispatch(\"updateOrCreate\", obj, event);\n        return obj;\n    }\n\n    applyDeleteEvent(event) {\n        let objDeleted = this.getObjectForEvent(event);\n        if (objDeleted) {\n            this.objects.delete(this.getObjectIdForEvent(event));\n            objDeleted.dispatch(\"delete\", event, objDeleted);\n            this.dispatch(\"delete\", objDeleted, event);\n        }\n        return objDeleted;\n    }\n\n    applyEventToObject(obj, event) {\n        obj.applyEvent(event);\n        obj.dispatch(\"update\", event);\n        this.dispatch(\"update\", obj, event);\n        return obj;\n    }\n\n    applyEvent(event) {\n        event.data = event.data || {};\n\n        if (event.type === \"create\") {\n            return this.applyCreateEvent(event);\n        } else if (event.type === \"delete\") {\n            return this.applyDeleteEvent(event);\n        } else if (event.type === \"updateOrCreate\") {\n            return this.applyUpdateOrCreateEvent(event);\n        } else {\n            var obj = this.getObjectForEvent(event);\n            if (!obj) {\n                console.error(\"I don't have object of type \", this.objectType, \" \", event.objectId);\n                return;\n            }\n            return this.applyEventToObject(obj, event);\n        }\n    }\n\n    importState(objects) {\n        objects = objects || [];\n        for (let obj of objects) {\n            this.fakeCreate(obj);\n        }\n    }\n\n    // Create a fake creation event, to insert the raw object\n    fakeCreate(obj, eventType=\"fakeCreate\") {\n        if (!obj) {\n            return;\n        }\n        var event = {\n            objectType: this.objectType,\n            objectId: obj.id,\n            type: eventType,\n            data: obj,\n        };\n        return this.applyCreateEvent(event);\n    }\n\n    // Add a listener on all object creation events\n    // If fakeExisting, will also pass existing objects to your callback\n    addCreateListener(callback, fakeExisting) {\n        if (fakeExisting) {\n            for (let object of this.objects.values()) {\n                let event = {\n                    objectType: this.objectType,\n                    objectId: object.id,\n                    type: \"fakeCreate\",\n                    data: object,\n                };\n                callback(object, event);\n            }\n        }\n\n        return this.addListener(\"create\", callback);\n    }\n\n    // Add a listener for any updates to objects in store\n    // The callback will receive the object and the event\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    // Add a listener for any object deletions\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n}\n\nclass SingletonStore extends BaseStore {\n    constructor(objectType, options={}) {\n        super(objectType, SingletonStore, options);\n    }\n\n    get() {\n        return this;\n    }\n\n    all() {\n        return [this];\n    }\n\n    applyEvent(event) {\n        Object.assign(this, event.data);\n        this.dispatch(\"update\", event, this);\n    }\n\n    importState(obj) {\n        Object.assign(this, obj);\n        this.dispatch(\"update\", event, this);\n    }\n\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n}\n\n// Use the same logic as StoreObject when listening to events\nSingletonStore.prototype.addEventListener = StoreObject.prototype.addEventListener;\n\nexport {StoreObject, BaseStore, GenericObjectStore, SingletonStore};\n","// TODO: this file should be called StoreExtenders\nimport {unwrapArray, splitInChunks} from \"../base/Utils\";\nimport {Ajax} from \"../base/Ajax\";\nimport {GlobalState} from \"./State\";\n\nconst AjaxFetchMixin = (BaseStoreClass) => class AjaxFetchMixin extends BaseStoreClass {\n    fetch(id, successCallback, errorCallback, forceFetch=false) {\n        if (!forceFetch) {\n            let obj = this.get(id);\n            if (obj) {\n                successCallback(obj);\n                return;\n            }\n        }\n        if (!this.fetchJobs) {\n            this.fetchJobs = [];\n        }\n        this.fetchJobs.push({id: id, success: successCallback, error: errorCallback});\n        if (!this.fetchTimeout) {\n            this.fetchTimeout = setTimeout(() => {\n                this.executeAjaxFetch();\n            }, this.options.fetchTimeoutDuration || 0);\n        }\n    };\n\n    getFetchRequestData(ids, fetchJobs) {\n        return {\n            ids: ids,\n        };\n    }\n\n    getFetchRequestObject(ids, fetchJobs) {\n        let requestData = this.getFetchRequestData(ids, fetchJobs);\n\n        // TODO: options.fetchURL should also support a function(ids, fetchJobs), do it when needed\n        return {\n            url: this.options.fetchURL,\n            type: this.options.fetchType || \"GET\",\n            dataType: \"json\",\n            data: requestData,\n            cache: false,\n            success: (data) => {\n                GlobalState.importState(data.state || {});\n                for (let fetchJob of fetchJobs) {\n                    let obj = this.get(fetchJob.id);\n                    if (obj) {\n                        fetchJob.success(obj);\n                    } else {\n                        console.error(\"Failed to fetch object \", fetchJob.id, \" of type \", this.objectType);\n                        if (fetchJob.error) {\n                            fetchJob.error();\n                        }\n                    }\n                }\n            },\n            error: (error) => {\n                console.error(\"Failed to fetch objects of type \", this.objectType, \":\\n\", error);\n                for (let fetchJob of fetchJobs) {\n                    if (fetchJob.error) {\n                        fetchJob.error(error);\n                    }\n                }\n            }\n        }\n    }\n\n    //returns an array of ajax requests that have to be executed\n    getFetchRequests(fetchJobs) {\n        let idFetchJobs = new Map();\n\n        for (let fetchJob of fetchJobs) {\n            let objectId = fetchJob.id;\n            if (!idFetchJobs.has(objectId)) {\n                idFetchJobs.set(objectId, new Array());\n            }\n            idFetchJobs.get(objectId).push(fetchJob);\n        }\n\n        let maxChunkSize = this.options.maxFetchObjectCount || 256;\n\n        let idChunks = splitInChunks(Array.from(idFetchJobs.keys()), maxChunkSize);\n        let fetchJobsChunks = splitInChunks(Array.from(idFetchJobs.values()), maxChunkSize);\n\n        let requests = [];\n        for (let i = 0; i < idChunks.length; i += 1) {\n            requests.push(this.getFetchRequestObject(idChunks[i], unwrapArray(fetchJobsChunks[i])))\n        }\n\n        return requests;\n    }\n\n    executeAjaxFetch() {\n        let fetchJobs = this.fetchJobs;\n        this.fetchJobs = null;\n\n        let requests = this.getFetchRequests(fetchJobs);\n\n        for (let requestObject of requests) {\n            Ajax.fetch(requestObject);\n        }\n\n        clearTimeout(this.fetchTimeout);\n        this.fetchTimeout = null;\n    };\n\n};\n\nconst VirtualStoreObjectMixin = (BaseStoreObjectClass) => class VirtualStoreObjectMixin extends BaseStoreObjectClass {\n    hasTemporaryId() {\n        return (typeof this.id === \"string\" || this.id instanceof String) && this.id.startsWith(\"temp-\");\n    }\n\n    // Meant for updating temporary objects that need to exist before being properly created\n    updateId(newId) {\n            if (this.id == newId) {\n                return;\n            }\n            let oldId = this.id;\n            if (!this.hasTemporaryId()) {\n                console.error(\"This is only meant to replace temporary ids!\");\n            }\n            this.id = newId;\n            this.dispatch(\"updateId\", {oldId: oldId});\n        }\n};\n\n// TODO: there's still a bug in this class when not properly matching virtual obj sometimes I think\nconst VirtualStoreMixin = (BaseStoreClass) => class VirtualStoreMixin extends BaseStoreClass {\n    static generateVirtualId() {\n        if (!this.virtualIdCounter) {\n            this.virtualIdCounter = 0;\n        }\n        this.virtualIdCounter += 1;\n        return this.virtualIdCounter;\n    }\n\n    generateVirtualId() {\n        return this.constructor.generateVirtualId();\n    }\n\n    // TODO: we probably shouldn't have getVirtualObject take in an event\n    getVirtualObject(event) {\n        return this.objects.get(\"temp-\" + event.virtualId);\n    }\n\n    get(id) {\n        return this.objects.get(id);\n    }\n\n    applyUpdateObjectId(object, id) {\n        if (object.id === id) {\n            return;\n        }\n        let oldId = object.id;\n        object.updateId(id);\n        this.objects.delete(oldId);\n        this.objects.set(object.id, object);\n        this.dispatch(\"updateObjectId\", object, oldId);\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        if (event.virtualId) {\n            let existingVirtualObject = this.getVirtualObject(event);\n            if (existingVirtualObject) {\n                this.applyUpdateObjectId(existingVirtualObject, event.objectId);\n            }\n        }\n\n        return super.applyCreateEvent(...arguments);\n    }\n};\n\nexport {AjaxFetchMixin, VirtualStoreMixin, VirtualStoreObjectMixin};\n","// A basic store that can be used to keep objects that map to ISO-code backed languages\nimport {StoreObject, GenericObjectStore} from \"Store\";\n\nclass LanguageObject extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.translationMap = new Map();\n    }\n\n    toString() {\n        let name = this.name;\n        if (this.localName && this.localName != this.name) {\n            name += \" (\" + this.localName + \")\";\n        }\n        return name;\n    }\n\n    buildTranslation(callback) {\n        Language.dispatch(\"buildTranslationMap\", this);\n        callback(this.translationMap);\n    }\n}\n\nclass LanguageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"Language\", LanguageObject);\n    }\n\n    getLanguageForCode(isoCode) {\n        for (let language of this.all()) {\n            if (language.isoCode === isoCode) {\n                return language;\n            }\n        }\n    }\n\n    setLocale(language) {\n        if (this.Locale == language) {\n            return;\n        }\n        this.Locale = language;\n        this.dispatch(\"localeChange\", language);\n    }\n\n    getLocale() {\n        return this.Locale;\n    }\n}\n\nvar Language = new LanguageStoreClass();\n\nexport {Language};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {Language} from \"LanguageStore\";\n\nclass Article extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.edits = new Map();\n    }\n\n    canBeEditedByUser(user=USER) {\n        return user.isSuperUser || this.userCreatedId == user.id;\n    }\n\n    addEdit(articleEdit) {\n        this.edits.set(articleEdit.id, articleEdit);\n    }\n\n    getEdits() {\n        return Array.from(this.edits.values());\n    }\n\n    getTranslation(language=Language.Locale) {\n        for (let article of ArticleStore.all()) {\n            if (article.baseArticleId === this.id && article.languageId === language.id) {\n                return article;\n            }\n        }\n        return this;\n    }\n\n    getBaseArticle() {\n        return ArticleStore.get(this.baseArticleId) || this;\n    }\n}\n\nclass ArticleEdit extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass ArticleStoreClass extends AjaxFetchMixin(GenericObjectStore) {\n    getTranslation(id, language=Language.Locale) {\n        let baseArticle = this.get(id);\n        if (baseArticle) {\n            baseArticle = baseArticle.getTranslation(language);\n        }\n        return baseArticle;\n    }\n}\n\nvar ArticleStore = new ArticleStoreClass(\"article\", Article, {\n    fetchURL: \"/fetch_article/\",\n    maxFetchObjectCount: 32,\n});\n\nvar ArticleEditStore = new GenericObjectStore(\"articleedit\", ArticleEdit, {\n    dependencies: [\"article\"],\n});\n\nArticleEditStore.addCreateListener((articleEdit) => {\n    let article = articleEdit.getArticle();\n    article.addEdit(articleEdit);\n});\n\nexport {Article, ArticleStore, ArticleEditStore};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {ArticleStore} from \"ArticleStore\";\n\nclass BlogEntry extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass BlogEntryStoreClass extends GenericObjectStore {\n    constructor(objectType=\"BlogEntry\", ObjectWrapper=BlogEntry) {\n        super(objectType, ObjectWrapper, {\n            dependencies: [\"Article\"],\n        });\n    }\n\n    getEntryForURL(urlName) {\n        return this.all().find(blogEntry => blogEntry.urlName === urlName);\n    }\n}\n\nvar BlogEntryStore = new BlogEntryStoreClass();\n\nexport {BlogEntryStore};\n","// TODO: this file is in dire need of a rewrite\nexport class StringStream {\n    constructor(string, options) {\n        this.string = string;\n        this.pointer = 0;\n    }\n\n    done() {\n        return this.pointer >= this.string.length;\n    }\n\n    advance(steps=1) {\n        this.pointer += steps;\n    }\n\n    char() {\n        let ch = this.string.charAt(this.pointer);\n        this.pointer += 1;\n        return ch;\n    }\n\n    whitespace(whitespaceChar=/\\s/) {\n        let whitespaceStart = this.pointer;\n\n        while (!this.done() && whitespaceChar.test(this.at(0))) {\n            this.pointer += 1;\n        }\n\n        // Return the actual whitespace in case it is needed\n        return this.string.substring(whitespaceStart, this.pointer);\n    }\n\n    // Gets first encountered non-whitespace substring\n    word(validChars=/\\S/, skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let wordStart = this.pointer;\n        while (!this.done() && validChars.test(this.at(0))) {\n            this.pointer += 1;\n        }\n        return this.string.substring(wordStart, this.pointer);\n    }\n\n    number(skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let nanString = \"NaN\";\n        if (this.startsWith(nanString)) {\n            this.advance(nanString.length);\n            return NaN;\n        }\n\n        let sign = \"+\";\n        if (this.at(0) === \"-\" || this.at(0) === \"+\") {\n            sign = this.char();\n        }\n\n        let infinityString = \"Infinity\";\n        if (this.startsWith(infinityString)) {\n            this.advance(infinityString.length);\n            return sign === \"+\" ? Infinity : -Infinity;\n        }\n\n        let isDigit = (char) => {\n            return (char >= \"0\" || char <= \"9\");\n        };\n\n        if (this.at(0) === \"0\" && (this.at(1) === \"X\" || this.at(1) === \"x\")) {\n            // hexadecimal number\n            this.advance(2);\n\n            let isHexDigit = (char) => {\n                return isDigit(char) || (char >= \"A\" && char <= \"F\") ||(char >= \"a\" && char <= \"f\");\n            };\n\n            let numberStart = this.pointer;\n            while (!this.done() && isHexDigit(this.at(0))) {\n                this.pointer += 1;\n            }\n\n            return parseInt(sign + this.string.substring(numberStart), 16);\n        }\n\n        let numberStart = this.pointer;\n        while (!this.done() && isDigit(this.at(1))) {\n            this.pointer += 1;\n            if (this.peek === \".\") {\n                this.advance(1);\n                while (!this.done() && isDigit(this.at(1))) {\n                    this.pointer += 1;\n                }\n                break;\n            }\n        }\n        return parseFloat(sign + this.string.substring(numberStart, this.pointer));\n    }\n\n    // Gets everything up to delimiter, usually end of line, limited to maxLength\n    line(delimiter=/\\r*\\n/, maxLength=Infinity) {\n        if (delimiter instanceof RegExp) {\n            // Treat regex differently. It will probably be slower.\n            let str = this.string.substring(this.pointer);\n            let delimiterMatch = str.match(delimiter);\n\n            let delimiterIndex, delimiterLength;\n            if (delimiterMatch === null) {\n                // End of string encountered\n                delimiterIndex = str.length;\n                delimiterLength = 0;\n            } else {\n                delimiterIndex = delimiterMatch.index;\n                delimiterLength = delimiterMatch[0].length;\n            }\n\n            if (delimiterIndex >= maxLength) {\n                this.pointer += maxLength;\n                return str.substring(0, maxLength);\n            }\n\n            this.advance(delimiterIndex + delimiterLength);\n            return str.substring(0, delimiterIndex);\n        }\n\n        let delimiterIndex = this.string.indexOf(delimiter, this.pointer);\n\n        if (delimiterIndex === -1) {\n            delimiterIndex = this.string.length;\n        }\n\n        if (delimiterIndex - this.pointer > maxLength) {\n            let result = this.string.substring(this.pointer, this.pointer + maxLength);\n            this.advance(maxLength);\n            return result;\n        }\n\n        let result = this.string.substring(this.pointer, delimiterIndex);\n        this.pointer = delimiterIndex + delimiter.length;\n        return result;\n    }\n\n    // The following methods have no side effects\n\n    // Access char at offset position, relative to current pointer\n    at(index) {\n        return this.string.charAt(this.pointer + index);\n    }\n\n    peek(length=1) {\n        return this.string.substring(this.pointer, this.pointer + length);\n    }\n\n    startsWith(prefix) {\n        if (prefix instanceof RegExp) {\n            // we modify the regex to only check for the beginning of the string\n            prefix = new RegExp(\"^\" + prefix.toString().slice(1, -1));\n            return prefix.test(this.string.substring(this.pointer));\n        }\n        return this.peek(prefix.length) === prefix;\n    }\n\n    // Returns first position of match\n    search(pattern) {\n        let position;\n        if (pattern instanceof RegExp) {\n            position = this.string.substring(this.pointer).search(pattern);\n        } else {\n            position = this.string.indexOf(pattern, this.pointer) - this.pointer;\n        }\n        return position < 0 ? -1 : position;\n    }\n\n    clone() {\n        let newStream = new this.constructor(this.string);\n        newStream.pointer = this.pointer;\n        return newStream;\n    }\n}\n\nfunction kmp(input) {\n    if (input.length === 0) {\n        return [];\n    }\n\n    let prefix = [0];\n    let prefixLength = 0;\n\n    for (let i = 1; i < input.length; i += 1) {\n        while (prefixLength > 0 && input[i] !== input[prefixLength]) {\n            prefixLength = prefix[prefixLength];\n        }\n\n        if (input[i] === input[prefixLength]) {\n            prefixLength += 1;\n        }\n\n        prefix.push(prefixLength);\n    }\n    return prefix;\n}\n\nclass ModifierAutomation {\n    // build automaton from string\n    constructor(options) {\n        this.options = options;\n        this.steps = 0;\n        this.startNode = {\n            value: null,\n            startNode: true,\n        };\n        this.node = this.startNode;\n\n        let lastNode = this.startNode;\n\n        let char = options.pattern.charAt(0);\n        let startPatternNode = {\n            value: char,\n            startNode: true,\n        };\n\n        let patternPrefix = kmp(options.pattern);\n        let patternNode = [startPatternNode];\n\n        if (options.leftWhitespace) {\n            // We don't want to match if the first char is not preceeded by whitespace\n            let whitespaceNode = {\n                value: \" \",\n                whitespaceNode: true,\n            };\n            whitespaceNode.next = (input) => {\n                if (input === char) return startPatternNode;\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            lastNode.next = (input) => {\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            this.node = whitespaceNode;\n        } else {\n            lastNode.next = (input) => {\n                return input === char ? startPatternNode : this.startNode;\n            }\n        }\n        lastNode = startPatternNode;\n\n        for (let i = 1; i < options.pattern.length; i += 1) {\n            let char = options.pattern[i];\n            let newNode = {\n                value: char,\n            };\n            patternNode.push(newNode);\n\n            let backNode = (patternPrefix[i - 1] === 0) ? this.startNode : patternNode[patternPrefix[i - 1] - 1];\n\n            lastNode.next = (input) => {\n                if (input === char) {\n                    return newNode;\n                }\n\n                return backNode.next(input);\n            };\n            lastNode = newNode;\n        }\n        lastNode.patternLastNode = true;\n\n        if (options.captureContent) {\n            this.capture = [];\n            let captureNode = {\n                value: \"\",\n                captureNode: true,\n            };\n\n            // We treat the first character separately in order to support empty capture\n            let char = options.endPattern.charAt(0);\n            let endCaptureNode = {\n                value: char\n            };\n\n            let endPatternPrefix = kmp(options.endPattern);\n            let endPatternNodes = [endCaptureNode];\n\n            lastNode.next = captureNode.next = (input) => {\n                return input === char ? endCaptureNode : captureNode;\n            };\n\n            lastNode = endCaptureNode;\n            for (let i = 1; i < options.endPattern.length; i += 1) {\n                let char = options.endPattern[i];\n                let newNode = {\n                    value: char,\n                };\n                endPatternNodes.push(newNode);\n\n                let backNode = (endPatternPrefix[i - 1] === 0) ? captureNode : endPatternNodes[endPatternPrefix[i - 1] - 1];\n\n                lastNode.next = (input) => {\n                    if (input === char) {\n                        return newNode;\n                    }\n                    return backNode.next(input);\n                };\n                lastNode = newNode;\n            }\n\n            lastNode.endPatternLastNode = true;\n        }\n\n        lastNode.endNode = true;\n        lastNode.next = (input) => {\n            return this.startNode.next(input);\n        };\n    }\n\n    nextState(input) {\n        this.steps += 1;\n\n        this.node = this.node.next(input);\n\n        if (this.node.startNode) {\n            this.steps = 0;\n            delete this.patternStep;\n            delete this.endPatternStep;\n        }\n\n        if (this.node.patternLastNode) {\n            this.patternStep = this.steps - this.options.pattern.length + 1;\n        }\n        if (this.node.endPatternLastNode) {\n            // TODO(@all): Shouldn't it be this.options.endPattern.length instead of this.options.pattern.length?\n            this.endPatternStep = this.steps - this.options.pattern.length + 1;\n        }\n\n        return this.node;\n    }\n\n    done() {\n        return this.node.endNode;\n    }\n}\n\nclass Modifier {\n    constructor(options) {\n    }\n\n    modify(currentArray, originalString) {\n        let matcher = new ModifierAutomation({\n            pattern: this.pattern,\n            captureContent: this.captureContent, // TODO: some elements should not wrap\n            endPattern: this.endPattern,\n            leftWhitespace: this.leftWhitespace,\n        });\n\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let newArray = [];\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            let char = originalString[i];\n\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                matcher.nextState(\"\\\\\" + char); // prevent char from advancing automata\n                continue;\n            }\n\n            matcher.nextState(char);\n\n            if (matcher.done()) {\n                let modifierStart = i - (matcher.steps - matcher.patternStep);\n                let modifierEnd = i - (matcher.steps - matcher.endPatternStep) + this.endPattern.length;\n\n                let modifierCapture = [];\n\n                while (newArray.length > 0 && modifierStart <= newArray[newArray.length - 1].start) {\n                    let element = newArray.pop();\n\n                    modifierCapture.push(element);\n                }\n\n                if (newArray.length > 0 && modifierStart < newArray[newArray.length - 1].end) {\n                    let element = newArray.pop();\n                    newArray.push({\n                        isString: true,\n                        start: element.start,\n                        end: modifierStart,\n                    });\n                    modifierCapture.push({\n                        isString: true,\n                        start: modifierStart,\n                        end: element.end,\n                    });\n                }\n\n                if (currentElement.start < modifierStart) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: modifierStart,\n                    });\n                }\n                modifierCapture.reverse();\n\n                // this is the end of the capture\n                modifierCapture.push({\n                    isString: true,\n                    start: Math.max(currentElement.start, modifierStart),\n                    end: modifierEnd,\n                });\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(modifierCapture, originalString)),\n                    start: modifierStart,\n                    end: modifierEnd,\n                });\n\n                // We split the current element to in two(one will be captured, one replaces the current element\n                currentElement = {\n                    isString: true,\n                    start: modifierEnd,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n\n        return newArray;\n    }\n\n    processChildren(capture, originalString) {\n        return capture.map((element) => {\n            return this.processChild(element, originalString);\n        });\n    }\n\n    processChild(element, originalString) {\n        if (element.isDummy) {\n            return \"\";\n        } if (element.isString) {\n            return originalString.substring(element.start, element.end);\n        } else {\n            return element.content;\n        }\n    }\n}\n\nfunction InlineModifierMixin(BaseModifierClass) {\n    return class InlineModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.captureContent = true;\n        }\n\n        wrap(content) {\n            if (content.length > 0) {\n                content[0] = content[0].substring(content[0].indexOf(this.pattern) + this.pattern.length);\n\n                let lastElement = content.pop();\n                lastElement = lastElement.substring(0, lastElement.lastIndexOf(this.endPattern));\n                content.push(lastElement);\n\n                return {\n                    tag: this.tag,\n                    children: content\n                };\n            }\n        }\n    }\n}\n\nfunction LineStartModifierMixin(BaseModifierClass) {\n    return class LineStartModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.groupConsecutive = false;\n        }\n\n        isValidElement(element) {\n            return element.content &&\n                element.content.tag === \"p\" &&\n                element.content.children.length > 0 &&\n                !element.content.children[0].tag && // child is text string\n                element.content.children[0].startsWith(this.pattern);\n        }\n\n        modify(currentArray, originalString) {\n            let newArray = [];\n\n            for (let i = 0; i < currentArray.length; i += 1) {\n                let element = currentArray[i];\n                if (this.isValidElement(element)) {\n                    if (this.groupConsecutive) {\n                        let elements = [];\n\n                        let start, end;\n                        start = currentArray[i].start;\n                        while (i < currentArray.length && this.isValidElement(currentArray[i])) {\n                            elements.push(this.wrapItem(currentArray[i].content.children));\n\n                            i += 1;\n                        }\n                        // we make sure no elements are skipped\n                        i -= 1;\n\n                        end = currentArray[i].end;\n\n                        newArray.push({\n                            start: start,\n                            end: end,\n                            content: this.wrap(elements)\n                        });\n                    } else {\n                        // We use object assign here to keep the start and end properties. (Maybe along with others)\n                        let newElement = Object.assign({}, element, {\n                            content: this.wrap(element.content.children)\n                        });\n                        newArray.push(newElement);\n                    }\n\n                } else {\n                    newArray.push(element);\n                }\n            }\n            return newArray;\n        }\n\n        wrapItem(content) {\n            let firstChild = content[0];\n\n            let patternIndex = firstChild.indexOf(this.pattern);\n            let patternEnd = patternIndex + this.pattern.length;\n\n            content[0] = firstChild.substring(patternEnd);\n\n            return {\n                tag: this.itemTag,\n                children: content,\n            }\n        }\n\n        wrap(content) {\n            return {\n                tag: this.tag,\n                children: content,\n            }\n        }\n    }\n}\n\nfunction RawContentModifierMixin(BaseModifierClass) {\n    return class RawContentModifier extends BaseModifierClass {\n        processChildren(children, originalString) {\n            if (children.length === 0) {\n                return [];\n            }\n\n            return [originalString.substring(children[0].start, children[children.length - 1].end)];\n        }\n    }\n}\n\nexport class BlockCodeModifier extends Modifier {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"```\";\n        this.endPattern = \"\\n```\";\n        this.leftWhitespace = true;\n        this.captureContent = true;\n    }\n\n    processChildren(capture, originalString) {\n        this.codeOptions = null;\n        if (capture.length > 0) {\n            let codeBlock = originalString.substring(capture[0].start, capture[capture.length - 1].end);\n\n            codeBlock = codeBlock.substring(codeBlock.indexOf(this.pattern) + this.pattern.length);\n            codeBlock = codeBlock.substring(0, codeBlock.lastIndexOf(this.endPattern));\n\n            let firstLineEnd = codeBlock.indexOf(\"\\n\") + 1;\n            let firstLine = codeBlock.substring(0, firstLineEnd).trim();\n            codeBlock = codeBlock.substring(firstLineEnd);\n\n            if (firstLine.length > 0) {\n                this.codeOptions = {};\n                let lineStream = new StringStream(firstLine);\n                this.codeOptions.aceMode = lineStream.word();\n\n                Object.assign(this.codeOptions, MarkupParser.parseOptions(lineStream));\n            }\n\n            return codeBlock;\n        }\n        return \"\";\n    }\n\n    getElement(content) {\n        return {\n            tag: this.constructor.tag || \"pre\",\n            children: [content],\n        }\n    }\n\n    wrap(content, options) {\n        let codeHighlighter = this.getElement(content);\n\n        // TODO: this code should not be here\n        let codeOptions = {\n            aceMode: \"c_cpp\",\n            maxLines: 32,\n        };\n\n        if (this.codeOptions) {\n            Object.assign(codeOptions, this.codeOptions);\n            delete this.codeOptions;\n        }\n\n        Object.assign(codeOptions, codeHighlighter);\n        return codeOptions;\n    }\n}\n\nclass HeaderModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"#\";\n    }\n\n    wrap(content) {\n        let firstChild = content[0];\n\n        let hashtagIndex = firstChild.indexOf(\"#\");\n        let hashtagEnd = hashtagIndex + 1;\n        let headerLevel = 1;\n\n        let nextChar = firstChild.charAt(hashtagEnd);\n        if (nextChar >= \"1\" && nextChar <= \"6\") {\n            headerLevel = parseInt(nextChar);\n            hashtagEnd += 1;\n        } else if (nextChar === \"#\") {\n            while (headerLevel < 6 && firstChild.charAt(hashtagEnd) === \"#\") {\n                headerLevel += 1;\n                hashtagEnd += 1;\n            }\n        }\n\n        content[0] = firstChild.substring(hashtagEnd);\n        return {\n            tag: \"h\" + headerLevel,\n            children: content,\n        };\n    }\n}\n\nclass HorizontalRuleModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"---\";\n    }\n\n    wrap(content) {\n        return {\n            tag: \"hr\"\n        };\n    }\n}\n\nclass UnorderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ul\";\n        this.itemTag = \"li\";\n        this.pattern = \"- \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass OrderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ol\";\n        this.itemTag = \"li\";\n        this.pattern = \"1. \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass ParagraphModifier extends Modifier {\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let capturedContent = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                capturedContent.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if (originalString[i] === \"\\n\") {\n                if (currentElement.start < i) {\n                    capturedContent.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: i,\n                    });\n                }\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(capturedContent, originalString)),\n                    start: lineStart,\n                    end: i + 1,\n                });\n                capturedContent = [];\n                lineStart = i + 1;\n\n                if (originalString[i + 1] === \"\\n\") {\n                    let start, end;\n                    start = i;\n\n                    while (i + 1 < originalString.length && originalString[i + 1] === \"\\n\") {\n                        i += 1;\n                    }\n                    end = i + 1;\n\n                    newArray.push({\n                        content: {\n                            tag: \"br\",\n                        },\n                        start: start,\n                        end: end,\n                    });\n\n                    lineStart = i + 1;\n                } else {\n                    // TODO: these dummies break code. Refactor!\n                    // newArray.push({\n                    //     isDummy: true,\n                    //     start: i,\n                    //     end: i + 1,\n                    // });\n                }\n\n                currentElement = {\n                    isString: true,\n                    start: lineStart,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            capturedContent.push(currentElement);\n        }\n        if (capturedContent.length > 0) {\n            newArray.push({\n                content: this.wrap(this.processChildren(capturedContent, originalString)),\n                start: lineStart,\n                end: originalString.length,\n            })\n        }\n        return newArray;\n    }\n\n    wrap(capture) {\n        return {\n            tag: \"p\",\n            children: capture,\n        }\n    }\n}\n\nclass StrongModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"*\";\n        this.endPattern = \"*\";\n        this.tag = \"strong\";\n    }\n}\n\nclass ItalicModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"/\";\n        this.endPattern = \"/\";\n        this.tag = \"em\";\n    }\n}\n\nclass InlineCodeModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"`\";\n        this.endPattern = \"`\";\n        this.tag = \"code\";\n    }\n\n    processChildren(children, originalString) {\n        if (children.length === 0) {\n            return [];\n        }\n\n        return [originalString.substring(children[0].start, children[children.length - 1].end)];\n    }\n}\n\nclass InlineVarModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$\";\n        this.endPattern = \"$\";\n        this.tag = \"var\";\n    }\n}\n\nclass InlineLatexModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$$\";\n        this.endPattern = \"$$\";\n        this.tag = \"Latex\";\n    }\n}\n\nclass LinkModifier extends Modifier {\n\n    static isCorrectUrl(str) {\n        if (str.startsWith(\"http://\") || str.startsWith(\"https://\")) {\n            return true;\n        }\n    }\n    static trimProtocol(str) {\n        if (str[4] === 's') {\n            return str.substring(8, str.length);\n        }\n        return str.substring(7, str.length);\n    }\n\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        let checkAndAddUrl = (start, end) => {\n            let substr = originalString.substring(start, end);\n            if (this.constructor.isCorrectUrl(substr)) {\n                if (currentElement.start < start) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: start,\n                    });\n                }\n\n                newArray.push({\n                    isJSX: true,\n                    content: {\n                        tag: \"a\",\n                        href: substr,\n                        children: [this.constructor.trimProtocol(substr)],\n                        target: \"_blank\"\n                    },\n                    start: start,\n                    end: end,\n                });\n\n                currentElement = {\n                    isString: true,\n                    start: end,\n                    end: currentElement.end,\n                };\n            }\n        };\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if ((/\\s/).test(originalString[i])) {\n                checkAndAddUrl(lineStart, i);\n                lineStart = i + 1;\n            }\n        }\n        if (lineStart < originalString.length) {\n            checkAndAddUrl(lineStart, originalString.length);\n        }\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n        return newArray;\n    }\n}\n\nlet MarkupModifier = Modifier;\n\nexport {MarkupModifier, HeaderModifier, ParagraphModifier, InlineCodeModifier, InlineLatexModifier, StrongModifier, LinkModifier};\n\nclass MarkupParser {\n    constructor(options) {\n        options = options || {};\n\n        this.modifiers = options.modifiers || this.constructor.modifiers;\n        this.uiElements = options.uiElements || new Map();\n    }\n\n    parse(content) {\n        if (!content) return [];\n\n        let result = [];\n\n        let arr = this.parseUIElements(content);\n\n        for (let i = this.modifiers.length - 1; i >= 0; i -= 1) {\n            let modifier = this.modifiers[i];\n\n            arr = modifier.modify(arr, content);\n        }\n\n        for (let el of arr) {\n            if (el.isDummy) {\n                // just skip it\n            } else if (el.isString) {\n                result.push(content.substring(el.start, el.end));\n            } else {\n                result.push(el.content);\n            }\n        }\n        return result;\n    }\n\n    parseUIElements(content) {\n        let stream = new StringStream(content);\n\n        let result = [];\n        let textStart = 0;\n\n        while (!stream.done()) {\n            let char = stream.char();\n\n            if (char === \"<\" && (/[a-zA-Z]/).test(stream.at(0))) {\n                stream.pointer -= 1; //step back to beginning of ui element\n                let elementStart = stream.pointer;\n                let uiElement;\n                try {\n                    uiElement = this.parseUIElement(stream);\n                } catch (e) {\n                    // failed to parse jsx element\n                    continue;\n                }\n\n                if (this.uiElements.has(uiElement.tag)) {\n                    result.push({\n                        isString: true,\n                        start: textStart,\n                        end: elementStart,\n                    });\n\n                    result.push({\n                        content: uiElement,\n                        isJSX: true,\n                        start: elementStart,\n                        end: stream.pointer,\n                    });\n                    textStart = stream.pointer;\n                }\n            }\n        }\n\n        if (textStart < content.length) {\n            result.push({\n                isString: true,\n                start: textStart,\n                end: content.length,\n            });\n        }\n\n        return result;\n    }\n\n    parseUIElement(stream, delimiter=(/\\/?>/)) {\n        // content should be of type <ClassName option1=\"string\" option2={{jsonObject: true}} />\n        // TODO: support nested elements like <ClassName><NestedClass /></ClassName>\n\n        stream.whitespace();\n        if (stream.done()) {\n            return null;\n        }\n\n        if (stream.at(0) !== \"<\") {\n            throw Error(\"Invalid UIElement declaration.\");\n        }\n\n        let result = {};\n\n        stream.char(); // skip the '<'\n\n        result.tag = stream.word();\n        stream.whitespace();\n\n        Object.assign(result, this.parseOptions(stream, delimiter));\n        stream.line(delimiter);\n\n        return result;\n    }\n    \n    parseOptions(stream, optionsEnd) {\n        return this.constructor.parseOptions(stream, optionsEnd);\n    }\n\n    // optionsEnd cannot include whitespace or start with '='\n    static parseOptions(stream, optionsEnd) {\n        let options = {};\n\n        stream.whitespace();\n\n        while (!stream.done()) {\n            // argument name is anything that comes before whitespace or '='\n            stream.whitespace();\n\n            let validOptionName = /[\\w$]/;\n            let optionName;\n            if (validOptionName.test(stream.at(0))) {\n                optionName = stream.word(validOptionName);\n            }\n\n            stream.whitespace();\n\n            if (optionsEnd && stream.search(optionsEnd) === 0) {\n                options[optionName] = true;\n                break;\n            }\n            if (!optionName) {\n                throw Error(\"Invalid option name\");\n            }\n\n            if (stream.peek() === \"=\") {\n                stream.char();\n                stream.whitespace();\n\n                if (stream.done()) {\n                    throw Error(\"No argument given for option: \" + optionName);\n                }\n\n                if (stream.peek() === '\"') {\n                    // We have a string here\n                    let optionString = \"\";\n                    let foundStringEnd = false;\n\n                    stream.char();\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '\"') {\n                            foundStringEnd = true;\n                            break;\n                        }\n                        optionString += char;\n                    }\n\n                    if (!foundStringEnd) {\n                        // You did not close that string\n                        throw Error(\"Argument string not closed: \" + optionString);\n                    }\n                    options[optionName] = optionString;\n                } else if (stream.peek() === '{') {\n                    // Once you pop, the fun don't stop\n                    let bracketCount = 0;\n\n                    let validJSON = false;\n                    let jsonString = \"\";\n                    stream.char();\n\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '{') {\n                            bracketCount += 1;\n                        } else if (char === '}') {\n                            if (bracketCount > 0) {\n                                bracketCount -= 1;\n                            } else {\n                                // JSON ends here\n                                options[optionName] = jsonString.length > 0 ? this.parseJSON5(jsonString) : undefined;\n                                validJSON = true;\n                                break;\n                            }\n                        }\n                        jsonString += char;\n                    }\n                    if (!validJSON) {\n                        throw Error(\"Invalid JSON argument for option: \" + optionName + \". Input: \" + jsonString);\n                    }\n                } else {\n                    throw Error(\"Invalid argument for option: \" + optionName + \". Need string or JSON.\");\n                }\n            } else {\n                options[optionName] = true;\n            }\n            stream.whitespace();\n        }\n\n        return options;\n    }\n\n    parseTextLine(stream) {\n        let lastModifier = new Map();\n\n        let capturedContent = [];\n\n        // This will always be set to the last closed modifier\n        let capturedEnd = -1;\n\n        let textStart = stream.pointer;\n        let contentStart = stream.pointer;\n\n        while (!stream.done()) {\n            if (stream.startsWith(/\\s+\\r*\\n/)) {\n                // end of line, stop here\n                break;\n            }\n\n            if (stream.at(0) === \"<\") {\n                capturedContent.push({\n                    content: stream.string.substring(contentStart, stream.pointer),\n                    start: contentStart,\n                    end: stream.pointer\n                });\n                let uiElementStart = stream.pointer;\n                let uiElement = this.parseUIElement(stream, (/\\/*>/));\n                capturedContent.push({\n                    content: uiElement,\n                    start: uiElementStart,\n                    end: stream.pointer,\n                });\n                contentStart = stream.pointer;\n                continue;\n            }\n\n            let char = stream.char();\n\n            if (char === \"\\\\\") {\n                // escape next character\n                char += stream.char();\n            }\n        }\n\n        let remainingContent = stream.string.substring(textStart, stream.pointer);\n        if (remainingContent.length > 0) {\n            capturedContent.push(remainingContent);\n        }\n        stream.line(); // delete line endings\n\n        return capturedContent;\n    }\n}\n\nMarkupParser.modifiers = [\n    new BlockCodeModifier(),\n    new HeaderModifier(),\n    new HorizontalRuleModifier(),\n    new UnorderedListModifier(),\n    new OrderedListModifier(),\n    new ParagraphModifier(),\n    new InlineCodeModifier(),\n    new InlineLatexModifier(),\n    new InlineVarModifier(),\n    new StrongModifier(),\n    new ItalicModifier(),\n    new LinkModifier()\n];\n\n// json5.js\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\nMarkupParser.parseJSON5 = (function() {\n    // This is a function that can parse a JSON5 text, producing a JavaScript\n    // data structure. It is a simple, recursive descent parser. It does not use\n    // eval or regular expressions, so it can be used as a model for implementing\n    // a JSON5 parser in other languages.\n\n    // We are defining the function inside of another function to avoid creating\n    // global variables.\n\n    let at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch;           // The current character\n    let escapee = {\n        \"'\": \"'\",\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        '\\n': '',       // Replace escaped newlines in strings w/ empty string\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t'\n    };\n    let text;\n\n    let renderChar = (chr) => {\n        return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n    };\n\n    let error = (m) => {\n        // Call error when something is wrong.\n\n        let error = new SyntaxError();\n        // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n        error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n        error.at = at;\n        // These two property names have been chosen to agree with the ones in Gecko, the only popular\n        // environment which seems to supply this info on JSON.parse\n        error.lineNumber = lineNumber;\n        error.columnNumber = columnNumber;\n        throw error;\n    };\n\n    let next = (c) => {\n        // If a c parameter is provided, verify that it matches the current character.\n\n        if (c && c !== ch) {\n            error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n        }\n\n        // Get the next character. When there are no more characters,\n        // return the empty string.\n\n        ch = text.charAt(at);\n        at++;\n        columnNumber++;\n        if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n            lineNumber++;\n            columnNumber = 0;\n        }\n        return ch;\n    };\n\n    let peek = () => {\n        // Get the next character without consuming it or\n        // assigning it to the ch varaible.\n\n        return text.charAt(at);\n    };\n\n    let identifier = () => {\n        // Parse an identifier. Normally, reserved words are disallowed here, but we\n        // only use this for unquoted object keys, where reserved words are allowed,\n        // so we don't check for those here. References:\n        // - http://es5.github.com/#x7.6\n        // - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n        // - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n        // TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n        let key = ch;\n\n        // Identifiers must start with a letter, _ or $.\n        if ((ch !== '_' && ch !== '$') &&\n            (ch < 'a' || ch > 'z') &&\n            (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n        }\n\n        // Subsequent characters can contain digits.\n        while (next() && (\n            ch === '_' || ch === '$' ||\n            (ch >= 'a' && ch <= 'z') ||\n            (ch >= 'A' && ch <= 'Z') ||\n            (ch >= '0' && ch <= '9'))) {\n                key += ch;\n        }\n\n        return key;\n    };\n\n    let number = () => {\n        // Parse a number value.\n        var number, sign = '', string = '', base = 10;\n\n        if (ch === '-' || ch === '+') {\n            sign = ch;\n            next(ch);\n        }\n\n        // support for Infinity (could tweak to allow other words):\n        if (ch === 'I') {\n            number = word();\n            if (typeof number !== 'number' || isNaN(number)) {\n                error('Unexpected word for number');\n            }\n            return (sign === '-') ? -number : number;\n        }\n\n        // support for NaN\n        if (ch === 'N') {\n            number = word();\n            if (!isNaN(number)) {\n                error('expected word to be NaN');\n            }\n            // ignore sign as -NaN also is NaN\n            return number;\n        }\n\n        if (ch === '0') {\n            string += ch;\n            next();\n            if (ch === 'x' || ch === 'X') {\n                string += ch;\n                next();\n                base = 16;\n            } else if (ch >= '0' && ch <= '9') {\n                error('Octal literal');\n            }\n        }\n\n        switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n        }\n\n        if (sign === '-') {\n            number = -string;\n        } else {\n            number = +string;\n        }\n\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    };\n\n    let string = () => {\n        // Parse a string value.\n        let hex, i, string = '', uffff;\n        let delim; // double quote or single quote\n\n        // When parsing for string values, we must look for ' or \" and \\ characters.\n\n        if (ch === '\"' || ch === \"'\") {\n            delim = ch;\n            while (next()) {\n                if (ch === delim) {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (ch === '\\r') {\n                        if (peek() === '\\n') {\n                            next();\n                        }\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else if (ch === '\\n') {\n                    // unescaped newlines are invalid; see:\n                    // https://github.com/aseemk/json5/issues/24\n                    // TODO this feels special-cased; are there other\n                    // invalid unescaped chars?\n                    break;\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    };\n\n    let inlineComment = () => {\n        // Skip an inline comment, assuming this is one. The current character should\n        // be the second / character in the // pair that begins this inline comment.\n        // To finish the inline comment, we look for a newline or the end of the text.\n\n        if (ch !== '/') {\n            error(\"Not an inline comment\");\n        }\n\n        do {\n            next();\n            if (ch === '\\n' || ch === '\\r') {\n                next();\n                return;\n            }\n        } while (ch);\n    };\n\n    let blockComment = () => {\n        // Skip a block comment, assuming this is one. The current character should be\n        // the * character in the /* pair that begins this block comment.\n        // To finish the block comment, we look for an ending */ pair of characters,\n        // but we also watch for the end of text before the comment is terminated.\n\n        if (ch !== '*') {\n            error(\"Not a block comment\");\n        }\n\n        do {\n            next();\n            while (ch === '*') {\n                next('*');\n                if (ch === '/') {\n                    next('/');\n                    return;\n                }\n            }\n        } while (ch);\n\n        error(\"Unterminated block comment\");\n    };\n\n    let comment = () => {\n        // Skip a comment, whether inline or block-level, assuming this is one.\n        // Comments always begin with a / character.\n\n        if (ch !== '/') {\n            error(\"Not a comment\");\n        }\n\n        next('/');\n\n        if (ch === '/') {\n            inlineComment();\n        } else if (ch === '*') {\n            blockComment();\n        } else {\n            error(\"Unrecognized comment\");\n        }\n    };\n\n    let white = () => {\n        // Skip whitespace and comments.\n        // Note that we're detecting comments by only a single / character.\n        // This works since regular expressions are not valid JSON(5), but this will\n        // break if there are other valid values that begin with a / character!\n\n        while (ch) {\n            if (ch === '/') {\n                comment();\n            } else if (/\\s/.test(ch)) {\n                next();\n            } else {\n                return;\n            }\n        }\n    };\n\n    let word = () => {\n        // true, false, or null.\n\n        switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n                next('N');\n                next('a');\n                next('N');\n                return NaN;\n        }\n        error(\"Unexpected \" + renderChar(ch));\n    };\n\n    let value;\n\n    let array = () => {\n        // Parse an array value.\n        let array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            while (ch) {\n                if (ch === ']') {\n                    next(']');\n                    return array;   // Potentially empty array\n                }\n                // ES5 allows omitting elements in arrays, e.g. [,] and\n                // [,null]. We don't allow this in JSON5.\n                if (ch === ',') {\n                    error(\"Missing array element\");\n                } else {\n                    array.push(value());\n                }\n                white();\n                // If there's no comma after this value, this needs to\n                // be the end of the array.\n                if (ch !== ',') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    };\n\n    let object = () => {\n        // Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            while (ch) {\n                if (ch === '}') {\n                    next('}');\n                    return object;   // Potentially empty object\n                }\n\n                // Keys can be unquoted. If they are, they need to be\n                // valid JS identifiers.\n                if (ch === '\"' || ch === \"'\") {\n                    key = string();\n                } else {\n                    key = identifier();\n                }\n\n                white();\n                next(':');\n                object[key] = value();\n                white();\n                // If there's no comma after this pair, this needs to be\n                // the end of the object.\n                if (ch !== ',') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\n    value = () => {\n        // Parse a JSON value. It could be an object, an array, a string, a number,\n        // or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the above\n    // functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n        // If there is a reviver function, we recursively walk the new structure,\n        // passing each name/value pair to the reviver function for possible\n        // transformation, starting with a temporary root object that holds the result\n        // in an empty key. If there is not a reviver function, we simply return the\n        // result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n})();\n\nexport {MarkupParser};\n\n\n// TODO: these should be in a unit test file, not here\nexport function TestStringStream() {\n    let tests = [];\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.char();\n        if (temp !== \"A\") {\n            throw Error(\"char seems to fail. Expected: 'A' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"la\") {\n            throw Error(\"word seems to fail. Expected: 'la' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"bala\") {\n            throw Error(\"word seems to fail. Expected: 'bala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"portocala\") {\n            throw Error(\"word seems to fail. Expected: 'portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.word();\n        if (temp !== \"Ala\") {\n            throw Error(\"word seems to fail. Expected: 'Ala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.char();\n        if (temp !== \" \") {\n            throw Error(\"word seems to fail. Expected: ' ' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line();\n        if (temp !== \"bala    portocala\") {\n            throw Error(\"line seems to fail. Expected: 'bala    portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Buna bate toba\\n Bunica bate tare\\nBunica bate tobaaa \\nCu maciuca-n casa mare!\");\n\n        let temp;\n\n        temp = ss.line();\n        if (temp !== \"Buna bate toba\") {\n            throw Error(\"line seems to fail. Expected: 'Buna bate toba' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"Bunica\") {\n            throw Error(\"word seems to fail. Expected: 'Bunica' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\");\n        if (temp !== \" bate tare\") {\n            throw Error(\"line seems to fail. Expected: ' bate tare' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\", 11);\n        if (temp !== \"Bunica bate\") {\n            throw Error(\"line seems to fail. Expected: 'Bunica bate' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"tobaaa\") {\n            throw Error(\"line seems to fail. Expected: 'tobaaa' , got '\" + temp + \"'\");\n        }\n\n        ss.char();\n        temp = ss.line();\n        if (temp !== \"\") {\n            throw Error(\"line seems to fail. Expected: '' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line('\\n', 100);\n        if (temp !== \"Cu maciuca-n casa mare!\") {\n            throw Error(\"line seems to fail. Expected: 'Cu maciuca-n casa mare!' , got '\" + temp + \"'\");\n        }\n    });\n\n\n\n    let numFailed = 0;\n    for (let i = 0; i < tests.length; i += 1) {\n        try {\n            tests[i]();\n            console.log(\"Test \", i, \" ran successfully.\");\n        } catch (e) {\n            numFailed += 1;\n            console.log(\"Failed StringStream test \", i, \"! Reason: \", e);\n        }\n    }\n\n    console.log(\"Finished running all tests. Failed: \", numFailed);\n}\n","import {UI} from \"../ui/UI\";\nimport {MarkupParser} from \"./MarkupParser\";\nimport {StaticCodeHighlighter, Panel, Link, Image} from \"../ui/UI\";\n\n// Class that for every markup tag returns the UI class to instantiate for that element\nclass MarkupClassMap {\n    constructor(fallback, extraClasses=[]) {\n        this.classMap = new Map();\n        this.fallback = fallback;\n        for (const extraClass of extraClasses) {\n            this.addClass(extraClass[0], extraClass[1]);\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.set(className, classObject);\n    }\n\n    registerDependencies(dependencies) {\n        for (let dependency of dependencies) {\n            if (dependency && dependency.registerMarkup) {\n                dependency.registerMarkup(this);\n            }\n        }\n    }\n\n    static addClass(className, classObject) {\n        this.GLOBAL.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        let classObject = this.classMap.get(className);\n        if (!classObject && this.fallback) {\n            classObject = this.fallback.getClass(className);\n        }\n        return classObject;\n    }\n\n    get(className) {\n        return this.getClass(className);\n    }\n\n    has(className) {\n        return this.getClass(className);\n    }\n};\n\nMarkupClassMap.GLOBAL = new MarkupClassMap();\n\nclass MarkupRenderer extends Panel {\n    setOptions(options) {\n        if (!options.classMap) {\n            options.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n        }\n        if (!options.parser) {\n            options.parser = new MarkupParser({\n                uiElements: options.classMap,\n            });\n        }\n        super.setOptions(options);\n\n        this.setValue(this.options.value || \"\");\n        if (this.options.classMap) {\n            this.classMap = this.options.classMap;\n        }\n    }\n\n    setValue(value) {\n        if (typeof value === \"string\") {\n            this.options.rawValue = value;\n            try {\n                value = this.options.parser.parse(value);\n            } catch (e) {\n                console.error(\"Can't parse \", value, e);\n                value = {\n                    tag: \"span\",\n                    children: [value]\n                };\n            }\n        }\n        this.options.value = value;\n    }\n\n    reparse() {\n        if (this.options.rawValue) {\n            this.setValue(this.options.rawValue);\n        }\n    }\n\n    registerDependencies(dependencies) {\n        if (dependencies.length > 0) {\n            this.classMap.registerDependencies(dependencies);\n            this.reparse();\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        return this.classMap.getClass(className);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    convertToUI(value) {\n        if (value instanceof UI.TextElement || value instanceof UI.Element) {\n            // TODO: investigate this!\n            return value;\n        }\n\n        if (typeof value === \"string\") {\n            return new UI.TextElement(value);\n        }\n        if (Array.isArray(value)) {\n            return value.map(x => this.convertToUI(x));\n        }\n        if (value.children) {\n            value.children = this.convertToUI(value.children);\n        }\n\n        let classObject = this.getClass(value.tag) || value.tag;\n\n        // TODO: maybe just copy to another object, not delete?\n        //delete value.tag;\n        return UI.createElement(classObject, value, ...(value.children || []));\n    }\n\n    render() {\n        return this.convertToUI(this.getValue());\n    }\n}\n\nMarkupClassMap.addClass(\"CodeSnippet\", StaticCodeHighlighter);\n\nconst SafeUriEnhancer = (BaseClass, attribute) => class SafeUriClass extends BaseClass {\n    setOptions(options) {\n        if (options.hasOwnProperty(attribute) && !this.constructor.isSafeUri(options[attribute])) {\n            return super.setOptions(Object.assign({}, options, {[attribute]: undefined}));\n        }\n        return super.setOptions(options);\n    }\n\n    static isSafeUri(uri) {\n        return uri.indexOf(\":\") === -1 ||\n               uri.startsWith(\"http:\") ||\n               uri.startsWith(\"https:\") ||\n               uri.startsWith(\"mailto:\");\n    }\n};\n\nMarkupClassMap.addClass(\"Link\", SafeUriEnhancer(Link, \"href\"));\nMarkupClassMap.addClass(\"Image\", SafeUriEnhancer(Image, \"src\"));\n\nexport {MarkupClassMap, MarkupRenderer};\n","import {UI, Panel, Button, CodeEditor, SectionDivider, ButtonGroup, TextArea, Orientation, Level} from \"UI\";\nimport {MarkupRenderer} from \"markup/MarkupRenderer\";\n\n\nclass MarkupEditor extends Panel {\n    getDefaultOptions() {\n        return {\n            showButtons: true\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"textAlign\", \"center\");\n    }\n\n    getMarkupRenderer() {\n        let rendererOptions = {};\n        if (this.options.classMap) {\n            rendererOptions.classMap = this.options.classMap;\n        }\n        return <MarkupRenderer ref={this.refLink(\"markupRenderer\")} value={this.options.value} style={{height:\"100%\", overflow: \"auto\"}} {...rendererOptions} />;\n    }\n\n    getEditor() {\n        return <TextArea ref=\"codeEditor\" style={{\n            width: \"100%\",\n            height: \"calc(100% - 3px)\",\n            resize: \"none\",\n            backgroundColor: \"#F9F9F9\"\n        }} value={this.options.value || \"\"}/>;\n    }\n\n    render() {\n        let buttons;\n        if (this.options.showButtons) {\n            buttons = <ButtonGroup>\n                <Button ref=\"toggleLeftButton\" label={UI.T(\"Editor\")} level={Level.SUCCESS}/>\n                <Button ref=\"toggleRightButton\" label={UI.T(\"Article\")} level={Level.SUCCESS}/>\n            </ButtonGroup>;\n        }\n\n        return [\n            buttons,\n            <SectionDivider ref=\"sectionDivider\" orientation={Orientation.HORIZONTAL}\n                            style={{textAlign: \"initial\", height: \"100%\", width: \"100%\", display:\"inline-block\",\n                                    overflow: \"hidden\"}}>\n                <Panel ref=\"editorPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"hidden\"}}>\n                    {this.getEditor()}\n                </Panel>\n                <Panel ref=\"rendererPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"auto\", padding: \"10px\"}}>\n                    {this.getMarkupRenderer()}\n                </Panel>\n            </SectionDivider>\n        ]\n    }\n\n    updateValue(markup) {\n        this.markupRenderer.setValue(markup);\n        this.markupRenderer.redraw();\n    }\n\n    appendValue(markup, separator=\"\\n\") {\n        let value = this.getValue();\n        if (value && separator != null) {\n            value += separator;\n        }\n        value += markup;\n        this.setValue(value);\n        this.updateValue(value);\n    }\n\n    setEditorOptions() {\n        this.editorPanel.addListener(\"resize\", () => {\n            this.codeEditor.setWidth(this.editorPanel.getWidth() - 15);\n        });\n\n        this.codeEditor.addNodeListener(\"input\", () => {\n            let markup = this.codeEditor.getValue();\n            try {\n                this.updateValue(markup);\n            } catch (e) {\n                console.error(\"Exception in parsing markup: \", e);\n            }\n        });\n    }\n\n    onMount() {\n        if (this.options.showButtons) {\n            this.toggleLeftButton.addClickListener(() => {\n                if (this.editorPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(0);\n                    this.toggleLeftButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(0);\n                    this.toggleLeftButton.setLevel(Level.DANGER);\n                }\n            });\n            this.toggleRightButton.addClickListener(() => {\n                if (this.rendererPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(1);\n                    this.toggleRightButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(1);\n                    this.toggleRightButton.setLevel(Level.DANGER);\n                }\n            });\n        }\n\n        this.setEditorOptions();\n    }\n\n    getValue() {\n        return this.codeEditor.getValue();\n    }\n\n    setValue(value) {\n        this.updateValue(value);\n        return this.codeEditor.setValue(value);\n    }\n}\n\nexport {MarkupEditor};\n","import {Ajax} from \"Ajax\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nclass User extends StoreObject {\n    constructor(obj) {\n        super(obj);\n    }\n\n    getName() {\n    }\n\n    getCustomSetting(key, defaultValue) {\n        let keyChain = key.split(\":\");\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (key in currentDict) {\n                currentDict = currentDict[key];\n            } else {\n                return defaultValue;\n            }\n        }\n        return currentDict;\n    }\n\n    getParsedCustomSetting(key, defaultValue) {\n        return JSON.parse(this.getCustomSetting(key, defaultValue));\n    }\n\n    setCustomSetting(key, value) {\n        let keyChain = key.split(\":\");\n        let lastKey = keyChain.pop();\n        if (!this.customSettings) {\n            this.customSettings = {};\n        }\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (!(key in currentDict)) {\n                currentDict[key] = {};\n            }\n            currentDict = currentDict[key];\n        }\n        currentDict[lastKey] = value;\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: JSON.parse(value),\n            rawValue: value,\n            origin: \"set\",\n        });\n    }\n\n    saveCustomSetting(key, value) {\n        if (this.id != USER.id) {\n            console.error(\"Invalid user\");\n            return;\n        }\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: value,\n            origin: \"save\",\n        });\n\n        let request = {\n            customSettingsKey: key,\n            customSettingsValue: value,\n        };\n\n        if (!this.timeouts) {\n            this.timeouts = new Map();\n        }\n        if (this.timeouts.has(key)) {\n            clearTimeout(this.timeouts.get(key));\n        }\n        this.timeouts.set(key, setTimeout(() => {\n            Ajax.postJSON(\"/accounts/profile_changed/\", request).then(() => {}, () => {});\n        }));\n    }\n\n    applyEvent(event) {\n        if (event.type === \"setCustomSetting\") {\n            console.log(\"Updated custom settings: \", event);\n            this.setCustomSetting(event[\"data\"].key, event[\"data\"].value);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n}\n\nvar UserStore = new GenericObjectStore(\"user\", User);\n\nUserStore.getCurrentUser = function () {\n    return window.USER;\n};\n\nclass PublicUser extends StoreObject {\n    getDisplayHandle() {\n        let name;\n        if (this.displayName) {\n            name = this.name || this.username;\n        } else {\n            name = this.username || this.name;\n        }\n        return name || (\"user-\" + this.id);\n    }\n\n    getProfileUrl() {\n        if (this.username) {\n            return \"/user/\" + this.username;\n        } else {\n            return \"/userid/\" + this.id;\n        }\n    }\n}\n\n// TODO: extend AjaxFetchMixin, to put the options in the constructor\nvar PublicUserStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar PublicUserStore = new PublicUserStoreClass(\"publicuser\", PublicUser, {\n    fetchTimeoutDuration: 20,\n    maxFetchObjectCount: 512,\n    fetchURL: \"/accounts/public_user_profiles/\",\n});\n\nwindow.USER = Object.assign({\n    id: 0,\n    customSettings: {}\n}, window.USER || {});\n\nwindow.USER = UserStore.fakeCreate(window.USER);\n\nclass UserNotification extends StoreObject {\n    getUser() {\n        return UserStore.get(this.userId);\n    }\n\n    isRead() {\n        return (this.id <= this.getUser().lastReadNotificationId);\n    }\n}\n\nvar UserNotificationStore = new GenericObjectStore(\"UserNotification\", UserNotification, {dependencies: [\"user\"]});\n\nexport {UserStore, PublicUserStore, UserNotificationStore};\n","import {UI} from \"UI\";\nimport {PublicUserStore} from \"UserStore\";\n\nclass UserHandle extends UI.Element {\n    setOptions(options) {\n        options.userId = options.userId || options.id;\n\n        super.setOptions(options);\n\n        this.options.color = this.options.color || \"#2089b5\";\n        this.setUser(PublicUserStore.get(this.options.userId));\n    }\n\n    setUser(user) {\n        this.user = user;\n    }\n\n    getNodeType() {\n        return \"span\";\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        this.handle.setStyle(\"color\", color);\n    }\n\n    render() {\n        let handle;\n        if (!this.user) {\n            PublicUserStore.fetch(this.options.userId, (user) => {\n                this.setUser(user);\n                this.redraw();\n            });\n            handle = <b ref=\"handle\" style={{color: \"#BBB\"}}>{\"user-\" + this.options.userId}</b>;\n        } else {\n            handle = <span ref=\"handle\" style={{cursor: \"pointer\", color: this.options.color}}\n                      onClick={() => {window.open(this.user.getProfileUrl(), \"_blank\")}}><b>{this.user.getDisplayHandle()}</b></span>\n        }\n\n        //The purpose of the container is to simplify the usage of the popup.\n        return [\n            <span ref=\"container\" style={{position: \"relative\", overflow: \"hidden\"}}>\n                {handle}\n                {this.options.children}\n            </span>\n        ]\n    }\n}\n\nexport {UserHandle};\n","import {UI, SVG, Switcher, Button} from \"UI\";\nimport {MarkupRenderer, MarkupClassMap} from \"MarkupRenderer\";\nimport {Language} from \"LanguageStore\";\n\nimport {Article, ArticleStore} from \"./state/ArticleStore\";\n\n\nclass ArticleRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = options.classMap || this.constructor.markupClassMap;\n        super.setOptions(options);\n    }\n\n    getEditButton() {\n        if (this.options.showEditButton && this.options.article.canBeEditedByUser()) {\n            let url = this.options.editButtonUrl || (\"/article/\" + this.options.article.id + \"/edit/\");\n            return <div className=\"text-left\">\n                <a href={url} target=\"_blank\">\n                    <Button label={UI.T(\"Edit\")}\n                               style={{\"margin\": \"10px\"}}/></a>\n            </div>;\n        }\n    }\n\n    render() {\n        return [\n            this.getEditButton(),\n            super.render()\n        ];\n    }\n\n    setArticle(article) {\n        this.updateOptions({ article });\n    }\n\n    getValue() {\n        super.setValue(this.getArticleToRender().markup);\n        return super.getValue();\n    }\n\n    getArticleToRender() {\n        return this.options.article.getTranslation();\n    }\n\n    getArticleDependencies() {\n        const dependencies = this.options.article.dependency;\n        return dependencies && dependencies.split(\",\");\n    }\n\n    redraw() {\n        const dependencies = this.getArticleDependencies();\n        if (!dependencies) {\n            super.redraw();\n            return;\n        }\n\n        // Not using require directly to fool webpack\n        window[\"require\"](dependencies, (...args) => {\n            this.registerDependencies(args);\n            super.redraw();\n        });\n    }\n\n    onMount() {\n        if (this.options.liveLanguage) {\n            this.attachListener(Language, \"localeChange\", () => this.redraw());\n        }\n    }\n}\n\nclass RecursiveArticleRenderer extends ArticleRenderer {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.articleId = this.options.articleId || this.options.id;\n    }\n\n    redraw() {\n        if (this.options.article) {\n            return super.redraw();\n        } else {\n            ArticleStore.fetch(this.options.articleId, (article) => this.updateOptions({ article }));\n        }\n    }\n}\n\nclass ArticleSwitcher extends Switcher {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            fullHeight: true,\n        });\n    }\n\n    constructor() {\n        super(...arguments);\n        this.articleChildMap = new WeakMap();\n    }\n\n    setOptions(options) {\n        options = Object.assign({\n            lazyRender: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    getPageForArticle(article) {\n        if (!this.articleChildMap.has(article)) {\n            this.articleChildMap.set(article, <ArticleRenderer article={article} showEditButton={this.options.showEditButton} />);\n        }\n        return this.articleChildMap.get(article);\n    }\n\n    setActive(article) {\n        if (!(article instanceof Article)) {\n            super.setActive(article);\n            return;\n        }\n        super.setActive(this.getPageForArticle(article));\n    }\n\n    setActiveArticleId(articleId) {\n        ArticleStore.fetch(articleId, (article) => {\n            this.setActive(article);\n        });\n    }\n\n    onMount() {\n        super.onMount();\n        if (this.options.initialArticle) {\n            this.setActive(this.options.initialArticle);\n        }\n        if (this.options.initialArticleId) {\n            this.setActiveArticleId(this.options.initialArticleId);\n        }\n    }\n}\n\nArticleRenderer.markupClassMap = new MarkupClassMap(MarkupClassMap.GLOBAL, [\n    [\"Article\", RecursiveArticleRenderer],\n    [\"RawSVG\", SVG.RawSVG]\n]);\n\nexport {ArticleRenderer, RecursiveArticleRenderer, ArticleSwitcher};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\nconst color = {\n    BLUE: \"#20232d\",\n    HOVER_BLUE: \"#364251\",\n    BLACK: \"#181a22\",\n    HOVER_BLACK: \"#323539\",\n    WHITE: \"#eee\",\n};\n\nlet CSAStyle = {\n    color: color,\n};\n\nclass BlogStyle extends StyleSheet {\n    titleFontSize = \"2em\";\n\n    @styleRule\n    commentsTitle = {\n        height: \"20px\",\n        color: \"#333\",\n        marginTop: \"10px\",\n        fontSize: \"1em\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    bottomSection = {\n        marginTop: \"5px\",\n        height: \"50px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    blogEntryView = {\n        \"margin\": \"0 auto\",\n        \"width\": \"900px\",\n        \"max-width\": \"100%\",\n        // \"padding-top\": \"50px\",\n        // \"padding-bottom\": \"50px\",\n    };\n\n    title = {\n        \"font-size\": this.titleFontSize,\n        \"padding-top\": \"20px\",\n        \"padding-bottom\": \"10px\",\n        \"text-decoration\": \"italic\",\n        \"width\": \"100%\",\n        \"text-align\": \"center\",\n        \"word-wrap\": \"normal\",\n        \"line-height\": \"60px\",\n    };\n\n    writtenBy = {\n        \"width\": \"100%\",\n        \"text-align\": \"left\",\n        \"padding-top\": \"20px\",\n        \"font-size\": \"1em\",\n        \"color\": \"#666\",\n    };\n\n    article = {\n        \"text-align\": \"justify\",\n        \"font-size\": \"17px\",\n    };\n\n    link = {\n        textDecoration: \"none\",\n        textAlign: \"center\",\n        marginTop: \"-15pt\",\n        fontSize: \"1.1em\",\n    };\n\n    blogArticleRenderer = {\n        overflow: \"hidden\",\n        position: \"relative\",\n        maxHeight: \"180px\",\n        \"text-align\": \"justify\",\n        \"font-size\": \"17px\",\n        marginBottom: \"25px\",\n    };\n\n    @styleRule\n    whiteOverlay = {\n        height: \"100px\",\n        background: \"linear-gradient(rgba(255,255,255,0), #fff)\",\n        position: \"absolute\",\n        marginTop: \"-120px\",\n        pointerEvents: \"none\",\n        width: \"92%\",\n    };\n\n    @styleRule\n    loadMoreButton = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"40px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        borderColor: CSAStyle.color.BLUE,\n        fontSize: \"1em\",\n        transition: \".2s\",\n        textTransform: \"uppercase\",\n        opacity: \"1\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active:focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    sendMessageButtonStyle = {\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        borderColor: \"#333\",\n        fontSize: \"13px\",\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus:active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass BlogArticleRendererStyle extends StyleSheet {\n    hStyle = {\n        \"text-align\": \"center\",\n        \"margin-top\": \"30px\",\n        \"margin-bottom\": \"30px\",\n        \"width\": \"100%\",\n    };\n\n    @styleRule\n    blogArticleRenderer = {\n        \" h1\": this.hStyle,\n        \" h2\": this.hStyle,\n        \" h3\": this.hStyle,\n        \" h4\": this.hStyle,\n        \" h5\": this.hStyle,\n        \" h6\": this.hStyle,\n    };\n\n    @styleRule\n    quote = {\n        \"font-style\": \"italic\",\n        \"margin-top\": \"20px\",\n        \"margin-bottom\": \"20px\",\n        \"color\": \"#707070\",\n        \"float\": \"right\",\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n    };\n}\n\n\nexport {BlogStyle, BlogArticleRendererStyle};\n","import {UI, registerStyle} from \"UI\";\nimport {ArticleRenderer} from \"ArticleRenderer\";\nimport {MarkupClassMap} from \"MarkupRenderer\";\nimport {BlogArticleRendererStyle} from \"./BlogStyle\";\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogArticleRenderer extends ArticleRenderer {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.blogArticleRenderer);\n    }\n}\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogQuote extends UI.Primitive(\"div\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.quote);\n    }\n\n    render() {\n        return [\n            <div style={{\n                \"flex-grow\": \"1000000\",\n                \"min-width\": \"10%\",\n                \"display\": \"inline-block\",\n            }}></div>,\n            <div style={{\n                \"flex-grow\": \"1\",\n                \"display\": \"inline-block\",\n            }}>\n                {this.options.value}\n            </div>\n        ];\n    }\n}\n\n\nBlogArticleRenderer.markupClassMap = new MarkupClassMap(ArticleRenderer.markupClassMap);\nBlogArticleRenderer.markupClassMap.addClass(\"Quote\", BlogQuote);\n\n\nexport {BlogArticleRenderer, BlogQuote};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Modal,\n    Panel,\n    Select,\n    SortableTable,\n    TemporaryMessageArea,\n    TextInput,\n    Level,\n    UI,\n} from \"UI\";\nimport {FAIcon} from \"FontAwesome\";\nimport {Ajax} from \"Ajax\";\nimport {StemDate} from \"Time\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Language} from \"LanguageStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {GlobalStyle} from \"GlobalStyle\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\n\n\nclass TransferOwnershipModal extends ActionModal {\n    getActionName() {\n        return \"Transfer ownership\";\n    }\n\n    getActionLevel() {\n        return Level.PRIMARY;\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    getBody() {\n        return [\n            <UI.TextElement ref=\"text\" value={\"Set owner for \" + this.getArticle().name + \":\"}/>,\n            <Form style={{marginTop: \"10px\"}}>\n                <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                    <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId} />\n                </FormField>\n            </Form>\n        ];\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"transferOwnershipButton\" level={this.getActionLevel()} onClick={() => this.action()}\n                               statusOptions={[this.getActionName(), {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"},\n                                               this.getActionName(), \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    action() {\n        let newOwner = this.ownerFormInput.getValue();\n        let request = {\n            newOwner: newOwner\n        };\n\n        this.messageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.transferOwnershipButton.postJSON(\"/article/\" + this.getArticle().id + \"/set_owner/\", request).then(\n            () => this.hide(),\n            (error) => this.messageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete article\";\n    }\n\n    getBody() {\n        return <UI.TextElement ref=\"text\" value={\"Delete \" + this.getArticle().name + \"?\"}/>;\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.getArticle().id + \"/delete/\", {}).then(\n            () => {\n                let table = this.options.parent.table;\n                table.options.articles.splice(table.getArticleIndex(this.getArticle().id), 1);\n                table.redraw();\n                this.hide();\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\nclass CreateArticleModal extends ActionModal {\n    getActionName() {\n        return \"Create article\";\n    }\n\n    getBody() {\n        return <Form style={{marginTop: \"10px\"}}>\n            <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                <TextInput ref=\"articleNameInput\"  value=\"\"/>\n            </FormField>\n            <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                <TextInput ref=\"dependencyInput\" value=\"\"/>\n            </FormField>\n            <FormField ref=\"languageFormField\" label=\"Language\">\n                <Select ref=\"languageSelect\" options={Language.all()}/>\n            </FormField>\n            <FormField ref=\"publicFormField\" label=\"Public\">\n                <CheckboxInput ref=\"publicCheckbox\" checked={false}/>\n            </FormField>\n        </Form>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY} onClick={() => {this.createArticle()}}\n                               statusOptions={[\"Create article\", {faIcon: \"spinner fa-spin\", label:\" creating article ...\"},\n                                               \"Create article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    createArticle(options) {\n        let name = this.articleNameInput.getValue();\n        let dependency = this.dependencyInput.getValue();\n        let languageId = this.languageSelect.get().id;\n        let isPublic = this.publicCheckbox.getValue();\n        let request = {\n            name: name,\n            dependency: dependency,\n            languageId: languageId,\n            isPublic: isPublic\n        };\n        if (options) {\n            Object.assign(request, options);\n        }\n        this.createArticleButton.postJSON(\"/create_article/\", request).then(\n            (data) => {\n                this.options.parent.table.addArticle(ArticleStore.get(data.article.id));\n                this.hide();\n            },\n            (error) => {\n                this.messageArea.showMessage(error.message, \"red\");\n            }\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass AddTranslationModal extends CreateArticleModal {\n    getActioName() {\n        return \"Add translation\";\n    }\n\n    getBody() {\n        const baseArticle = this.options.baseArticle;\n        return <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                        <TextInput ref=\"articleNameInput\"  value={\"Translation for \" + baseArticle.name}/>\n                    </FormField>\n                    <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                        <TextInput ref=\"dependencyInput\" value={baseArticle.dependency}/>\n                    </FormField>\n                    <FormField ref=\"languageFormField\" label=\"Language\">\n                        <Select ref=\"languageSelect\" options={Language.all()}/>\n                    </FormField>\n                    <FormField ref=\"publicFormField\" label=\"Public\">\n                        <CheckboxInput ref=\"publicCheckbox\" checked={baseArticle.isPublic}/>\n                    </FormField>\n                </Form>\n    }\n\n    getFooter() {\n        const baseArticle = this.options.baseArticle;\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY}\n                               onClick={() => this.createArticle({\n                                   baseArticleId: baseArticle.id,\n                                   markup: baseArticle.markup\n                               })}\n                               statusOptions={[\"Add translation\", {faIcon: \"spinner fa-spin\", label:\" creating translation article ...\"},\n                                               \"Success\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n}\n\nclass ArticleOwnerSpan extends UI.Primitive(\"span\") {\n    getArticle() {\n        return this.options.article;\n    }\n\n    render() {\n        return <UserHandle id={this.getArticle().userCreatedId}/>;\n    }\n\n    onMount() {\n        this.attachUpdateListener(this.getArticle(), () => this.redraw());\n    }\n}\n\nclass ArticlePublicSpan extends FAIcon {\n    getDefaultOptions() {\n        return {\n            size: \"lg\"\n        };\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    isPublic() {\n        return this.options.article.isPublic;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"color\", this.isPublic() ? \"green\" : \"red\");\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.icon = this.isPublic() ? \"check\" : \"times\";\n    }\n\n    onMount() {\n        this.attachUpdateListener(this.getArticle(),\n            () => this.updateOptions({icon: this.isPublic() ? \"check\" : \"times\"})\n        );\n    }\n}\n\nclass ArticleTable extends SortableTable {\n    setOptions(options) {\n        super.setOptions(options);\n        this.resetColumnSortingOrder();\n    }\n\n    resetColumnSortingOrder() {\n        this.columnSortingOrder = [this.columns[4], this.columns[5], this.columns[0],\n            this.columns[3], this.columns[2], this.columns[1]];\n    }\n\n    getArticleIndex(articleId) {\n        for (let i = 0; i < this.options.articles.length; i += 1) {\n            if (this.options.articles[i].id === articleId)\n                return i;\n        }\n        return -1;\n    }\n\n    addArticle(article) {\n        this.options.articles.push(article);\n        this.redraw();\n    }\n\n    setColumns() {\n        let cellStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let headerStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let columns = [{\n            value: article => <Link href={\"/article/\" + article.id + \"/edit/\"} value={article.name} />,\n            rawValue: article => article.name,\n            headerName: \"Article\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <ArticleOwnerSpan article={article} />,\n            rawValue: article => PublicUserStore.get(article.userCreatedId).username,\n            headerName: \"Author\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <ArticlePublicSpan article={article} />,\n            rawValue: article => (article.isPublic ? \"Yes\" : \"No\"),\n            headerName: \"Public\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => Language.get(article.languageId).name,\n            rawValue: article => Language.get(article.languageId).name,\n            headerName: \"Language\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateCreated).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateCreated,\n            sortDescending: true,\n            headerName: \"Date created\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateModified).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateModified,\n            sortDescending: true,\n            headerName: \"Date modified\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }];\n        if (!this.options.parent.options.readOnly) {\n            if (USER.isSuperUser) {\n                columns.push({\n                    value: article => <Button level={Level.PRIMARY} label=\"Set owner\"\n                                              onClick={() => TransferOwnershipModal.show({ article })}/>,\n                    headerName: \"Set owner\",\n                    headerStyle: headerStyle,\n                    cellStyle: cellStyle\n                });\n            }\n            columns.push({\n                value: article => <Button level={Level.DANGER} label=\"Delete\"\n                                             onClick={() => {\n                                                 DeleteArticleModal.show({\n                                                     article,\n                                                     parent: this.options.parent\n                                                 });\n                                             }}/>,\n                headerName: \"Delete\",\n                headerStyle: headerStyle,\n                cellStyle: cellStyle\n            });\n        }\n        super.setColumns(columns);\n    }\n\n    getEntries() {\n        return this.sortEntries(this.options.articles);\n    }\n}\n\nclass ArticleManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Article manager\",\n            articles: [],\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(GlobalStyle.Container.SMALL);\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\">\n                <Button level={Level.PRIMARY} label=\"Create article\"\n                           onClick={() => CreateArticleModal.show({parent: this})}\n                           style={{marginTop: \"5px\", marginBottom: \"5px\"}}/>\n            </div>;\n        }\n\n        return [\n            <div className=\"pull-left\">\n                <h4><strong>{this.options.title}</strong></h4>\n            </div>,\n            addButton,\n            <ArticleTable ref=\"table\" articles={this.options.articles} parent={this}/>,\n        ];\n    }\n\n    onMount() {\n        if (this.options.articles && this.options.articles.length > 0) {\n            return;\n        }\n        Ajax.getJSON(\"/get_available_articles/\", {}).then(\n            () => this.table.updateOptions({articles: ArticleStore.all()})\n        );\n    }\n}\n\nclass ArticleTranslationManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Translation manager\"\n        };\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        this.table = <ArticleTable articles={[]} parent={this}/>;\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\"><Button level={Level.PRIMARY} label=\"Add translation\"\n                                                            onClick={() => AddTranslationModal.show({\n                                                                parent: this,\n                                                                baseArticle: this.options.baseArticle\n                                                            })}\n                                                            style={{marginTop: \"5px\", marginBottom: \"5px\"}}/></div>;\n        }\n        return [<div className=\"pull-left\"><h4><strong>{this.options.title}</strong></h4></div>, addButton, this.table];\n    }\n\n    onMount() {\n        if (!this.options.baseArticle) {\n            return;\n        }\n\n        Ajax.getJSON(\"/article/\" + this.options.baseArticle.id + \"/get_translations/\", {}).then(\n            () => {\n                for (let article of ArticleStore.all()) {\n                    if (article.baseArticleId === this.options.baseArticle.id) {\n                        this.table.options.articles.push(article);\n                    }\n                }\n                this.table.redraw();\n            }\n        );\n    }\n}\n\nexport {ArticleManager, ArticleTranslationManager};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Panel,\n    SectionDivider,\n    Select,\n    TabArea,\n    TemporaryMessageArea,\n    TextArea,\n    TextInput,\n    Level,\n    UI,\n} from \"UI\";\nimport {Language} from \"LanguageStore\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\nimport {ArticleTranslationManager} from \"./ArticleManager\";\nimport {ArticleRenderer} from \"./ArticleRenderer\";\nimport {MarkupEditor} from \"./markup/MarkupEditor\";\n\n\nconst deleteRedirectLink = \"/\";\n\nclass ArticleMarkupEditor extends MarkupEditor {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.value = this.options.article.markup;\n    }\n\n    getMarkupRenderer() {\n        return <ArticleRenderer ref={this.refLink(\"markupRenderer\")} article={this.options.article} style={{flex:\"1\", height: \"100%\", overflow: \"auto\"}} />\n    }\n\n    updateValue(markup) {\n        this.options.article.markup = markup;\n        super.updateValue(markup);\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete Article\";\n    }\n\n    getBody() {\n        return <p>Delete {this.options.article.name}?</p>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.options.article.id + \"/delete/\", {}).then(\n            () => {\n                if (this.options.article.baseArticleId)\n                    window.location.replace(\"/article/\" + this.options.article.baseArticleId + \"/edit/\");\n                else\n                    window.location.replace(deleteRedirectLink);\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n}\n\nclass ArticleEditor extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n\n    }\n\n    getArticle() {\n        return ArticleStore.get(this.options.articleId);\n    }\n\n    initializeVersioning() {\n        if (ArticleEditor.DiffWidgetClass) {\n            this.versions = [];\n            this.versionsLabels = [];\n            for (let article of this.getArticle().getEdits()) {\n                this.versions.push(article.content);\n                this.versionsLabels.push(\"Version \" + article.id);\n            }\n            this.versions.push(this.getArticle().markup);\n            this.versionsLabels.push(\"Edit version\");\n            this.versions.reverse();\n            this.versionsLabels.reverse();\n\n            this.leftEditable = true;\n            this.rightEditable = false;\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            height: \"100%\",\n        });\n    }\n\n    render() {\n        this.initializeVersioning();\n        let translationsPanel = null;\n        let baseArticleForm = null;\n        if (this.getArticle().baseArticleId) {\n            baseArticleForm = <FormField ref=\"baseArticleFormField\" label=\"Base article\">\n                <Link href={\"/article/\" + this.getArticle().baseArticleId + \"/edit/\"} value=\"Go to base article\" />\n            </FormField>;\n        } else {\n            translationsPanel = <Panel title=\"Translations\">\n                <ArticleTranslationManager title={\"Translations for \" + this.getArticle().name}\n                                    baseArticle={this.getArticle()}/>\n            </Panel>\n        }\n        let ownershipPanel = null;\n        if (USER.isSuperUser) {\n            ownershipPanel = <Panel title=\"Ownership\">\n                <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                        <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId}/>\n                    </FormField>\n                </Form>\n                <AjaxButton ref=\"setOwnerButton\" level={Level.INFO} onClick={() => {\n                                let newOwner = this.ownerFormInput.getValue();\n                                this.setOwner(newOwner);\n                               }}\n                               statusOptions={[\"Transfer ownership\", {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"}, \"Transfer ownership\", \"Failed\"]}\n                        />\n                <TemporaryMessageArea ref=\"setOwnerMessageArea\"/>\n            </Panel>\n        }\n\n        let revisionsPanel;\n        if (ArticleEditor.DiffWidgetClass) {\n            let DiffWidgetClass = ArticleEditor.DiffWidgetClass;\n                revisionsPanel = <Panel title=\"Revisions\" style={{height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel>\n                    <Select ref=\"leftTextSelector\" options={this.versionsLabels}/>\n                    <Select style={{float:\"right\", marginRight:\"25px\"}} ref=\"rightTextSelector\" options={this.versionsLabels}/>\n                </Panel>\n                <DiffWidgetClass ref=\"diffWidget\" leftEditable={this.leftEditable} rightEditable={this.rightEditable}\n                                 leftTextValue={this.versions[2]} arrows={this.arrows} rightTextValue={this.versions[1]}\n                                     style={{flex:\"1\", height: \"calc(100% - 100px)\", width: \"calc(100% - 100px)\"}} />\n            </Panel>;\n        }\n\n        return [\n            <h3>{this.getArticle().name + \" Id=\" + this.options.articleId}</h3>,\n                <TabArea ref=\"tabArea\" variableHeightPanels style={{flex: \"1\", height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel title=\"Edit\" active style={{height: \"100%\", overflow: \"hidden\"}}>\n                    <AjaxButton ref=\"saveMarkupButton\" level={Level.INFO} onClick={() => {\n                                    let content = this.markupEditor.getValue();\n                                    this.saveMarkup(content);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <TemporaryMessageArea ref=\"saveMarkupMessageArea\"/>\n                    <ArticleMarkupEditor style={{height: \"100%\", marginTop: \"-31px\", display: \"flex\", flexDirection: \"column\"}}\n                                         ref=\"markupEditor\" article={this.getArticle()} />\n                </Panel>\n                {revisionsPanel}\n                <Panel title=\"Summary\">\n                    <Form style={{marginTop: \"10px\"}}>\n                        <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                            <TextInput ref=\"articleNameFormInput\"  value={this.getArticle().name}/>\n                        </FormField>\n                        <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                            <TextInput ref=\"dependencyFormInput\" value={this.getArticle().dependency}/>\n                        </FormField>\n                        {baseArticleForm}\n                        <FormField ref=\"languageFormField\" label=\"Language\">\n                            <Select ref=\"languageSelect\" options={Language.all()}\n                                       selected={Language.get(this.getArticle().languageId)}/>\n                        </FormField>\n                        <FormField ref=\"publicFormField\" label=\"Public\">\n                            <CheckboxInput ref=\"publicCheckbox\" checked={this.getArticle().isPublic}/>\n                        </FormField>\n                    </Form>\n                    <AjaxButton ref=\"saveOptionsButton\" level={Level.INFO} onClick={() => {\n                                    let name = this.articleNameFormInput.getValue();\n                                   let dependency = this.dependencyFormInput.getValue();\n                                   let languageId = this.languageSelect.get().id;\n                                   let isPublic = this.publicCheckbox.getValue();\n                                   let options = {\n                                       name: name,\n                                       dependency: dependency,\n                                       languageId: languageId,\n                                       isPublic: isPublic\n                                   };\n                                   this.saveOptions(options);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <Button ref=\"deleteArticleButton\" level={Level.DANGER} label=\"Delete article\"\n                               style={{marginLeft: \"3px\"}}\n                               onClick={() => this.deleteArticleModal.show()}/>\n                    <TemporaryMessageArea ref=\"saveOptionsMessageArea\"/>\n                </Panel>\n                {translationsPanel}\n                {ownershipPanel}\n            </TabArea>\n        ];\n    }\n\n    saveMarkup(content) {\n        let request = {\n            markup: content\n        };\n\n        this.saveMarkupMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveMarkupButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => {\n                // Add a new version in the dropdown if the save is a success\n                if (ArticleEditor.DiffWidgetClass) {\n                    this.addNewVersion(content);\n                }\n                this.saveMarkupMessageArea.showMessage(\"Saved article\");\n            },\n            (error) => this.saveMarkupMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    saveOptions(options) {\n        let request = {};\n        Object.assign(request, options);\n\n        this.saveOptionsMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveOptionsButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => window.location.replace(\"/article/\" + this.options.articleId + \"/edit/\"),\n            (error) => this.saveOptionsMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    setOwner(newOwner) {\n        this.setOwnerMessageArea.showMessage(\"Saving...\", \"black\", null);\n        this.setOwnerButton.postJSON(\"/article/\" + this.options.articleId + \"/set_owner/\", {\n            newOwner: newOwner\n        }).then(\n            () => this.setOwnerMessageArea.showMessage(\"Author successfully changed\"),\n            (error) => this.setOwnerMessageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    addNewVersion(content) {\n        this.versionsLabels[0] = (\"Version \" + this.versionsLabels.length);\n        this.versions[0] = content;\n\n        this.versions.unshift(this.markupEditor.getValue());\n        this.versionsLabels.unshift(\"Edit version\");\n\n        let leftIndex = this.leftTextSelector.getIndex();\n        let rightIndex = this.rightTextSelector.getIndex();\n\n        this.leftTextSelector.redraw();\n        this.rightTextSelector.redraw();\n\n        this.setLeftIndex(leftIndex);\n        this.setRightIndex(rightIndex);\n    }\n\n    setLeftIndex(index) {\n        this.leftTextSelector.setIndex(index);\n        this.diffWidget.setLeftText(this.versions[index]);\n    }\n\n    setRightIndex(index) {\n        this.rightTextSelector.setIndex(index);\n        this.diffWidget.setRightText(this.versions[index]);\n    }\n\n    onMount() {\n        this.deleteArticleModal = <DeleteArticleModal article={this.getArticle()}/>;\n\n        if (ArticleEditor.DiffWidgetClass) {\n            this.tabArea.titleArea.children[1].addClickListener(() => {\n                this.versions[0] = this.markupEditor.getValue();\n                this.setLeftIndex(this.leftTextSelector.getIndex());\n                this.setRightIndex(this.rightTextSelector.getIndex());\n                //this.diffWidget.diffGutterPanel.scroll();\n            });\n\n            let updateEditable = () => {\n                this.leftEditable = (this.leftTextSelector.getIndex() === 0);\n                this.rightEditable = (this.rightTextSelector.getIndex() === 0);\n                this.diffWidget.setLeftEditable(this.leftEditable);\n                this.diffWidget.setRightEditable(this.rightEditable);\n            };\n\n            this.leftTextSelector.addChangeListener(() => {\n                this.diffWidget.setLeftText(this.versions[this.leftTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.rightTextSelector.addChangeListener(() => {\n                this.diffWidget.setRightText(this.versions[this.rightTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.setLeftIndex(0);\n            this.setRightIndex(1);\n\n            //this.diffWidget.diffGutter.redraw();\n        }\n\n        window.onbeforeunload = () => {\n            // Are you sure you want to close the page?\n            return \"\";\n        }\n    }\n}\n\nexport {ArticleEditor};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class UserReactionCollection extends StoreObject {\n    getUserReactionStore() {\n        return this.getStore().getState().getStore(\"UserReaction\");\n    }\n\n    // TODO should be done as generator? Clearly needs to have indexed data!\n    getReactions() {\n        let reactions = [];\n        for (let reaction of this.getUserReactionStore().all()) {\n            if (reaction.collectionId == this.id) {\n                reactions.push(reaction);\n            }\n        }\n        return reactions;\n    }\n\n    getCurrentUserReaction() {\n        let currentUser = window.USER;\n        for (const userReaction of this.getReactions()) {\n            if (userReaction.userId == currentUser.id) {\n                return userReaction;\n            }\n        }\n        return null;\n    }\n\n    getCurrentUserReactionType() {\n        const currentUserReaction = this.getCurrentUserReaction();\n        return currentUserReaction && currentUserReaction.type;\n    }\n}\n\nexport class UserReaction extends StoreObject {\n}\n\nexport let UserReactionCollectionStore = new GenericObjectStore(\"UserReactionCollection\", UserReactionCollection);\nexport let UserReactionStore = new GenericObjectStore(\"UserReaction\", UserReaction);","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin, VirtualStoreObjectMixin, VirtualStoreMixin} from \"StoreMixins\";\nimport {PublicUserStore} from \"UserStore\";\nimport {UserReactionCollectionStore} from \"UserReactionStore\";\nimport {MarkupParser} from \"MarkupParser\";\nimport {ServerTime, StemDate} from \"Time\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nclass MessageInstance extends VirtualStoreObjectMixin(StoreObject) {\n    constructor(obj, event) {\n        super(obj, event);\n\n        PublicUserStore.fakeCreate(event.user);\n    }\n\n    getNormalizedId() {\n        // TODO: Pretty bad implementation, works though\n        let messageId = this.id + \"\";\n        if (messageId.startsWith(\"temp-\")) {\n            messageId = messageId.substr(5);\n        }\n        return parseInt(messageId);\n    }\n\n    getDate() {\n        return this.timeAdded;\n    }\n\n    getUser() {\n        let user = PublicUserStore.get(this.userId);\n        if (user) {\n            return user.username;\n        }\n        return \"user-\" + this.userId;\n    }\n\n    getContent() {\n        return this.content;\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getReactionCollection(fakeIfMissing=false) {\n        let reactionCollection = UserReactionCollectionStore.get(this.reactionCollectionId);\n        if (fakeIfMissing && !reactionCollection) {\n            return {\n                upvotesCount: 0,\n                downvotesCount: 0,\n                getCurrentUserReactionType() {},\n            };\n        }\n        return reactionCollection;\n    }\n\n    getNumLikes() {\n        return this.getReactionCollection(true).upvotesCount;\n    }\n\n    getNumDislikes() {\n        return this.getReactionCollection(true).downvotesCount;\n    }\n\n    getVotesBalance() {\n        return this.getNumLikes() - this.getNumDislikes();\n    }\n\n    getUserVote() {\n        return this.getReactionCollection(true).getCurrentUserReactionType();\n    }\n\n    getPreviousMessage() {\n        // TODO: this should be cached and kept by the message thread\n        let ans = null;\n        let currentId = this.getNormalizedId();\n        // If message has temporary id, then it is identical with the previous message id, so instead the\n        // previous previous message would be found instead.\n        if (this.hasTemporaryId()) {\n            currentId += 1;\n        }\n        for (let message of this.getMessageThread().getMessages()) {\n            if (message.id < currentId && (!ans || ans.id < message.id)) {\n                ans = message;\n            }\n        }\n        return ans;\n    }\n\n    getNextMessage() {\n        throw \"Implement me!\";\n    }\n\n    hasMarkupEnabled() {\n        return this.getMessageThread().hasMarkupEnabled();\n    }\n\n    getTimeOfDay() {\n        return StemDate.unix(this.timeAdded).format(\"HH:mm\");\n    }\n\n    edit(content, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            message: content,\n        }).then(onSuccess, onError);\n    }\n\n    react(reaction, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            reaction: reaction,\n        }).then(onSuccess, onError);\n    }\n\n    like(onSuccess, onError) {\n        this.react(\"like\", onSuccess, onError);\n    }\n\n    dislike(onSuccess, onError) {\n        this.react(\"dislike\", onSuccess, onError);\n    }\n\n    resetReaction(onSuccess, onError) {\n        this.react(\"resetReaction\", onSuccess, onError);\n    }\n\n    deleteMessage(onSuccess, onError) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    applyEvent(event) {\n        if (event.type === \"messageEdit\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"edit\", event);\n        } else if (event.type === \"reaction\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"reaction\", event);\n        } else if (event.type === \"messageDelete\") {\n            this.dispatch(\"delete\", event);\n            this.getMessageThread().deleteMessageInstance(this);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    updateId(newId) {\n        if (this.id == newId) {\n            return;\n        }\n        let oldId = this.id;\n        super.updateId(newId);\n        let messageThread = this.getMessageThread();\n        messageThread.messages.delete(oldId);\n        messageThread.messages.set(this.id, this);\n    }\n\n    setPostError(postError) {\n        this.postError = postError;\n        this.dispatch(\"postError\", postError);\n        console.log(\"Post error: \", postError);\n    }\n}\n\nclass MessageThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.messages = new Map();\n        // TODO: for now don't register for private chats, you get them as user events\n        // TODO: don't change the global here, you fool!\n        if (!this.streamName.startsWith(\"messagethread-privatechat-\")) {\n            GlobalState.registerStream(this.streamName);\n        }\n        this.online = new Set(this.online || []);\n        this.online.delete(0);\n    }\n\n    hasMarkupEnabled() {\n        return this.markupEnabled || false;\n    }\n\n    addMessageInstance(messageInstance, event) {\n        this.messages.set(messageInstance.id, messageInstance);\n        this.dispatch(\"newMessage\", event);\n    }\n\n    deleteMessageInstance(messageInstance) {\n        this.messages.delete(messageInstance.id);\n    }\n\n    applyEvent(event) {\n        if (event.data.online) {\n            this.online = event.data.online = new Set(event.data.online);\n            this.online.delete(0);\n        }\n        if (event.type === \"online\") {\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaJoined\") {\n            if (event.data.userId != 0) {\n                this.online.add(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaLeft\") {\n            if (event.data.userId != 0) {\n                this.online.delete(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    getMessages(orderDescending=false) {\n        // TODO: should be also as iterable\n        let messages = Array.from(this.messages.values());\n        if (orderDescending) {\n            return messages.sort((a, b) => {return b.id - a.id});\n        }\n        return messages.sort((a, b) => {return a.id - b.id});\n    }\n\n    getNumMessages() {\n        return this.messages.size;\n    }\n\n    getMaxMessageId() {\n        let value = 0;\n        for (let messageInstance of this.messages.values()) {\n            if (!messageInstance.hasTemporaryId() && messageInstance.id > value) {\n                value = messageInstance.id;\n            }\n        }\n        return value;\n    }\n\n    // This method will return the last message of the message thread,\n    // regardless of whether it is virtual or real.\n    getLastMessage() {\n        let lastMessage = null;\n        for (let messageInstance of this.messages.values()) {\n            if (!lastMessage || lastMessage.getNormalizedId() < messageInstance.getNormalizedId() ||\n                    (lastMessage.getNormalizedId() === messageInstance.getNormalizedId() && messageInstance.hasTemporaryId())) {\n                lastMessage = messageInstance;\n            }\n        }\n        return lastMessage;\n    }\n}\n\nclass MessageInstanceStoreClass extends VirtualStoreMixin(GenericObjectStore) {\n    constructor() {\n        super(\"MessageInstance\", MessageInstance, {dependencies: [\"messagethread\", \"publicuser\"]});\n    }\n\n    createVirtualMessageInstance(messageContent, messageThread, temporaryId) {\n        let virtualMessageInstance = {\n            content: messageContent,\n            temporaryId: temporaryId,\n            id: \"temp-\" + temporaryId,\n            timeAdded: ServerTime.now().toUnix(),\n            userId: parseInt(USER.id),\n            messageThreadId: messageThread.id,\n            meta: {},\n        };\n\n        return this.fakeCreate(virtualMessageInstance, \"virtualMessage\");\n    };\n}\n\nvar MessageInstanceStore = new MessageInstanceStoreClass();\n\nMessageInstanceStore.addCreateListener((messageInstance, createEvent) => {\n    messageInstance.getMessageThread().addMessageInstance(messageInstance, createEvent);\n});\n\n\nvar MessageThreadStore = new GenericObjectStore(\"messagethread\", MessageThread);\n\nclass BaseChatObject extends StoreObject {\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getOnlineUserIds() {\n        return this.getMessageThread().online;\n    }\n}\n\nclass GroupChat extends BaseChatObject {\n}\n\nvar GroupChatStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar GroupChatStore = new GroupChatStoreClass(\"groupChat\", GroupChat, {\n    fetchURL: \"/chat/group_chat_state/\",\n    maxFetchObjectCount: 1,\n});\n\nGroupChatStore.getFetchRequestData = function (ids, fetchJobs) {\n    return {\n        chatId: ids[0],\n    };\n};\n\nclass PrivateChat extends BaseChatObject {\n    getOtherUserId() {\n        return (USER.id === this.user1Id ? this.user2Id : this.user1Id);\n    }\n}\n\nvar PrivateChatStore = new GenericObjectStore(\"PrivateChat\", PrivateChat, {\n});\n\nPrivateChatStore.getChatWithUser = function(userId) {\n    let myUserId = USER.id;\n    if (myUserId === userId) {\n        for (let privateChat of this.all()) {\n            if (privateChat.user1Id === userId && privateChat.user2Id === userId) {\n                return privateChat;\n            }\n        }\n        return null;\n    }\n    for (let privateChat of this.all()) {\n        if (privateChat.user1Id === userId || privateChat.user2Id === userId) {\n            return privateChat;\n        }\n    }\n};\n\nPrivateChatStore.fetchForUser = function (userId, onSuccess, onError) {\n    Ajax.postJSON(\"/chat/private_chat_state/\", {\n        userId: userId,\n    }).then(\n        (data) => onSuccess(PrivateChatStore.get(data.privateChatId)),\n        onError\n    );\n};\n\nPrivateChatStore.addListener(\"update\", (obj, event) => {\n    if (event.type === \"privateMessage\") {\n        GlobalState.importState(event.state);\n    }\n});\n\nexport {MessageInstance, MessageInstanceStore, MessageThread, MessageThreadStore, PrivateChatStore, GroupChatStore};\n","import {UI, FloatingWindow, Direction, Panel, Button} from \"UI\";\nimport {Device} from \"Device\";\n\nexport class BasePopup extends FloatingWindow {\n    static bodyPopups = new Set();\n\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.x = 0;\n        options.y = 0;\n        options.contentPadding = \"7px\";\n        options.contentStyle = {};\n        options.arrowDirection = Direction.UP;\n        options.arrowColor = \"white\";\n        options.backgroundColor = \"white\";\n        return options;\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.style = Object.assign({\n            boxShadow: \"0px 0px 4px rgba(0,0,0,0.5)\",\n            borderRadius: \"5px\",\n            display: \"table\",\n            maxWidth: \"350px\",\n            backgroundColor: this.options.backgroundColor,\n            position: \"absolute\",\n            left: (this.options.x) + \"px\",\n            top: (this.options.y) + \"px\",\n            zIndex: \"3\",\n            right: \"0px\"\n        }, this.options.style);\n        this.createArrowStyle();\n    }\n\n    setContent(content) {\n        this.options.children = content;\n        this.redraw();\n    }\n\n    getContent() {\n        return <div style={Object.assign({padding: this.options.contentPadding}, this.options.contentStyle)} ref=\"contentArea\">\n                {this.options.children}\n            </div>;\n    }\n\n    createArrowStyle() {\n        let baseArrowOutline = {\n            \"left\": \"50%\",\n            \"z-index\": \"-3\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n            marginLeft: \"-11px\"\n        };\n\n        this[\"arrow\" + Direction.UP + \"Outline\"] = Object.assign({\n            \"border-bottom\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"-10.8px\",\n            marginLeft: \"-11px\"\n        }, baseArrowOutline);\n\n        this[\"arrow\" + Direction.DOWN + \"Outline\"] = Object.assign({\n            \"border-top\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"2px\"\n        }, baseArrowOutline);\n\n        let baseArrow = {\n            \"left\": \"50%\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n        };\n\n        this[\"arrow\" + Direction.UP] = Object.assign({\n            \"margin-top\": \"-10px\",\n            \"border-bottom\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n\n        this[\"arrow\" + Direction.DOWN] = Object.assign({\n            \"border-top\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n    }\n\n    getArrow() {\n        let direction = this.options.arrowDirection;\n        return [\n            <Panel ref=\"popupArrow\" style={this[\"arrow\" + direction]}/>,\n            <Panel ref=\"popupArrowOutline\" style={this[\"arrow\" + direction + \"Outline\"]} />\n        ];\n    }\n\n    render() {\n        return (this.options.arrowDirection === Direction.UP) ?\n            [this.getArrow(), this.getContent()] :\n            [this.getContent(), this.getArrow()];\n    }\n\n    bindInsideParent() {\n        if (this.target) {\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = (this.options.arrowDirection === Direction.UP ? this.target.offsetHeight : 0);\n        }\n        let left = parseFloat(this.options.x);\n        let top = parseFloat(this.options.y) + (this.options.arrowDirection === Direction.UP ? 11 : - this.getHeight() - 11);\n        let arrowMargin = -11;\n        left -= this.getWidth() / 2;\n        if (this.options.bodyPlaced && this.target) {\n            const rect = this.target.getBoundingClientRect();\n            left += rect.left;\n            top += rect.top;\n        }\n        if (this.target && !this.options.bodyPlaced) {\n            if (this.node.offsetParent && !this.options.bodyPlaced) {\n                let left2 = left + this.node.offsetParent.offsetLeft;\n                if (left2 < 0) {\n                    left -= left2 - 2;\n                    arrowMargin += left2 + 2;\n                } else if (left2 + this.getWidth() > this.node.offsetParent.offsetParent.offsetWidth) {\n                    let delta = this.node.offsetParent.offsetParent.offsetWidth - (left2 + this.getWidth());\n                    arrowMargin -= delta - 2;\n                    left += delta - 2;\n                }\n            }\n        } else {\n            if (left < 0) {\n                arrowMargin += left + 2;\n                left = 2;\n            } else if (left + this.getWidth() > this.parentNode.offsetWidth) {\n                let delta = left + this.getWidth() - this.parentNode.offsetWidth;\n                arrowMargin += delta;\n                left -= delta;\n            }\n        }\n        this.popupArrow.setStyle(\"margin-left\", arrowMargin + \"px\");\n        this.popupArrowOutline.setStyle(\"margin-left\", arrowMargin + \"px\");\n\n        this.setStyle(\"left\", left + \"px\");\n        this.setStyle(\"top\", top + \"px\");\n    }\n\n    setParent(parent) {\n        let newParent;\n        if (parent instanceof HTMLElement) {\n            newParent = parent;\n        } else {\n            newParent = parent.node;\n        }\n        if (newParent === this.parentNode) {\n            return;\n        }\n        if (this.isInDocument()) {\n            this.parentNode.removeChild(this.node);\n            newParent.appendChild(this.node);\n            this.setParentNode(newParent);\n        } else {\n            this.setParentNode(newParent);\n        }\n    }\n\n    setCenter(center, manual=false) {\n        this.options.x = center.x;\n        this.options.y = center.y;\n        if (manual) {\n            setTimeout(() => {\n                this.bindInsideParent();\n            }, 0);\n        } else {\n            this.bindInsideParent();\n        }\n    }\n\n    static clearBodyPopups() {\n        for (const popup of this.bodyPopups) {\n            popup.hide();\n        }\n        this.bodyPopups.clear();\n    }\n\n    onUnmount() {\n        super.onUnmount();\n        if (this.options.bodyPlaced && this.target) {\n            this.constructor.bodyPopups.delete(this);\n        }\n    }\n\n    onMount() {\n        if(this.options.target) {\n            if (this.options.target instanceof HTMLElement) {\n                this.target = this.options.target;\n            } else {\n                this.target = this.options.target.node;\n            }\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = this.target.offsetHeight;\n        }\n        super.onMount();\n        // Set the Popup inside the parent\n        this.bindInsideParent();\n        if (this.options.bodyPlaced && this.target) {\n            this.constructor.bodyPopups.add(this);\n        }\n    }\n}\n\nexport class Popup extends BasePopup {\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.titleFontSize = \"12pt\";\n        options.contentFontSize = \"10pt\";\n        options.arrowColor = \"#F3F3F3\";\n        return options;\n    }\n\n    getContent() {\n        let contentArea = super.getContent();\n        contentArea.options.style = Object.assign({\n            fontSize: this.options.contentFontSize\n        }, contentArea.options.style || {});\n\n        return [<Panel ref=\"titleArea\" style={{backgroundColor: \"#F3F3F3\", paddingLeft: \"20px\", fontSize: this.options.titleFontSize,\n                fontWeight:\"bold\", paddingTop: \"6px\", paddingBottom: \"6px\", textAlign: \"center\",\n                borderBottom: \"1px solid #BEBEBE\"}}>\n                {this.getTitleAreaContent()}\n            </Panel>,\n            contentArea,\n        ];\n    }\n\n    setTitle(newTitle) {\n        this.options.title = newTitle;\n        this.redraw();\n    }\n\n    getTitleAreaContent() {\n        return [<Button className=\"pull-right\" ref=\"closeButton\" style={{backgroundColor:\"transparent\",border: \"none\", color: \"#888888\", fontSize:\"18pt\", padding:\"2px\", marginRight:\"3px\", marginTop:\"-12px\"}} label=\"\"/>,\n            <div style={{marginRight: \"25px\"}}>{this.options.title}</div>\n        ];\n    }\n\n    bindWindowListeners() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n\n        let documentListener = () => {\n            this.hide();\n            if (!Device.supportsEvent(\"click\")) {\n                document.removeEventListener(\"touchstart\", documentListener);\n            } else {\n                document.removeEventListener(\"click\", documentListener);\n            }\n        };\n        if (!Device.supportsEvent(\"click\")) {\n            document.addEventListener(\"touchstart\", documentListener);\n        } else {\n            document.addEventListener(\"click\", documentListener);\n        }\n\n    }\n\n    show() {\n        super.show();\n        this.bindWindowListeners();\n    }\n\n    redraw() {\n        if (this.isInDocument()) {\n            this.bindInsideParent();\n        }\n        super.redraw();\n    }\n\n    onMount() {\n        super.onMount();\n\n        // fake a click event that will propagate to window and trigger\n        // the events of any other popup, closing them\n        let fakeClickEvent = document.createEvent(\"MouseEvents\");\n        fakeClickEvent.initEvent(\"click\", true, false);\n        document.body.dispatchEvent(fakeClickEvent);\n\n        // Make the popup close when something else is clicked\n        this.bindWindowListeners();\n\n        // Close button behavior\n        this.closeButton.addClickListener(() => {\n            this.hide();\n            this.closeButton.node.blur();\n        });\n        let closeButtonColor = this.closeButton.options.style.color;\n        this.closeButton.addNodeListener(\"mouseover\", () => {\n            this.closeButton.setStyle(\"color\", \"#0082AD\");\n        });\n        this.closeButton.addNodeListener(\"mouseout\", () => {\n            this.closeButton.setStyle(\"color\", closeButtonColor);\n        });\n    }\n}\n","import {UI, Button, Link, Modal, Level, Size, Direction} from \"UI\";\nimport {MarkupEditor} from \"./MarkupEditor\";\nimport {BasePopup} from \"../Popup\";\n// import {Emoji as EmojiMini} from \"EmojiMini\";\n// import \"EmojiUI\";\n\nUI.Emoji = UI.Emoji || UI.Element;\n\nclass ClickableEmote extends UI.Emoji {\n    redraw() {\n        this.redrawTimeout = setTimeout(()=> super.redraw());\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            const textBox = this.options.textBox;\n            if (textBox) {\n                textBox.appendValue(this.getValueText(), \" \");\n            }\n            if (this.options.afterClick) {\n                this.options.afterClick();\n            }\n        });\n    }\n\n    onUnmount() {\n        clearTimeout(this.redrawTimeout);\n    }\n}\n\nclass ClickableEmoji extends ClickableEmote {\n    getValueText() {\n        return \":\" + this.options.value + \":\";\n    }\n}\n\nclass ClickableTwitchEmote extends ClickableEmote {\n    getValueText() {\n        return this.options.value;\n    }\n}\n\nclass EmojiButton extends Button {\n    getPopup() {\n        const textBox = this.options.getTextBox();\n        const afterClick = () => this.closePopup();\n        let emotesList = [];\n        for (let emoji in EmojiMini.EMOJI) {\n            emotesList.push(<ClickableEmoji textBox={textBox} afterClick={afterClick} value={emoji}/>);\n        }\n        for (let twitchEmoji in EmojiMini.TWITCH_EMOTICONS) {\n            emotesList.push(<ClickableTwitchEmote textBox={textBox} afterClick={afterClick} value={twitchEmoji}/>);\n        }\n        return BasePopup.create(this.parent, {\n                target: this,\n                children: emotesList,\n                arrowDirection: Direction.DOWN,\n                style: {\n                    display: \"flex\",\n                    overflow: \"auto\",\n                    height: \"300px\",\n                    width: \"300px\",\n                }\n            });\n    }\n\n    closePopup() {\n        if (this.emojiPopup) {\n            this.emojiPopup.destroyNode();\n            delete this.emojiPopup;\n        }\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            if (this.emojiPopup) {\n                this.closePopup();\n            } else {\n                this.emojiPopup = this.getPopup();\n            }\n        })\n    }\n\n    onUnmount() {\n        this.closePopup();\n    }\n}\n\nclass MarkupEditorModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            height: \"85%\",\n            width: \"80%\",\n            destroyOnHide: false\n        });\n    }\n\n    getMarkupEditorStyle() {\n        return {\n            height: \"85%\",\n            border: \"solid 5px #DDD\",\n            borderRadius: \"10px\"\n        };\n    }\n\n    getButtonStyle() {\n        return {\n            margin: \"5px\"\n        }\n    }\n\n    render() {\n        return [\n            <MarkupEditor ref={this.refLink(\"markupEditor\")} classMap={this.options.classMap} showButtons={false} style={this.getMarkupEditorStyle()}/>,\n            <div ref={this.refLink(\"buttonPanel\")} style={{\"text-align\": \"center\"}} >\n                <Button ref=\"graphExample\" label=\"Graph\"\n                           onClick={() => {this.appendGraphExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"submissionExample\" label=\"Submission\"\n                           onClick={() => {this.appendSubmissionExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"codeSnippetExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Code\"\n                           onClick={() => {this.appendCodeExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"linkExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Link\"\n                           onClick={() => {this.appendLinkExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"latexExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"LaTeX\"\n                           onClick={() => {this.appendLatexExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref={this.refLink(\"doneButton\")} level={Level.PRIMARY} label=\"Done\"\n                           className=\"pull-right\" style={this.getButtonStyle()}/>\n            </div>,\n            //<span ref={this.refLink(\"emotesContainer\")} style={{float: \"left\", position: \"relative\", margin: \"5px\"}}>\n            //    <EmojiButton ref=\"emotes\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Emoticons\" getTextBox={() => this.markupEditor}/>\n            //</span>\n            //<Button ref=\"userExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"User\"\n            //           onClick={() => {this.appendUserExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n            <div className=\"\" style={{\"position\":\"absolute\", \"width\":\"90%\", \"margin-top\":\"45px\"}}>\n                <Link href=\"/about/#markup\" value=\"More details here\" />\n            </div>\n        ];\n    }\n\n    appendLatexExample() {\n        this.markupEditor.appendValue(\"$$lim_{x\\\\to\\\\infty} f(x)$$\");\n    }\n\n    appendGraphExample() {\n        this.markupEditor.appendValue(\"<Graph nodes={[{}, {}, {}]} edges={[{source:1, target:2}]} directed />\");\n    }\n\n    appendSubmissionExample() {\n        this.markupEditor.appendValue(\"<Submission id={25717} />\");\n    }\n\n    appendCodeExample() {\n        this.markupEditor.appendValue(\n            \"```java\\n\" +\n            \"class Main {\\n\" +\n            \"    public static void main (String[] args) throws java.lang.Exception {\\n\" +\n            \"        System.out.println(\\\"42\\\");\\n\" +\n            \"    }\\n\" +\n            \"}\\n\" +\n            \"```\");\n    }\n\n    appendUserExample() {\n        this.markupEditor.appendValue(\"<User id={1} />\");\n    }\n\n    appendLinkExample() {\n        this.markupEditor.appendValue(\"<Link href=\\\"https://csacademy.com\\\" value=\\\"Cool website\\\" newTab/>\");\n    }\n\n    hide() {\n        super.hide();\n        if (this.options.hideCallback) {\n            this.options.hideCallback(this);\n        }\n    }\n\n    show() {\n        super.show();\n        if (this.options.showCallback) {\n            this.options.showCallback(this);\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport {MarkupEditorModal};\n","import {UI} from \"UI\";\nimport {MarkupClassMap, MarkupRenderer} from \"markup/MarkupRenderer\";\n\nclass ChatMarkupRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = this.constructor.classMap;\n        super.setOptions(options);\n    }\n}\n\nChatMarkupRenderer.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n\nexport {ChatMarkupRenderer};\n","import {Dispatchable} from \"./Dispatcher\";\n\nclass ScriptResolver extends Dispatchable {\n    constructor(scriptPath) {\n        super();\n        this.loaded = false;\n        this.jobs = [];\n        // TODO: should be more thought out\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.async = true;\n        scriptElement.src = scriptPath;\n        scriptElement.onload = () => this.onLoad();\n        // TODO: what about error?\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoad() {\n        this.loaded = true;\n        for (let i = 0; i < this.jobs.length; i += 1) {\n            this.jobs[i](this);\n        }\n        this.jobs = [];\n    }\n\n    resolve(callback) {\n        if (this.loaded) {\n            callback(this);\n            return;\n        }\n        this.jobs.push(callback);\n    }\n}\n\nlet scriptResolveMap = new Map();\n\nfunction ensureSingle(script) {\n    let scriptResolver = scriptResolveMap.get(script);\n    if (!scriptResolver) {\n        scriptResolver = new ScriptResolver(script);\n        scriptResolveMap.set(script, scriptResolver);\n    }\n    return new Promise(function(resolve, reject) {\n        scriptResolver.resolve(resolve, reject);\n    });\n}\n\nfunction ensure(scripts, callback) {\n    if (!Array.isArray(scripts)) {\n        scripts = [scripts];\n    }\n    let promises = scripts.map(script => ensureSingle(script));\n    Promise.all(promises).then(function () {\n        callback(...arguments);\n    })\n}\n\nexport {ensure};\n","import {StoreObject, GenericObjectStore} from \"Store\";\n\nimport {Language} from \"./LanguageStore\";\n\n\nclass TranslationKey extends StoreObject {\n}\n\nexport const TranslationKeyStore = new GenericObjectStore(\"TranslationKey\", TranslationKey);\n\nclass TranslationEntry extends StoreObject {\n    getLanguage() {\n        return Language.get(this.languageId);\n    }\n\n    getTranslationKey() {\n        return TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nexport const TranslationEntryStore = new GenericObjectStore(\"TranslationEntry\", TranslationEntry);\n\nLanguage.addListener(\"buildTranslationMap\", (language) => {\n    for (let translationEntry of TranslationEntryStore.all()) {\n        if (translationEntry.languageId === language.id) {\n            language.translationMap.set(translationEntry.getTranslationKey().value, translationEntry.value);\n        }\n    }\n});\n","import {GenericObjectStore, StoreObject} from \"Store\";\nimport {TranslationKeyStore} from \"TranslationStore\";\n\nclass ErrorMessage extends StoreObject {\n    getTranslation() {\n        let translationKey = TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nclass ErrorMessageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"ErrorMessage\", ErrorMessage);\n    }\n}\n\nlet ErrorMessageStore = new ErrorMessageStoreClass();\n\nexport {ErrorMessageStore, ErrorMessage};\n","import {UI, ErrorModal} from \"UI\";\nimport {StoreObject} from \"Store\";\nimport {ErrorMessageStore, ErrorMessage} from \"ErrorMessageStore\";\n\nconst ErrorHandlers = {};\n\nErrorHandlers.wrapError = (error) => {\n    if (error instanceof StoreObject) {\n        return error;\n    }\n\n    if (error.id) {\n        return ErrorMessageStore.fakeCreate(error);\n    } else {\n        if (typeof error === \"string\" || error instanceof String) {\n            error = {message: error};\n        } else if (error instanceof Error) {\n            error = {\n                name: error.name,\n                message: error.message\n            };\n        }\n        return new ErrorMessage(error);\n    }\n};\n\nErrorHandlers.showErrorAlert = (error) => {\n    ErrorModal.show({\n        error: ErrorHandlers.wrapError(error)\n    });\n};\n\nErrorHandlers.PAGE_NOT_FOUND = ErrorHandlers.wrapError(\"Page not found.\");\n\nexport {ErrorHandlers};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\n\nclass SocialAccountManager extends Dispatchable {\n    constructor(socialApp, options) {\n        super();\n        this.socialApp = socialApp;\n        this.options = options;\n    }\n\n    getSocialApp() {\n        return this.socialApp;\n    }\n\n    getClientId() {\n        return this.getSocialApp().getClientId();\n    }\n\n    setLoaded() {\n        this.loaded = true;\n        this.dispatch(\"loaded\");\n    }\n\n    static getInstance() {\n        if (!this._Global) {\n            this._Global = new this();\n        }\n        return this._Global;\n    }\n\n    // TODO: all managers should call the onError function (if one is passed in) to report issues\n    static login(callback, onError) {\n        this.getInstance().login(...arguments);\n    }\n\n    static connect(callback, onError) {\n        this.getInstance().connect(...arguments);\n    }\n}\n\nexport {SocialAccountManager};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class SocialApp extends StoreObject {\n    getClientId() {\n        return this.clientId;\n    }\n}\n\nclass SocialAppStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"SocialApp\", SocialApp);\n    }\n\n    getSocialApps() {\n        return this.all();\n    }\n\n    getSocialAppByName(name) {\n        return this.all().find(socialApp => socialApp.name === name);\n    }\n}\n\nexport let SocialAppStore = new SocialAppStoreClass();\n","import {Ajax} from \"Ajax\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {NOOP_FUNCTION} from \"Utils\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass GoogleManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Google\"), {\n            loginByTokenUrl: \"/accounts/google/login/token/\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data, onSuccess=NOOP_FUNCTION) {\n        Ajax.postJSON(url, data).then(onSuccess);\n    }\n\n    ensureScriptNodeExists() {\n        const id = \"google-jsapi\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.onload = () => {\n            gapi.load(\"auth2\", () => {\n                gapi.auth2.init({\n                    client_id: this.getClientId(),\n                }).then(() => {\n                    // Handle the initial sign-in state.\n                    // this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n                    this.updateSigninStatus(this.getGoogleAuth().isSignedIn.get());\n\n                    // Listen for sign-in state changes.\n                    // gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n                    this.getGoogleAuth().isSignedIn.listen(this.updateSigninStatus);\n\n                    this.setLoaded();\n                });\n            });\n        };\n        scriptElement.src = \"https://apis.google.com/js/platform.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    getGoogleAuth() {\n        return gapi.auth2.getAuthInstance();\n    }\n\n    getGoogleUser() {\n        return this.getGoogleAuth().currentUser.get();\n    }\n\n    getAuthResponse() {\n        return this.getGoogleUser().getAuthResponse();\n    }\n\n    updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n            console.log(\"Google user is signed in\");\n        }\n    }\n\n    handleProcess(process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n        this.getGoogleAuth().grantOfflineAccess({\n            redirect_uri: \"postmessage\",\n            immediate: false,\n        }).then((data) => {\n            Object.assign(data, {\n                process: process,\n            });\n            this.sendData(this.options.loginByTokenUrl, data, () => self.location.reload());\n        });\n    }\n\n    login() {\n        this.handleProcess(\"login\");\n    }\n\n    connect() {\n        this.handleProcess(\"connect\")\n    }\n}\n\nexport {GoogleManager};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass FacebookManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Facebook\"), {\n            version: \"v2.7\",\n            loginByTokenUrl: \"/accounts/facebook/login/token/\",\n            loginOptions: {\n                auth_type: \"rerequest\",\n                scope: \"email\"\n            },\n            logoutUrl: \"/accounts/logout/\",\n            // TODO: should probably look at https://www.facebook.com/translations/FacebookLocales.xml and Language.Locale\n            locale: \"en_US\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data) {\n        Ajax.postJSON(url, data).then(\n            (data) => {\n                if (data.next) {\n                    self.location.href = data.next;\n                } else {\n                    location.reload();\n                }\n            },\n            (error) => {\n                this.dispatch(\"loginError\", error);\n            }\n        );\n    }\n\n    ensureScriptNodeExists() {\n        self.fbAsyncInit = () => {\n            FB.init({\n                appId: this.getClientId(),\n                version: this.options.version,\n                status: true,\n                cookie: true,\n                xfbml: true\n            });\n\n            this.setLoaded();\n        };\n\n        const id = \"facebook-jssdk\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.src = \"//connect.facebook.net/\" + this.options.locale + \"/sdk.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoginCanceled(response) {\n    }\n\n    onLoginError(response) {\n    }\n\n    onLoginSuccess(response, nextUrl, process) {\n        let data = {\n            next: nextUrl || '',\n            process: process,\n            accessToken: response.authResponse.accessToken,\n            expiresIn: response.authResponse.expiresIn\n        };\n        this.sendData(this.options.loginByTokenUrl, data);\n    }\n\n    logout() {\n        if (!self.FB) {\n            return;\n        }\n        FB.logout((response) => {\n            this.onLogoutSuccess(response, nextUrl);\n        });\n    }\n\n    onLogoutSuccess(response) {\n        if (this.options.logoutUrl) {\n            this.sendData(this.options.logoutUrl, data);\n        }\n    }\n\n    handleProcess(nextUrl, action, process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n\n        if (action === \"reauthenticate\") {\n            this.options.loginOptions.auth_type = action;\n        }\n\n        FB.login((response) => {\n            if (response.authResponse) {\n                this.onLoginSuccess(response, nextUrl, process);\n            } else if (response && response.status && [\"not_authorized\", \"unknown\"].indexOf(response.status) > -1) {\n                this.onLoginCanceled(response);\n            } else {\n                this.onLoginError(response);\n            }\n        }, this.options.loginOptions);\n    }\n\n    login(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"login\");\n    }\n\n    connect(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"connect\");\n    }\n}\n\nexport {FacebookManager};\n","import {composeURL} from \"Fetch\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass GithubManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Github\"), {\n            loginWindowOptions: \"height=600,width=800,scrollbars=yes\",\n        });\n    }\n\n    login(callback) {\n        const githubUri = \"https://github.com/login/oauth/authorize\";\n\n        const rawParams = {\n            client_id: this.getClientId(),\n        };\n\n        const uri = composeURL(githubUri, rawParams);\n        const githubWindow = window.open(uri, \"githubWindow\", this.options.loginWindowOptions);\n\n        githubWindow.onbeforeunload = callback;\n    }\n}\n\nexport {GithubManager};\n","import {StoreObject, GenericObjectStore} from \"Store\";\n\nclass Country extends StoreObject {\n    toString() {\n        return this.name;\n    }\n\n    getIsoCode() {\n        return this.isoCode;\n    }\n\n    getEmojiName() {\n        return \"flag_\" + this.getIsoCode().toLowerCase()\n    }\n}\n\nconst ALL_COUNTRIES_PLACEHOLDER = (name) => ({id: 0, name: \"\", toString: () => name || \"All Countries\"});\nconst NO_COUNTRY_PLACEHOLDER = (name) => ({id: -1, name: \"\", toString: () => name || \"None\"});\n\nconst COUNTRY_COMPARATOR = (a, b) => {\n    if (a.name > b.name) {\n        return 1;\n    }\n    return -1;\n};\n\nclass CountryStoreClass extends GenericObjectStore {\n    allWithNone(noneName=\"None\") {\n         return [\n            NO_COUNTRY_PLACEHOLDER(noneName),\n            ...this.all().sort(COUNTRY_COMPARATOR)\n        ];\n    }\n\n    getCountriesFromIds(countriesIds, allCountries=true) {\n        let countries = [];\n        for (let countryId of countriesIds) {\n            countries.push(CountryStore.get(countryId));\n        }\n        let result = countries.sort(COUNTRY_COMPARATOR);\n        if (allCountries) {\n            result.unshift(ALL_COUNTRIES_PLACEHOLDER());\n        }\n        return result;\n    }\n}\n\nconst CountryStore = new CountryStoreClass(\"country\", Country);\n\n\nexport {Country, CountryStore, ALL_COUNTRIES_PLACEHOLDER};\n","import {StyleSheet, styleRule} from \"UI\";\nimport {Device} from \"Device\";\n\n\nlet loginHeight = 500;\nlet registerHeight = 500;\nlet width = 500;\nlet buttonHeight = 60;\nlet fontAwesomeIconHeight = 40;\nlet fontAwesomeIconWidth = 60;\nlet textColor = \"#252525\";\nlet signInButtonHeight = 50;\nlet signInButtonWidth = 120;\n\n\nclass LoginStyle extends StyleSheet {\n\n    @styleRule\n    loginRegisterSystem = () => {\n        if (Device.isTouchDevice()) {\n            console.log(\"Touch device mode on\");\n            return {\n                position: \"absolute\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                backgroundColor: \"#fff\",\n                maxHeight: \"100%\",\n                maxWidth: \"100%\",\n            };\n        } else {\n            return {\n                maxWidth: \"100%\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                margin: \"0 auto\",\n                backgroundColor: \"#fff\",\n            };\n        }\n    };\n\n    @styleRule\n    loginRegisterButtons = {\n        display: \"inline-block\",\n        float: \"left\",\n        width: \"100%\",\n        height: buttonHeight / loginHeight * 100 + \"%\",\n    };\n\n    @styleRule\n    loginSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderLeft: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    @styleRule\n    registerSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderRight: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    selectedLeft = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedLeftClass = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    selectedRight = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedRightClass = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    loginWidget = {\n        height: loginHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    @styleRule\n    registerWidget = {\n        height: registerHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    fontAwesomeIcon = {\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        width: \"15%\",\n        maxWidth: \"15%\",\n        textAlign: \"center\",\n        fontSize: \"150%\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderTopLeftRadius: \"5px\",\n        borderBottomLeftRadius: \"5px\",\n        borderRight: \"0px solid white\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    input = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderRadius: \"0\",\n        borderTopRightRadius: \"5px\",\n        borderBottomRightRadius: \"5px\",\n        marginTop: \"20px\",\n        fontWeight: \"bold\",\n        color: textColor,\n        border: \"0px solid #d3d5d9\",\n        borderLeft: \"0px solid white\",\n        boxShadow: \"none\",\n        fontSize: \"85%\",\n        \":focus\": {\n            boxShadow: \"none\",\n            outline: \"none\",\n            border: \"0px solid #d3d5d9\",\n            borderLeft: \"0px solid white\",\n        }\n    };\n\n    @styleRule\n    countrySelect = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        lineHeight: \"30px\",\n        marginTop: \"30px\",\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    badLogin = {\n        height: \"30px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: this.themeProperties.COLOR_DANGER,\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    rememberMe = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"5px\",\n    };\n\n    @styleRule\n    rememberMeCheckbox = {\n        float: \"left\"\n    };\n\n    @styleRule\n    forgotPassword = {\n        display: \"inline-block\",\n        float: \"right\",\n        paddingRight: \"5px\",\n    };\n\n    @styleRule\n    signInButtonContainer = {\n        width: \"100%\",\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        margin: \"20px auto\"\n    };\n\n    @styleRule\n    signInButton = {\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        backgroundColor: \"#f6f6f6\",\n        marginTop: \"20px\",\n        minWidth: signInButtonWidth + \"px\",\n        height: signInButtonHeight + \"px\",\n        textAlign: \"center\",\n        lineHeight: signInButtonHeight + \"px\",\n        border: \"0px solid #d3d5d9\",\n        fontSize: \"18px\",\n        color: \"#252525\",\n        \":hover\": {\n            border: \"0px solid #0b79a7\",\n            borderBottom: \"2px solid #0b79a7\",\n            color: \"#0b79a7\",\n        }\n    };\n\n    @styleRule\n    horizontalLine = {\n        borderBottom: \"1px solid #d3d5d9\",\n        width: \"100%\",\n        marginTop: \"20px\",\n    };\n\n    connectWith = {\n        width: \"100%\",\n        textAlign: \"center\",\n        marginTop: \"20px\",\n    };\n\n    connectIcons = {\n        width: \"60%\",\n        marginLeft: \"20%\",\n        marginRight: \"20%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    faLogo = {\n        height: \"40px\",\n        paddingLeft: \"15px\",\n        paddingRight: \"15px\",\n        borderRadius: \"3px\",\n        textAlign: \"center\",\n        fontSize: \"18px\",\n        marginLeft: \"5px\",\n        marginRight: \"5px\",\n        transition: \".2s\",\n        color: \"#fff\",\n        \":hover\": {\n            transition: \".2s\",\n            opacity: \".9\",\n        },\n        cursor: \"pointer\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    recaptchaContainer = {\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    connectWithButtonsSpan = {\n        paddingLeft: \"15px\",\n        fontSize: \"15px\",\n    };\n\n    @styleRule\n    thirdPartyLoginContainer = {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexWrap: \"wrap\",\n        margin: \"15px 0\",\n    };\n\n    socialConnectDimensions = \"35px\";\n\n    @styleRule\n    socialConnectButtonContainer = {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: this.socialConnectDimensions,\n        color: \"#fff\",\n        paddingRight: \"10px\",\n        borderRadius: \"5px\",\n        margin: \"5px\",\n        outline: \"none\",\n        paddingTop: \"0\",\n        cursor: \"pointer\",\n        fontSize: \"13px\",\n        border: \"0\",\n        \":hover\": {\n            opacity: \".85\",\n        }\n    };\n\n    @styleRule\n    socialConnectButtonIcon = {\n        height: this.socialConnectDimensions,\n        width: this.socialConnectDimensions,\n        display: \"flex !important\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n}\n\n\nexport {LoginStyle}\n","import {\n    UI,\n    BasicTabTitle,\n    CheckboxInput,\n    EmailInput,\n    TextInput,\n    Link,\n    PasswordInput,\n    SubmitInput,\n    Switcher,\n    Select,\n    registerStyle,\n    TemporaryMessageArea,\n    Theme\n} from \"UI\";\n\nimport {ensure} from \"Require\";\nimport {Ajax} from \"Ajax\";\nimport {GoogleManager} from \"./GoogleManager\";\nimport {FacebookManager} from \"./FacebookManager\";\nimport {GithubManager} from \"./GithubManager\";\nimport {CountryStore} from \"CountryStore\";\n\nimport {FAIcon} from \"FontAwesome\";\nimport {LoginStyle} from \"./LoginStyle\";\n\nimport {SocialAppStore} from \"SocialAppStore\";\n\nconst ERROR_TIMEOUT = 6 * 1000;\n\nconst accountsConfig = {\n    username: true,\n    country: true,\n};\n\nconst socialLoginSpecificInfo = {\n    Google: {\n        name: \"Google\",\n        color: \"#de4b39\",\n        icon: \"google-plus\",\n        loginManager: GoogleManager,\n    },\n    Facebook: {\n        name: \"Facebook\",\n        color: \"#3b5998\",\n        icon: \"facebook\",\n        loginManager: FacebookManager,\n    },\n    Github: {\n        name: \"Github\",\n        color: \"#000\",\n        icon: \"github\",\n        loginManager: GithubManager,\n    },\n};\n\n\n@registerStyle(LoginStyle)\nclass SocialConnectButton extends UI.Primitive(\"button\") {\n    extraNodeAttributes(attr) {\n        let {specificInfo} = this.options;\n\n        attr.addClass(this.styleSheet.socialConnectButtonContainer);\n        attr.setStyle({\n            backgroundColor: specificInfo.color,\n        });\n    }\n\n    getLoginManager() {\n        return this.options.specificInfo.loginManager.getInstance();\n    }\n\n    render() {\n        let {specificInfo} = this.options;\n\n        return [\n            <FAIcon icon={specificInfo.icon} className={this.styleSheet.socialConnectButtonIcon} />,\n            <span> {specificInfo.name}</span>\n        ];\n    }\n\n    onMount() {\n        // Access the login manager, to load any scripts needed by the social provider\n        // TODO: try to find a way to not load all provider scripts on the login page\n        this.getLoginManager();\n        this.addClickListener(() => {\n            const loginElement = this.options.loginElement;\n            loginElement && loginElement.clearErrorMessage();\n            this.getLoginManager().login();\n        });\n    }\n}\n\n@registerStyle(LoginStyle)\nclass ThirdPartyLogin extends UI.Element {\n    getSocialApps() {\n        return SocialAppStore.all();\n    }\n\n    getConnectWith() {\n        return (\n            <div style={this.styleSheet.connectWith}>\n                {UI.T(\"or connect with\")}\n            </div>\n        );\n    }\n\n    getConnectWithButtons() {\n        return (\n            <div className={this.styleSheet.thirdPartyLoginContainer}>\n                {\n                    this.getSocialApps().map(\n                        socialApp => <SocialConnectButton specificInfo={socialLoginSpecificInfo[socialApp.name]}\n                                                          loginElement={this.options.loginElement} />\n                    )\n                }\n            </div>\n        );\n    }\n\n    render() {\n        return [\n            this.getConnectWith(),\n            this.getConnectWithButtons(),\n        ];\n    }\n}\n\n@registerStyle(LoginStyle)\nexport class LoginWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginWidget);\n    }\n\n    getEmailInput(emailIcon=\"user\") {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon\n                    icon={emailIcon}\n                    style={this.styleSheet.fontAwesomeIcon}\n                />\n                <EmailInput\n                    autofocus=\"autofocus\"\n                    placeholder=\"Email address\"\n                    name=\"email\"\n                    ref=\"emailInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getPasswordInput(passwordInputOptions={}) {\n        passwordInputOptions = Object.assign({\n            name: \"password\",\n            className: this.styleSheet.input,\n            ref: \"passwordInput\",\n            placeholder: \"Password\",\n            style: {marginBottom: \"20px\"}\n        }, passwordInputOptions);\n        return [\n            <div style={{width: \"80% !important\",}}>\n                <FAIcon icon=\"lock\"\n                        style={this.styleSheet.fontAwesomeIcon}\n                />\n                <PasswordInput {...passwordInputOptions} />\n            </div>\n        ];\n    }\n\n    getRememberMeCheckbox() {\n        return [\n            <CheckboxInput checked={true}\n                              ref=\"rememberInput\" className={this.styleSheet.rememberMeCheckbox} />,\n            <div className={this.styleSheet.rememberMe}>{UI.T(\"Remember me\")}</div>,\n        ];\n    }\n\n    getForgotPassword() {\n        return <Link className={this.styleSheet.forgotPassword} href=\"/accounts/password_reset\"\n                     value={UI.T(\"Forgot Password?\")} />;\n    }\n\n    getClearBothArea() {\n        return <div style={{clear: \"both\", height: \"20px\"}}/>;\n    }\n\n    getErrorArea() {\n        return <TemporaryMessageArea className={this.styleSheet.badLogin} ref=\"loginErrorMessage\"/>;\n    }\n\n    getSignInValue() {\n        return \"Sign In\";\n    }\n\n    getSignInButton() {\n        return <div className={this.styleSheet.signInButtonContainer}>\n            <SubmitInput className={this.styleSheet.signInButton} value={this.getSignInValue()} />\n        </div>;\n    }\n\n    getHorizontalLine() {\n        return <div className={this.styleSheet.horizontalLine}>\n        </div>;\n    }\n\n    getThirdPartyLogin() {\n        return SocialAppStore.all().length ? [\n            this.getHorizontalLine(),\n            <ThirdPartyLogin loginElement={this}/>,\n        ]: null;\n    }\n\n    render() {\n\n        return [\n            <form ref=\"form\">\n                {this.getEmailInput()}\n                {this.getPasswordInput()}\n                {this.getRememberMeCheckbox()}\n                {this.getForgotPassword()}\n                {this.getSignInButton()}\n                {this.getClearBothArea()}\n                {this.getErrorArea()}\n            </form>,\n            this.getThirdPartyLogin(),\n        ];\n    }\n\n    setErrorMessage(error, isError=true) {\n        this.loginErrorMessage.showMessage(error.message, isError? Theme.Global.getProperty(\"COLOR_DANGER\") : \"#000\", ERROR_TIMEOUT);\n    }\n\n    clearErrorMessage() {\n        this.loginErrorMessage.clear();\n    }\n\n    sendLogin() {\n        this.clearErrorMessage();\n        const data = {\n            email: this.emailInput.getValue(),\n            password: this.passwordInput.getValue(),\n            remember: this.rememberInput.getValue()\n        };\n        Ajax.postJSON(\"/accounts/login/\", data).then(\n            () => location.reload(),\n            (error) => this.setErrorMessage(error)\n        );\n    }\n\n    onMount() {\n        if (this.form) {\n            this.form.addNodeListener(\"submit\", (event) => {\n                this.sendLogin();\n                event.preventDefault();\n            });\n        }\n    }\n}\n\n\nclass RecaptchaWidget extends UI.Element {\n    render() {\n        return <div key={Math.random()} />;\n    }\n\n    redraw() {\n        super.redraw();\n\n        if (window.grecaptcha && window.GOOGLE_RECAPTCHA_PUBLIC_KEY) {\n            this.captchaId = grecaptcha.render(this.children[0].node, {\n                \"sitekey\": window.GOOGLE_RECAPTCHA_PUBLIC_KEY,\n            });\n        }\n    }\n\n    getResponse() {\n        return grecaptcha.getResponse(this.captchaId);\n    }\n\n    onMount() {\n        window.onRecaptchaCallback = () => this.redraw();\n\n        ensure(\"https://www.google.com/recaptcha/api.js?render=explicit&onload=onRecaptchaCallback\", () => {});\n    }\n}\n\n\n@registerStyle(LoginStyle)\nexport class RegisterWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerWidget);\n    }\n\n    getSignUpButton() {\n        return  <div className={this.styleSheet.signInButtonContainer}>\n                    <SubmitInput className={this.styleSheet.signInButton} value=\"Sign Up\" ref=\"submitButton\"/>\n                </div>;\n    }\n\n    getUsernameInput() {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon icon=\"user\"\n                        style={this.styleSheet.fontAwesomeIcon}/>\n                <TextInput\n                    placeholder=\"Username\"\n                    ref=\"usernameInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getCountryInput() {\n        return [\n            <div style={{width: \"100%\", marginBottom: \"20px\"}}>\n                <FAIcon icon=\"flag\" style={this.styleSheet.fontAwesomeIcon} />\n                <Select ref=\"countrySelect\" options={CountryStore.allWithNone(\"Don't set country\")}\n                        className={this.styleSheet.countrySelect} />\n                <div style={{clear: \"both\"}}/>\n            </div>\n        ];\n    }\n\n    render() {\n        let formFields = [\n            this.getEmailInput(),\n            this.getPasswordInput()\n        ];\n        if (accountsConfig.username) {\n            formFields.splice(1, 0, this.getUsernameInput());\n            formFields[0] = this.getEmailInput(\"envelope\");\n        }\n        if (accountsConfig.country) {\n            formFields[formFields.length - 1] = this.getPasswordInput({style: {}});\n            formFields.push(this.getCountryInput());\n        }\n        // TODO: This should be done in another way.\n        if (window.location.hostname !== \"localhost\") {\n            this.recaptchaWidget = <RecaptchaWidget />\n        }\n        return [\n            <form ref=\"form\">\n                {formFields}\n                <div className={this.styleSheet.recaptchaContainer}>\n                    {this.recaptchaWidget}\n                    {this.getSignUpButton()}\n                    <TemporaryMessageArea ref=\"errorArea\" />\n                </div>\n            </form>\n        ];\n    }\n\n    sendRegistration() {\n        this.submitButton.updateOptions({value: \"Signing up...\"});\n\n        const data = {\n            email: this.emailInput.getValue(),\n            recaptchaKey: this.recaptchaWidget && this.recaptchaWidget.getResponse(),\n            password: this.passwordInput.getValue(),\n        };\n        if (this.usernameInput) {\n            data.username = this.usernameInput.getValue();\n        }\n        if (this.countrySelect) {\n           data.countryId = this.countrySelect.get().id;\n        }\n        Ajax.postJSON(\"/accounts/signup_request/\", data).then(\n            () => {\n                this.recaptchaWidget && this.recaptchaWidget.hide();\n                this.submitButton.hide();\n                this.errorArea.showMessage(\"Done! Please check your email to continue\", \"black\", 26 * 60 * 60 * 1000);\n            },\n            (error) => {\n                this.errorArea.showMessage(\"Error in registration: \" + error.message, \"red\", 4000);\n                this.submitButton.updateOptions({value: \"Sign Up\"});\n                this.recaptchaWidget && this.recaptchaWidget.redraw();\n            }\n        );\n    }\n\n    onMount() {\n        this.form.addNodeListener(\"submit\", (event) => {\n            event.preventDefault();\n            this.sendRegistration();\n        })\n    }\n}\n\nRegisterWidget.prototype.getEmailInput = LoginWidget.prototype.getEmailInput;\nRegisterWidget.prototype.getPasswordInput = LoginWidget.prototype.getPasswordInput;\nRegisterWidget.prototype.getHorizontalLine = LoginWidget.prototype.getHorizontalLine;\n\n\n// original name: LoginRegisterSystem\n@registerStyle(LoginStyle)\nclass NormalLogin extends UI.Element {\n    constructor() {\n        super();\n\n        this.state = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginRegisterSystem);\n    }\n\n    getLoginButton() {\n        let style = {};\n\n        if (this.state === 0) {\n            style = this.styleSheet.selectedLeft;\n        }\n\n        return <div className={this.styleSheet.loginSystemButton}\n                    style={style}\n                    ref=\"loginButton\">\n            {UI.T(\"Log In\")}\n        </div>\n    }\n\n    getRegisterButton() {\n        let style = {};\n\n        if (this.state === 1) {\n            style = this.styleSheet.selectedRight;\n        }\n\n        return <div className={this.styleSheet.registerSystemButton}\n                    style={style}\n                    ref=\"registerButton\">\n            {UI.T(\"Sign Up\")}\n        </div>\n    }\n\n    render() {\n        let result = [\n            <div className={this.styleSheet.loginRegisterButtons}>\n                {this.getLoginButton()}\n                {this.getRegisterButton()}\n            </div>,\n            <Switcher ref=\"switcher\">\n                <LoginWidget ref=\"loginWidget\" active={this.state === 0} />\n                <RegisterWidget ref=\"registerWidget\" active={this.state === 1} />\n            </Switcher>\n        ];\n\n        return result;\n    }\n\n    onMount() {\n        this.loginButton.addClickListener(() => {\n            this.state = 0;\n            this.switcher.setActive(this.loginWidget);\n            this.redraw();\n        });\n\n        this.registerButton.addClickListener(() => {\n            this.state = 1;\n            this.switcher.setActive(this.registerWidget);\n            this.redraw();\n        });\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass LoginTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Log In\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedLeftClass);\n        }\n    }\n}\n\n@registerStyle(LoginStyle)\nclass RegisterTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Register\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedRightClass);\n        }\n    }\n}\n\n\nclass Login extends UI.Element {\n    render() {\n        return [\n            <NormalLogin/>,\n        ];\n    }\n}\n\nexport {Login};\n","import {UI, Modal} from \"UI\";\nimport {Login} from \"Login\";\nimport {Device} from \"Device\";\n\nclass LoginModal extends Modal {\n    getModalWindowStyle() {\n        if (Device.isTouchDevice()) {\n            return {\n                position: \"relative\",\n                padding: \"0\",\n                boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n                // margin: \"60px auto\",\n                display: this.options.display || \"block\",\n                left: \"0\",\n                right: \"0\",\n                width: \"100vw\",\n                height: \"600px\",\n                background: \"white\",\n                overflow: this.options.overflow || \"auto\",\n                maxHeight: \"100%\",\n                maxWidth: \"500px\",\n                verticalAlign: \"center\",\n                margin: \"0 auto\",\n            }\n        }\n        return {\n            position: \"relative\",\n            padding: \"0\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: \"500px\",\n            height: this.options.height || \"600px\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    render() {\n        return <Login/>;\n    }\n\n    static requireLogin(func) {\n        if (USER.isAuthenticated) {\n            return func();\n        } else {\n            this.show();\n        }\n    }\n}\n\nexport {LoginModal};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\nimport {Orientation} from \"ui/Constants\";\n\nclass VotingWidgetStyle extends StyleSheet {\n    height = 40;\n    size = 1;\n    likeColor = this.options.likeColor || \"#1E8921\"; //            |\n    dislikeColor = this.options.dislikeColor || \"#C5302C\"; //      |- Triadic colors + Shades\n    notVoteColor = this.options.notVoteColor || \"#313534\";\n    balanceColor = this.options.balanceColor || \"#313534\";\n    orientation = Orientation.VERTICAL;\n\n    @styleRule\n    container = {\n        height: \"40px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    mainClass = {\n        height: \"40px\",\n        lineHeight: \"40px\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"inline-block\",\n        float: \"right\",\n        textAlign: \"right\",\n    };\n\n    thumbsStyle = {\n        fontSize: this.height / 2 + \"px\",\n        lineHeight: this.height + \"px\",\n    };\n\n    @styleRule\n    displayStyle = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"3px\",\n    };\n\n    counterStyle = {\n        fontSize: 18 * this.size + \"px\",\n        fontWeight: \"900\",\n        color: this.balanceColor,\n    };\n\n    @styleRule\n    thumbsUpHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.likeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    thumbsDownHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.dislikeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    padding = {\n        width: \"3px\",\n        float: \"left\",\n        display: \"inline-block\",\n        height: this.height + \"px\",\n    };\n}\n\nexport {VotingWidgetStyle}","import {UI, registerStyle} from \"UI\";\nimport {LoginModal} from \"LoginModal\";\nimport {UserReactionCollection} from \"UserReactionStore\";\nimport {Orientation, VoteStatus} from \"ui/Constants\";\nimport {VotingWidgetStyle} from \"./VotingWidgetStyle\";\n\nclass VotingWidget extends UI.Element {\n    setOptions(options) {\n        options = Object.assign({\n            votesBalance: 0,\n            userVote: VoteStatus.NONE,\n            size: 1,\n            likeColor: this.options.likeColor || \"#1E8921\", //            |\n            dislikeColor: this.options.dislikeColor || \"#C5302C\", //      |- Triadic colors + Shades\n            notVoteColor: this.options.notVoteColor || \"#313534\",\n            balanceColor: this.options.balanceColor || \"#313534\",\n            orientation: Orientation.VERTICAL,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            textAlign: \"center\",\n            marginRight: \"10px\",\n        });\n    }\n\n    render() {\n        let buttonsStyle = {\n            paddingLeft: \"4px\",\n            paddingRight: \"4px\",\n            paddingTop: \"0px\",\n            paddingBottom: \"0px\",\n            lineHeight: \"0px\",\n            backgroundColor: \"transparent\",\n            borderColor: \"transparent\",\n            fontSize: 40 * this.options.size + \"px\",\n            marginTop: 8 * this.options.size + \"px\",\n            marginBottom: 8 * this.options.size + \"px\",\n            display: this.options.orientation === Orientation.VERTICAL ? \"block\" : \"inline-block\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            opacity: 0.7,\n            cursor: \"pointer\",\n            color: this.options.notVoteColor,\n        };\n\n        let likeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = this.options.likeColor;\n        }\n\n        let dislikeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = this.options.dislikeColor;\n        }\n\n        let counterStyle = {\n            fontSize: 18 * this.options.size + \"px\",\n            fontWeight: \"900\",\n            \"color\": this.options.balanceColor,\n        };\n\n        return [\n            <span className=\"fa fa-caret-up voteButton\" ref=\"likeButton\"\n                       faIcon=\"caret-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <span ref=\"counterContainer\" style={counterStyle}>\n                <UI.TextElement ref=\"counter\" value={this.getVotesBalance() + \"\"}/>\n            </span>,\n            <span className=\"fa fa-caret-down voteButton\" ref=\"dislikeButton\"\n                       faIcon=\"caret-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n\n    getVotesBalance() {\n        return this.options.votesBalance;\n    }\n\n    getUserVote() {\n        return this.options.userVote;\n    }\n}\n\nclass CommentVotingWidget extends VotingWidget {\n    getVotesBalance() {\n        return this.options.message.getVotesBalance();\n    }\n\n    getUserVote() {\n        return this.options.message.getUserVote();\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.updateTarget(this.options.message);\n    }\n\n    updateTarget(target) {\n        if (!target || target instanceof UserReactionCollection) {\n            this.options.target = target;\n            return;\n        }\n        const possibleTarget = target.getReactionCollection();\n        if (possibleTarget) {\n            this.options.target = possibleTarget;\n            return;\n        }\n        let tempListener = this.attachEventListener(target, \"createReactionCollection\", () => {\n            this.updateOptions({target: target.getReactionCollection()});\n            this.setupListener();\n            tempListener.remove();\n        });\n    }\n\n    setupListener() {\n        let target = this.options.target;\n        if (target) {\n            this.attachUpdateListener(target, () => {\n                this.redraw();\n            })\n        }\n    }\n\n\n    onMount() {\n        this.setupListener();\n        this.likeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.LIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.like();\n            }\n        });\n        this.dislikeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.DISLIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.dislike();\n            }\n        });\n\n        this.options.message.addListener(\"reaction\", () => {\n            this.redraw();\n        });\n    }\n}\n\n// TODO: rewrite\n@registerStyle(VotingWidgetStyle)\nclass CommentVotingWidgetWithThumbs extends CommentVotingWidget {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    getNumLikes() {\n        return this.options.message.getNumLikes();\n    }\n\n    getNumDislikes() {\n        return this.options.message.getNumDislikes();\n    }\n\n    render() {\n        let thumbsUpScoreStyle = {};\n        let thumbsDownScoreStyle = {};\n\n        // TODO: remove duplicate code\n        let likeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = thumbsUpScoreStyle.color = this.options.likeColor;\n            thumbsUpScoreStyle.fontWeight = \"bold\";\n        }\n\n        let dislikeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = thumbsDownScoreStyle.color = this.options.dislikeColor;\n            thumbsDownScoreStyle.fontWeight = \"bold\";\n        }\n\n        return [\n            <span className={this.styleSheet.displayStyle} style={thumbsUpScoreStyle}>{this.getNumLikes()}</span>,\n            <span className={\"fa fa-thumbs-up voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsUpHoverStyle} ref=\"likeButton\" faIcon=\"thumbs-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <div className={this.styleSheet.padding} />,\n            <span className={this.styleSheet.displayStyle} style={thumbsDownScoreStyle}>{this.getNumDislikes()}</span>,\n            <span className={\"fa fa-thumbs-down voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsDownHoverStyle} ref=\"dislikeButton\" faIcon=\"thumbs-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n}\n\nexport {VotingWidget, CommentVotingWidget, CommentVotingWidgetWithThumbs};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\n\nclass ChatStyle extends StyleSheet {\n    navbarHeight = \"50px\";\n    renderMessageHeight = \"100px\";\n\n    userFontSize = \"1.1em\";\n    commentFontSize = \"1.1em\";\n\n    backgroundColor = \"#fff\";\n    hrBackgroundColor = \"#ddd\";\n    hoverBackgroundColor = \"#f8f8f8\";\n\n    @styleRule\n    renderMessageView = {\n        height: \"100%\",\n        width: \"100%\",\n        overflowY: \"auto\",\n        overflowX: \"hidden\",\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n        wordBreak: \"break-word\",\n    };\n\n    @styleRule\n    renderMessage = {\n        height: this.renderMessageHeight,\n        maxHeight: this.renderMessageHeight,\n        width: \"100%\",\n        borderTop: \"1px solid \" + this.hrBackgroundColor,\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n    };\n\n    @styleRule\n    chatInput = {\n        height: \"100%\",\n        width: \"calc(100% - 50px)\",\n        // \"line-height\": \"30px\",\n        paddingTop: \"0\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        paddingLeft: \"8px\",\n        border: \"0px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"inline-block\",\n        float: \"left\",\n        outline: \"none\",\n        position: \"absolute\",\n        \":focus\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n        \":active\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n    };\n\n    @styleRule\n    messageBoxButton = {\n        textAlign: \"center\",\n        flex: \"1\",\n        backgroundColor: \"#fff\",\n        border: \"0\",\n        fontSize: \"18px\",\n        transition: \".2s\",\n        color: \"#333\",\n        padding: \"0\",\n        \":hover\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n            outline: \"none\",\n        },\n        \":focus:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n        \":hover:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n    };\n\n    previewButton = { // TODO: This is currently not restyled.\n        // We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"30px\",\n        borderRadius: \"100%\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n        textTransform: \"uppercase\",\n        marginTop: \"15px\",\n    };\n\n    @styleRule\n    messageTimeStampHr = {\n        height: \"1px\",\n        marginTop: \"1.5em\",\n        marginBottom: \"1.5em\",\n        width: \"100%\",\n        maxWidth: \"100%\",\n        backgroundColor: this.hrBackgroundColor,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    messageTimeStamp = {\n        height: \"1.5em\",\n        width: \"auto\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        backgroundColor: this.backgroundColor,\n        textAlign: \"center\",\n        color: \"#222\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    groupChatMessage = {\n        width: \"100%\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    comment = {\n        paddingLeft: \"12px\",\n        paddingRight: \"12px\",\n        paddingTop: \"12px\",\n        paddingBottom: \"12px\",\n        \":hover\": {\n            backgroundColor: this.hoverBackgroundColor,\n        },\n    };\n\n    @styleRule\n    userHandle = {\n        fontSize: this.userFontSize,\n    };\n\n    @styleRule\n    commentContent = {\n        \" p\": {\n            marginTop: \"0\",\n            marginBottom: \"0\",\n            fontSize: this.commentFontSize,\n            color: \"#454545\",\n            // textAlign: \"justify\",\n            wordWrap: \"break-word\",\n        },\n    };\n\n    @styleRule\n    timestamp = {\n        color: \"#262626\",\n        fontWeight: \"bold\",\n        margin: \"0 10px\",\n    };\n}\n\nexport {ChatStyle};\n","// Plugins should be used to extends on runtime the functionality of a class, to easily split functionality\nimport {Dispatchable} from \"./Dispatcher\";\n\nclass Plugin extends Dispatchable {\n    constructor(parent) {\n        super();\n        this.linkToParent(parent);\n    }\n\n    linkToParent(parent) {\n        this.parent = parent;\n    }\n\n    name() {\n        return this.constructor.pluginName();\n    }\n\n    static pluginName() {\n        return this.name;\n    }\n}\n\n// TODO: rename this to use Mixin in title\nvar Pluginable = function (BaseClass) {\n    return class Pluginable extends BaseClass {\n        // TODO: this should probably take in a plugin instance also\n        registerPlugin(PluginClass) {\n            if (!this.hasOwnProperty(\"plugins\")) {\n                this.plugins = new Map();\n            }\n            // TODO: figure out plugin dependencies\n            let plugin = new PluginClass(this);\n            let pluginName = plugin.name();\n\n            if (this.plugins.has(pluginName)) {\n                console.error(\"You are overwriting an existing plugin: \", pluginName, \" for object \", this);\n            }\n\n            this.plugins.set(pluginName, plugin);\n        }\n\n        removePlugin(pluginName) {\n            let plugin = this.getPlugin(pluginName);\n            if (plugin) {\n                plugin.remove(this);\n                this.plugins.delete(plugin.name());\n            } else {\n                console.error(\"Can't remove plugin \", pluginName);\n            }\n        }\n\n        getPlugin(pluginName) {\n            if (!(typeof pluginName === \"string\")) {\n                pluginName = pluginName.pluginName();\n            }\n            if (this.plugins) {\n                return this.plugins.get(pluginName);\n            } else {\n                return null;\n            }\n        }\n    }\n};\n\nexport {Plugin, Pluginable};\n","import {UI, Switcher, AjaxButton, TextArea, Button, ButtonGroup, Panel, InfiniteScrollable, registerStyle} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {MessageThreadStore, MessageThread, MessageInstance, MessageInstanceStore, GroupChatStore} from \"MessageThreadStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {LoginModal} from \"LoginModal\";\nimport {isDifferentDay} from \"Time\";\nimport {RunOnce} from \"Dispatcher\";\nimport {Ajax} from \"Ajax\";\nimport {ChatStyle} from \"ChatStyle\";\nimport {Pluginable} from \"Plugin\";\nimport {Level, Size} from \"ui/Constants\";\n\nimport {ButtonStyle} from \"ui/button/ButtonStyle\";\nimport {InputStyle} from \"ui/input/Style\";\n\nButtonStyle.getInstance().ensureFirstUpdate();\nInputStyle.getInstance().ensureFirstUpdate();\n\nclass PreviewMarkupButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            MarkupEditorModal.show({\n                classMap: ChatMarkupRenderer.classMap,\n                showCallback: (modal) => {modal.markupEditor.setValue(this.options.getValue());\n                                          modal.markupEditor.codeEditor.getAce().focus();},\n                hideCallback: (modal) => {this.options.setValue(modal.markupEditor.getValue());}\n            });\n        });\n    }\n}\n\nclass EditableMessage extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: true,\n        });\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    render() {\n        return [<Button ref=\"editButton\" onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</Button>,\n            <Switcher ref=\"contentSwitcher\">\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>\n        ];\n    }\n\n    showEditMode() {\n        if (!this.editContent) {\n            let writingSectionStyle = {\n                \"margin-top\": \"5px\"\n            };\n            let chatInputStyle = {\n                overflow: \"auto\",\n                height: \"60px\",\n                width: \"100%\",\n            };\n\n            this.editContent = <div style={writingSectionStyle}>\n                <TextArea ref={this.refLink(\"messageInput\")} style={chatInputStyle} className=\"form-control\"\n                             value={this.message.getContent()}/>\n                <ButtonGroup>\n                    <Button label={UI.T(\"Cancel\")} level={Level.DEFAULT} size={Size.SMALL}\n                               onClick={() => {this.hideEditMode()}} />\n                    <PreviewMarkupButton size={Size.SMALL}\n                                         getValue={() => {return this.messageInput.getValue();}}\n                                         setValue={(value) => {this.messageInput.setValue(value);this.messageInput.node.focus();}}\n                    />\n                    <Button label={UI.T(\"Save changes\")} level={Level.PRIMARY}\n                               onClick={() => this.saveMessageChanges()} size={Size.SMALL} />\n                    {this.options.deletable ? <Button level={Level.DANGER} label={UI.T(\"Delete\")} size={Size.SMALL}\n                                                         onClick={() => this.deleteMessage()}/> : \"\"}\n                </ButtonGroup>\n            </div>;\n        } else {\n            this.messageInput.setValue(this.message.getContent());\n        }\n\n        if (!this.contentSwitcher.hasChild(this.editContent)) {\n            this.contentSwitcher.appendChild(this.editContent);\n        }\n        this.contentSwitcher.setActive(this.editContent);\n    }\n\n    hideEditMode() {\n        this.contentSwitcher.setActive(this.contentContainer);\n    }\n\n    toggleEditMode() {\n        if (this.contentSwitcher.getActive() === this.contentContainer) {\n            this.showEditMode();\n        } else {\n            this.hideEditMode();\n        }\n    }\n\n    saveMessageChanges() {\n        let content = this.messageInput.getValue();\n\n        if (content) {\n            this.message.edit(content, () => {\n                this.hideEditMode();\n            });\n        }\n    }\n\n    deleteMessage() {\n        if (this.options.deletable) {\n            this.message.deleteMessage();\n        }\n    }\n\n    onMount() {\n        this.message.addListener(\"edit\", () => {\n            this.content.setValue(this.message.getContent());\n            this.redraw();\n        });\n\n        this.message.addListener(\"delete\", () => {\n            // TODO: refactor this, should delete message, not hide\n            this.hide();\n        });\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass GroupChatMessage extends EditableMessage {\n    setOptions(options) {\n        super.setOptions(options);\n        if (this.message.hasTemporaryId()) {\n            // TODO: this can also happen when editing a message, another case for later\n            this.message.addListener(\"postError\", () => {\n                this.redraw();\n            });\n            this.message.addListener(\"updateId\", () => {\n                // TODO: we might need to updated our position here\n                this.options.key = this.message.id;\n            })\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.groupChatMessage);\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    render() {\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n        // if (USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\"}, this.styleSheet.timestamp)}\n                            onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStampHr}>\n                <div className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        return [\n            date,\n            <div className={this.styleSheet.comment}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {editButton}\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass PrivateChatMessage extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.groupChatMessage);\n        return attr;\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    isOwnMessage() {\n        return this.message.userId === USER.id;\n    }\n\n    render() {\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div className={this.styleSheet.messageTimeStampHr}>\n                <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        let content = [\n            <div className={this.styleSheet.comment} style={{margin: \"8px 16px\", backgroundColor: \"#eee\",}}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n\n        let paddingDiv = <div style={{flexGrow: \"1000000\"}} />;\n\n        let result;\n        if (this.isOwnMessage()) {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {paddingDiv}\n                    {content}\n                </div>\n            ];\n        } else {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {content}\n                    {paddingDiv}\n                </div>\n            ];\n        }\n\n        return result;\n    }\n}\n\n\nclass ChatMessageScrollSection extends InfiniteScrollable {\n    setOptions(options) {\n        options = Object.assign({\n            entryComparator: (a, b) => {\n                return a.getNormalizedId() - b.getNormalizedId();\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    getTopMessage() {\n        return this.children[1];\n    }\n}\n\n\nlet ChatWidget = (ChatMessageClass) => {\n    @registerStyle(ChatStyle)\n    class ChatWidgetClass extends Pluginable(Panel) {\n        getDefaultOptions(options) {\n            return {\n                dateTimestamps: true,\n                renderMessage: (messageInstance) => {\n                    return <ChatMessageClass key={messageInstance.getNormalizedId()} message={messageInstance} />;\n                }\n            };\n        }\n\n        get messageThread() {\n            return this.options.messageThread;\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n            this.initializeShowLoadMoreButton();\n        }\n\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.setStyle({\n                display: \"flex\",\n                flexDirection: \"column\",\n            });\n        }\n\n        canOverwrite() {\n            return false;\n        }\n\n        initializeShowLoadMoreButton() {\n            // TODO: this is a shitty way of knowing if there are more messages!\n            if (this.messageThread.getNumMessages() >= 20) {\n                this.showLoadMoreButton = true;\n            }\n        }\n\n        createVirtualMessage(request, message) {\n            let virtualId = this.messageThread.getMaxMessageId() + \"-\" + MessageInstanceStore.generateVirtualId() + \"-\" + Math.random();\n            let virtualMessageInstance = MessageInstanceStore.createVirtualMessageInstance(message, this.messageThread, virtualId);\n            request.virtualId = virtualId;\n            return virtualMessageInstance;\n        }\n\n        sendMessage(message) {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            let request = Object.assign({}, this.options.baseRequest || {});\n\n            message = message || this.chatInput.getValue();\n            message = message.trim();\n\n            if (!message) {\n                return;\n            }\n            request.message = message;\n\n            // Create a virtual message to be drawn temporarily\n            let virtualMessageInstance = this.createVirtualMessage(request, message);\n\n            let onSuccess = (data) => {\n                if (data.error) {\n                    virtualMessageInstance.setPostError(data.error);\n                    return;\n                }\n                if (virtualMessageInstance && virtualMessageInstance.hasTemporaryId()) {\n                    MessageInstanceStore.applyUpdateObjectId(virtualMessageInstance, data.messageId);\n                    GlobalState.importState(data.state);\n                }\n            };\n\n            let onError = (error) => {\n                if (virtualMessageInstance) {\n                    virtualMessageInstance.setPostError(42);\n                }\n                console.log(\"Error in sending chat message:\\n\" + error.message);\n                console.log(error.stack);\n            };\n\n            this.messageWindow.scrollToBottom();\n\n            this.chatInput.setValue(\"\");\n            this.chatInput.dispatch(\"messageSent\");\n\n            Ajax.postJSON(this.getPostURL(), request, {disableStateImport: true}).then(onSuccess, onError);\n        }\n\n        saveScrollPosition() {\n            this.scrollPosition = this.messageWindow.node.scrollTop;\n            this.scrollPercent = this.scrollPosition / (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n        }\n\n        applyScrollPosition() {\n            this.messageWindow.node.scrollTop = this.scrollPosition || this.messageWindow.node.scrollHeight;\n            this.chatInput.node.focus();\n        }\n\n        addResizeListeners() {\n            this.messageWindow.addNodeListener(\"scroll\", () => {\n                let scrollTop = this.messageWindow.node.scrollTop;\n                if (scrollTop < 20) {\n                    this.loadMoreMessages();\n                }\n            });\n\n            this.addListener(\"hide\", () => {this.saveScrollPosition();});\n            this.addListener(\"show\", () => {this.applyScrollPosition();});\n\n            window.addEventListener(\"resize\", () => {\n                this.saveScrollPosition();\n                this.setAdaptiveHeight();\n            });\n\n            this.addListener(\"resize\", () => {\n                this.setAdaptiveHeight();\n                this.messageWindow.node.scrollTop = this.scrollPercent * (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n            });\n        }\n\n        getDesiredHeight() {\n            if (this.options.style && this.options.style.height) {\n                return this.options.style.height;\n            }\n            let viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n            let navbarHeight = document.getElementById(\"navbar\").offsetHeight; // use offsetHeight to accommodate padding and margin\n\n            let availableHeight = viewportHeight - navbarHeight - (this.options.extraHeightOffset || 25);\n            return Math.max(availableHeight || 0, 100) + \"px\"; // it needs at least 100px\n        }\n\n        setAdaptiveHeight() {\n            this.setStyle(\"height\", this.getDesiredHeight());\n        }\n\n        setHeight(height) {\n            this.setStyle(\"height\", height);\n        }\n\n        renderMessageView() {\n            let loadMoreButton;\n\n\n            if (this.showLoadMoreButton) {\n                loadMoreButton = (\n                    <div className=\"text-center\">\n                        <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                       style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                        />\n                    </div>\n                );\n            }\n\n            return [\n                <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                          ref=\"messageWindow\"\n                                          entryRenderer={this.options.renderMessage}\n                                          entries={this.messageThread.getMessages()}\n                                          staticTop={loadMoreButton} />\n            ];\n        }\n\n        getGetType() {\n            return \"GET\";\n        }\n\n        loadMoreMessages() {\n            // TODO: wrap this in something\n            if (this.outstandingRequest) {\n                return;\n            }\n            this.outstandingRequest = true;\n\n            const topMessage = this.messageWindow.getTopMessage();\n\n            let messageInstances = this.messageThread.getMessages();\n            let lastMessageId = 999999999;\n            if (messageInstances.length) {\n                lastMessageId = messageInstances[0].id;\n            }\n\n            let request = Object.assign({\n                lastMessageId: lastMessageId\n            }, this.options.baseRequest || {});\n\n            const oldScrollHeight = this.messageWindow.node.scrollHeight;\n\n            if (this.loadMoreButton) {\n                this.loadMoreButton.ajaxCall({\n                    url: this.getGetURL(),\n                    type: this.getGetType(),\n                    dataType: \"json\",\n                    data: request,\n                    complete: () => {\n                        //TODO(@Rocky): find out why this doesn't work\n                        this.outstandingRequest = false;\n                    }\n                }).then((data) => {\n                    const emptyData = !data.state || !data.state.MessageInstance;\n                    if (emptyData || data.state.MessageInstance.length < 20) {\n                        if (this.loadMoreButton) {\n                            this.loadMoreButton.hide();\n                        }\n                        this.showLoadMoreButton = false;\n\n                        if (emptyData) {\n                            return;\n                        }\n                    }\n\n                    let scrollDelta = 0;\n                    if (!topMessage.shouldShowDayTimestamp()) {\n                        scrollDelta += topMessage.dayTimestamp.getHeight();\n                        topMessage.dayTimestamp.addClass(\"hidden\");\n                    }\n                    this.messageWindow.scrollToHeight(this.messageWindow.node.scrollHeight - oldScrollHeight - scrollDelta);\n\n                    this.outstandingRequest = false;\n                });\n            }\n        }\n\n        renderMessageBox() {\n            return <div ref=\"writingSection\" className={this.styleSheet.renderMessage}>\n                <TextArea readOnly={this.messageThread.muted}\n                             ref=\"chatInput\"\n                             placeholder=\"Type a message...\"\n                             className={this.styleSheet.chatInput} />\n                <div style={{display: \"flex\", flexDirection: \"column\", height: \"100%\", position: \"absolute\", right: \"0px\", width: \"50px\"}}>\n                    <Button ref=\"sendMessageButton\"\n                               faIcon=\"paper-plane\"\n                               disabled={this.messageThread.muted}\n                               onClick={() => this.sendMessage()}\n                               className={this.styleSheet.messageBoxButton} />\n                    <PreviewMarkupButton ref=\"previewMessageButton\"\n                                   getValue={() => {return this.chatInput.getValue();}}\n                                   setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                                   className={this.styleSheet.messageBoxButton}\n                                   faIcon=\"eye\" />\n                </div>\n            </div>;\n        }\n\n        renderStatus() {\n            if (this.messageThread.muted) {\n                return [\n                    <h4 style={{color: \"red\", textAlign: \"center\"}}>This chat is currently turned off.</h4>\n                ];\n            } else {\n                if (USER.isSuperUser) {\n                    let userData = [];\n                    for (let userId of this.messageThread.online) {\n                        userData.push([\n                            <UserHandle id={parseInt(userId)}/>\n                        ]);\n                    }\n                    return userData;\n                }\n            }\n        }\n\n        render() {\n            return [\n                this.renderMessageView(),\n                this.renderMessageBox(),\n            ];\n        }\n\n        getDefaultPlugins() {\n            return ChatWidget.defaultPlugins || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            for (let plugin of (this.options.plugins || this.getDefaultPlugins())) {\n                this.registerPlugin(plugin);\n            }\n\n            this.attachUpdateListener(this.messageThread, (event) => {\n                if (event.type === \"muted\") {\n                    this.redraw();\n                }\n            });\n\n            this.attachListener(this.messageThread, \"newMessage\", (event) => {\n                //console.log(\"Received chat message: \", event);\n                let messageInstance = MessageInstanceStore.get(event.data.id);\n\n                // We calculate before adding new message\n                let messageWindowScrollTop = this.messageWindow.node.scrollTop;\n                let messageWindowscrollMax = this.messageWindow.node.scrollHeight - this.messageWindow.node.offsetHeight;\n                this.messageWindow.insertEntry(messageInstance);\n\n                // If we were at the bottom before message was appended, scroll automatically\n                if (messageWindowScrollTop + 20 > messageWindowscrollMax) {\n                    setTimeout(() => {\n                        this.messageWindow.scrollToBottom();\n                    }, 0);\n                }\n            });\n\n            this.addResizeListeners();\n        }\n    }\n    return ChatWidgetClass;\n};\n\nclass GroupChatWidget extends ChatWidget(GroupChatMessage) {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            overflowY: \"hidden\",\n        });\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                   style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                      ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages()}\n                                      staticTop={loadMoreButton}/>\n        ];\n    }\n}\n\nclass PrivateChatWidget extends ChatWidget(PrivateChatMessage) {\n    setOptions(options) {\n        options = Object.assign({\n            messageThread: options.privateChat.getMessageThread(),\n            baseRequest: {\n                userId: options.privateChat.getOtherUserId(),\n                privateChatId: options.privateChat.id\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    setPrivateChat(privateChat) {\n        this.options.privateChat = privateChat;\n        this.setOptions(this.options);\n    }\n\n    getPostURL() {\n        return \"/chat/private_chat_post/\";\n    }\n\n    getGetType() {\n        return \"POST\"; // It might create a chat if it doesn't have one\n    }\n\n    getGetURL() {\n        return \"/chat/private_chat_state/\";\n    }\n}\n\nclass VotableChatMessage extends GroupChatMessage {\n    render() {\n        let result = super.render();\n        result[1].options.children.push(<CommentVotingWidgetWithThumbs style={{display: \"inline-block\"}} message={this.options.message} />);\n        return result;\n    }\n}\n\nclass VotableGroupChatWidget extends ChatWidget(VotableChatMessage) {\n    setOptions(options) {\n        options.messageThread = options.messageThread || MessageThreadStore.get(GroupChatStore.get(options.chatId).messageThreadId);\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n}\n\nexport {ChatWidget, EditableMessage,\n    GroupChatWidget, PrivateChatWidget, VotableGroupChatWidget,\n    GroupChatMessage, PrivateChatMessage, VotableChatMessage,\n    PreviewMarkupButton, ChatMessageScrollSection};\n","import {StyleSheet, styleRule} from \"UI\";\n\nclass CommentWidgetStyle extends StyleSheet {\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n    };\n\n    writingSectionStyle = {\n        height: \"auto\",\n        marginTop: \"10px\",\n    };\n\n    @styleRule\n    chatInputStyle = {\n        height: \"30px\",\n        width: \"100%\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        outline: \"none\",\n        paddingLeft: \"8px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"block\",\n        border: \"1px solid #aaa\",\n        \":focus\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    chatInputMax = {\n        height: \"120px\",\n    };\n\n    previewButtonStyle = { // TODO: This is currently not restyled. We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"auto\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n}\n\nexport {CommentWidgetStyle}","import {UI, TimePassedSpan, Switcher, AjaxButton, TextArea, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {GroupChatStore, MessageThreadStore, MessageThread, MessageInstance} from \"MessageThreadStore\";\nimport {ChatMessageScrollSection, ChatWidget, EditableMessage} from \"ChatWidget\";\nimport {isDifferentDay, StemDate} from \"Time\";\nimport {UserHandle} from \"UserHandle\";\nimport {LoginModal} from \"LoginModal\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {Level} from \"ui/Constants\";\nimport {MarkupRenderer} from \"MarkupRenderer\";\nimport {CommentWidgetStyle} from \"./CommentWidgetStyle\";\n\n\nclass ThreadMessage extends EditableMessage {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: false,\n        });\n    }\n\n    render() {\n        let messageDate = <TimePassedSpan timeStamp={this.message.getDate()} style={{color: \"#666 !important\", textTransform: \"uppercase\", fontSize: \".85em\",}} />\n\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\", padding: \"0 10px\", fontSize: \"1.05em\", lineHeight: \"0px\",})} onClick={() => this.toggleEditMode()}>\n                edit\n            </a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <div ref=\"contentContainer\">\n                    <MarkupRenderer ref=\"content\" value={this.message.getContent()} />\n                </div>\n            </Switcher>;\n        }\n\n        let votes = <CommentVotingWidgetWithThumbs height={40} style={{float: \"left\"}} message={this.message} ref=\"commentVotingWidget\" />;\n\n        return [\n            <span style={{float: \"right\", display: \"inline-block\", height: \"40px\", lineHeight: \"40px\",}}>{messageDate}</span>,\n            <div style={{\n                height: \"40px\",\n                lineHeight: \"40px\",\n            }}>\n                <div style={{\n                    height: \"40px\",\n                    lineHeight: \"40px\",\n                    display: \"inline-block\",\n                    float: \"left\",\n                    fontSize: \".95em\",\n                    color: \"#333\",\n                }}>\n                    <UserHandle userId={this.message.userId} style={{fontSize: \"1.1em\",}}/>\n                </div>\n                {editButton}\n            </div>,\n            <div style={{\n                paddingTop: \"5px\",\n                fontSize: \"16px\",\n            }}>\n                {this.contentSwitcher}\n            </div>,\n            <div style={{\n                height: \"40px\",\n            }}>\n                {votes}\n            </div>,\n            <div style={{\n                height: \"1px\",\n                width: \"100%\",\n                backgroundColor: \"#ddd\",\n            }}></div>,\n        ];\n    }\n}\n\nclass ToggleLogin extends UI.Primitive(\"span\") {\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            LoginModal.show();\n            return;\n        });\n    }\n}\n\n\n@registerStyle(BlogStyle)\nclass BlogCommentWidget extends ChatWidget(ThreadMessage) {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            entryComparator: (a, b) => {\n                return b.getNormalizedId() - a.getNormalizedId();\n            }\n        })\n    }\n\n    get commentWidgetStyle() {\n        return CommentWidgetStyle.getInstance();\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                style={this.commentWidgetStyle.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages(true)}\n                                      entryComparator={this.options.entryComparator}\n                                      staticTop={loadMoreButton} />\n        ];\n    }\n\n    renderMessageBox() {\n        return [\n            <div ref=\"writingSection\" style={this.commentWidgetStyle.writingSectionStyle}>\n                <TextArea readOnly={this.messageThread.muted}\n                          ref=\"chatInput\"\n                          onChange={() => {\n                              if (this.chatInput.getValue()) {\n                                  this.chatInput.addClass(this.commentWidgetStyle.chatInputMax);\n                              } else {\n                                  this.chatInput.removeClass(this.commentWidgetStyle.chatInputMax);\n                              }\n                          }}\n                          className={this.commentWidgetStyle.chatInputStyle}\n                          placeholder=\"Leave a comment...\"/>\n                <Button disabled={this.messageThread.muted}\n                           label=\"SUBMIT\"\n                           ref=\"sendMessageButton\"\n                           className={this.styleSheet.sendMessageButtonStyle}\n                           level={Level.PRIMARY}\n                           onClick={() => this.sendMessage()} />\n                {/*{this.messageThread.hasMarkupEnabled() ?\n                        <PreviewMarkupButton disabled={this.messageThread.muted} ref=\"markupButton\" style={previewButtonStyle}\n                                         getValue={() => {return this.chatInput.getValue();}}\n                                         setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                        /> : null}*/ /* UNCOMMENT THIS !! */}\n            </div>\n        ];\n    }\n\n    render() {\n        return [\n            this.renderMessageBox(),\n            this.renderMessageView(),\n        ];\n    }\n\n    getDefaultPlugins() {\n        return CommentWidget.defaultPlugins || [];\n    }\n\n    createVirtualMessage(request, message) {\n        return null;\n    }\n}\n\n@registerStyle(BlogStyle)\nclass CommentWidget extends BlogCommentWidget {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.key = this.messageThread.id;\n\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n        this.options.dateTimestamps = false;\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    renderMessageBox() {\n        if (USER.isAuthenticated) {\n            return super.renderMessageBox();\n        } else {\n            return <div style={{\n                color: \"#333\",\n                paddingTop: \"5px\",\n                paddingBottom: \"5px\",\n            }}>You need to&nbsp;\n                <ToggleLogin style={{\n                    backgroundColor: \"#eee\",\n                    cursor: \"pointer\",\n                    padding: \"5px 10px\",\n                }}>\n                    login\n                </ToggleLogin>\n                &nbsp;to send a comment.</div>;\n        }\n    }\n\n    render() {\n        let commentsCount = this.messageThread.getMessages().length;\n        let commentsTitle;\n\n        commentsTitle = <div className={this.styleSheet.commentsTitle}>\n            {commentsCount} {commentsCount != 1 ? \"comments\" : \"comment\"}\n        </div>;\n\n        return [commentsTitle, super.render()];\n    }\n}\n\nclass AsyncCommentThread extends UI.Element {\n    getMessageThread() {\n        let groupChat = GroupChatStore.get(this.options.chatId);\n        return groupChat && groupChat.getMessageThread();\n    }\n\n    render() {\n        let messageThread = this.getMessageThread();\n        let commentWidgetOptions = {\n            marginBottom: \"10px\",\n            paddingBottom: \"10px\",\n            height: \"auto\",\n            width: \"100%\",\n            marginTop: \"50px\",\n            marginLeft: \"0px\",\n            marginRight: \"0px\",\n            border: \"0px\",\n            maxWidth: \"900px\"\n        };\n\n        if (messageThread) {\n            return [<CommentWidget ref=\"commentsSection\" chatId={this.options.chatId} messageThread={messageThread}\n                                   style={commentWidgetOptions} />];\n        } else {\n            GroupChatStore.fetch(this.options.chatId, (groupChat) => {\n                this.redraw();\n            });\n            return [\n                <div style={{\n                    width: \"100%\",\n                    height: \"60px\",\n                    lineHeight: \"60px\",\n                    fontSize: \"1em\",\n                    textAlign: \"center\",\n                    textTransform: \"uppercase\",\n                    fontWeight: \"bold\",\n                }}>\n                    <span className=\"fa fa-spinner fa-spin\" style={{\n                        padding: \"0 8px\",\n                    }}/>\n                    Comments loading...\n                </div>\n            ];\n        }\n    }\n}\n\nexport {CommentWidget, AsyncCommentThread};\n","import {UI} from \"./UIBase\";\nimport {keyframesRule} from \"../decorators/Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {StyleSheet} from \"./Style\";\n\nfunction getCircleStyle(size, borderSize, color, animationName, animationDuration) {\n    return {\n        position: \"absolute\",\n\n        height: size + \"px\",\n        width: size + \"px\",\n\n        border: borderSize + \"px solid \" + color,\n        borderRadius: size + \"px\",\n        borderRight: borderSize + \"px transparent\",\n        borderBottom: borderSize + \"px transparent\",\n\n        rotate: \"0deg\",\n        transform: \"rotate(45deg)\",\n\n        animationName: animationName,\n        animationDuration: animationDuration,\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"linear\",\n    };\n}\n\nfunction createCircle(size, borderSize, color, animationName, animationDuration) {\n    return <div style={getCircleStyle(size, borderSize, color, animationName, animationDuration)} />;\n}\n\nclass RotatingHelperStyle extends StyleSheet {\n    @keyframesRule\n    rotateClockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(360deg)\"\n        }\n    };\n\n    @keyframesRule\n    rotateCounterclockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(-360deg)\"\n        }\n    }\n}\n\n@registerStyle(RotatingHelperStyle)\nclass ConcentricCirclesLoadingScreen extends UI.Element {\n    render() {\n        let centerConstant = 100;\n        return <div style={{\n            height: \"100%\",\n            width: \"100%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginTop: \"200px\",\n        }}>\n            {createCircle(225 - centerConstant, 5, \"#3a4859\", this.styleSheet.rotateClockwise, \"2.25s\")}\n            {createCircle(200 - centerConstant, 4, \"#666666\", this.styleSheet.rotateCounterclockwise, \"1.5s\")}\n            {createCircle(175 - centerConstant, 3, \"#aaaaaa\", this.styleSheet.rotateClockwise, \"1s\")}\n            {createCircle(150 - centerConstant, 2, \"#20232d\", this.styleSheet.rotateCounterclockwise, \"3s\")}\n        </div>;\n    }\n}\n\nexport {ConcentricCirclesLoadingScreen}\n","import {ensure} from \"../base/Require\";\n\nlet DelayedElement = (BaseClass) => class DelayedElement extends BaseClass {\n    applyNodeAttributesNotLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributesLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributes() {\n        if (!this._loaded) {\n            return this.applyNodeAttributesNotLoaded();\n        } else {\n            return this.applyNodeAttributesLoaded();\n        }\n    }\n\n    renderNotLoaded() {\n        return \"Loading component...\";\n    }\n\n    renderLoaded() {\n        return super.render();\n    }\n\n    render() {\n        if (!this._loaded) {\n            return this.renderNotLoaded();\n        } else {\n            return this.renderLoaded();\n        }\n    }\n\n    setLoaded() {\n        if (this._loaded) {\n            return;\n        }\n        this._loaded = true;\n        if (!this.node) {\n            return;\n        }\n        super.redraw();\n        if (!this._executedMount) {\n            this._executedMount = true;\n            this.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        // Implement here anything you might need\n    }\n\n    redrawNotLoaded() {\n        this.beforeRedrawNotLoaded();\n        // The previous code might have triggered a redraw, skip if that was the case\n        if (!this._loaded) {\n            super.redraw();\n        }\n    }\n\n    redrawLoaded() {\n        super.redraw();\n    }\n\n    redraw() {\n        if (!this._loaded) {\n            return this.redrawNotLoaded();\n        }\n        return this.redrawLoaded();\n    }\n\n    onMount() {\n        // Nothing to be done here\n    }\n\n    onDelayedMount() {\n        super.onMount();\n    }\n};\n\nlet ScriptDelayedElement = (BaseClass, scripts) => class ScriptDelayedElement extends DelayedElement(BaseClass) {\n    beforeRedrawNotLoaded() {\n        // TODO: what happens if this gets destroyed before the load finishes? Should cancel this\n        ensure(scripts, () => {\n            this.setLoaded();\n        });\n    }\n};\n\nexport {DelayedElement, ScriptDelayedElement}\n","import {UI} from \"./UIBase\";\nimport {ConcentricCirclesLoadingScreen} from \"./ConcentricCirclesLoadingScreen\";\nimport {DelayedElement} from \"./DelayedElement\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\nimport {CardPanel} from \"./CardPanel\";\nimport {Level} from \"./Constants\";\n\n// You can configure the loading/error states by defining the \"renderLoading\" and \"renderError\" attributes of the\n// function somewhere globally in your app.\n// Example:\n// StateDependentElement.renderLoading = \"Loading...\";\n// or\n// StateDependentElement.renderLoading = () => <MyCustomLoadingAnimation />\n// StateDependentElement.renderError = (error) => <MyCustomErrorMessageClass error={error} />\n\nexport let StateDependentElement = (BaseClass) => class StateDependentElementClass extends DelayedElement(BaseClass) {\n    importState(data) {\n        GlobalState.importState(data.state || {});\n        for (let key of Object.keys(data)) {\n            if (key !== \"state\") {\n                this.options[key] = data[key];\n            }\n        }\n    }\n\n    getAjaxUrl() {\n        let url = location.pathname;\n        if (!url.endsWith(\"/\")) {\n            url += \"/\";\n        }\n        return url;\n    }\n\n    getAjaxRequest() {\n        return {};\n    }\n\n    renderNotLoaded() {\n        let renderLoading = StateDependentElement.renderLoading;\n        if (typeof renderLoading === \"function\") {\n            renderLoading = renderLoading();\n        }\n        return renderLoading;\n    }\n\n    setError(error) {\n        this.options.error = error;\n    }\n\n    renderError() {\n        let renderError = StateDependentElement.renderError;\n        if (typeof renderError === \"function\") {\n            renderError = renderError(this.options.error);\n        }\n        return renderError;\n    }\n\n    renderLoaded() {\n        if (this.options.error) {\n            return this.renderError();\n        }\n        return super.renderLoaded();\n    }\n\n    onDelayedMount() {\n        if (!this.options.error) {\n            super.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        Ajax.getJSON(this.getAjaxUrl(), this.getAjaxRequest()).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            (error) => {\n                this.setError(error);\n                this.setLoaded();\n            }\n        );\n    }\n};\n\nStateDependentElement.renderLoading = () => <ConcentricCirclesLoadingScreen/>;\n\nStateDependentElement.renderError = (error, message) => {\n    return <div style={{maxWidth: \"300px\", margin: \"0 auto\", marginTop: \"30px\"}}>\n            <CardPanel title={UI.T(\"Error in opening the URL\")} level={Level.ERROR}>\n                <h3>{message || error.message}</h3>\n            </CardPanel>\n        </div>;\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, Link, Modal, Form, FormField, TextInput, FormGroup, CheckboxInput, TemporaryMessageArea} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {BlogEntryStore} from \"BlogStore\";\nimport {ArticleStore} from \"ArticleStore\";\nimport {MarkupEditor} from \"markup/MarkupEditor\";\nimport {UserHandle} from \"UserHandle\";\nimport {BlogArticleRenderer} from \"./BlogArticleRenderer\";\nimport {ArticleEditor} from \"ArticleEditor\";\nimport {AsyncCommentThread} from \"CommentWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {slugify} from \"Utils\";\nimport {FAIcon} from \"FontAwesome\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Route, Router} from \"Router\";\nimport {Dispatcher} from \"Dispatcher\";\n\nimport {Theme} from \"ui/style/Theme\";\nimport {Level} from \"ui/Constants\";\n\nexport class BlogEntryEditModal extends Modal {\n    getModalWindowStyle() {\n        return Object.assign({}, super.getModalWindowStyle(), {\n            margin: \"0 auto\",\n            maxHeight: \"100%\",\n            overflow: \"initial\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            top: \"1vh\",\n            height: \"98vh\",\n        });\n    }\n\n    render() {\n        let entry = BlogEntryStore.get(this.options.entryId);\n        let article = entry.getArticle();\n\n        let discussionButton = null;\n        if (!entry.discussionId) {\n            discussionButton = <Button level={Level.WARNING} label=\"Create discussion\"\n                                       onClick={() => this.createDiscussion()} style={{marginLeft: \"5px\"}}/>;\n        }\n\n        return [\n            <h3>Edit Entry</h3>,\n            <Form>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" value={article.name} />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" value={entry.urlName} />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\" value={entry.visible} />\n                </FormField>\n                <Button level={Level.PRIMARY} label=\"Change settings\" onClick={() => this.changeSettings()} />\n                {discussionButton}\n                <TemporaryMessageArea ref=\"messageArea\"/>\n            </Form>,\n            <ArticleEditor ref=\"contentEditor\" articleId={article.id} style={{flex: \"1\"}} />\n        ];\n    }\n\n    changeSettings() {\n        let title = this.titleInput.getValue();\n        let urlName = this.urlInput.getValue();\n\n        let request = {\n            entryId: this.options.entryId,\n            isVisible: this.visibleCheckbox.getValue(),\n        };\n\n        if (title) {\n            request.title = title;\n        }\n\n        if (urlName) {\n            request.urlName = urlName;\n        }\n\n        Ajax.postJSON(\"/blog/change_entry_settings/\", request).then(\n            (data) => {\n                if (data.urlName) {\n                    Router.changeURL([\"blog\", data.urlName]);\n                }\n                this.hide();\n            }\n        );\n    }\n\n    createDiscussion() {\n        let request = {\n            entryId: this.options.entryId\n        };\n\n        Ajax.postJSON(\"/blog/create_entry_discussion/\", request).then(\n            () => this.hide()\n        );\n    }\n}\n\nexport class NewBlogEntryModal extends Modal {\n    render() {\n        return [\n            <h1>New Entry</h1>,\n            <FormGroup>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\"/>\n                </FormField>\n                <Button label=\"Add Entry\" level={Level.PRIMARY} onClick={() => {this.addEntry()}}/>\n                <MarkupEditor ref=\"postContentMarkup\" style={{height: \"450px\"}} />\n            </FormGroup>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.titleInput.onKeyUp(() => {\n            this.urlInput.setValue(slugify(this.titleInput.getValue()));\n        });\n    }\n\n    addEntry() {\n        let data = {};\n\n        let title = this.titleInput.getValue();\n        if (title) {\n            data.title = title;\n        }\n\n        let urlName = this.urlInput.getValue();\n        if (urlName) {\n            data.urlName = urlName;\n        }\n\n        data.isVisible = this.visibleCheckbox.getValue();\n\n        let content = this.postContentMarkup.getValue();\n        if (content) {\n            data.content = content;\n        }\n\n        Ajax.postJSON(\"/blog/add_entry/\", data).then(\n            (data) => {\n                let blogEntry = BlogEntryStore.get(data.blogEntryId);\n                Router.changeURL([\"blog\", blogEntry.urlName]);\n                this.hide();\n            }\n        );\n    }\n}\n\nclass BlogEntryPreview extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            position: \"relative\",\n            maxHeight: \"420px\",\n            marginTop: \"45px\",\n            marginBottom: \"45px\",\n        });\n    }\n\n    canOverwrite(obj) {\n        return super.canOverwrite(obj) && this.options.entryId === obj.options.entryId;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    getEntryURL() {\n        return \"/blog/\" + this.getBlogEntry().urlName + \"/\";\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n        const article = this.getBlogArticle();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            color: \"#777\",\n            fontSize: \"1em\",\n            margin: \"0\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>{UI.T(\"Last update on\")} {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        return [\n            <div style={{height: \"100%\",}}>\n                <div style={{\n                    boxShadow: \"0px 0px 10px rgb(160, 162, 168)\",\n                    \"background-color\": \"#fff\",\n                    \"padding\": \"1% 4% 10px 4%\",\n                    \"margin\": \"0 auto\",\n                    \"width\": \"900px\",\n                    \"max-width\": \"100%\",\n                    position: \"relative\"\n                }}>\n                    <div style={blogStyle.writtenBy}>\n                        {UI.T(\"Written by\")} <UserHandle\n                        userId={article.userCreatedId}/>, {publishedFormat}.{modifiedFormat}\n                    </div>\n                    <div style={blogStyle.title}>\n                        <Link href={this.getEntryURL()} value={article.name}\n                              style={{\"text-decoration\": \"none\", \"color\": \"inherit\"}}/>\n                    </div>\n                    <BlogArticleRenderer article={article} style={blogStyle.blogArticleRenderer}/>\n                    <div className={blogStyle.whiteOverlay}></div>\n                    <Link href={this.getEntryURL()} style={blogStyle.link} value={UI.T(\"Continue reading\")}/>\n                </div>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryView extends UI.Element {\n    get pageTitle() {\n        return this.getBlogArticle().name;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSheet().blogEntryView);\n    }\n\n    getComments() {\n        let chatId = this.getBlogEntry().discussionId;\n        if (!chatId) {\n            return null;\n        }\n        return (<div style={{marginBottom: \"20px\", marginTop: \"20px\"}}>\n            <AsyncCommentThread chatId={chatId}/>\n        </div>);\n    }\n\n    render() {\n        const article = this.getBlogArticle();\n        const blogStyle = this.getStyleSheet();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            margin: \"3px\",\n            color: \"#777\",\n            fontSize: \"1em\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>Last update on {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        let blogEntryEditButton;\n        // TODO: should use proper rights\n        if (USER.isSuperUser) {\n            blogEntryEditButton = <Button level={Level.DEFAULT} label=\"Edit\" onClick={() => {\n                BlogEntryEditModal.show({entryId: this.getBlogEntry().id, fillScreen: true});\n            }}/>\n        }\n\n        return [\n            <div style={{\n                \"background-color\": \"#fff\",\n                \"padding\": \"2% 5%\",\n                \"box-shadow\": \"rgb(160, 160, 160) 0px 3px 15px\",\n            }}>\n                {blogEntryEditButton}\n                <div style={blogStyle.writtenBy}>\n                    Written by <UserHandle userId={article.userCreatedId}/> on {publishedFormat}.\n                    {modifiedFormat}\n                </div>\n                <div style={blogStyle.title}>{article.name}</div>\n                <BlogArticleRenderer style={blogStyle.article} article={article}/>\n                <div style={{\n                    \"margin-top\": \"30px\",\n                    \"margin-bottom\": \"10px\",\n                }}>\n                    <Link href=\"/blog/\" style={blogStyle.link} value=\"Back to the Main Blog\"/>\n                </div>\n                {this.getComments()}\n            </div>,\n            <div className={blogStyle.bottomSection}>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryList extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"paddingTop\", \"10px\");\n    }\n\n    showNewBlogPostModal() {\n        let modal = <NewBlogEntryModal fillScreen/>;\n        modal.show();\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n\n        let entries = [];\n\n        let blogEntries = BlogEntryStore.all().sort((a, b) => {\n            return b.getArticle().dateCreated - a.getArticle().dateCreated;\n        });\n\n        for (let entry of blogEntries) {\n            entries.push(<BlogEntryPreview key={entry.id} entryId={entry.id}/>);\n        }\n\n        return [\n            USER.isSuperUser ?\n                <Button label=\"New Entry\"\n                        level={Level.DEFAULT}\n                        onClick={() => this.showNewBlogPostModal()}\n                />\n                : null,\n            <div ref=\"entriesList\">\n                {entries}\n            </div>,\n            <Button label={this.options.finishedLoading ? UI.T(\"End of blog\") : UI.T(\"Load More\")}\n                    ref=\"loadMoreButton\"\n                    style={{margin: \"0px auto\", display: \"block\"}}\n                    className={blogStyle.loadMoreButton}\n                    disabled={this.options.finishedLoading} />,\n            <div style={{\n                height: \"45px\",\n                width: \"100%\",\n            }}/>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.loadMoreButton.addClickListener(() => {\n            if (!this.options.finishedLoading) {\n                Ajax.getJSON(\"/blog/\", {\n                    lastDate: Math.min.apply(null, BlogEntryStore.all().map(x => x.getArticle().dateCreated))\n                }).then(\n                    (data) => {\n                        this.options.finishedLoading = data.finishedLoading;\n                        if (this.options.finishedLoading) {\n                            this.loadMoreButton.options.label = UI.T(\"No more posts\");\n                            this.loadMoreButton.redraw();\n                            this.loadMoreButton.disable();\n                        }\n                        this.redraw();\n                    }\n                );\n            }\n        });\n\n        this.attachCreateListener(BlogEntryStore, () => {\n            this.redraw();\n        });\n    }\n}\n\nTheme.register(BlogEntryView, BlogStyle);\nTheme.register(BlogEntryPreview, BlogStyle);\nTheme.register(BlogEntryList, BlogStyle);\n\nclass DelayedBlogEntryList extends StateDependentElement(BlogEntryList) {\n}\n\nclass DelayedBlogEntryView extends StateDependentElement(BlogEntryView) {\n    getBlogEntry() {\n        return BlogEntryStore.getEntryForURL(this.options.entryURL);\n    }\n\n    get pageTitle() {\n        if (this.getBlogEntry()) {\n            return super.pageTitle;\n        } else {\n            return null;\n        }\n    }\n\n    set pageTitle(value) {\n    }\n\n    onDelayedMount() {\n        super.onDelayedMount();\n        Router.updateURL();\n    }\n\n    getAjaxUrl() {\n        return \"/blog/get_blog_post/\";\n    }\n\n    getAjaxRequest() {\n        return {\n            entryUrlName: this.options.entryURL,\n        }\n    }\n}\n\nclass BlogRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route(\"%s\", (options) => {\n                let entryURL = options.args[options.args.length - 1];\n\n                let blogEntry = BlogEntryStore.getEntryForURL(entryURL);\n\n                if (blogEntry) {\n                    return <BlogEntryView entryId={blogEntry.id} />;\n                } else {\n                    return <DelayedBlogEntryView entryURL={entryURL} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"blog\", options={}) {\n        options.title = options.title || \"Blog\";\n        super(expr, DelayedBlogEntryList, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n\nexport {BlogEntryPreview, DelayedBlogEntryList, DelayedBlogEntryView, BlogEntryView, BlogRoute};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {MessageThreadStore, MessageInstanceStore} from \"MessageThreadStore\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Ajax} from \"Ajax\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nclass Forum extends StoreObject {\n    constructor() {\n        super(...arguments);\n        this.forumThreads = new Map();\n        // TODO: not appropriate to register to streams here\n        this.registerToStream();\n        ForumThreadStore.addDeleteListener((forumThread) => {\n            if (forumThread.parentId === this.id && this.forumThreads.has(forumThread.id)) {\n                this.deleteForumThread(forumThread);\n            }\n        });\n    }\n\n    getStreamName() {\n        return \"forum-\" + this.id;\n    }\n\n    getForumThreads() {\n        let forumThreads = Array.from(this.forumThreads.values());\n        // Filter out hidden forum threads\n        forumThreads = forumThreads.filter(forumThread => forumThread.isVisible());\n        forumThreads.sort((a, b) => {return b.id - a.id});\n        return forumThreads;\n    }\n\n    addForumThread(forumThread, event) {\n        this.forumThreads.set(forumThread.id, forumThread);\n        this.dispatch(\"newForumThread\", event);\n    }\n\n    deleteForumThread(forumThread) {\n        this.forumThreads.delete(forumThread.id);\n        this.dispatch(\"deleteForumThread\", forumThread);\n    }\n}\n\nvar ForumStore = new GenericObjectStore(\"forum\", Forum);\n\nclass ForumThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        let parent = this.getParent();\n        parent && parent.addForumThread(this);\n    }\n\n    getAuthor() {\n        return PublicUserStore.get(this.authorId);\n    }\n\n    isPinned() {\n        return this.pinnedIndex != null;\n    }\n\n    getPinIndex() {\n        return this.pinnedIndex;\n    }\n\n    getTitle() {\n        return this.title;\n    }\n\n    getContentMessage() {\n        return MessageInstanceStore.get(this.contentMessageId);\n    }\n\n    getVotesBalance() {\n        let message = this.getContentMessage();\n        if (message) {\n            return message.getVotesBalance();\n        }\n        return this.votesBalance;\n    }\n\n    getParent() {\n        return ForumStore.get(this.parentId);\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getTimeAdded() {\n        // TODO: maybe return formatted time\n        return this.timeAdded;\n    }\n\n    getLastActive() {\n        return this.lastActive;\n    }\n\n    getNumReplies() {\n        return this.getNumMessages() - 1;\n    }\n\n    deleteThread(onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/forum/edit_forum_thread/\", {\n            forumThreadId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    getNumMessages() {\n        return this.numMessages;\n    }\n\n    isVisible() {\n        return !this.hidden;\n    }\n\n    isLoaded() {\n        // TODO: this needs to be fixed to support dynamic loading\n        // console.warn(this.getNumReplies(), this.getMessageThread().getNumMessages());\n        return this.getMessageThread() != null && this.getNumReplies() === this.getMessageThread().getNumMessages() - 1;\n    }\n}\n\nconst ForumThreadStore = new GenericObjectStore(\"forumthread\", ForumThread, {\n    dependencies: [\"forum\", \"messageinstance\"]\n});\n\n\nexport {ForumStore, ForumThreadStore};","import {UI, Button} from \"UI\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {Level} from \"ui/Constants\";\n\nclass EditThreadReplyButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            EditThreadReplyModal.show({\n                messageInstance: this.options.messageInstance,\n                classMap: ChatMarkupRenderer.classMap\n            });\n        });\n    }\n}\n\nclass EditThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.markupEditor.setValue(this.options.messageInstance.getContent());\n        // this.markupEditor.codeEditor.getAce().focus();\n        this.doneButton.addClickListener(() => {\n            this.options.messageInstance.edit(this.markupEditor.getValue());\n        });\n    }\n}\n\nexport {EditThreadReplyButton};\n","import {UI, ActionModal, ActionModalButton} from \"UI\";\n\nclass DeleteThreadReplyModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete message\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>{UI.T(\"Are you sure you want to delete the message?\")}</p>;\n    }\n\n    action() {\n        this.options.messageInstance.deleteMessage();\n        this.hide();\n    }\n}\n\nlet DeleteThreadReplyButton = ActionModalButton(DeleteThreadReplyModal);\n\nexport {DeleteThreadReplyButton};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n//import {CSAStyle} from \"CSAStyle\";\n\nconst colors = {\n    // BLUE: \"#20232d\",\n    BLUE: \"#202e3e\",\n    HOVER_BLUE: \"#364251\",\n    // BLACK: \"#181a22\",\n    BLACK: \"#1c2937\",\n    // HOVER_BLACK: \"#323539\",\n    HOVER_BLACK: \"#364251\",\n    WHITE: \"#eee\",\n};\n\n\nclass ForumThreadReplyStyle extends StyleSheet {\n\n    @styleRule\n    mainClass = {\n        width: \"90%\",\n        margin: \"0 auto\",\n        maxWidth: \"1200px\",\n    }\n\n    @styleRule\n    repliesUserAndDate = {\n        height: \"40px\",\n        width: \"100%\",\n        lineHeight: \"40px\",\n        fontSize: \"15px\",\n        marginTop: \"8px\",\n        marginBottom: \"8px\",\n    };\n\n    @styleRule\n    repliesUser = {\n        display: \"inline-block\",\n        float: \"left\",\n        color: \"#444\",\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    repliesDate = {\n        display: \"inline-block\",\n        float: \"right\",\n    };\n\n    @styleRule\n    repliesContent = {\n        marginBottom: \"15px\",\n        fontSize: \"16px\",\n    };\n}\n\n\nlet height = 70;\n\nclass ForumThreadPanelStyle extends StyleSheet {\n    fontSize = \"0.9em\";\n    numRepliesFontSize = \"1.03em\";\n    messageFontSize = \"1.2em\";\n    buttonFontSize = \"1em\";\n\n    @styleRule\n    mainClass = {\n        margin: \"0 auto\",\n        marginBottom: \"20px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: \"2em\",\n        color: \"#333\",\n        minHeight: \"50px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    backButton = {\n        color: \"#444\",\n        fontSize: this.fontsize,\n        textDecoration: \"none\",\n        transition: \".15s\",\n        opacity: \"1\",\n        \":hover\": {\n            opacity: \"1\",\n            color: \"#337ab7\",\n            transition: \".15s\",\n        },\n    };\n\n    @styleRule\n    replyButtonDiv = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        height: \"50px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    replyButton = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    fullPost = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: this.fontSize,\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    dislikeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"16px\",\n    };\n\n    @styleRule\n    likeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"8px\",\n    };\n\n    @styleRule\n    author = {\n        color: \"#262626\",\n        fontSize: this.fontSize,\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        paddingLeft: \"0\",\n        // justifyContent: \"center\",\n        textTransform: \"uppercase\",\n        // fontWeight: \"bold\",\n    };\n\n    @styleRule\n    header = {\n    };\n\n    @styleRule\n    message = {\n        padding: \"5px 12px\",\n        fontSize: this.messageFontSize,\n        color: colors.BLUE,\n        \" p\": {\n            marginBottom: \"0\",\n            padding: \"5px 0\",\n        },\n    };\n\n    @styleRule\n    buttons = {\n        height: \"50px\",\n        width: \"100%\",\n        paddingTop: \"12px\",\n    };\n\n    @styleRule\n    bottomPanel = {\n        height: \"50px\",\n        width: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    };\n\n    @styleRule\n    voting = {\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    numReplies = {\n        height: \"50px\",\n        fontSize: this.numRepliesFontSize,\n        paddingLeft: \"12px\",\n        color: \"#767676\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    replies = {\n        width: \"100%\",\n        color: \"#444\",\n    };\n\n    @styleRule\n    editDeleteButtons = {\n        width: \"100%\",\n        height: \"50px\",\n        padding: \"0 7px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    };\n\n    @styleRule\n    editButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    deleteButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass ButtonStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: colors.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        marginBottom: \"0\",\n        borderColor: colors.BLUE,\n        fontSize: \"13px\",\n        transition: \".2s\",\n        outline: \"none\",\n        \":hover\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n}\n\n\nclass ForumThreadHeaderStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"0.85em\";\n    widthLimit = 800;\n\n    tagsHeight = 50;\n    // borderTopColor = \"rgb(232, 189, 35)\";\n    borderTopColor = \"#333\";\n\n    baseStyleObject = {\n        height: this.tagsHeight + \"px\",\n        // display: \"inline-block\",\n        // float: \"left\",\n        color: \"#262626\",\n        // letterSpacing: \"-0.3px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n        fontWeight: \"bold\",\n    };\n    \n    @styleRule\n    mainClass = {\n        height: \"40px\",\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        // borderBottom: \"2px solid #333\",// + this.borderTopColor,\n        color: \"#aaa\",\n        display: \"flex\",\n\n\n        boxSizing: \"content-box\",\n        backgroundColor: \"#eaeaea\",\n        height: this.tagsHeight + \"px\",\n        borderTop: \"3px solid \" + this.borderTopColor,\n    };\n\n    @styleRule\n    tagsTitle = [this.baseStyleObject, {\n        // marginLeft: \"1%\",\n        // width: \"40%\",\n        paddingLeft: \"12px\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        justifyContent: \"initial\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".7\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsReplies = [this.baseStyleObject, {\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            console.log(window.innerWidth);\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n}\n\n\nclass ForumThreadPreviewStyle extends StyleSheet {\n    // functionality\n    maxHeight = 50;\n    lines = 2;\n    lineHeight = this.maxHeight / this.lines;\n\n    // design\n    fontSize = \".88em\";\n    color = \"#aaa\";\n\n    @styleRule\n    forumThreadPreview = {\n        maxHeight: this.maxHeight + \"px\",\n        lineHeight: this.lineHeight + \"px\",\n        overflow: \"hidden\",\n        fontSize: this.fontSize,\n        color: this.color,\n        \" *\": {\n            marginBottom: \"0\",\n        },\n    };\n}\n\n\nclass ForumThreadBubbleStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"1em\";\n    titlePaddingBottom = \"10px\";\n    widthLimit = 800;\n\n    baseStyleObject = {\n        display: \"inline-block\",\n        verticalAlign: \"top\",\n        fontSize: this.fontSize,\n    };\n\n    @styleRule\n    backgroundColorOddInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorPinnedInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorEvenInstances = {\n        backgroundColor: \"#fff\",\n        \":hover\": {\n            backgroundColor: \"#fafafa\",\n        }\n    };\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        color: \"#555\",\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    threadTitleAndPreview = {\n        flexDirection: \"column\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        paddingTop: \"25px\",\n        paddingBottom: \"25px\",\n        paddingLeft: \"12px\",\n    }\n\n    @styleRule\n    threadTitle = [this.baseStyleObject, {\n        // width: \"40%\",\n        // maxWidth: \"50%\",\n        // flex: \"1.5\",\n        flexDirection: \"column\",\n        textAlign: \"justify\",\n        // paddingRight: \"8px\",\n        verticalAlign: \"middle\",\n        wordWrap: \"break-word\",\n        color: \"#252628\",\n        paddingBottom: this.titlePaddingBottom,\n    }];\n\n    @styleRule\n    pinnedIcon = {\n        textAlign: \"center\",\n        display: \"inline-block\",\n        float: \"left\",\n        height: \"60px\",\n        paddingTop: \"25px\",\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    threadTitleSpan = {\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        lineHeight: \"20px\",\n        // maxWidth: \"95%\",\n        transition: \"0.2s\",\n        fontSize: \"1.2em\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        // maxWidth: \"14%\",\n        flex: \".7\",\n        // paddingLeft: \"8px\",\n        textAlign: \"center\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadReplies = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontWeight: \"bold\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadRepliesSpan = {\n        transition: \"0.2s\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        fontSize: \".85em\",\n    }];\n}\n\n\nclass ForumPanelStyle extends StyleSheet {\n    textColor = \"#333\";\n    headerItemHeight = 50;\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"100%\",\n        // textAlign: \"center\",\n        fontSize: \"2em\",\n        color: this.textColor,\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    buttonParent = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    button = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    header = {\n        height: 2 * this.headerItemHeight + \"px\",\n        width: \"100%\",\n    };\n}\n\n\nexport {\n    ForumThreadReplyStyle, \n    ForumThreadPanelStyle, \n    ButtonStyle, \n    ForumThreadHeaderStyle, \n    ForumThreadPreviewStyle,\n    ForumThreadBubbleStyle, \n    ForumPanelStyle\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\n\n@registerStyle(ButtonStyle)\nclass CreateThreadReplyButton extends Button {\n    getDefaultOptions() {\n        return {\n            level: Level.PRIMARY,\n            size: Size.LARGE,\n            label: UI.T(\"Preview\")\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (!this.markupEditorModal) {\n                this.markupEditorModal = <CreateThreadReplyModal forumThreadId={this.options.forumThreadId}\n                    classMap={ChatMarkupRenderer.classMap}\n                />;\n            }\n            this.markupEditorModal.show();\n        });\n    }\n}\n\nclass CreateThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.createThreadReply();\n        });\n    }\n\n    createThreadReply() {\n        // TODO: should be a dispatch: it should jump and highlight your post\n        Ajax.postJSON(\"/forum/forum_thread_post/\", {\n            forumThreadId: this.options.forumThreadId,\n            message: this.markupEditor.getValue(),\n        });\n    }\n}\n\nexport {CreateThreadReplyButton};\n","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {\n    ActionModal,\n    ActionModalButton,\n    Button,\n    Input,\n    Link,\n    Panel,\n    Router,\n    TimePassedSpan,\n    UI,\n    registerStyle,\n} from \"UI\";\nimport {ConcentricCirclesLoadingScreen} from \"ui/ConcentricCirclesLoadingScreen\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {UserHandle} from \"UserHandle\";\nimport {EditThreadReplyButton} from \"EditThreadReplyButton\";\nimport {DeleteThreadReplyButton} from \"DeleteThreadReplyButton\";\nimport {CreateThreadReplyButton} from \"CreateThreadReplyButton\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {ForumThreadPanelStyle, ForumThreadReplyStyle} from \"ForumStyle\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nlet forumThreadPanelStyle = ForumThreadPanelStyle.getInstance();\nlet buttonStyle = ButtonStyle.getInstance();\n\n\nclass CreateForumThreadModal extends MarkupEditorModal {\n    render() {\n        let inputStyle = {\n            \"margin-bottom\": \"4px\",\n            \"border\": \"0\",\n            //\"border-radius\": \"4px\",\n            //\"border\": \"2px solid #dcdcdc\",\n            \"outline\": \"none\",\n            \"color\": \"#333\",\n            \"font-size\": \"14px\",\n            \"padding-left\": \"8px\",\n            \"width\": \"100%\",\n            \"text-align\": \"center\",\n            \"font-weight\": \"bold\",\n        };\n\n        return [\n            <Input label={UI.T(\"Title\")} ref=\"titleInput\" style={inputStyle} placeholder=\"Click here to edit the title (max. 160 characters).\" />,\n            ...super.render(),\n        ];\n    }\n\n    onMount() {\n        this.doneButton.addClickListener(() => {\n            this.createForumThread();\n        });\n    }\n\n    routeToThread(forumThreadId) {\n        // TODO: add the temp forum title\n        Router.changeURL([\"forum\", forumThreadId, \"title\"])\n    }\n\n    createForumThread() {\n        let request = {\n            forumId: this.options.forumId,\n            title: this.titleInput.getValue(),\n            message: this.markupEditor.getValue(),\n        };\n\n        Ajax.postJSON(\"/forum/create_forum_thread/\", request).then(\n            (data) => {\n                this.routeToThread(data.forumThreadId);\n                this.titleInput.setValue(\"\");\n                this.markupEditor.setValue(\"\");\n                this.markupEditor.redraw();\n                this.hide();\n            }\n        );\n    }\n}\n\n@registerStyle(ButtonStyle)\nclass CreateForumThreadButton extends Button {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        options.size = options.size || Size.LARGE;\n        super.setOptions(options);\n    }\n\n    getModalClass() {\n        return CreateForumThreadModal;\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            this.getModalClass().show({\n                forumId: this.options.forumId,\n                classMap: ChatMarkupRenderer.classMap,\n            });\n        });\n    }\n}\n\nclass DeleteForumThreadModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete forum thread\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>\n            {UI.T(\"Are you sure you want to delete thread\")}\n            {\" \\\"\" + this.options.forumThread.title + \"\\\"?\"}\n        </p>;\n    }\n\n    action() {\n        this.options.forumThread.deleteThread();\n        this.hide();\n    }\n}\n\nlet DeleteForumThreadButton = ActionModalButton(DeleteForumThreadModal);\n\nclass ForumThreadReply extends UI.Element {\n    extraNodeAttributes(attr) {\n        // attr.addClass(forumThreadReplyStyle.mainClass);\n    }\n\n    getMessageInstance() {\n        return this.options.messageInstance;\n    }\n\n    render() {\n        let messageInstance = this.getMessageInstance();\n        let deleteMessage;\n        let editMessage;\n        let editAndDeleteButtons = <span/>;\n\n        if (USER.isSuperUser || USER.id === messageInstance.userId) {\n            deleteMessage = <DeleteThreadReplyButton\n                faIcon=\"trash\"\n                level={Level.DANGER}\n                className={forumThreadPanelStyle.deleteButton}\n                modalOptions={{messageInstance: messageInstance}} />;\n            editMessage = <EditThreadReplyButton\n                faIcon={\"pencil\"}\n                level={Level.INFO}\n                messageInstance={messageInstance}\n                forumThreadPanel={this}\n                className={forumThreadPanelStyle.editButton} />;\n            editAndDeleteButtons = <div className={forumThreadPanelStyle.editDeleteButtons} style={{width: \"auto\",}}>\n                {editMessage}\n                {deleteMessage}\n            </div>;\n        }\n\n        return [\n            <div className={forumThreadPanelStyle.fullPost}>\n                <div className={forumThreadPanelStyle.author}\n                    style={{\n                        fontSize: \"1em\",\n                        paddingLeft: \"12px\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                    }}>\n                    <UserHandle id={messageInstance.userId} style={{\n                        textTransform: \"initial\",\n                        fontSize: \"1.1em\",\n                    }}/>\n                    <TimePassedSpan timeStamp={messageInstance.getDate()} style={{\n                        color: \"#262626 !important\",\n                        paddingRight: \"12px\",\n                    }}/>\n                </div>\n                <ChatMarkupRenderer ref={this.refLink(\"postContent\" + messageInstance.id)} value={messageInstance.getContent()} className={forumThreadPanelStyle.message}/>\n                <div className={forumThreadPanelStyle.bottomPanel}>\n                    {editAndDeleteButtons}\n                    <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={messageInstance} className={forumThreadPanelStyle.voting}/>\n                </div>\n            </div>\n        ];\n    }\n\n    onMount() {\n        this.attachEventListener(this.getMessageInstance(), \"messageDelete\", () => {\n            this.hide();\n        });\n        this.attachEventListener(this.getMessageInstance(), \"messageEdit\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumThreadPanelStyle)\nclass ForumThreadPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    returnToMainForum() {\n        Router.changeURL(this.getMainForumURL());\n    }\n\n    getMainForumURL() {\n        return \"/forum/\";\n    }\n\n    getForumThreadState(callback=NOOP_FUNCTION) {\n        let request = {\n            forumThreadId: this.options.forumThread.id,\n        };\n\n        Ajax.postJSON(\"/forum/forum_thread_state/\", request).then(\n            callback,\n            (error) => {\n                this.returnToMainForum();\n                ErrorHandlers.showErrorAlert(error);\n            }\n        );\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getTitle() {\n        return [\n            <div className={this.styleSheet.title}>\n                <Link href={this.getMainForumURL()} className={this.styleSheet.backButton}\n                    value={<span className=\"fa fa-arrow-left\" style={{\n                        paddingRight: \"10px\",\n                        fontSize: \".8em\",\n                        color: \"#333\",\n                    }} />} />\n                {this.getForumThread().getTitle()}\n            </div>\n        ];\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.author}>\n            {UI.T(\"written by\")}&nbsp;\n            <UserHandle id={this.getForumThread().authorId} style={{\n                textTransform: \"initial\",\n            }}/>\n            &nbsp;\n            <TimePassedSpan timeStamp={this.getForumThread().getTimeAdded()} style={{color: \"#262626 !important\",}}/>\n        </div>;\n    }\n\n    getMessage() {\n        return <div className={this.styleSheet.message}>\n                 <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.getForumThread().getContentMessage().getContent()} style={{height:\"auto\"}}/>\n            </div>;\n    }\n\n    getNumReplies(postsLength) {\n        return [\n            <div className={this.styleSheet.numReplies}>\n                <span style={{\"font-weight\": \"bold\", }}>{postsLength}</span>\n                &nbsp;{\"replies in this thread\" + (postsLength == 0 ? \", be the first one to comment\" : \"\")}\n            </div>\n        ];\n    }\n\n    getVoting() {\n        return <div className={this.styleSheet.voting}>\n            <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={this.getForumThread().getContentMessage()} style={{\"margin-left\": \"0\", }} />\n        </div>;\n    }\n\n    render() {\n        if (!this.options.forumThread.isLoaded()) {\n            this.getForumThreadState(() => {\n                this.redraw();\n                this.initializeListeners();\n            });\n            return <ConcentricCirclesLoadingScreen />;\n        }\n\n        let replies = [];\n        let spaceBetween;\n        let forumThread = this.options.forumThread;\n\n        // sort the forum replies by the activity date\n        let forumThreadMessages = Array.from(forumThread.getMessageThread().getMessages());\n        forumThreadMessages.sort((a, b) => {\n            return a.getDate() - b.getDate();\n        });\n\n        for (let messageInstance of forumThreadMessages) {\n            if (messageInstance !== forumThread.getContentMessage()) {\n                replies.push(<ForumThreadReply className={this.styleSheet.replies} messageInstance={messageInstance} />);\n            }\n        }\n\n        if (replies.length) {\n            spaceBetween = <div style={{\n                height: \"60px\",\n                borderBottom: \"1px solid #ddd\",\n                width: \"90%\",\n                maxWidth: \"1200px\",\n                margin: \"0 auto\",\n            }}></div>;\n        }\n\n        let deleteButton;\n        let editButton;\n        let editAndDeleteButtons;\n\n        if (USER.isSuperUser || USER.id === this.getForumThread().authorId) {\n            deleteButton = <DeleteForumThreadButton faIcon=\"trash\"\n                                                    level={Level.DANGER}\n                                                    className={this.styleSheet.deleteButton}\n                                                    modalOptions = {{\n                                                        forumThread: this.getForumThread()\n                                                    }}/>;\n            editButton = <EditThreadReplyButton faIcon=\"pencil\"\n                                                level={Level.INFO}\n                                                className={this.styleSheet.editButton}\n                                                messageInstance={this.getForumThread().getContentMessage()}/>;\n            editAndDeleteButtons = <div className={this.styleSheet.editDeleteButtons}>\n                {editButton}\n                {deleteButton}\n            </div>;\n        }\n\n        return [\n            <div style={{marginBottom: \"60px\",}}>\n                <div className={this.styleSheet.header}>\n                    {this.getTitle()}\n                    <div className={this.styleSheet.replyButtonDiv}>\n                        {this.getAuthor()}\n                        <CreateThreadReplyButton\n                            label={UI.T(\"REPLY\")}\n                            className={this.styleSheet.replyButton}\n                            size={Size.DEFAULT}\n                            forumThreadId={forumThread.id}\n                            forumThread={this.getForumThread()}\n                            classMap={ChatMarkupRenderer.classMap}\n                        />\n                    </div>\n                </div>\n                <div style={{width: \"90%\", maxWidth: \"1200px\", margin: \"0 auto\", height: \"3px\", backgroundColor: \"#333\", marginTop: \"10px\",}}></div>\n                <div className={this.styleSheet.fullPost}>\n                    {this.getMessage()}\n                    <div className={this.styleSheet.bottomPanel}>\n                        {this.getNumReplies(replies.length)}\n                        {this.getVoting()}\n                    </div>\n                    {editAndDeleteButtons}\n                </div>\n                {spaceBetween}\n                {replies}\n            </div>\n        ];\n    }\n\n    deleteThread() {\n        this.getForumThread().deleteThread();\n    }\n\n    initializeListeners() {\n        // These listeners need to be attached after the ForumThread is loaded in the js state\n        this.getForumThread().getMessageThread().addListener(\"newMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getMessageThread().addListener(\"deleteMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getContentMessage().addEventListener(\"messageEdit\", () => {\n            this.content.setValue(this.getForumThread().getContentMessage().getContent());\n            this.content.redraw();\n        });\n    }\n\n    onMount() {\n        // This applies only for a newly created forum thread, since the listeners from\n        // render do not get attached when the thread is already in the state.\n\n        if (this.options.forumThread.isLoaded()) {\n            this.initializeListeners();\n        }\n\n        this.getForumThread().addDeleteListener(() => {\n            this.returnToMainForum();\n        });\n    }\n}\n\nexport {CreateForumThreadButton, ForumThreadPanel};\n","import {UI, Panel, Link, Route, Router, TimePassedSpan, registerStyle, CardPanel} from \"ui/UI\";\nimport {Dispatcher} from \"base/Dispatcher\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\nimport {PreviewMarkupButton} from \"ChatWidget\";\nimport {UserHandle} from \"UserHandle\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {MessageThreadStore, MessageInstanceStore} from \"state/MessageThreadStore\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Size, Level} from \"ui/Constants\";\nimport {slugify} from \"base/Utils\";\n\nimport {ForumStore, ForumThreadStore} from \"./state/ForumStore\";\nimport {ForumThreadPanel, CreateForumThreadButton} from \"./ForumThread\";\nimport {ForumThreadHeaderStyle, ForumThreadPreviewStyle, ForumThreadBubbleStyle, ForumPanelStyle} from \"./ForumStyle\";\n\n\n@registerStyle(ForumThreadHeaderStyle)\nexport class ForumThreadHeader extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.tagsTitle}>\n            {UI.T(\"Title\")}\n        </div>;\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.tagsAuthor}>\n            {UI.T(\"Author\")}\n        </div>;\n    }\n\n    getReplies() {\n        return <div className={this.styleSheet.tagsReplies}>\n            {UI.T(\"Replies\")}\n        </div>;\n    }\n\n    getViews() {\n        return <div className={this.styleSheet.tagsViews}>\n            {UI.T(\"Views\")}\n        </div>;\n    }\n\n    getVotes() {\n        return <div className={this.styleSheet.tagsVotes}>\n            {UI.T(\"Score\")}\n        </div>;\n    }\n\n    getActivity() {\n        return <div className={this.styleSheet.tagsActivity}>\n            {UI.T(\"Active\")}\n        </div>;\n    }\n\n    render() {\n        return [\n            this.getTitle(),\n            this.getAuthor(),\n            this.getReplies(),\n            this.getViews(),\n            this.getVotes(),\n            this.getActivity(),\n        ];\n    }\n}\n\n@registerStyle(ForumThreadPreviewStyle)\nexport class ForumThreadPreview extends ChatMarkupRenderer {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.forumThreadPreview);\n    }\n}\n\n@registerStyle(ForumThreadBubbleStyle)\nexport class ForumThreadBubble extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.mainClass);\n        // couldn't figure out how to solve this easier and better\n        // if (this.options.isPinned) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorPinnedInstances));\n        // } else if (this.options.color == 0) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorOddInstances));\n        // } else {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorEvenInstances));\n        // }\n        return attr;\n    }\n\n    getHref() {\n        return \"/forum/\" + this.getForumThread().id + \"/\" + slugify(this.getForumThread().getTitle());\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getThreadTitle() {\n        let pinned = \"\";\n        if (this.getForumThread().isPinned()) {\n            pinned = <span className={\"fa fa-thumb-tack \" + this.styleSheet.pinnedIcon} aria-hidden=\"true\" style={{paddingTop: \"0\", lineHeight: \"20px\", height: \"20px\",}}/>;\n        }\n        let forumThread = this.getForumThread();\n        return [\n            <div className={this.styleSheet.threadTitleAndPreview}>\n                <div className={this.styleSheet.threadTitle}\n                    style={{paddingBottom: () => {\n                        if (forumThread.getContentMessage().content) {\n                            return this.styleSheet.titlePaddingBottom;\n                        }\n                        return \"0\";\n                    }}}>\n                    {pinned}\n                    <Link style={{\"text-decoration\": \"none\", \"color\": \"inherit\", \"font-size\": \"14px\", \"text-align\": \"justify\"}} href={this.getHref()}\n                        value={<span className={this.styleSheet.threadTitleSpan}>\n                                {this.getForumThread().getTitle()}\n                                </span>} />\n                </div>\n                <ForumThreadPreview value={this.getForumThread().getContentMessage().content} />\n            </div>\n        ];\n    }\n\n    getThreadAuthor() {\n        return [\n            <span className={this.styleSheet.threadAuthor}>\n                <UserHandle id={this.getForumThread().authorId} style={{\n                    \"line-height\": \"normal\",\n                    wordBreak: \"break-word\",\n                }} />\n            </span>\n        ];\n    }\n\n    getThreadReplies() {\n        return [\n            <div className={this.styleSheet.threadReplies}>\n                <Link style={{\n                    \"text-decoration\": \"none\",\n                    \"color\": \"inherit\",\n                }} href={this.getHref()} value={\n                    <span className={this.styleSheet.threadRepliesSpan}>\n                        {this.getForumThread().getNumReplies()}\n                    </span>\n                } />\n            </div>\n        ];\n    }\n\n    getThreadViews() {\n        return [\n            <div className={this.styleSheet.threadViews}>\n                {this.getForumThread().numViews}\n            </div>\n        ];\n    }\n\n    getThreadVotes() {\n        return [\n            <div className={this.styleSheet.threadVotes}>\n                {this.getForumThread().getVotesBalance()}\n            </div>\n        ];\n    }\n\n    getThreadActivity() {\n        let threadActivity = this.getForumThread().getLastActive();\n        /* TODO @mihaic, this should support custom color option (but I didn't want to change stem files on my own). check UIPrimitives.jsx line 400 */\n        return [\n            <div className={this.styleSheet.threadActivity}>\n                <TimePassedSpan timeStamp={threadActivity} />\n            </div>\n        ]\n    }\n\n    render() {\n        return [\n            this.getThreadTitle(),\n            this.getThreadAuthor(),\n            this.getThreadReplies(),\n            this.getThreadViews(),\n            this.getThreadVotes(),\n            this.getThreadActivity(),\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getForumThread().addUpdateListener(() => {\n            this.redraw();\n        });\n        this.getForumThread().addDeleteListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport class ForumThreadList extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setStyle({\n            width: \"90%\",\n            margin: \"0 auto\",\n            marginTop: \"10px\",\n            marginBottom: \"60px\",\n            // boxShadow: \"0px 0px 10px #ddd\", // TODO: Do we want this?\n        });\n        return attr;\n    }\n\n    getBubbleClass() {\n        return ForumThreadBubble;\n    }\n\n    render() {\n        let forumThreads = Array.from(this.options.forum.getForumThreads());\n\n        forumThreads.sort((a, b) => {\n            if (a.isPinned() && b.isPinned()) {\n                return b.getPinIndex() - a.getPinIndex();\n            }\n            if (a.isPinned()) {\n                return -1;\n            }\n            if (b.isPinned()) {\n                return 1;\n            }\n            return b.lastActive - a.lastActive;\n        });\n\n        let result = [];\n        let color = 1;\n        result.push(<ForumThreadHeader/>);\n        let Bubble = this.getBubbleClass();\n        for (let forumThread of forumThreads) {\n            result.push(<Bubble forumThread={forumThread} color={color} isPinned={forumThread.isPinned()}/>);\n            if (!forumThread.isPinned()) {\n                color = !color;\n            }\n        }\n        return result;\n    }\n\n    onMount() {\n        super.onMount();\n        this.options.forum.addListener(\"newForumThread\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumPanelStyle)\nexport class ForumPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.title}>\n                {this.options.forum.name}\n            </div>;\n    }\n\n    getButton() {\n        return <div className={this.styleSheet.buttonParent}>\n            <CreateForumThreadButton\n                label=\"NEW POST\"\n                className={this.styleSheet.button}\n                size={Size.DEFAULT}\n                forumId={this.options.forum.id}\n            />\n        </div>;\n    }\n\n    getForumThreadList() {\n        return <ForumThreadList forum={this.options.forum}/>;\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>\n                {this.getTitle()}\n                {this.getButton()}\n            </div>,\n            this.getForumThreadList(),\n        ];\n    }\n\n    onMount() {\n        this.attachListener(ForumThreadStore, \"create\", () => this.redraw());\n        this.attachListener(ForumThreadStore, \"delete\", () => this.redraw());\n    }\n}\n\nexport class DelayedForumPanel extends StateDependentElement(ForumPanel) {\n    importState(data) {\n        super.importState(data);\n        this.options.forum = ForumStore.get(this.options.forumId);\n    }\n}\n\nexport class DelayedForumThreadPanel extends StateDependentElement(ForumThreadPanel) {\n    // TODO: must be able to specify if URL is POST or GET in StateDependentElement\n    beforeRedrawNotLoaded() {\n        Ajax.postJSON(\"/forum/forum_thread_state/\", {\n            forumThreadId: this.options.forumThreadId,\n        }).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            () => {}\n        );\n    }\n\n    importState(data) {\n        super.importState(data);\n        this.options.forumThread = ForumThreadStore.get(this.options.forumThreadId);\n    }\n}\n\nexport class ForumRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route([\"%s\", \"%s\"], (options) => {\n                const forumThreadId = options.args[options.args.length - 2];\n\n                const forumThread = ForumThreadStore.get(forumThreadId);\n\n                if (forumThread) {\n                    return <ForumThreadPanel forumThread={forumThread} />;\n                } else {\n                    return <DelayedForumThreadPanel forumThreadId={forumThreadId} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"forum\", options={}) {\n        super(expr, DelayedForumPanel, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n","import {UI, Route} from \"UI\";\nimport {IndexPage} from \"./IndexPage\";\nimport {BlogRoute} from \"BlogPanel\";\nimport {ForumRoute} from \"ForumPanel\";\n\nexport const MAIN_ROUTE = new Route(\"\", IndexPage, []);","import {UI, Link, Router, GlobalContainer} from \"../ui/UI\";\nimport {isLocalUrl, trimLocalUrl} from \"../base/Utils\";\nimport {Dispatcher} from \"../base/Dispatcher\";\n\n\nexport function singlePageLinkOnMount() {\n    this.addClickListener((event) => {\n        if (event.shiftKey || event.ctrlKey || event.metaKey || !this.options.href || !isLocalUrl(this.options.href)\n            || this.options.newTab || (this.options.target && this.options.target !== \"_self\")) {\n            // Leave it to the browser\n            return;\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        Router.changeURL(trimLocalUrl(this.options.href));\n    });\n}\n\nexport class StemApp extends UI.Element {\n    static init() {\n        Link.prototype.onMount = singlePageLinkOnMount;\n        return self.appInstance = this.create(document.body);\n    }\n\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getBeforeContainer() {\n        return null;\n    }\n\n    getRouterOptions() {\n        return {\n            style: {\n                height: \"100%\",\n            }\n        }\n    }\n\n    getRouter() {\n        return <Router routes={this.getRoutes()} ref=\"router\" {...this.getRouterOptions()}/>;\n    }\n\n    getContainer() {\n        return <GlobalContainer>\n            {this.getRouter()}\n            </GlobalContainer>;\n    }\n\n    getAfterContainer() {\n        return null;\n    }\n\n    render() {\n        return [\n            this.getBeforeContainer(),\n            this.getContainer(),\n            this.getAfterContainer(),\n        ]\n    }\n\n    onMount() {\n        this.router && this.router.addListener(\"change\", () => {\n            document.body.click();\n            Dispatcher.Global.dispatch(\"closeAllModals\");\n        });\n    }\n}\n","import {Dispatcher} from \"base/Dispatcher\";\n\nclass WebsocketStreamHandler extends Dispatcher {\n    static NONE = Symbol();\n    static SUBSCRIBING = Symbol();\n    static SUBSCRIBED = Symbol();\n    static UNSUBSCRIBED = Symbol();\n\n    static MISSING_MESSAGE = \"INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW\";\n\n    constructor(websocketSubscriber, streamName, options={}) {\n        super();\n        this.websocketSubscriber = websocketSubscriber;\n        this.streamName = streamName;\n        this.options = options;\n        this.bytesReceived = 0;\n        this.isIndexed = false;\n        this.lastMessageIndex = -1;\n        this.messageBuffer = new Map();\n        this.missedPackets = 0;\n        this.status = this.constructor.NONE;\n        this.tryCount = 0; // TODO: rename to resubscribesubscribeTryCount\n    }\n\n    sendSubscribe() {\n        const websocketSubscriber = this.websocketSubscriber;\n\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.SUBSCRIBING;\n\n        if (this.haveIndex()) {\n            websocketSubscriber.sendResubscribe(this.streamName, this.getLastIndex());\n        } else {\n            websocketSubscriber.sendSubscribe(this.streamName);\n        }\n\n        this.subscribeTryCount++;\n\n        const subscribeTimeout = websocketSubscriber.constructor.STREAM_SUBSCRIBE_TIMEOUT || 3000;\n        const subscribeTimeoutMax = websocketSubscriber.constructor.STREAM_SUBSCRIBE_MAX_TIMEOUT || 30000;\n        const timeoutDuration = Math.min(subscribeTimeout * this.subscribeTryCount, subscribeTimeoutMax);\n\n        this.resendSubscribeTimeout = setTimeout(() => {\n            console.log(\"WebsocketSubscriber: stream subscribe timeout for #\" + streamName + \" reached! Trying to resubscribe again!\");\n            this.sendSubscribe();\n        }, timeoutDuration);\n    }\n\n    clearResubscribeTimeout() {\n        if (this.resendSubscribeTimeout) {\n            clearTimeout(this.resendSubscribeTimeout);\n            this.resendSubscribeTimeout = undefined;\n        }\n    }\n\n    setStatusSubscribed() {\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.SUBSCRIBED;\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    resetStatus() {\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.NONE;\n        this.subscribeTryCount = 0;\n    }\n\n    processPacket(packet) {\n        this.bytesReceived += packet.length;\n\n        let type, payload;\n        if (packet[0] === \"{\") {\n            type = \"v\";\n            payload = packet;\n        } else {\n            let firstSpace = packet.indexOf(\" \");\n            if (firstSpace > 0) {\n                type = packet.substr(0, firstSpace).trim();\n                payload = packet.substr(firstSpace + 1).trim();\n            } else {\n                console.error(\"WebsocketStreamHandler: Could not process stream packet: \" + packet);\n                return;\n            }\n        }\n\n        if (type === \"i\") {\n            this.processIndexedPacket(payload);\n        } else if (type === \"v\") {\n            this.processVanillaPacket(payload);\n        } else if (type === \"n\") {\n            this.processMissedPacket(payload);\n        } else {\n            console.error(\"WebsocketStreamHandler: invalid packet type \" + type);\n        }\n    }\n\n    processIndexedMessage(index, message) {\n        this.isIndexed = true;\n        if (this.lastMessageIndex == -1) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n        } else if (this.lastMessageIndex + 1 == index) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n            ++index;\n            while (this.messageBuffer.has(index)) {\n                message = this.messageBuffer.get(index);\n                this.messageBuffer.delete(index);\n                this.lastMessageIndex = index;\n                this.processVanillaPacket(message);\n                ++index;\n            }\n        } else {\n            this.messageBuffer.set(index, message);\n        }\n    }\n\n    processMissedPacket(packet) {\n        this.processIndexedMessage(parseInt(packet), WebsocketStreamHandler.MISSING_MESSAGE);\n    }\n\n    processVanillaPacket(packet) {\n        if (packet == WebsocketStreamHandler.MISSING_MESSAGE) {\n            this.missedPackets++;\n        }\n\n        if (!this.options.rawMessage) {\n            try {\n                packet = JSON.parse(packet);\n            } catch (exception) {\n                if (!this.options.parseMayFail) {\n                    console.error(\"WebsocketStreamHandler: Failed to parse \", packet, \" on stream \", this.streamName,\n                                  \" Exception:\", exception.message);\n                    return;\n                }\n            }\n        }\n        this.dispatch(packet);\n    }\n\n    processIndexedPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let message, index;\n        if (firstSpace > 0) {\n            index = parseInt(packet.substr(0, firstSpace).trim());\n            message = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketStreamHandler: Could not process indexed stream packet: \" + packet);\n            return;\n        }\n\n        this.processIndexedMessage(index, message);\n    }\n\n    haveIndex() {\n        return this.isIndexed;\n    }\n\n    getLastIndex() {\n        return this.lastMessageIndex;\n    }\n}\n\nexport {WebsocketStreamHandler};\n","import {Dispatchable} from \"base/Dispatcher\";\nimport {WebsocketStreamHandler} from \"./WebsocketStreamHandler\";\n\nclass WebsocketSubscriber extends Dispatchable {\n    static ConnectionStatus = {\n        NONE: 0,\n        CONNECTING: 1,\n        CONNECTED: 2,\n        DISCONNECTED: 3\n    };\n\n    static STREAM_SUBSCRIBE_TIMEOUT = 3000;\n    static STREAM_SUBSCRIBE_MAX_TIMEOUT = 30000;\n\n    static CONNECT_RETRY_TIMEOUT = 3000;\n    static CONNECT_RETRY_MAX_TIMEOUT = 30000;\n\n    static HEARTBEAT_MESSAGE = \"-hrtbt-\";\n\n    constructor(urls=self.WEBSOCKET_URL) {\n        super();\n        if (!Array.isArray(urls)) {\n            urls = [urls]\n        }\n        this.urls = urls;\n        this.streamHandlers = new Map();\n        this.attemptedConnect = false;\n        this.connectionStatus = WebsocketSubscriber.ConnectionStatus.NONE;\n        this.websocket = null;\n        this.failedReconnectAttempts = 0;\n        this.numConnectionAttempts = 0;\n        //TODO: should probably try to connect right now?\n    }\n\n    setConnectionStatus(connectionStatus) {\n        this.connectionStatus = connectionStatus;\n        this.dispatch(\"connectionStatus\", connectionStatus);\n    }\n\n    getNextUrl() {\n        const currentURLIndex = (this.numConnectionAttempts++) % this.urls.length;\n        return this.urls[currentURLIndex];\n    }\n\n    newConnection(url) {\n        return new WebSocket(url);\n    }\n\n    connect() {\n        const url = this.getNextUrl();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTING);\n        try {\n            console.log(\"WebsocketSubscriber: Connecting to \" + url + \" ...\");\n            this.websocket = this.newConnection(url);\n            this.websocket.onopen = () => {\n                this.onWebsocketOpen();\n            };\n            this.websocket.onmessage = (event) => {\n                this.onWebsocketMessage(event);\n            };\n            this.websocket.onerror = (event) => {\n                this.onWebsocketError(event);\n            };\n            this.websocket.onclose = (event) => {\n                this.onWebsocketClose(event);\n            };\n\n        } catch (e) {\n            this.tryReconnect();\n            console.error(\"WebsocketSubscriber: Failed to connect to \", url, \"\\nError: \", e.message);\n        }\n    }\n\n    tryReconnect() {\n        let reconnectWait = Math.min(WebsocketSubscriber.CONNECT_RETRY_TIMEOUT * this.failedReconnectAttempts,\n                                     WebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT);\n\n        this.failedReconnectAttempts++;\n\n        if (!this.reconnectTimeout) {\n            this.reconnectTimeout = setTimeout(() => {\n                this.reconnectTimeout = null;\n                console.log(\"WebsocketSubscriber: Trying to reconnect websocket connection\");\n                this.connect();\n            }, reconnectWait);\n        }\n    }\n\n    getStreamStatus(streamName) {\n        const streamHandler = this.getStreamHandler(streamName);\n        return streamHandler && streamHandler.status;\n    }\n\n    subscribe(streamName) {\n        // TODO: make sure to not explicitly support streams with spaces in the name\n        console.log(\"WebsocketSubscriber: Subscribing to stream \", streamName);\n\n        if (!this.attemptedConnect) {\n            this.connect();\n            this.attemptedConnect = true;\n        }\n\n        if (this.streamHandlers.has(streamName)) {\n            console.warning(\"WebsocketSubscriber: Already subscribed to stream \", streamName);\n            return;\n        }\n\n        let streamHandler = new WebsocketStreamHandler(this, streamName);\n        this.streamHandlers.set(streamName, streamHandler);\n\n        // Check if the websocket connection is open, to see if we can send the subscription now\n        if (this.isOpen()) {\n            this.sendSubscribe(streamName);\n        }\n\n        return streamHandler;\n    }\n\n    isOpen() {\n        return this.websocket && this.websocket.readyState === 1;\n    }\n\n    sendSubscribe(streamName) {\n        if (this.isOpen()) {\n            this.send(\"s \" + streamName);\n        }\n    }\n\n    sendResubscribe(streamName, index) {\n        if (this.isOpen(streamName)) {\n            this.send(\"r \" + index + \" \" + streamName);\n        }\n    }\n\n    resubscribe() {\n        // Iterate over all streams and resubscribe to them\n        for (let streamHandler of this.streamHandlers.values()) {\n            streamHandler.sendSubscribe();\n        }\n    }\n\n    onStreamSubscribe(streamName) {\n        const streamHandler = this.getStreamHandler(streamName);\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: received subscribe success response for unrequested stream #\" + streamName);\n            return;\n        }\n        streamHandler.setStatusSubscribed();\n    }\n\n    onWebsocketOpen() {\n        this.previousFailedReconnectAttempts = this.failedReconnectAttempts;\n        this.failedReconnectAttempts = 0;\n        console.log(\"WebsocketSubscriber: Websocket connection established!\");\n\n        this.reset();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTED);\n        this.resubscribe();\n    }\n\n    processStreamPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let streamName, afterStreamName;\n        if (firstSpace > 0) {\n            streamName = packet.substr(0, firstSpace).trim();\n            afterStreamName = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketSubscriber: Could not process stream packet: \" + packet);\n            return;\n        }\n\n        let streamHandler = this.streamHandlers.get(streamName);\n        // TODO: have a special mode if no handler is registered\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: No handler for websocket stream \", streamName);\n            return;\n        }\n        streamHandler.processPacket(afterStreamName);\n    }\n\n    fatalErrorClose(data) {\n        this.failedReconnectAttempts = this.previousFailedReconnectAttempts;\n        console.error(\"WebsocketSubscriber: server fatal error close: \", data);\n        this.onWebsocketError(data);\n    }\n\n    onWebsocketMessage(event) {\n        if (event.data === WebsocketSubscriber.HEARTBEAT_MESSAGE) {\n            // TODO: keep track of the last heartbeat timestamp\n        } else {\n            let firstSpace = event.data.indexOf(\" \");\n            let type, payload;\n\n            if (firstSpace > 0) {\n                type = event.data.substr(0, firstSpace).trim();\n                payload = event.data.substr(firstSpace + 1).trim();\n            } else {\n                type = event.data;\n                payload = \"\";\n            }\n\n            if (type === \"e\" || type === \"error\") { // error\n                console.error(\"WebsocketSubscriber: Websocket error: \", payload);\n                payload = payload.split(\" \")\n                const errorType = payload[0];\n                if (errorType === \"invalidSubscription\") {\n                    // Stop trying to resubscribe to a stream that's been rejected by the server\n                    const streamName = payload[1];\n                    const streamHandler = this.getStreamHandler(streamName);\n                    if (streamHandler) {\n                        // TODO: set permission denied explicitly?\n                        streamHandler.clearResubscribeTimeout();\n                    }\n                }\n            } else if (type === \"s\") { // subscribed\n                console.log(\"WebsocketSubscriber: Successfully subscribed to stream \", payload);\n                this.onStreamSubscribe(payload);\n            } else if (type === \"m\") { // stream message\n                this.processStreamPacket(payload);\n            } else if (type  === \"c\") { // command\n                this.dispatch(\"serverCommand\", payload);\n            } else if (type == \"efc\") { // error - fatal - close\n                this.fatalErrorClose(payload);\n            } else {\n                console.error(\"WebsocketSubscriber: Can't process \" + event.data);\n            }\n        }\n    }\n\n    reset() {\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.DISCONNECTED);\n        for (let streamHandler of this.streamHandlers.values()) {\n            streamHandler.resetStatus();\n        }\n    }\n\n    onWebsocketError(event) {\n        console.error(\"WebsocketSubscriber: Websocket connection is broken!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    onWebsocketClose(event) {\n        console.log(\"WebsocketSubscriber: Connection closed!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    send(message) {\n        // TODO: if the websocket is not open, enqueue WebsocketSubscriber message to be sent on open or just fail?\n        this.websocket.send(message);\n    }\n\n    getStreamHandler(streamName) {\n        let streamHandler = this.streamHandlers.get(streamName);\n        if (!streamHandler) {\n            streamHandler = this.subscribe(streamName);\n        }\n        return streamHandler;\n    }\n\n    // this should be pretty much the only external function\n    addStreamListener(streamName, callback) {\n        let streamHandler = this.getStreamHandler(streamName);\n        if (streamHandler.callbackExists(callback)) {\n            return;\n        }\n        streamHandler.addListener(callback);\n    }\n\n    static addListener(streamName, callback) {\n        return this.Global.addStreamListener(streamName, callback);\n    };\n}\n\nWebsocketSubscriber.Global = new WebsocketSubscriber();\n\nexport {WebsocketSubscriber};\n","import {StyleSheet} from \"ui/Style\";\nimport {styleRule, styleRuleCustom} from \"decorators/Style\";\n\nexport class GlobalStyleSheet extends StyleSheet {\n    @styleRuleCustom({selector: \"body\"})\n    body = {\n        margin: 0,\n        fontSize: this.themeProperties.FONT_SIZE_DEFAULT,\n        fontFamily: this.themeProperties.FONT_FAMILY_DEFAULT,\n    };\n\n    @styleRuleCustom({selector: \".hidden\"})\n    hidden = {\n        display: \"none !important\"\n    };\n\n    @styleRuleCustom({selector: \"*\"})\n    everything = {\n        boxSizing: \"border-box\"\n    };\n\n    @styleRuleCustom({selector: \"a\"})\n    a = {\n        textDecoration: \"none\",\n        color: this.themeProperties.COLOR_LINK\n    };\n\n    @styleRuleCustom({selector: \"hr\"})\n    hr = {\n        height: 0,\n        marginTop: \"20px\",\n        marginBottom: \"20px\",\n        border: 0,\n        borderTop: \"1px solid #eee\",\n        boxSizing: \"content-box\",\n    };\n\n    @styleRuleCustom({selector: \"code, pre\"})\n    codeAndPre = {\n        fontFamily: this.themeProperties.FONT_FAMILY_MONOSPACE,\n    };\n\n    @styleRuleCustom({selector: \"code\"})\n    code ={\n        padding: \"2px 4px\", // TODO: should be in rem\n        fontSize: \"90%\",\n        color: \"#345 !important\", // TODO: take colors from theme\n        backgroundColor: \"#f8f2f4 !important\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS,\n    };\n\n    @styleRuleCustom({selector: \"pre\"})\n    pre = {\n        overflow: \"auto\",\n        display: \"block\",\n        padding: this.themeProperties.BUTTON_BORDER_RADIUS,\n        margin: \"0 0 10px\",\n        fontSize: \"13px\",\n        lineHeight: \"1.42857143\",\n        color: \"#333\",\n        wordBreak: \"break-all\",\n        wordWrap: \"break-word\",\n        backgroundColor: \"#f5f5f5\",\n        border: \"1px solid #ccc\",\n    };\n\n    @styleRuleCustom({selector: \"pre code\"})\n    preInCode = {\n        padding: 0,\n        fontSize: \"inherit\",\n        color: \"inherit\",\n        whiteSpace: \"pre-wrap\",\n        backgroundColor: \"transparent\",\n        borderRadius: 0,\n    };\n}\n","import {Ajax} from \"base/Ajax\";\nimport {StemApp} from \"app/StemApp\";\nimport {getCookie} from \"base/Utils\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {GlobalState} from \"state/State\";\nimport {WebsocketSubscriber} from \"websocket/WebsocketSubscriber\";\nimport {GlobalStyleSheet} from \"./GlobalStyleSheet\";\nimport {ViewportMeta} from \"ui/UIPrimitives\";\nimport {StemDate} from \"time/Date\";\nimport {ServerTime} from \"time/Time\";\n\nexport class EstablishmentApp extends StemApp {\n    static MIN_VIEWPORT_META_WIDTH = 375; // Iphone 6\n\n    static init() {\n        this.loadPublicState();\n        this.addAjaxProcessors();\n        this.registerWebsocketStreams();\n        this.initializeViewportMeta();\n        this.configureTheme();\n        this.initializeGlobalStyle();\n        return super.init();\n    }\n\n    static loadPublicState() {\n        GlobalState.importState(self.PUBLIC_STATE || {});\n    }\n\n    static addAjaxProcessors() {\n        // Add the csrf cookie and credential for all requests\n        Ajax.addPreprocessor((options) => {\n            options.credentials = options.credentials || \"include\";\n            options.headers.set(\"X-CSRFToken\", getCookie(\"csrftoken\"));\n        });\n\n        // Add a postprocessor to load any state received from an Ajax response\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            if (payload.state && !xhrPromise.options.disableStateImport) {\n                GlobalState.importState(payload.state);\n            }\n        });\n\n        // Sync server time\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            const responseHeaders = xhrPromise.getResponseHeaders();\n            const responseDate = responseHeaders.get(\"date\");\n            if (responseDate) {\n                // Estimate server time, with 500ms rounding and 100 ms latency\n                const estimatedServerTime = new StemDate(responseDate).add(600);\n                ServerTime.set(estimatedServerTime, true);\n            }\n        });\n\n        // Raise any error, to be handled by the error processor\n        Ajax.addPostprocessor((payload) => {\n            if (payload.error) {\n                throw payload.error;\n            }\n        });\n\n        // Prettify any error, so it's in a standardized format\n        Ajax.addErrorPostprocessor((error) => {\n            return ErrorHandlers.wrapError(error);\n        });\n\n        // Add a default error handler\n        Ajax.errorHandler = (error) => ErrorHandlers.showErrorAlert(error);\n    }\n\n    static registerWebsocketStreams() {\n        // TODO: first check if websockets are enabled\n        GlobalState.registerStream = function (streamName) {\n            WebsocketSubscriber.addListener(streamName, GlobalState.applyEventWrapper);\n        };\n\n        //Register on the global event stream\n        GlobalState.registerStream(\"global-events\");\n\n        //Register on the user event stream\n        if (self.USER && self.USER.id) {\n            GlobalState.registerStream(\"user-\" + self.USER.id + \"-events\");\n        }\n    }\n\n    static initializeViewportMeta() {\n        return this.viewportMeta = ViewportMeta.create(document.head);\n    }\n\n    static configureTheme() {\n        // Nothing to do by default\n    }\n\n    static initializeGlobalStyle() {\n        GlobalStyleSheet.initialize();\n    }\n}\n","import {UI} from \"ui/UI\";\nimport {MAIN_ROUTE} from \"./Routes\"\nimport {EstablishmentApp} from \"EstablishmentApp\";\nimport {Theme} from \"UI\";\n\nTheme.Global.setProperties({\n    NAV_MANAGER_NAVBAR_HEIGHT: 0,\n    COLOR_BACKGROUND: \"#fff\",\n    COLOR_BACKGROUND_BODY: \"#fff\",\n});\n\nexport class AppClass extends EstablishmentApp {\n    static registerWebsocketStreams() {}\n\n    getRoutes() {\n        return MAIN_ROUTE;\n    }\n}"],"names":["PageTitleManager","prefix","updatePageTitle","defaultTitle","title","getPrefix","getTitle","document","getFullPageTitle","Error","setDefaultTitle","mapIterator","filterIterator","unwrapArray","elements","Array","isArray","Symbol","iterator","from","allProperElements","i","length","result","unwrappedElement","j","push","isLocalUrl","url","host","self","location","origin","startsWith","r","RegExp","test","trimLocalUrl","slice","splitInChunks","array","maxChunkSize","chunks","splice","defaultComparator","a","b","isNumber","aStr","toString","bStr","slugify","string","trim","replace","toLowerCase","suffixNumber","value","suffix","Number","setObjectPrototype","obj","Class","__proto__","prototype","isPlainObject","nodeType","constructor","Object","deepCopy","target","arguments","entries","key","clone","src","dashCase","str","rez","getCookie","name","cookies","cookie","split","decodeURIComponent","substring","uniqueId","objectWeakMap","WeakMap","constructorWeakMap","totalObjectCount","has","objConstructor","objIndex","get","set","objUniqueId","padNumber","num","minLength","strNum","String","getOrdinalSuffix","suffixes","lastDigit","isTeen","Math","floor","suffixWithOrdinal","instantiateNative","BaseClass","NewClass","args","extendsNative","targetClass","includes","allKeys","getOwnPropertySymbols","concat","getOwnPropertyNames","newClass","create","property","getOwnPropertyDescriptor","defineProperty","NOOP_FUNCTION","undefined","iter","func","CallModifier","wrap","UnorderedCallDropper","index","lastExecuted","callback","currentIndex","CallThrottler","options","lastCallTime","pendingCall","pendingCallArgs","pendingCallExpectedTime","numCalls","totalCallDuration","assign","throttle","ON_ANIMATION_FRAME","cancel","clearPendingCall","flush","timeNow","executionDelay","max","debounce","min","wrappedFunc","funcCall","funcCallArgs","isThrottleOnAnimationFrame","cancelHandler","requestAnimationFrame","cancelAnimationFrame","Date","now","computeExecutionDelay","dropThrottled","setTimeout","clearTimeout","replacePendingCall","originalFunc","updatePendingCall","AUTOMATIC","DispatcherHandle","dispatcher","console","warn","removeListener","remove","Dispatcher","listeners","error","callbackExists","handler","addListener","payload","listener","DispatchersSymbol","Dispatchable","dispatchers","getDispatcher","dispatch","call","CleanupJobs","map","x","addListenerOnce","runCleanupJobs","cleanupJob","hasOwnProperty","_cleanupJobs","add","cleanup","dispatcherHandle","Map","getAttachCleanupJobMethod","methodName","addCleanupJob","attachListener","attachEventListener","attachCreateListener","attachUpdateListener","attachDeleteListener","Global","RunOnce","timeout","jobs","job","indexOf","SingleActiveElementDispatcher","element","addChangeListener","forceDispatch","_active","newElement","defaultToPixelsAttributes","Set","CreateNodeAttributesMap","oldAttributesMap","allowedAttributesArray","allowedAttributesMap","attribute","reverseNameMap","domName","ClassNameSet","join","className","NodeAttributes","style","node","attributesMap","defaultAttributesMap","whitelistedAttributes","applyAttribute","keys","styleKey","setStyle","removeStyle","applyStyleToNode","classes","getClassArray","cls","getClassNameSet","classList","delete","attributeOptions","noValue","setAttribute","removeAttribute","addedAttributes","nodeAttributes","attributes","attr","attributeName","applyClassName","UI","renderingStack","BaseUIElement","existingChild","getNodeType","ref","parent","onUnmount","removeRef","TextElement","nextSibling","createNode","applyRef","redraw","insertBefore","onMount","Node","TEXT_NODE","createTextNode","getValue","STEM_DEBUG","stemElement","newValue","nodeValue","UIElement","children","setOptions","defaultOptions","getDefaultOptions","updateOptions","preservedOptions","getPreservedOptions","addListenersFromOptions","createElement","child","destroyNode","clearNode","newChild","copyState","childrenKeyMap","childKey","render","getChildrenToRender","pop","newChildren","getChildrenForRedraw","applyNodeAttributes","domNode","getElementKeyMap","prevChildNode","currentChildNode","firstChild","newChildKey","canOverwrite","overwriteChild","mount","newChildrenSet","returnCopy","getOptionsAsNodeAttributes","extraNodeAttributes","getNodeAttributes","apply","domAttributesMap","addClass","removeClass","hasClass","eventType","addListenerMethodName","handlerMethodName","event","arrayName","doRedraw","nextSiblingNode","Element","bindToNode","insertChildNodeBefore","position","nextChildNode","destroy","eraseChildAtIndex","erasedChild","removeChild","childElement","lastChild","body","contains","parameter","parseFloat","offsetWidth","offsetHeight","getWidthOrHeight","addEventListener","removeNodeListener","removeEventListener","addNodeListener","getStyleSheet","styleSheet","parentNode","uiElement","tag","primitiveMap","Primitive","baseClassPrimitiveMap","resultClass","Orientation","HORIZONTAL","VERTICAL","Direction","UP","LEFT","DOWN","RIGHT","Level","NONE","DEFAULT","INFO","PRIMARY","SECONDARY","SUCCESS","WARNING","DANGER","ERROR","Size","EXTRA_SMALL","SMALL","MEDIUM","LARGE","EXTRA_LARGE","VoteStatus","LIKE","DISLIKE","ActionStatus","RUNNING","FAILED","getOffset","left","top","nodePosition","nodeStyle","offsetLeft","offsetTop","offsetParent","getComputedStyle","computedStyle","window","getPropertyValue","StyleInstance","selector","StyleElement","ALLOWED_SELECTOR_STARTS","DynamicStyleElement","getClassName","instanceCounter","selectorName","ownStyle","haveOwnStyle","isProperValue","firstChar","charAt","subStyle","getStyleInstances","unshift","getSelector","KeyframeElement","getKeyframeName","keyframeName","keyframe","getKeyframeInstance","isDescriptor","desc","decorate","handleDescriptor","entryArgs","createDefaultSetter","configurable","writable","enumerable","descriptor","initializer","ret","lazyInitialize","lazyInit","evaluateStyleRuleObject","getStyleRuleKey","getKeyframesRuleKey","styleRuleWithOptions","targetMethodName","styleRuleDecorator","objInitializer","inherit","parentDesc","getPrototypeOf","parentStyle","getKey","styleRule","styleRuleInherit","styleRuleCustom","keyframesRule","keyframesRuleInherit","StyleSheet","head","getElementName","delayedMount","ensureMounted","getTheme","addStyleSheet","styleElement","styleElementOptions","theme","defaultValue","getProperty","_firstUpdate","ensureFirstUpdate","elementOptions","nameKey","styleInstances","styleInstance","appendChild","keyframes","styleElements","getProperties","singletonInstance","getInstance","log","elementNameCounter","ExclusiveClassSet","classInstance","Device","_isTouchDevice","navigator","MaxTouchPoints","msMaxTouchPoints","mobileDevices","_isMobileDevice","device","userAgent","touches","touch","identifier","getEventTouchIdentifier","find","axis","reference","coordName","getEventTouch","originalEvent","getEventCoord","opr","addons","opera","InstallTrigger","HTMLElement","documentMode","StyleMedia","chrome","webstore","eventName","cachedSupportedValues","onEventName","isSupported","Draggable","_clickCallbacks","_clickDragListeners","callbackWrapper","_okForClick","clickDragListener","onStart","dragForClickStarted","onDrag","dragForClick","addDragListener","removeDragListener","listenerWrapper","onWrapperDrag","eventX","getEventX","eventY","getEventY","deltaX","_lastX","deltaY","_lastY","onWrapperStart","onWrapperEnd","onEnd","touchEventIdentifier","preventDefault","createDragListenerWrapper","touchListenerWrapper","createTouchDragListenerWrapper","_dragListeners","COLORS_BY_NAME","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Color","color","setColor","parseColor","rgba","getRgba","values","hex3","match","parseInt","hex6","substr","rgb","firstColor","secondColor","t","firstColorArray","secondColorArray","convertToRgba","opacity","colorArray","lighten","amount","interpolate","darken","root","pow","enhance","isLight","buildColors","dark","colors","darkenPercents","ColorGenerator","FIRST_COLORS","cache","getRandomColor","allowed","random","getInstanceForObject","Theme","styleSheetSymbol","classSet","styleSheetSet","properties","updateThrottler","updateThrottled","updateStyleSheets","update","getAllStyleSheets","register","setProperties","styleSheetGetter","registerStyle","styleClass","GlobalStyle","getTextColor","backgroundColor","COLOR_BACKGROUND","COLOR_BACKGROUND_ALTERNATIVE","COLOR_BACKGROUND_BODY","COLOR_FOREGROUND_BODY","COLOR_BACKGROUND_BADGE","COLOR_PRIMARY","COLOR_SECONDARY","COLOR_SUCCESS","COLOR_INFO","COLOR_WARNING","COLOR_DANGER","COLOR_LINK","FONT_SIZE_EXTRA_SMALL","FONT_SIZE_SMALL","FONT_SIZE_DEFAULT","FONT_SIZE_LARGE","FONT_SIZE_EXTRA_LARGE","BASE_BORDER_RADIUS","BASE_BOX_SHADOW","BASE_BORDER_WIDTH","BASE_BORDER_STYLE","BASE_BORDER_COLOR","BUTTON_BORDER_RADIUS","CARD_PANEL_HEADER_HEIGHT","CARD_PANEL_HEADER_HEIGHT_LARGE","CARD_PANEL_HEADING_PADDING","CARD_PANEL_HEADING_PADDING_LARGE","CARD_PANEL_TEXT_TRANSFORM","DARK_BOX_SHADOW","ROW_LIST_ROW_HEIGHT","ROW_LIST_ROW_HEIGHT_LARGE","ROW_LIST_ROW_PADDING","ROW_LIST_ROW_PADDING_LARGE","ROW_LIST_ROW_BORDER_WIDTH","FONT_FAMILY_SANS_SERIF","FONT_FAMILY_SERIF","FONT_FAMILY_MONOSPACE","FONT_FAMILY_DEFAULT","NAV_MANAGER_NAVBAR_HEIGHT","NAV_MANAGER_BOX_SHADOW_NAVBAR","NAV_MANAGER_BOX_SHADOW_SIDE_PANEL","MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE","FLAT_TAB_AREA_COLOR_BACKGROUND","FLAT_TAB_AREA_LINE_HEIGHT","FLAT_TAB_AREA_PADDING_SIDES","BasicLevelSizeStyleSheet","level","type","size","BasicLevelStyleSheet","colorToStyleFunction","textColor","colorStyleRule","themeProperties","FlexContainerStyle","orientation","display","marginLeft","flex","flexDirection","marginTop","ContainerStyle","mobilePixels","desktopPercent","margin","isMobileDevice","getSizeStyle","Utils","extraTop","height","width","FlexContainer","Container","SimpleStyledElement","getLevel","getSize","IconableInterface","beforeChildren","getLabel","label","faIcon","getFaIcon","iconOptions","marginRight","labelColorToStyle","darker","textDecoration","regular","borderColor","LabelStyle","fontWeight","border","padding","borderRadius","textAlign","whiteSpace","verticalAlign","lineHeight","touchAction","cursor","fontSize","borderWidth","Label","badgeColorToStyle","BadgeStyle","Badge","progressBarColorToStyle","ProgressBarStyle","marginBottom","overflow","boxShadow","float","transition","fontColor","backgroundImage","backgroundSize","animation","ProgressBar","container","valueInPercent","barStyle","barOptions","disableTransition","striped","active","Panel","SlideBar","barSize","getOrientation","getProgressBarStyle","getSliderStyle","progressBar","slider","getOrientationAttribute","getSliderValue","getDragConfig","HorizontalSlideBar","barWidth","setValue","VerticalSlideBar","barHeight","Link","newTab","Image","RawHTML","innerHTML","__innerHTML","getInnerHTML","ViewportMeta","scale","getDesiredScale","initialScale","maximumScale","MIN_WIDTH","minDeviceWidth","screen","availWidth","getContent","desiredScale","maybeUpdate","TemporaryMessageArea","textElement","message","displayDuration","clear","clearValueTimeout","ScrollableMixin","scrollHeight","clientHeight","scrollTop","getExcessTop","getDesiredExcessHeightTop","getExcessBottom","getDesiredExcessHeightBottom","haveExcessTop","popChildTop","haveExcessBottom","popChildBottom","removeExcessBottom","insertChild","removeExcessTop","maxScrollTop","scrollInfo","scrollAtTop","scrollAtBottom","scrollToHeight","InfiniteScrollable","entryComparator","id","firstRenderedEntry","lastRenderedEntry","staticTop","entry","renderEntry","entryRenderer","insertEntry","TimePassedSpan","getTimeDeltaDisplay","timeStamp","timeDelta","timeUnitsInSeconds","timeUnits","_updateListener","addIntervalListener","updateFunction","TIME_DISPATCHER","setInterval","InputStyle","outline","InputableElement","inputElement","Input","getInputType","SubmitInput","TextInput","NumberInput","val","EmailInput","PasswordInput","FileInput","files","getFiles","formData","FormData","file","append","CheckboxInput","checkboxInput","checked","RadioInput","TextArea","readOnly","Select","givenOptions","selectOptions","selected","select","selectedIndex","getIndex","setIndex","FormStyle","separatedLineInputStyle","maxWidth","paddingRight","Form","form","FormGroup","formGroup","errorMessage","errorField","textContent","hasError","getErrorField","FormField","inline","formField","sameLine","separatedLine","contentFirst","MozStyleElements","SVGNodeAttributes","transform","translate","fixMozAttributes","SVG","createElementNS","point","svgNode","ownerSVGElement","createSVGPoint","svgPoint","y","matrixTransform","getScreenCTM","inverse","rect","getBoundingClientRect","clientLeft","clientTop","getScreenCoordinatedForPoint","state","scrollLeft","pos","bottom","right","getBBox","parentElement","newOpacity","getSvg","Text","text","dy","textAnchor","selectable","setX","setY","fillOnly","EPS","isZero","epsilon","abs","equal","val1","val2","crossProduct","p1","p2","p0","polarToCartesian","angle","radius","orig","cos","sin","SVGRoot","RawSVG","Group","Defs","ClipPath","Path","d","getPath","newPath","getTotalLength","len","getPointAtLength","totalLength","getLength","p3","alpha","atan2","PI","Circle","center","cx","cy","pathString","Stop","RadialGradient","Ellipse","CircleArc","startAngle","endAngle","angleDiff","startPoint","math","endPoint","sweepFlag","largeArcFlag","Rect","Line","fill","stroke","x1","y1","x2","y2","Polygon","points","getPolygonPath","setPath","Transition","context","duration","startTime","dependsOn","speedFactor","isStopped","stopped","setStartTime","functionWrapper","pauseTime","nextStep","getEndTime","time","ratio","restart","stop","lastT","getFraction","Modifier","reverseFunc","TransitionList","transitions","forceFinish","pause","resume","onNewFrame","finished","stk","canAdvance","setSpeedFactor","sortByEndTime","endTime","transitionEndTime","sort","hasDependencyOn","sortByStartTime","forceStart","startPercent","animationFrameId","paused","AnimatedSVG","animationWrapper","repeat","blinkTransition","config","times","executeLastStep","interval","changeOpacityTransition","setOpacity","changeColorTransition","getColor","moveTransition","coords","setPosition","changeFillTransition","Switcher","childMap","numRedraws","fullHeight","preserveScroll","overwriteElements","activeChild","existingElements","newElements","keyMap","lazyRender","getChildProperties","isUpToDate","updateChild","updateActiveChild","isMounted","redrawIndex","doMount","setActive","childProperties","deactivateChild","activateChild","isInDocument","Router","routes","pageTitle","urlParts","page","getRoutes","getPage","getPageNotFound","activePage","getActive","setTitle","setGlobalRouter","path","pathname","filter","replaceHistory","joinURLParts","historyArgs","history","replaceState","pushState","updateURL","setURL","parseURL","router","onpopstate","Route","expr","pageGenerator","subroutes","cachedPages","isArg","ARG_KEY","argsArray","serializedArgs","generatorArgs","myPageTitle","getPageTitle","matchesOwnNode","generatePage","subroute","matches","TerminalRoute","translationMap","TranslationElements","TranslationTextElement","strings","evaluateSprintf","evaluate","T","HorizontalOverflowStyle","baseColor","arrowColor","arrowBackground","arrowHoverColor","arrowHoverBackground","transitionTime","arrow","zIndex","alignItems","borderRight","borderLeft","BaseTabAreaStyle","userSelect","listStyle","DefaultTabAreaStyle","paddingLeft","borderBottomColor","borderBottom","MinimalistTabAreaStyle","paddingTop","paddingBottom","FlatTabAreaStyle","letterSpacing","FlatTabAreaHorizontalOverflowStyle","BasicTabTitle","tab","activeTab","existingElement","babelHelpers.get","panel","activeTabDispatcher","getPanel","addClickListener","TabTitleArea","TabArea","autoActive","panelClass","titleAreaClass","tabArea","tabHref","createTabPanel","tabTitle","tabPanel","titleArea","switcherArea","tabTitles","nav","tabPanels","switcherClass","switcher","activePanel","getTitleArea","getSwitcher","onSetActive","FAIcon","icon","getIcon","FACollapseIcon","collapsed","setCollapsed","FASortIcon","direction","HorizontalOverflow","swipePercent","horizontalOverflow","leftArrow","hiddenArrow","childrenContainer","pusherContainer","rightArrow","eraseChild","shouldOverflowRight","shouldOverflowLeft","elementRect","childRect","leftArrowHidden","getWidth","rightArrowHidden","containerNode","scrollWidth","swipeHelperChild","setWidth","swipeAnimation","checkForOverflow","scrollContent","handleEventAndHandlePositionChange","scrollContentRight","scrollContentLeft","FlatTabTitle","activeTabTitleDispatcher","FlatTabTitleArea","activeBar","barLeft","tabWidth","bar","setActiveBar","activeOnRender","activeBarAnimated","FlatTabArea","MultiMap","nKey","normalizeKey","nValue","normalizeValue","items","Headers","TypeError","polyfill","polyfillHeaders","global","URLSearchParams","decode","query","encode","encodeURIComponent","polyfillURLSearchParams","fileReaderReady","reader","Promise","resolve","reject","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","Body","bodyUsed","bodyInit","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","_bodyFormData","DataView","_bodyArrayBuffer","cloneBuffer","buffer","ArrayBuffer","isView","headers","rejected","setBodyUsed","then","view","Uint8Array","chars","fromCharCode","readArrayBufferAsText","JSON","parse","bytes","shift","byteLength","Request","input","method","normalizeMethod","headerArgs","referrer","referrerPolicy","mode","credentials","initialize","upcased","toUpperCase","methods","polyfillRequest","Response","status","ok","statusText","response","redirectStatuses","RangeError","polyfillResponse","parseHeaders","xhr","rawHeader","getAllResponseHeaders","rawHeaderLines","line","parts","getURLSearchParams","data","urlSearchParams","instance","composeURL","params","XHRPromise","request","XMLHttpRequest","promiseResolve","promiseReject","getResponseHeaders","responseText","responseInit","responseURL","dataType","ontimeout","open","withCredentials","responseType","forEach","setRequestHeader","send","getXHR","postprocessors","fetch","defaultPostprocessors","errorPostprocessors","defaultErrorPostprocessors","getPostprocessors","postprocessor","exception","onSuccess","onComplete","getErrorPostprocessors","onError","_chained","errorHandler","onResolve","onReject","getPromise","catch","abort","addXHRListener","jQueryCompatibilityPreprocessor","contentType","urlParams","arrayValue","preprocessors","defaultPreprocessors","preprocessor","success","complete","AjaxHandler","ajaxHandler","Ajax","parentHandler","baseOptions","getPreprocessors","getErrorHandler","post","inherited","FixedURLAjaxHandler","buttonColorToStyle","darker1","darker2","darker3","hoverDisabled","ButtonStyle","base","ButtonGroupStyle","pointerEvents","RadioButtonGroupStyle","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","Button","disabled","enabled","StateButton","statusOptions","statusLabel","enable","disable","stateOptions","AjaxButton","resetToDefaultTimeout","stateResetTimeout","clearResetTimeout","setState","ajaxPromise","getAjaxHandler","scheduleStateReset","ajax","ButtonGroup","RadioButtonGroup","buttons","oldIndex","oldValue","cardPanelColorToStyle","CardPanelStyle","minHeight","textTransform","cardPanelHeaderColorToStyle","borderStyle","justifyContent","CardPanelHeaderStyle","CardPanel","headingCentered","bodyCentered","headingClasses","getHeaderStyleSheet","headingLevel","centered","bodyClasses","getHeadingClasses","getBodyClasses","bodyStyle","RowListStyle","borderTopWidth","borderTopStyle","borderTopColor","RowList","rowList","alternateColors","rowClasses","alternativeColorsOddRow","noAlternativeColors","rows","rowParser","row","getRowClasses","CollapsibleStyle","transitionDuration","transitionTimingFunction","transitionProperty","transitionDelay","CollapsiblePanelStyle","fontFamily","content","CollapsibleMixin","CollapsibleClass","CollapsibleElement","collapsibleStyleSheet","collapsibleStyle","getCollapsibleStyleSheet","collapsing","transitionEndFunction","CollapsiblePanel","expand","collapse","contentArea","toggleButton","collapsedButton","setChildren","collapsedPanelClass","collapsedHeadingClass","hiddenClass","contentStyle","noPadding","heading","button","toggle","DelayedCollapsiblePanel","_haveExpanded","getDelayedChildren","FloatingWindowStyle","visibility","ModalStyle","background","borderTop","FloatingWindow","visibleAnimated","hiddenAnimated","fadeIn","fadeOut","VolatileFloatingWindow","hideListener","hide","show","bindWindowListeners","unbindWindowListeners","notVisible","stopPropagation","Modal","closeButton","destroyOnHide","visible","getModalWindow","getModalWindowStyle","fillScreen","maxHeight","isVisible","modalWindow","behindPanel","modalContainer","detachListener","closeListenerHandler","modal","ActionModal","actionName","closeName","header","getHeader","getBody","getFooter","footer","getActionName","getActionLevel","action","getCloseName","getActionButton","ActionModalButton","modalOptions","getModalOptions","ErrorModal","GlobalContainerStyle","updateOnResize","innerHeight","GlobalContainer","default","isTouchDevice","Divider","dragMousedown","divider","domEvent","dragMousemoveFunction","dragMousemove","dragMouseupFunction","dragMouseup","touchDeviceTriggered","dividerMousedownFunction","DividerStyle","AccordionStyle","flexGrow","flexShrink","flexBasis","SectionDividerStyle","barThickness","barPadding","dividerColor","backgroundClip","TitledDividerStyle","dividerStyle","DividerBar","noTextSelection","verticalDivider","horizontalDivider","SectionDivider","autoCollapse","uncollapsedSizes","verticalSection","horizontalSection","getHeight","setHeight","minWidth","getDimension","panels","dividers","parentSize","childSize","unCollapsedCount","fixed","getVisibleDivider","setDimension","recalculateDimensions","getHiddenDivider","isCollapsed","expandChild","collapseChild","fixedTotalSize","unfixedTotalSize","dividerEvent","previousEvent","previousPanel","getPreviousUnfixedChild","nextPanel","getNextUnfixedChild","panelsSize","deltaFunction","mouseMoveListener","delta","nextSize","previousSize","getMinDimension","mouseUpListener","clearListeners","dividerMouseDownFunction","leftChildVisible","DividerBarClass","getDividerBarClass","TitledSectionDividerBar","verticalDots","arrowButton","horizontalDots","leftButton","rightButton","BarCollapsePanel","panelChild","getGivenChildren","barCollapsePanel","panelSize","hiddenContent","collapsedSize","isFirst","isLast","firstCaret","lastCaret","collapsedBarTitle","TitledSectionDivider","paddingRemoved","animatedSectionDivider","wrappedChild","AccordionDivider","grabbing","grab","collapseIcon","toggleCollapsed","Accordion","accordion","dragTriggered","panelsHeight","totalFlex","getPreviousVisibleChild","getNextVisibleChild","sign","toggleChild","toggleClass","childrenStatus","CarouselStyle","navigatorHeight","hoverColor","navigatorTransitionTime","CarouselNavigator","navigatorIcon","Carousel","carousel","setActiveIndex","activeIndex","pusher","RangePanelStyle","rowHeight","overflowY","EntriesManager","rawEntries","cacheEntries","cachedEntries","sortEntries","filterEntries","getRawEntries","low","high","getComparator","getFilter","comparator","TableStyle","cellStyle","theadCellStyle","borderSpacing","borderCollapse","SortableTableStyle","sortIcon","TableRow","rowCells","columns","column","renderEntryCell","Table","setColumns","table","renderTableHead","renderTableBody","renderHeaderCell","getEntries","RowClass","getRowClass","getEntryKey","getRowOptions","headerStyle","renderColumnHeader","headerName","columnDefaults","TableRowInCollapsibleTable","CollapsibleTableStyle","collapsibleTableStyle","CollapsibleTableRow","renderCollapsible","getInitialCollapsedContent","DelayedCollapsibleTableRow","redrawCollapsible","CollapsibleTableInterface","BaseTableClass","toggleColumn","rowClass","CollapsibleTable","SortableTableInterface","SortIconClass","SortableTable","columnSortingOrder","sortByColumn","sortBy","sortDescending","colCmp","col","keyA","rawValue","keyB","cmp","cmpRes","sortedEntries","TimeUnit","baseUnit","multiplier","pluralName","milliseconds","getMilliseconds","variableMultiplier","variableDuration","isVariable","date","timeUnit","CANONICAL","ALL","FIXED_DURATION","VARIABLE_DURATION","MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","QUARTER","TRIMESTER","SEMESTER","YEAR","dateMethodSuffix","Duration","relativeDuration","toDuration","increm","negate","toMilliseconds","toSeconds","toMinutes","toHours","locale","addCanonicalTimeUnit","timeUnitsName","addCanonicalTimeUnits","MAX_AUTO_UNIX_TIME","BaseDate","StemDate","toDate","setTime","getTime","toUnix","toTimeUnit","getDateValue","equals","diff","isBefore","isAfter","isSameOrAfter","isSameOrBefore","getDay","count","currentValue","roundDown","addUnit","roundUp","isAbsolute","loc","token","tokenFormattersMap","tokens","splitToTokens","evalToken","fromUnixMilliseconds","getTimezoneOffset","year","getFullYear","lastDayInMonth","getMonth","getDate","months","isLeapYear","month","totalDays","getDaysCountPerMonth","getDayInYear","getWeekDay","unixMilliseconds","unixSecons","highResTimestamp","performance","timing","navigationStart","unixTime","fromUnixSeconds","candidate","lastIsLetter","escapeByCurlyBracket","escapeBySquareBracket","charCode","charCodeAt","isLetter","format","pattern","utc","miniWeekDays","shortWeekDays","longWeekdays","shortMonths","longMonths","DateLocale","formats","longDate","toISOString","getHours","getMinutes","getSeconds","ServerTime","subtract","offset","onlyIfMissing","setPageLoadTime","serverPageLoad","responseStart","DAY_IN_MILLISECONDS","isDifferentDay","timeA","timeB","DatePickerTable","TimePickerWidget","hours","minutes","seconds","textSpanStyle","changeCallback","hourSlider","minuteSlider","secondSlider","DateTimeWindow","computeInitial","initialDateTime","formatISO","currentDate","toTimeString","output","datePicker","timePicker","DateTimePicker","setDate","integerTokens","number","isNaN","years","days","textInput","parseDateFromString","dateString","enqueueIfNotLoaded","isLoaded","enqueueMethodCall","EnqueueableMethodMixin","methodCallQueue","methodCall","CodeEditor","getAce","aceMode","aceTheme","aceKeyboardHandler","tabSize","showLineNumber","showPrintMargin","printMarginSize","applyAceOptions","aceResize","ace","requireAce","onDelayedMount","edit","$blockScrolling","Infinity","resolveQueuedMethods","renderer","$textLayer","setAceMode","setAceKeyboardHandler","setAceTheme","setAceFontSize","setAceTabSize","setAceLineNumberVisible","setAcePrintMarginVisible","setAcePrintMarginSize","setReadOnly","setUseWrapMode","lineWrapping","numLines","maxLines","minLines","setAceOptions","langTools","require","setBasicAutocompletion","enableBasicAutocompletion","setLiveAutocompletion","enableLiveAutocompletion","setSnippets","enableSnippets","resize","sourceCode","fakeUserChange","apiChange","getSession","setMode","$keybindingId","keyboardHandler","aceName","setKeyboardHandler","getMode","setTheme","getFontSize","getOption","setShowGutter","getShowGutter","setShowPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","annotations","setAnnotations","setOption","foldStyle","setFoldStyle","setHighlightActiveLine","setHighlightGutterLine","getScrollTop","setScrollTop","startLine","startCol","endLine","endCol","Range","AceRange","addMarker","marker","removeMarker","doc","getTextRange","getDocument","session","getLine","gotoLine","insert","addAceSessionEventListener","on","focus","editor","editorRow","editorColumn","undoManager","setUndoManager","lastRow","lastRowLength","scrolledToBottom","isRowFullyVisible","scrollToLine","selectAll","execCommand","StaticCodeHighlighterStyle","StaticCodeHighlighter","hideActive","getPathPrefix","hostname","getTransitionDelay","ImportedSVG","getSVGName","svgName","backdropFilter","LogoStyle","Logo","href","getHref","logo","MediumLogo","FacebookLogo","GitHubLogo","InstagramLogo","LinkedInLogo","PinterestLogo","TwitterLogo","YouTubeLogo","Shadow","DBribe","IndexPageStyle","IndexPage","State","stores","applyEventWrapper","applyEvent","objectType","store","getStore","individualEvent","importState","getStoreForEvent","objectId","stateMap","storeState","getDependencies","dependency","importStateFromTempMap","next","GlobalState","DefaultState","StoreSymbol","StoreObject","setStore","handlers","e","_eventDispatcher","addUpdateListener","getState","registerStream","getStreamName","BaseStore","ObjectWrapper","attachToState","addStore","dependencies","GenericObjectStore","objects","getObjectIdForEvent","asIterable","sendDispatch","existingObject","getObjectForEvent","refreshEvent","newObject","createObject","applyCreateEvent","applyEventToObject","objDeleted","applyDeleteEvent","applyUpdateOrCreateEvent","fakeCreate","fakeExisting","object","SingletonStore","AjaxFetchMixin","BaseStoreClass","successCallback","errorCallback","forceFetch","fetchJobs","fetchTimeout","executeAjaxFetch","fetchTimeoutDuration","ids","requestData","getFetchRequestData","fetchURL","fetchType","fetchJob","idFetchJobs","maxFetchObjectCount","idChunks","fetchJobsChunks","requests","getFetchRequestObject","getFetchRequests","requestObject","VirtualStoreObjectMixin","BaseStoreObjectClass","newId","oldId","hasTemporaryId","VirtualStoreMixin","generateVirtualId","virtualId","updateId","existingVirtualObject","getVirtualObject","applyUpdateObjectId","virtualIdCounter","LanguageObject","localName","Language","LanguageStoreClass","isoCode","all","language","Locale","Article","edits","user","USER","isSuperUser","userCreatedId","articleEdit","ArticleStore","article","baseArticleId","languageId","ArticleEdit","articleId","ArticleStoreClass","baseArticle","getTranslation","ArticleEditStore","addCreateListener","getArticle","addEdit","BlogEntry","BlogEntryStoreClass","urlName","blogEntry","BlogEntryStore","StringStream","pointer","steps","ch","whitespaceChar","whitespaceStart","done","at","validChars","skipWhitespace","whitespace","wordStart","nanString","advance","NaN","char","infinityString","isDigit","isHexDigit","numberStart","peek","delimiter","maxLength","delimiterMatch","delimiterIndex","delimiterLength","search","newStream","kmp","prefixLength","ModifierAutomation","startNode","lastNode","startPatternNode","patternPrefix","patternNode","leftWhitespace","whitespaceNode","newNode","backNode","patternLastNode","captureContent","capture","captureNode","endPattern","endCaptureNode","endPatternPrefix","endPatternNodes","endPatternLastNode","endNode","patternStep","endPatternStep","currentArray","originalString","matcher","arrayLocation","currentElement","newArray","end","isJSX","nextState","modifierStart","modifierEnd","modifierCapture","start","isString","reverse","processChildren","processChild","isDummy","InlineModifierMixin","BaseModifierClass","lastElement","lastIndexOf","LineStartModifierMixin","groupConsecutive","isValidElement","wrapItem","patternIndex","patternEnd","itemTag","RawContentModifierMixin","BlockCodeModifier","codeOptions","codeBlock","firstLineEnd","firstLine","lineStream","word","MarkupParser","parseOptions","codeHighlighter","getElement","HeaderModifier","hashtagIndex","hashtagEnd","headerLevel","nextChar","HorizontalRuleModifier","UnorderedListModifier","OrderedListModifier","ParagraphModifier","capturedContent","lineStart","StrongModifier","ItalicModifier","InlineCodeModifier","InlineVarModifier","InlineLatexModifier","LinkModifier","checkAndAddUrl","isCorrectUrl","trimProtocol","modifiers","uiElements","arr","parseUIElements","modifier","modify","el","stream","textStart","elementStart","parseUIElement","optionsEnd","contentStart","uiElementStart","remainingContent","validOptionName","optionName","optionString","foundStringEnd","bracketCount","validJSON","jsonString","parseJSON5","lineNumber","columnNumber","escapee","f","n","renderChar","chr","m","SyntaxError","stringify","c","isFinite","hex","uffff","delim","inlineComment","blockComment","comment","source","reviver","walk","holder","k","v","MarkupClassMap","fallback","extraClasses","classMap","extraClass","classObject","registerMarkup","getClass","GLOBAL","MarkupRenderer","parser","registerDependencies","reparse","convertToUI","SafeUriEnhancer","isSafeUri","uri","MarkupEditor","showButtons","rendererOptions","refLink","getEditor","getMarkupRenderer","markup","markupRenderer","separator","updateValue","editorPanel","codeEditor","toggleLeftButton","sectionDivider","setLevel","toggleRightButton","rendererPanel","setEditorOptions","User","keyChain","currentDict","customSettings","getCustomSetting","lastKey","customSettingsKey","customSettingsValue","timeouts","postJSON","setCustomSetting","UserStore","getCurrentUser","PublicUser","displayName","username","PublicUserStoreClass","PublicUserStore","UserNotification","userId","getUser","lastReadNotificationId","UserNotificationStore","UserHandle","setUser","handle","getProfileUrl","getDisplayHandle","ArticleRenderer","markupClassMap","showEditButton","canBeEditedByUser","editButtonUrl","getEditButton","getArticleToRender","getArticleDependencies","liveLanguage","RecursiveArticleRenderer","ArticleSwitcher","articleChildMap","getPageForArticle","initialArticle","initialArticleId","setActiveArticleId","BLUE","HOVER_BLUE","BLACK","HOVER_BLACK","WHITE","CSAStyle","BlogStyle","titleFontSize","writtenBy","link","blogArticleRenderer","BlogArticleRendererStyle","hStyle","BlogArticleRenderer","BlogQuote","quote","TransferOwnershipModal","newOwner","ownerFormInput","messageArea","showMessage","transferOwnershipButton","DeleteArticleModal","deleteArticle","deleteArticleButton","articles","getArticleIndex","CreateArticleModal","createArticle","articleNameInput","dependencyInput","languageSelect","isPublic","publicCheckbox","createArticleButton","addArticle","AddTranslationModal","ArticleOwnerSpan","ArticlePublicSpan","ArticleTable","resetColumnSortingOrder","unix","dateCreated","dateModified","ArticleManager","addButton","getJSON","ArticleTranslationManager","deleteRedirectLink","ArticleMarkupEditor","ArticleEditor","DiffWidgetClass","versions","versionsLabels","getEdits","leftEditable","rightEditable","initializeVersioning","translationsPanel","baseArticleForm","ownershipPanel","setOwner","revisionsPanel","arrows","markupEditor","saveMarkup","articleNameFormInput","dependencyFormInput","saveOptions","deleteArticleModal","saveMarkupMessageArea","saveMarkupButton","addNewVersion","saveOptionsMessageArea","saveOptionsButton","setOwnerMessageArea","setOwnerButton","leftIndex","leftTextSelector","rightIndex","rightTextSelector","setLeftIndex","setRightIndex","diffWidget","setLeftText","setRightText","updateEditable","setLeftEditable","setRightEditable","onbeforeunload","UserReactionCollection","reactions","getUserReactionStore","reaction","collectionId","currentUser","getReactions","userReaction","currentUserReaction","getCurrentUserReaction","UserReaction","UserReactionCollectionStore","UserReactionStore","MessageInstance","messageId","timeAdded","MessageThreadStore","messageThreadId","fakeIfMissing","reactionCollection","reactionCollectionId","upvotesCount","downvotesCount","getCurrentUserReactionType","getReactionCollection","getNumLikes","getNumDislikes","ans","currentId","getNormalizedId","getMessageThread","getMessages","hasMarkupEnabled","react","hidden","deleteMessageInstance","messageThread","messages","postError","MessageThread","streamName","online","markupEnabled","messageInstance","orderDescending","lastMessage","MessageInstanceStoreClass","messageContent","temporaryId","virtualMessageInstance","meta","MessageInstanceStore","createEvent","addMessageInstance","BaseChatObject","GroupChat","GroupChatStoreClass","GroupChatStore","chatId","PrivateChat","user1Id","user2Id","PrivateChatStore","getChatWithUser","myUserId","privateChat","fetchForUser","privateChatId","BasePopup","contentPadding","arrowDirection","createArrowStyle","baseArrowOutline","baseArrow","getArrow","arrowMargin","bodyPlaced","left2","popupArrow","popupArrowOutline","newParent","setParentNode","manual","bindInsideParent","bodyPopups","popup","Popup","contentFontSize","getTitleAreaContent","newTitle","documentListener","supportsEvent","fakeClickEvent","initEvent","dispatchEvent","blur","closeButtonColor","Emoji","ClickableEmote","redrawTimeout","textBox","appendValue","getValueText","afterClick","ClickableEmoji","ClickableTwitchEmote","EmojiButton","getTextBox","closePopup","emotesList","emoji","EmojiMini","EMOJI","twitchEmoji","TWITCH_EMOTICONS","emojiPopup","getPopup","MarkupEditorModal","getMarkupEditorStyle","appendGraphExample","getButtonStyle","appendSubmissionExample","appendCodeExample","appendLinkExample","appendLatexExample","hideCallback","showCallback","doneButton","ChatMarkupRenderer","ScriptResolver","scriptPath","loaded","scriptElement","async","onLoad","getElementsByTagName","scriptResolveMap","ensureSingle","script","scriptResolver","ensure","scripts","promises","TranslationKey","TranslationKeyStore","TranslationEntry","translationKeyId","TranslationEntryStore","translationEntry","getTranslationKey","ErrorMessage","translationKey","ErrorMessageStoreClass","ErrorMessageStore","ErrorHandlers","wrapError","showErrorAlert","PAGE_NOT_FOUND","SocialAccountManager","socialApp","getSocialApp","getClientId","_Global","login","connect","SocialApp","clientId","SocialAppStoreClass","SocialAppStore","GoogleManager","getSocialAppByName","loginByTokenUrl","ensureScriptNodeExists","getElementById","gapi","load","auth2","init","client_id","updateSigninStatus","getGoogleAuth","isSignedIn","listen","setLoaded","getAuthInstance","getGoogleUser","getAuthResponse","process","handleProcess","grantOfflineAccess","redirect_uri","immediate","sendData","reload","FacebookManager","version","loginOptions","auth_type","scope","logoutUrl","fbAsyncInit","FB","appId","xfbml","nextUrl","accessToken","authResponse","expiresIn","logout","onLogoutSuccess","onLoginSuccess","onLoginCanceled","onLoginError","GithubManager","loginWindowOptions","githubUri","rawParams","githubWindow","Country","getIsoCode","ALL_COUNTRIES_PLACEHOLDER","NO_COUNTRY_PLACEHOLDER","COUNTRY_COMPARATOR","CountryStoreClass","noneName","countriesIds","allCountries","countries","countryId","CountryStore","loginHeight","registerHeight","buttonHeight","fontAwesomeIconHeight","signInButtonHeight","signInButtonWidth","LoginStyle","selectedLeft","selectedRight","fontAwesomeIcon","connectWith","connectIcons","socialConnectDimensions","flexWrap","ERROR_TIMEOUT","accountsConfig","country","socialLoginSpecificInfo","Google","loginManager","Facebook","Github","SocialConnectButton","specificInfo","socialConnectButtonContainer","socialConnectButtonIcon","getLoginManager","loginElement","clearErrorMessage","ThirdPartyLogin","thirdPartyLoginContainer","getSocialApps","getConnectWith","getConnectWithButtons","LoginWidget","loginWidget","emailIcon","passwordInputOptions","placeholder","rememberMeCheckbox","rememberMe","forgotPassword","badLogin","signInButtonContainer","signInButton","getSignInValue","horizontalLine","getHorizontalLine","getEmailInput","getPasswordInput","getRememberMeCheckbox","getForgotPassword","getSignInButton","getClearBothArea","getErrorArea","getThirdPartyLogin","isError","loginErrorMessage","email","emailInput","password","passwordInput","remember","rememberInput","setErrorMessage","sendLogin","RecaptchaWidget","grecaptcha","GOOGLE_RECAPTCHA_PUBLIC_KEY","captchaId","getResponse","onRecaptchaCallback","RegisterWidget","registerWidget","allWithNone","countrySelect","formFields","getUsernameInput","getCountryInput","recaptchaWidget","recaptchaContainer","getSignUpButton","submitButton","recaptchaKey","usernameInput","errorArea","sendRegistration","NormalLogin","loginRegisterSystem","loginSystemButton","registerSystemButton","loginRegisterButtons","getLoginButton","getRegisterButton","loginButton","registerButton","LoginTabButton","selectedLeftClass","RegisterTabButton","selectedRightClass","Login","LoginModal","isAuthenticated","VotingWidgetStyle","likeColor","dislikeColor","notVoteColor","balanceColor","mainClass","thumbsStyle","counterStyle","VotingWidget","votesBalance","userVote","buttonsStyle","likeButtonStyle","getUserVote","dislikeButtonStyle","getVotesBalance","CommentVotingWidget","updateTarget","possibleTarget","tempListener","setupListener","likeButton","resetReaction","like","dislikeButton","dislike","CommentVotingWidgetWithThumbs","thumbsUpScoreStyle","thumbsDownScoreStyle","displayStyle","thumbsUpHoverStyle","thumbsDownHoverStyle","ChatStyle","navbarHeight","renderMessageHeight","userFontSize","commentFontSize","hrBackgroundColor","hoverBackgroundColor","previewButton","loadMoreButton","overflowX","wordBreak","wordWrap","Plugin","linkToParent","pluginName","Pluginable","PluginClass","plugins","plugin","getPlugin","PreviewMarkupButton","EditableMessage","deletable","toggleEditMode","editContent","writingSectionStyle","chatInputStyle","hideEditMode","messageInput","saveMessageChanges","deleteMessage","contentSwitcher","hasChild","contentContainer","showEditMode","GroupChatMessage","groupChatMessage","getPreviousMessage","editButton","timestamp","shouldShowDayTimestamp","messageTimeStampHr","messageTimeStamp","errorElement","userHandle","getTimeOfDay","commentContent","PrivateChatMessage","paddingDiv","isOwnMessage","ChatMessageScrollSection","ChatWidget","ChatMessageClass","ChatWidgetClass","dateTimestamps","renderMessage","initializeShowLoadMoreButton","getNumMessages","showLoadMoreButton","getMaxMessageId","createVirtualMessageInstance","baseRequest","chatInput","createVirtualMessage","setPostError","stack","messageWindow","scrollToBottom","getPostURL","disableStateImport","scrollPosition","scrollPercent","loadMoreMessages","saveScrollPosition","applyScrollPosition","setAdaptiveHeight","viewportHeight","documentElement","availableHeight","extraHeightOffset","getDesiredHeight","renderMessageView","outstandingRequest","topMessage","getTopMessage","messageInstances","lastMessageId","oldScrollHeight","ajaxCall","getGetURL","getGetType","emptyData","scrollDelta","dayTimestamp","muted","sendMessage","messageBoxButton","userData","renderMessageBox","defaultPlugins","getDefaultPlugins","registerPlugin","messageWindowScrollTop","messageWindowscrollMax","addResizeListeners","GroupChatWidget","PrivateChatWidget","getOtherUserId","VotableChatMessage","VotableGroupChatWidget","CommentWidgetStyle","previewButtonStyle","ThreadMessage","messageDate","votes","ToggleLogin","BlogCommentWidget","commentWidgetStyle","chatInputMax","sendMessageButtonStyle","CommentWidget","commentsCount","commentsTitle","AsyncCommentThread","groupChat","commentWidgetOptions","getCircleStyle","borderSize","animationName","animationDuration","rotate","animationIterationCount","animationTimingFunction","createCircle","RotatingHelperStyle","ConcentricCirclesLoadingScreen","centerConstant","rotateClockwise","rotateCounterclockwise","DelayedElement","_loaded","applyNodeAttributesNotLoaded","applyNodeAttributesLoaded","renderNotLoaded","renderLoaded","_executedMount","beforeRedrawNotLoaded","redrawNotLoaded","redrawLoaded","StateDependentElement","endsWith","renderLoading","renderError","getAjaxUrl","getAjaxRequest","setError","BlogEntryEditModal","entryId","discussionButton","discussionId","createDiscussion","changeSettings","titleInput","urlInput","visibleCheckbox","changeURL","NewBlogEntryModal","addEntry","onKeyUp","postContentMarkup","blogEntryId","BlogEntryPreview","getBlogEntry","blogStyle","getBlogArticle","publishedDate","publishedFormat","modifiedFormat","articleInfoStyle","fontStyle","getEntryURL","whiteOverlay","BlogEntryView","blogEntryView","blogEntryEditButton","getComments","bottomSection","BlogEntryList","blogEntries","showNewBlogPostModal","finishedLoading","lastDate","DelayedBlogEntryList","DelayedBlogEntryView","getEntryForURL","entryURL","entryUrlName","BlogRoute","getSubroutes","Forum","forumThreads","registerToStream","ForumThreadStore","addDeleteListener","forumThread","parentId","deleteForumThread","ForumStore","ForumThread","getParent","addForumThread","authorId","pinnedIndex","contentMessageId","getContentMessage","lastActive","forumThreadId","numMessages","getNumReplies","EditThreadReplyButton","EditThreadReplyModal","DeleteThreadReplyModal","DeleteThreadReplyButton","ForumThreadReplyStyle","ForumThreadPanelStyle","numRepliesFontSize","messageFontSize","buttonFontSize","fontsize","ForumThreadHeaderStyle","widthLimit","tagsHeight","baseStyleObject","boxSizing","innerWidth","ForumThreadPreviewStyle","lines","ForumThreadBubbleStyle","titlePaddingBottom","ForumPanelStyle","headerItemHeight","CreateThreadReplyButton","markupEditorModal","CreateThreadReplyModal","createThreadReply","forumThreadPanelStyle","buttonStyle","CreateForumThreadModal","inputStyle","createForumThread","forumId","routeToThread","CreateForumThreadButton","getModalClass","DeleteForumThreadModal","deleteThread","DeleteForumThreadButton","ForumThreadReply","getMessageInstance","editMessage","editAndDeleteButtons","deleteButton","editDeleteButtons","fullPost","author","bottomPanel","voting","ForumThreadPanel","getMainForumURL","returnToMainForum","backButton","getForumThread","getTimeAdded","postsLength","numReplies","getForumThreadState","initializeListeners","replies","spaceBetween","forumThreadMessages","replyButtonDiv","getAuthor","replyButton","getMessage","getVoting","ForumThreadHeader","tagsTitle","tagsAuthor","tagsReplies","tagsViews","tagsVotes","tagsActivity","getReplies","getViews","getVotes","getActivity","ForumThreadPreview","forumThreadPreview","ForumThreadBubble","pinned","isPinned","pinnedIcon","threadTitleAndPreview","threadTitle","threadTitleSpan","threadAuthor","threadReplies","threadRepliesSpan","threadViews","numViews","threadVotes","threadActivity","getLastActive","getThreadTitle","getThreadAuthor","getThreadReplies","getThreadViews","getThreadVotes","getThreadActivity","ForumThreadList","forum","getForumThreads","getPinIndex","Bubble","getBubbleClass","ForumPanel","buttonParent","getButton","getForumThreadList","DelayedForumPanel","DelayedForumThreadPanel","ForumRoute","MAIN_ROUTE","singlePageLinkOnMount","shiftKey","ctrlKey","metaKey","StemApp","getRouterOptions","getRouter","getBeforeContainer","getContainer","getAfterContainer","click","appInstance","WebsocketStreamHandler","websocketSubscriber","bytesReceived","isIndexed","lastMessageIndex","messageBuffer","missedPackets","tryCount","clearResubscribeTimeout","SUBSCRIBING","haveIndex","sendResubscribe","getLastIndex","sendSubscribe","subscribeTryCount","subscribeTimeout","STREAM_SUBSCRIBE_TIMEOUT","subscribeTimeoutMax","STREAM_SUBSCRIBE_MAX_TIMEOUT","timeoutDuration","resendSubscribeTimeout","SUBSCRIBED","packet","firstSpace","processIndexedPacket","processVanillaPacket","processMissedPacket","processIndexedMessage","MISSING_MESSAGE","rawMessage","parseMayFail","UNSUBSCRIBED","WebsocketSubscriber","urls","WEBSOCKET_URL","streamHandlers","attemptedConnect","connectionStatus","ConnectionStatus","websocket","failedReconnectAttempts","numConnectionAttempts","currentURLIndex","WebSocket","getNextUrl","setConnectionStatus","CONNECTING","newConnection","onopen","onWebsocketOpen","onmessage","onWebsocketMessage","onWebsocketError","onclose","onWebsocketClose","tryReconnect","reconnectWait","CONNECT_RETRY_TIMEOUT","CONNECT_RETRY_MAX_TIMEOUT","reconnectTimeout","streamHandler","getStreamHandler","warning","isOpen","readyState","setStatusSubscribed","previousFailedReconnectAttempts","reset","CONNECTED","resubscribe","afterStreamName","processPacket","HEARTBEAT_MESSAGE","errorType","onStreamSubscribe","processStreamPacket","fatalErrorClose","DISCONNECTED","resetStatus","subscribe","addStreamListener","GlobalStyleSheet","EstablishmentApp","loadPublicState","addAjaxProcessors","registerWebsocketStreams","initializeViewportMeta","configureTheme","initializeGlobalStyle","PUBLIC_STATE","addPreprocessor","addPostprocessor","xhrPromise","responseHeaders","responseDate","estimatedServerTime","addErrorPostprocessor","viewportMeta","MIN_VIEWPORT_META_WIDTH","AppClass"],"mappings":"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"}