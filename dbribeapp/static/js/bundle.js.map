{"version":3,"file":"bundle.js","sources":["../../../node_modules/stem-core/src/base/PageTitleManager.js","../../js/AppConfig.js","../../../node_modules/stem-core/src/base/Utils.js","../../../node_modules/stem-core/src/base/Dispatcher.js","../../../node_modules/stem-core/src/ui/NodeAttributes.js","../../../node_modules/stem-core/src/ui/Debug.js","../../../node_modules/stem-core/src/ui/UIBase.js","../../../node_modules/stem-core/src/ui/Constants.js","../../../node_modules/stem-core/src/ui/Utils.js","../../../node_modules/stem-core/src/ui/StyleElement.jsx","../../../node_modules/stem-core/src/decorators/Utils.js","../../../node_modules/stem-core/src/decorators/LazyInitialize.js","../../../node_modules/stem-core/src/decorators/Style.js","../../../node_modules/stem-core/src/ui/Style.js","../../../node_modules/stem-core/src/base/Device.js","../../../node_modules/stem-core/src/ui/Draggable.js","../../../node_modules/stem-core/src/ui/Color.js","../../../node_modules/stem-core/src/ui/style/Theme.js","../../../node_modules/stem-core/src/ui/GlobalStyle.js","../../../node_modules/stem-core/src/ui/Bootstrap3.jsx","../../../node_modules/stem-core/src/ui/UIPrimitives.jsx","../../../node_modules/stem-core/src/ui/input/Style.js","../../../node_modules/stem-core/src/ui/input/Input.jsx","../../../node_modules/stem-core/src/ui/form/Style.js","../../../node_modules/stem-core/src/ui/form/Form.jsx","../../../node_modules/stem-core/src/ui/svg/SVGNodeAttributes.js","../../../node_modules/stem-core/src/ui/svg/SVGBase.js","../../../node_modules/stem-core/src/ui/svg/SVGText.jsx","../../../node_modules/stem-core/src/math.js","../../../node_modules/stem-core/src/ui/svg/SVGPrimitives.js","../../../node_modules/stem-core/src/ui/Transition.js","../../../node_modules/stem-core/src/ui/svg/Animations.js","../../../node_modules/stem-core/src/ui/Switcher.jsx","../../../node_modules/stem-core/src/ui/Router.jsx","../../../node_modules/stem-core/src/ui/Translation.js","../../../node_modules/stem-core/src/ui/horizontal-overflow/Style.js","../../../node_modules/stem-core/src/ui/tabs/Style.js","../../../node_modules/stem-core/src/ui/tabs/TabArea.jsx","../../../node_modules/stem-core/src/ui/FontAwesome.jsx","../../../node_modules/stem-core/src/ui/horizontal-overflow/HorizontalOverflow.jsx","../../../node_modules/stem-core/src/ui/tabs/FlatTabArea.jsx","../../../node_modules/stem-core/src/data-structures/MultiMap.js","../../../node_modules/stem-core/src/polyfill/Headers.js","../../../node_modules/stem-core/src/polyfill/URLSearchParams.js","../../../node_modules/stem-core/src/polyfill/Body.js","../../../node_modules/stem-core/src/polyfill/Request.js","../../../node_modules/stem-core/src/polyfill/Response.js","../../../node_modules/stem-core/src/base/Fetch.js","../../../node_modules/stem-core/src/base/Ajax.js","../../../node_modules/stem-core/src/ui/button/ButtonStyle.js","../../../node_modules/stem-core/src/ui/button/Button.jsx","../../../node_modules/stem-core/src/ui/button/ButtonGroup.jsx","../../../node_modules/stem-core/src/ui/CardPanel.jsx","../../../node_modules/stem-core/src/ui/RowList.jsx","../../../node_modules/stem-core/src/ui/collapsible/Style.js","../../../node_modules/stem-core/src/ui/collapsible/CollapsibleMixin.jsx","../../../node_modules/stem-core/src/ui/collapsible/CollapsiblePanel.jsx","../../../node_modules/stem-core/src/ui/modal/Style.js","../../../node_modules/stem-core/src/ui/modal/FloatingWindow.jsx","../../../node_modules/stem-core/src/ui/modal/Modal.jsx","../../../node_modules/stem-core/src/ui/global-container/Style.js","../../../node_modules/stem-core/src/ui/global-container/GlobalContainer.jsx","../../../node_modules/stem-core/src/ui/section-divider/Divider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Style.js","../../../node_modules/stem-core/src/ui/section-divider/SectionDivider.jsx","../../../node_modules/stem-core/src/ui/section-divider/TitledSectionDivider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Accordion.jsx","../../../node_modules/stem-core/src/ui/Carousel.jsx","../../../node_modules/stem-core/src/ui/RangePanelStyle.js","../../../node_modules/stem-core/src/ui/RangePanel.jsx","../../../node_modules/stem-core/src/ui/table/Style.js","../../../node_modules/stem-core/src/ui/table/Table.jsx","../../../node_modules/stem-core/src/ui/table/CollapsibleTable.jsx","../../../node_modules/stem-core/src/ui/table/SortableTable.jsx","../../../node_modules/stem-core/src/time/Duration.js","../../../node_modules/stem-core/src/time/Date.js","../../../node_modules/stem-core/src/time/Time.js","../../../node_modules/stem-core/src/ui/DateTimePicker.jsx","../../../node_modules/stem-core/src/base/EnqueueableMethodMixin.js","../../../node_modules/stem-core/src/ui/CodeEditor.jsx","../../js/SVGComponents.jsx","../../js/IndexPage.jsx","../../../node_modules/stem-core/src/state/State.js","../../../node_modules/stem-core/src/state/Store.js","../../../node_modules/stem-core/src/state/StoreMixins.js","../../../establishment/localization/js/state/LanguageStore.js","../../../establishment/content/js/state/ArticleStore.js","../../../establishment/blog/js/state/BlogStore.js","../../../node_modules/stem-core/src/markup/MarkupParser.js","../../../node_modules/stem-core/src/markup/MarkupRenderer.js","../../../establishment/content/js/markup/MarkupEditor.jsx","../../../establishment/accounts/js/state/UserStore.js","../../../establishment/accounts/js/UserHandle.jsx","../../../establishment/content/js/ArticleRenderer.jsx","../../../establishment/blog/js/BlogStyle.js","../../../establishment/blog/js/BlogArticleRenderer.jsx","../../../establishment/content/js/ArticleManager.jsx","../../../establishment/content/js/ArticleEditor.jsx","../../../establishment/accounts/js/state/UserReactionStore.js","../../../establishment/chat/js/state/MessageThreadStore.js","../../../establishment/content/js/Popup.jsx","../../../establishment/content/js/markup/MarkupEditorModal.jsx","../../../establishment/chat/js/ChatMarkupRenderer.jsx","../../../node_modules/stem-core/src/base/Require.js","../../../establishment/localization/js/state/TranslationStore.js","../../../establishment/errors/js/state/ErrorMessageStore.js","../../../establishment/errors/js/ErrorHandlers.js","../../../establishment/socialaccount/js/SocialAccountManager.js","../../../establishment/socialaccount/js/state/SocialAppStore.js","../../../establishment/accounts/js/GoogleManager.js","../../../establishment/accounts/js/FacebookManager.js","../../../establishment/accounts/js/GithubManager.js","../../../establishment/localization/js/state/CountryStore.js","../../../establishment/accounts/js/LoginStyle.js","../../../establishment/accounts/js/Login.jsx","../../../establishment/accounts/js/LoginModal.jsx","../../../establishment/chat/js/VotingWidgetStyle.js","../../../establishment/chat/js/VotingWidget.jsx","../../../establishment/chat/js/ChatStyle.js","../../../node_modules/stem-core/src/base/Plugin.js","../../../establishment/chat/js/ChatWidget.jsx","../../../establishment/chat/js/CommentWidgetStyle.js","../../../establishment/chat/js/CommentWidget.jsx","../../../node_modules/stem-core/src/ui/ConcentricCirclesLoadingScreen.jsx","../../../node_modules/stem-core/src/ui/DelayedElement.js","../../../node_modules/stem-core/src/ui/StateDependentElement.jsx","../../../establishment/blog/js/BlogPanel.jsx","../../../establishment/forum/js/state/ForumStore.js","../../../establishment/forum/js/EditThreadReplyButton.jsx","../../../establishment/forum/js/DeleteThreadReplyButton.jsx","../../../establishment/forum/js/ForumStyle.js","../../../establishment/forum/js/CreateThreadReplyButton.jsx","../../../establishment/forum/js/ForumThread.jsx","../../../establishment/forum/js/ForumPanel.jsx","../../js/Routes.js","../../../node_modules/stem-core/src/app/StemApp.jsx","../../../establishment/funnel/js/websocket/WebsocketStreamHandler.js","../../../establishment/funnel/js/websocket/WebsocketSubscriber.js","../../../establishment/webapp/js/GlobalStyleSheet.js","../../../establishment/webapp/js/EstablishmentApp.js","../../js/App.jsx"],"sourcesContent":["export class PageTitleManager {\n    static title = null;\n    static defaultTitle = \"Website\";\n    static prefix = null;\n\n    static getPrefix() {\n        return this.prefix ? \"(\" + this.prefix + \") \" : \"\";\n    }\n\n    static setPrefix(prefix) {\n        this.prefix = prefix;\n        this.updatePageTitle();\n    }\n\n    static setDefaultTitle(defaultTitle) {\n        this.defaultTitle = defaultTitle;\n    }\n\n    static getTitle() {\n        return this.title || this.defaultTitle;\n    }\n\n    static setTitle(title) {\n        this.title = title;\n        this.updatePageTitle();\n    }\n\n    static getFullPageTitle() {\n        return this.getPrefix() + this.getTitle();\n    }\n\n    static updatePageTitle() {\n        document.title = this.getFullPageTitle();\n    }\n\n    static setIcon() {\n        throw Error(\"Not implemented yet!\");\n    }\n}\n","import {PageTitleManager} from \"base/PageTitleManager\";\n\nPageTitleManager.setDefaultTitle(\"\");","// TODO: should this be renamed to \"toUnwrappedArray\"?\nexport function unwrapArray(elements) {\n    if (!elements) {\n        return [];\n    }\n\n    if (!Array.isArray(elements)) {\n        // In case this is an iterable, convert to array\n        if (elements[Symbol.iterator]) {\n            return unwrapArray(Array.from(elements));\n        } else {\n            return [elements];\n        }\n    }\n\n    // Check if the passed in array is valid, and try to return it if possible to preserve references\n    let allProperElements = true;\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i]) || elements[i] == null) {\n            allProperElements = false;\n            break;\n        }\n    }\n\n    if (allProperElements) {\n        // Return the exact same array as was passed in\n        return elements;\n    }\n\n    let result = [];\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i])) {\n            let unwrappedElement = unwrapArray(elements[i]);\n            for (let j = 0; j < unwrappedElement.length; j += 1) {\n                result.push(unwrappedElement[j]);\n            }\n        } else {\n            if (elements[i] != null) {\n                result.push(elements[i]);\n            }\n        }\n    }\n    return result;\n}\n\nexport function isLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    // Empty url is considered local\n    if (!url) {\n        return true;\n    }\n    // Protocol-relative url is local if the host matches\n    if (url.startsWith(\"//\")) {\n        return url.startsWith(\"//\" + host);\n    }\n    // Absolute url is local if the origin matches\n    let r = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n    if (r.test(url)) {\n        return url.startsWith(origin);\n    }\n    // Root-relative and document-relative urls are always local\n    return true;\n}\n\n// Trims a local url to root-relative or document-relative url.\n// If the url is protocol-relative, removes the starting \"//\"+host, transforming it in a root-relative url.\n// If the url is absolute, removes the origin, transforming it in a root-relative url.\n// If the url is root-relative or document-relative, leaves it as is.\nexport function trimLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    if (!isLocalUrl(url, host, origin)) {\n        throw Error(\"Trying to trim non-local url!\");\n    }\n    if (!url) {\n        return url;\n    }\n    if (url.startsWith(\"//\" + host)) {\n        return url.slice((\"//\" + host).length);\n    }\n    if (url.startsWith(origin)) {\n        return url.slice(origin.length);\n    }\n    return url;\n}\n\n// Split the passed in array into arrays with at most maxChunkSize elements\nexport function splitInChunks(array, maxChunkSize) {\n    let chunks = [];\n    while (array.length > 0) {\n        chunks.push(array.splice(0, maxChunkSize));\n    }\n    return chunks;\n}\n\nexport function isIterable(obj) {\n    if (obj == null) {\n        return false;\n    }\n    return obj[Symbol.iterator] !== undefined;\n}\n\nexport function defaultComparator(a, b) {\n    if (a == null && b == null) {\n        return 0;\n    }\n\n    if (b == null) {\n        return 1;\n    }\n\n    if (a == null) {\n        return -1;\n    }\n\n    // TODO: might want to use valueof here\n    if (isNumber(a) && isNumber(b)) {\n        return a - b;\n    }\n\n    let aStr = a.toString();\n    let bStr = b.toString();\n\n    if (aStr === bStr) {\n        return 0;\n    }\n    return aStr < bStr ? -1 : 1;\n}\n\nexport function slugify(string) {\n    string = string.trim();\n\n    string = string.replace((/[^a-zA-Z0-9-\\s]/g), \"\"); // remove anything non-latin alphanumeric\n    string = string.replace((/\\s+/g), \"-\"); // replace whitespace with dashes\n    string = string.replace((/-{2,}/g), \"-\"); // remove consecutive dashes\n    string = string.toLowerCase();\n\n    return string;\n}\n\n// If the first argument is a number, it's returned concatenated with the suffix, otherwise it's returned unchanged\nexport function suffixNumber(value, suffix) {\n    if (typeof value === \"number\" || value instanceof Number) {\n        return value + suffix;\n    }\n    return value;\n}\n\nexport function setObjectPrototype(obj, Class) {\n    obj.__proto__ = Class.prototype;\n    return obj;\n}\n\nexport function isNumber(obj) {\n    return (typeof obj === \"number\") || (obj instanceof Number);\n}\n\nexport function isString(obj) {\n    return (typeof obj === \"string\") || (obj instanceof String);\n}\n\nexport function isPlainObject(obj) {\n    if (!obj || typeof obj !== \"object\" || obj.nodeType) {\n        return false;\n    }\n    if (obj.constructor && obj.constructor != Object) {\n        return false;\n    }\n    return true;\n}\n\nexport function deepCopy() {\n\tlet target = arguments[0] || {};\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (let i = 1; i < arguments.length; i += 1) {\n        let obj = arguments[i];\n        if (obj == null) {\n            continue;\n        }\n\n        // Extend the base object\n        for (let [key, value] of Object.entries(obj)) {\n            // Recurse if we're merging plain objects or arrays\n            if (value && isPlainObject(value) || Array.isArray(value)) {\n                let clone;\n                let src = target[key];\n\n                if (Array.isArray(value)) {\n                    clone = (src && Array.isArray(src)) ? src : [];\n                } else {\n                    clone = (src && isPlainObject(src)) ? src : {};\n                }\n\n                target[key] = deepCopy(clone, value);\n            } else {\n                // TODO: if value has .clone() method, use that?\n                target[key] = value;\n            }\n        }\n\t}\n\n\treturn target;\n}\n\nexport function objectFromKeyValue(key, value) {\n    return {\n        [key]: value,\n    }\n}\n\nexport function dashCase(str) {\n    let rez = \"\";\n    for (let i = 0; i < str.length; i++) {\n        if (\"A\" <= str[i] && str[i] <= \"Z\") {\n            if (i > 0) {\n                rez += \"-\";\n            }\n            rez += str[i].toLowerCase();\n        } else {\n            rez += str[i];\n        }\n    }\n    return (rez == str) ? str : rez;\n}\n\n// TODO: have a Cookie helper file\nexport function getCookie(name) {\n    let cookies = (document.cookie || \"\").split(\";\");\n    for (let cookie of cookies) {\n        cookie = cookie.trim();\n        if (cookie.startsWith(name + \"=\")) {\n            return decodeURIComponent(cookie.substring(name.length + 1));\n        }\n    }\n    return null;\n}\n\nexport function uniqueId(obj) {\n    if (!uniqueId.objectWeakMap) {\n        uniqueId.objectWeakMap = new WeakMap();\n        uniqueId.constructorWeakMap = new WeakMap();\n        uniqueId.totalObjectCount = 0;\n    }\n    let objectWeakMap = uniqueId.objectWeakMap;\n    let constructorWeakMap = uniqueId.constructorWeakMap;\n    if (!objectWeakMap.has(obj)) {\n        const objConstructor = obj.constructor || obj.__proto__ || Object;\n        // Increment the object count\n        const objIndex = (constructorWeakMap.get(objConstructor) || 0) + 1;\n        constructorWeakMap.set(objConstructor, objIndex);\n\n        const objUniqueId = objIndex + \"-\" + (++uniqueId.totalObjectCount);\n        objectWeakMap.set(obj, objUniqueId);\n    }\n    return objectWeakMap.get(obj);\n}\n\n// TODO: should be done with String.padLeft\nexport function padNumber(num, minLength) {\n    let strNum = String(num);\n    while (strNum.length < minLength) {\n        strNum = \"0\" + strNum;\n    }\n    return strNum;\n}\n\n// Returns the english ordinal suffix of a number\nexport function getOrdinalSuffix(num) {\n    let suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n    let lastDigit = num % 10;\n    let isTeen = Math.floor(num / 10) % 10 === 1;\n    return (!isTeen && suffixes[lastDigit]) || suffixes[0];\n}\n\nexport function suffixWithOrdinal(num) {\n    return num + getOrdinalSuffix(num);\n}\n\nexport function instantiateNative(BaseClass, NewClass, ...args) {\n    let obj = new BaseClass(...args);\n    obj.__proto__ = NewClass.prototype;\n    return obj;\n}\n\n// This function can be used as a decorator in case we're extending native classes (Map/Set/Date)\n// and we want to fix the way babel breaks this scenario\n// WARNING: it destroys the code in constructor\n// If you want a custom constructor, you need to implement a static create method that generates new objects\n// Check the default constructor this code, or an example where this is done.\nexport function extendsNative(targetClass) {\n    if (targetClass.toString().includes(\" extends \")) {\n        // Native extended classes are cool, leave them as they are\n        return;\n    }\n    let BaseClass = targetClass.__proto__;\n    let allKeys = Object.getOwnPropertySymbols(targetClass).concat(Object.getOwnPropertyNames(targetClass));\n\n    // Fill in the default constructor\n    let newClass = targetClass.create || function create() {\n        return instantiateNative(BaseClass, newClass, ...arguments);\n        };\n    for (const key of allKeys) {\n        let property = Object.getOwnPropertyDescriptor(targetClass, key);\n        Object.defineProperty(newClass, key, property);\n    }\n    newClass.prototype = targetClass.prototype;\n    newClass.__proto__ = targetClass.__proto__;\n\n    newClass.prototype.constructor = newClass;\n\n    return newClass;\n}\n\nexport const NOOP_FUNCTION = () => undefined;\n\n// Helpers to wrap iterators, to wrap all values in a function or to filter them\nexport function* mapIterator(iter, func) {\n    for (let value of iter) {\n        yield func(value);\n    }\n}\n\nexport function* filterIterator(iter, func) {\n    for (let value of iter) {\n        if (func(value)) {\n            yield value;\n        }\n    }\n}\n\nexport class CallModifier {\n    wrap(func) {\n        throw Error(\"Implement wrap method\");\n    }\n\n    call(func) {\n        return this.wrap(func)();\n    }\n\n    toFunction() {\n        return (func) => this.wrap(func);\n    }\n}\n\nexport class UnorderedCallDropper extends CallModifier {\n    index = 1;\n    lastExecuted = 0;\n\n    wrap(callback) {\n        const currentIndex = this.index++;\n        return (...args) => {\n            if (currentIndex > this.lastExecuted) {\n                this.lastExecuted = currentIndex;\n                return callback(...args);\n            }\n        }\n    }\n}\n\n/*\nCallThrottler acts both as a throttler and a debouncer, allowing you to combine both types of functionality.\nAvailable options:\n    - debounce (ms): delays the function call by x ms, each call extending the delay\n    - throttle (ms): keeps calls from happening with at most x ms between them. If debounce is also set, will make sure to\n    fire a debounced even if over x ms have passed. If equal to CallTimer.ON_ANIMATION_FRAME, means that we want to use\n    requestAnimationFrame instead of setTimeout, to execute before next frame redraw()\n    - dropThrottled (boolean, default false): any throttled function call is not delayed, but dropped\n */\nexport class CallThrottler extends CallModifier {\n    static ON_ANIMATION_FRAME = Symbol();\n    static AUTOMATIC = Symbol();\n\n    lastCallTime = 0;\n    pendingCall = null;\n    pendingCallArgs = [];\n    pendingCallExpectedTime = 0;\n    numCalls = 0;\n    totalCallDuration = 0;\n\n    constructor(options={}) {\n        super();\n        Object.assign(this, options);\n    }\n\n    isThrottleOnAnimationFrame() {\n        return this.throttle === this.constructor.ON_ANIMATION_FRAME;\n    }\n\n    clearPendingCall() {\n        this.pendingCall = null;\n        this.pendingCallArgs = [];\n        this.pendingCallExpectedTime = 0;\n    }\n\n    cancel() {\n        this.pendingCall && this.pendingCall.cancel();\n        this.clearPendingCall();\n    }\n\n    flush() {\n        this.pendingCall && this.pendingCall.flush();\n        this.clearPendingCall();\n    }\n\n    // API compatibility with cleanup jobs\n    cleanup() {\n        this.cancel();\n    }\n\n    computeExecutionDelay(timeNow) {\n        let executionDelay = null;\n        if (this.throttle != null) {\n            executionDelay = Math.max(this.lastCallTime + this.throttle - timeNow, 0);\n        }\n        if (this.debounce != null) {\n            executionDelay = Math.min(executionDelay != null ? executionDelay : this.debounce, this.debounce);\n        }\n        return executionDelay;\n    }\n\n    replacePendingCall(wrappedFunc, funcCall, funcCallArgs) {\n        this.cancel();\n        if (this.isThrottleOnAnimationFrame()) {\n            const cancelHandler = requestAnimationFrame(funcCall);\n            wrappedFunc.cancel = () => cancelAnimationFrame(cancelHandler);\n            return;\n        }\n\n        const timeNow = Date.now();\n        let executionDelay = this.computeExecutionDelay(timeNow);\n\n        if (this.dropThrottled) {\n            return executionDelay == 0 && funcCall();\n        }\n\n        const cancelHandler = setTimeout(funcCall, executionDelay);\n        wrappedFunc.cancel = () => clearTimeout(cancelHandler);\n        this.pendingCall = wrappedFunc;\n        this.pendingCallArgs = funcCallArgs;\n        this.pendingCallExpectedTime = timeNow + executionDelay;\n    }\n\n    updatePendingCall(args) {\n        this.pendingCallArgs = args;\n        if (!this.isThrottleOnAnimationFrame()) {\n            const timeNow = Date.now();\n            this.pendingCallExpectedTime = timeNow + this.computeExecutionDelay(timeNow);\n        }\n    }\n\n    wrap(func) {\n        const funcCall = () => {\n            const timeNow = Date.now();\n            // The expected time when the function should be executed next might have been changed\n            // Check if that's the case, while allowing a 1ms error for time measurement\n            if (!this.isThrottleOnAnimationFrame() &&\n                timeNow + 1 < this.pendingCallExpectedTime) {\n                this.replacePendingCall(wrappedFunc, funcCall, this.pendingCallArgs);\n            } else {\n                this.lastCallTime = timeNow;\n                this.clearPendingCall();\n                func(...this.pendingCallArgs);\n            }\n        };\n\n        const wrappedFunc = (...args) => {\n            // Check if it's our function, and update the arguments and next execution time only\n            if (this.pendingCall && func === this.pendingCall.originalFunc) {\n                // We only need to update the arguments, and maybe mark that we want to executed later than scheduled\n                // It's an optimization to not invoke too many setTimeout/clearTimeout pairs\n                return this.updatePendingCall(args);\n            }\n            return this.replacePendingCall(wrappedFunc, funcCall, args);\n        };\n\n        wrappedFunc.originalFunc = func;\n        wrappedFunc.cancel = NOOP_FUNCTION;\n        wrappedFunc.flush = () => {\n            if (wrappedFunc === this.pendingCall) {\n                this.cancel();\n                wrappedFunc();\n            }\n        };\n        return wrappedFunc;\n    }\n}\n\n// export function benchmarkThrottle(options={}) {\n//     const startTime = performance.now();\n//     const calls = options.calls || 100000;\n//\n//     const throttler = new CallThrottler({throttle: options.throttle || 300, debounce: options.debounce || 100});\n//\n//     const func = options.func || NOOP_FUNCTION;\n//\n//     const wrappedFunc = throttler.wrap(func);\n//\n//     for (let i = 0; i < calls; i += 1) {\n//         wrappedFunc();\n//     }\n//     console.warn(\"Throttle benchmark:\", performance.now() - startTime, \"for\", calls, \"calls\");\n// }","class DispatcherHandle {\n    constructor(dispatcher, callback) {\n        this.dispatcher = dispatcher;\n        this.callback = callback;\n    }\n\n    remove() {\n        if (!this.dispatcher) {\n            console.warn(\"Removing a dispatcher twice\");\n            return;\n        }\n        this.dispatcher.removeListener(this.callback);\n        this.dispatcher = undefined;\n        this.callback = undefined;\n    }\n\n    cleanup() {\n        this.remove();\n    }\n}\n\nclass Dispatcher {\n    constructor(options = {}) {\n        this.options = options;\n        this.listeners = [];\n    }\n\n    callbackExists(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    addListener(callback) {\n        if (!(typeof callback === \"function\")) {\n            console.error(\"The listener needs to be a function: \", callback);\n            return;\n        }\n        if (this.callbackExists(callback)) {\n            console.error(\"Can't re-register for the same callback: \", this, \" \", callback);\n            return;\n        }\n\n        this.listeners.push(callback);\n        return new DispatcherHandle(this, callback);\n    };\n\n    addListenerOnce(callback) {\n        let handler = this.addListener(function () {\n            callback(...arguments);\n            handler.remove();\n        });\n        return handler;\n    }\n\n    removeListener(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                // Erase and return\n                return this.listeners.splice(i, 1)[0];\n            }\n        }\n    };\n\n    removeAllListeners() {\n        this.listeners = [];\n    }\n\n    dispatch(payload) {\n        for (let i = 0; i < this.listeners.length; ) {\n            let listener = this.listeners[i];\n            // TODO: optimize common cases\n            listener(...arguments);\n            // In case the current listener deleted itself, keep the loop counter the same\n            // If it deleted listeners that were executed before it, that's just wrong and there are no guaranteed about\n            if (listener === this.listeners[i]) {\n                i++;\n            }\n        }\n    };\n}\n\nexport const DispatchersSymbol = Symbol(\"Dispatchers\");\n\nclass Dispatchable {\n    get dispatchers() {\n        return this[DispatchersSymbol] || (this[DispatchersSymbol] = new Map());\n    }\n\n    getDispatcher(name) {\n        return this.dispatchers.get(name);\n    }\n\n    dispatch(name, payload) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            // Optimize the average case\n            if (arguments.length <= 2) {\n                dispatcher.dispatch(payload);\n            } else {\n                let args = Array.prototype.slice.call(arguments, 1);\n                dispatcher.dispatch(...args);\n            }\n        }\n    }\n\n    addListener(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListener(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListener(callback);\n    }\n\n    // TODO: remove some duplicated logic with method above\n    addListenerOnce(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListenerOnce(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListenerOnce(callback);\n    }\n\n    removeListener(name, callback) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            dispatcher.removeListener(callback);\n        }\n    }\n\n    cleanup() {\n        this.runCleanupJobs();\n        delete this[DispatchersSymbol];\n    }\n\n    // These function don't really belong here, but they don't really hurt here and I don't want a long proto chain\n    // Add anything that needs to be called on cleanup here (dispatchers, etc)\n    addCleanupJob(cleanupJob) {\n        if (!this.hasOwnProperty(\"_cleanupJobs\")) {\n            this._cleanupJobs = new CleanupJobs();\n        }\n        this._cleanupJobs.add(cleanupJob);\n        return cleanupJob;\n    }\n\n    runCleanupJobs() {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.cleanup();\n        }\n    }\n\n    detachListener(dispatcherHandle) {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.remove(dispatcherHandle);\n        } else {\n            dispatcherHandle.remove();\n        }\n    }\n}\n\n// Creates a method that calls the method methodName on obj, and adds the result as a cleanup task\nfunction getAttachCleanupJobMethod(methodName) {\n    return function (obj) {\n        let args = Array.prototype.slice.call(arguments, 1);\n        let handler = obj[methodName](...args);\n        this.addCleanupJob(handler);\n        return handler;\n    }\n}\n\n// Not sure if these should be added here, but meh\nDispatchable.prototype.attachListener       = getAttachCleanupJobMethod(\"addListener\");\nDispatchable.prototype.attachEventListener  = getAttachCleanupJobMethod(\"addEventListener\");\nDispatchable.prototype.attachCreateListener = getAttachCleanupJobMethod(\"addCreateListener\");\nDispatchable.prototype.attachUpdateListener = getAttachCleanupJobMethod(\"addUpdateListener\");\nDispatchable.prototype.attachDeleteListener = getAttachCleanupJobMethod(\"addDeleteListener\");\n\nDispatcher.Global = new Dispatchable();\n\nclass RunOnce {\n    run(callback, timeout = 0) {\n        if (this.timeout) {\n            return;\n        }\n        this.timeout = setTimeout(() => {\n            callback();\n            this.timeout = undefined;\n        }, timeout);\n    }\n}\n\nclass CleanupJobs {\n    constructor(jobs = []) {\n        this.jobs = jobs;\n    }\n\n    add(job) {\n        this.jobs.push(job);\n    }\n\n    cleanup() {\n        for (let job of this.jobs) {\n            if (typeof job.cleanup === \"function\") {\n                job.cleanup();\n            } else if (typeof job.remove === \"function\" ) {\n                job.remove();\n            } else {\n                job();\n            }\n        }\n        this.jobs = [];\n    }\n\n    remove(job) {\n        if (job) {\n            const index = this.jobs.indexOf(job);\n            if (index >= 0) {\n                this.jobs.splice(index, 1);\n            }\n            job.remove();\n        } else {\n            this.cleanup();\n        }\n    }\n}\n\n// Class that can be used to pass around ownership of a resource.\n// It informs the previous owner of the change (once) and dispatches the new element for all listeners\n// TODO: a better name\nclass SingleActiveElementDispatcher extends Dispatcher {\n    setActive(element, addChangeListener, forceDispatch) {\n        if (!forceDispatch && element === this._active) {\n            return;\n        }\n        this._active = element;\n        this.dispatch(element);\n        if (addChangeListener) {\n            this.addListenerOnce((newElement) => {\n                if (newElement != element) {\n                    addChangeListener(newElement);\n                }\n            });\n        }\n    }\n\n    getActive() {\n        return this._active;\n    }\n}\n\nexport {Dispatcher, Dispatchable, RunOnce, CleanupJobs, SingleActiveElementDispatcher, getAttachCleanupJobMethod};\n","import {dashCase, setObjectPrototype} from \"../base/Utils\";\n\nexport const defaultToPixelsAttributes = new Set([\n    \"border-bottom-width\",\n    \"border-left-width\",\n    \"border-right-width\",\n    \"border-top-width\",\n    \"border-width\",\n    \"bottom\",\n    \"font-size\",\n    \"font-stretch\",\n    \"height\",\n    \"layer-grid-char\",\n    \"layer-grid-char-spacing\",\n    \"layer-grid-line\",\n    \"left\",\n    \"letter-spacing\",\n    \"line-height\",\n    \"margin\",\n    \"margin-bottom\",\n    \"margin-left\",\n    \"margin-right\",\n    \"margin-top\",\n    \"marker-offset\",\n    \"max-height\",\n    \"max-width\",\n    \"min-height\",\n    \"min-width\",\n    \"outline-width\",\n    \"padding\",\n    \"padding-bottom\",\n    \"padding-left\",\n    \"padding-right\",\n    \"padding-top\",\n    \"right\",\n    \"size\",\n    \"top\",\n    \"width\",\n    \"word-spacing\",\n]);\n\nexport function CreateNodeAttributesMap(oldAttributesMap, allowedAttributesArray) {\n    let allowedAttributesMap = new Map(oldAttributesMap);\n\n    for (let attribute of allowedAttributesArray || []) {\n        if (!attribute) continue;\n        if (!Array.isArray(attribute)) {\n            attribute = [attribute];\n        }\n        allowedAttributesMap.set(attribute[0], attribute[1] || {});\n    }\n\n    allowedAttributesMap.reverseNameMap = new Map();\n\n    for (let [key, value] of allowedAttributesMap) {\n        value = value || {};\n\n        value.domName = value.domName || key;\n\n        allowedAttributesMap.reverseNameMap.set(value.domName, key);\n\n        allowedAttributesMap.set(key, value);\n    }\n    return allowedAttributesMap;\n}\n\n// A class that can be used to work with a className field as with a Set, while having a toString() usable in the DOM\n// It's used when a UI object has a className attribute, that a string, but we still want it to be modified if we call addClass and removeClass\n// In that case, the string gets converted to a ClassNameSet\nexport class ClassNameSet extends Set {\n    // Can't use classic super in constructor since Set is build-in type and will throw an error\n    // TODO: see if could still be made to have this as constructor\n    static create(className) {\n        let value = new Set(String(className || \"\").split(\" \"));\n        return setObjectPrototype(value, this);\n    }\n\n    toString() {\n        return Array.from(this).join(\" \");\n    }\n}\n\nexport class NodeAttributes {\n    constructor(obj) {\n        Object.assign(this, obj);\n        // className and style should be deep copied to be modifiable, the others shallow copied\n        if (this.className instanceof ClassNameSet) {\n            this.className = ClassNameSet.create(String(this.className));\n        }\n        if (this.style) {\n            this.style = Object.assign({}, this.style);\n        }\n    }\n\n    // TODO: should this use the domName or the reverseName? Still needs work\n    setAttribute(key, value, node, attributesMap=this.constructor.defaultAttributesMap) {\n        // TODO: might want to find a better way than whitelistAttributes field to do this\n        if (!attributesMap.has(key)) {\n            this.whitelistedAttributes = this.whitelistedAttributes || {};\n            this.whitelistedAttributes[key] = true;\n        }\n        this[key] = value;\n        if (node) {\n            this.applyAttribute(key, node, attributesMap);\n        }\n    }\n\n    applyStyleToNode(key, value, node) {\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if ((value instanceof Number || typeof value === \"number\") &&\n            value != 0 && defaultToPixelsAttributes.has(dashCase(key))) {\n            value = value + \"px\";\n        }\n        if (node && node.style[key] !== value) {\n            node.style[key] = value;\n        }\n    }\n\n    setStyle(key, value, node) {\n        if (!(typeof key === \"string\" || key instanceof String)) {\n            // If the key is not a string, it should be a plain object\n            for (const styleKey of Object.keys(key)) {\n                this.setStyle(styleKey, key[styleKey], node);\n            }\n            return;\n        }\n        if (value === undefined) {\n            this.removeStyle(key, node);\n            return;\n        }\n        this.style = this.style || {};\n        this.style[key] = value;\n        this.applyStyleToNode(key, value, node);\n    }\n\n    removeStyle(key, node) {\n        if (this.style) {\n            delete this.style[key];\n        }\n        if (node && node.style[key]) {\n            delete node.style[key];\n        }\n    }\n\n    static getClassArray(classes) {\n        if (!classes) {\n            return [];\n        }\n        if (Array.isArray(classes)) {\n            return classes.map(x => String(x).trim());\n        } else {\n            return String(classes).trim().split(\" \");\n        }\n    }\n\n    getClassNameSet() {\n        if (!(this.className instanceof ClassNameSet)) {\n            this.className = ClassNameSet.create(this.className || \"\");\n        }\n        return this.className;\n    }\n\n    addClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().add(cls);\n            if (node) {\n                node.classList.add(cls);\n            }\n        }\n    }\n\n    removeClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().delete(cls);\n            if (node) {\n                node.classList.remove(cls);\n            }\n        }\n    }\n\n    hasClass(className) {\n        return this.getClassNameSet().has(className);\n    }\n\n    applyAttribute(key, node, attributesMap) {\n        let attributeOptions = attributesMap.get(key);\n        if (!attributeOptions) {\n            if (this.whitelistedAttributes && (key in this.whitelistedAttributes)) {\n                attributeOptions = {\n                    domName: key,\n                }\n            } else {\n                return;\n            }\n        }\n        let value = this[key];\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if (attributeOptions.noValue) {\n            if (value) {\n                value = \"\";\n            } else {\n                value = undefined;\n            }\n        }\n        if (typeof value !== \"undefined\") {\n            node.setAttribute(attributeOptions.domName, value);\n        } else {\n            node.removeAttribute(attributeOptions.domName);\n        }\n    }\n\n    applyClassName(node) {\n        if (this.className) {\n            const className = String(this.className);\n            if (node.className != className) {\n                node.className = className;\n            }\n        } else {\n            if (node.className) {\n                node.removeAttribute(\"class\");\n            }\n        }\n    }\n\n    apply(node, attributesMap) {\n        let addedAttributes = {};\n        let whitelistedAttributes = this.whitelistedAttributes || {};\n\n        // First update existing node attributes and delete old ones\n        // TODO: optimize to not run this if the node was freshly created\n        let nodeAttributes = node.attributes;\n        for (let i = nodeAttributes.length - 1; i >= 0; i--) {\n            let attr = nodeAttributes[i];\n            let attributeName = attr.name;\n            if (attributeName === \"style\" || attributeName === \"class\") {\n                // TODO: maybe should do work here?\n                continue;\n            }\n\n            let key = attributesMap.reverseNameMap.get(attributeName);\n\n            if (this.hasOwnProperty(key)) {\n                let value = this[key];\n                let attributeOptions = attributesMap.get(key);\n                if (attributeOptions && attributeOptions.noValue) {\n                    if (value) {\n                        value = \"\";\n                    } else {\n                        value = undefined;\n                    }\n                }\n                if (value != null) {\n                    node.setAttribute(attributeName, value);\n                    addedAttributes[key] = true;\n                } else {\n                    node.removeAttribute(attributeName);\n                }\n            } else {\n                node.removeAttribute(attributeName);\n            }\n        }\n        // Add new attributes\n        for (let key in this) {\n            if (addedAttributes[key]) {\n                continue;\n            }\n            this.applyAttribute(key, node, attributesMap);\n            // TODO: also whitelist data- and aria- keys here\n        }\n\n        this.applyClassName(node);\n\n        node.removeAttribute(\"style\");\n        if (this.style) {\n            for (let key in this.style) {\n                this.applyStyleToNode(key, this.style[key], node);\n            }\n        }\n    }\n}\n\n// Default node attributes, should be as few of these as possible\nNodeAttributes.defaultAttributesMap = CreateNodeAttributesMap([\n    [\"id\"],\n    [\"action\"],\n    [\"colspan\"],\n    [\"default\"],\n    [\"disabled\", {noValue: true}],\n    [\"fixed\"],\n    [\"forAttr\", {domName: \"for\"}], // TODO: have a consistent nomenclature for there!\n    [\"hidden\"],\n    [\"href\"],\n    [\"rel\"],\n    [\"minHeight\"],\n    [\"minWidth\"],\n    [\"role\"],\n    [\"target\"],\n    [\"HTMLtitle\", {domName: \"title\"}],\n    [\"type\"],\n    [\"placeholder\"],\n    [\"src\"],\n    [\"height\"],\n    [\"width\"],\n    //[\"value\"], // Value is intentionally disabled\n]);\n","export function applyDebugFlags(element) {\n    if (document.STEM_DEBUG) {\n        element.node.stemElement = element;\n        setTimeout(() => {\n            if (element.node.setAttribute) {\n                if (element.constructor.name !== \"UIElement\") {\n                    element.node.setAttribute(\"_\", element.constructor.name);\n                }\n            }\n        }, 0);\n    }\n}\n","import {unwrapArray, setObjectPrototype, suffixNumber, NOOP_FUNCTION} from \"../base/Utils\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {NodeAttributes} from \"./NodeAttributes\";\nimport {applyDebugFlags} from \"./Debug\";\n\nvar UI = {\n    renderingStack: [], //keeps track of objects that are redrawing, to know where to assign refs automatically\n};\n\nclass BaseUIElement extends Dispatchable {\n    canOverwrite(existingChild) {\n        return this.constructor === existingChild.constructor &&\n               this.getNodeType() === existingChild.getNodeType();\n    }\n\n    applyRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            obj[name] = this;\n        }\n    }\n\n    removeRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            if (obj[name] === this) {\n                obj[name] = undefined;\n            }\n        }\n    }\n\n    // Lifecycle methods, called when the element was first inserted in the DOM, and before it's removed\n    onMount() {}\n\n    onUnmount() {}\n\n    destroyNode() {\n        this.onUnmount();\n        this.cleanup();\n        this.removeRef();\n        this.node && this.node.remove();\n        delete this.node; // Clear for gc\n    }\n}\n\nUI.TextElement = class UITextElement extends BaseUIElement {\n    constructor(value=\"\") {\n        super();\n        if (value && value.hasOwnProperty(\"value\")) {\n            this.value = value.value;\n            this.options = value;\n        } else {\n            this.value = (value != null) ? value : \"\";\n        }\n    }\n\n    mount(parent, nextSibling) {\n        this.parent = parent;\n        if (!this.node) {\n            this.createNode();\n            this.applyRef();\n        } else {\n            this.redraw();\n        }\n        parent.node.insertBefore(this.node, nextSibling);\n        this.onMount();\n    }\n\n    getNodeType() {\n        return Node.TEXT_NODE;\n    }\n\n    copyState(element) {\n        this.value = element.value;\n        this.options = element.options;\n    }\n\n    createNode() {\n        this.node = document.createTextNode(this.getValue());\n        applyDebugFlags(this);\n        return this.node;\n    }\n\n    setValue(value) {\n        this.value = (value != null) ? value : \"\";\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    getValue() {\n        return String(this.value);\n    }\n\n    redraw() {\n        if (this.node) {\n            let newValue = this.getValue();\n            // TODO: check if this is best for performance\n            if (this.node.nodeValue !== newValue) {\n                this.node.nodeValue = newValue;\n            }\n        }\n        this.applyRef();\n    }\n};\n\n// TODO: rename to Element\nclass UIElement extends BaseUIElement {\n    constructor(options={}) {\n        super();\n        this.children = [];\n        this.options = options; // TODO: this is a hack, to not break all the code that references this.options in setOptions\n        this.setOptions(options);\n    };\n\n    getDefaultOptions(options) {}\n\n    getPreservedOptions() {}\n\n    setOptions(options) {\n        let defaultOptions = this.getDefaultOptions(options);\n        if (defaultOptions) {\n            options = Object.assign(defaultOptions, options);\n        }\n        this.options = options;\n    }\n\n    updateOptions(options) {\n        this.setOptions(Object.assign(this.options, options));\n        this.redraw();\n    }\n\n    setChildren(...args) {\n        this.updateOptions({children: unwrapArray(args)})\n    }\n\n    // Used when we want to reuse the current element, with the options from the passed in argument\n    // Is only called when element.canOverwrite(this) is true\n    copyState(element) {\n        let options = element.options;\n        let preservedOptions = this.getPreservedOptions();\n        if (preservedOptions) {\n            options = Object.assign({}, options, preservedOptions);\n        }\n        this.setOptions(options);\n        this.addListenersFromOptions();\n    }\n\n    getNodeType() {\n        return this.options.nodeType || \"div\";\n    }\n\n    static create(parentNode, options) {\n        let uiElement = new this(options);\n        uiElement.mount(parentNode, null);\n        return uiElement;\n    }\n\n    // TODO: should be renamed to renderContent\n    getGivenChildren() {\n        return this.options.children || [];\n    }\n\n    render() {\n        return this.options.children;\n    };\n\n    createNode() {\n        this.node = document.createElement(this.getNodeType());\n        applyDebugFlags(this);\n        return this.node;\n    }\n\n    // Abstract, gets called when removing DOM node associated with the\n    cleanup() {\n        this.runCleanupJobs();\n        for (let child of this.children) {\n            child.destroyNode();\n        }\n        this.clearNode();\n        super.cleanup();\n    }\n\n    overwriteChild(existingChild, newChild) {\n        existingChild.copyState(newChild);\n        return existingChild;\n    }\n\n    getElementKeyMap(elements) {\n        if (!elements || !elements.length) {\n            return;\n        }\n        let childrenKeyMap = new Map();\n\n        for (let i = 0; i < elements.length; i += 1) {\n            let childKey = (elements[i].options && elements[i].options.key) || (\"autokey\" + i);\n\n            childrenKeyMap.set(childKey, elements[i]);\n        }\n\n        return childrenKeyMap;\n    }\n\n    getChildrenToRender() {\n        return this.render();\n    }\n\n    getChildrenForRedraw() {\n        UI.renderingStack.push(this);\n        let children = unwrapArray(this.getChildrenToRender());\n        UI.renderingStack.pop();\n        return children;\n    }\n\n    redraw() {\n        if (!this.node) {\n            console.error(\"Element not yet mounted. Redraw aborted!\", this);\n            return false;\n        }\n\n        let newChildren = this.getChildrenForRedraw();\n\n        if (newChildren === this.children) {\n            for (let i = 0; i < newChildren.length; i += 1) {\n                newChildren[i].redraw();\n            }\n            this.applyNodeAttributes();\n            this.applyRef();\n            return true;\n        }\n\n        let domNode = this.node;\n        let childrenKeyMap = this.getElementKeyMap(this.children);\n\n        for (let i = 0; i < newChildren.length; i++) {\n            let newChild = newChildren[i];\n            let prevChildNode = (i > 0) ? newChildren[i - 1].node : null;\n            let currentChildNode = (prevChildNode) ? prevChildNode.nextSibling : domNode.firstChild;\n\n            // Not a UIElement, to be converted to a TextElement\n            if (!newChild.getNodeType) {\n                newChild = newChildren[i] = new UI.TextElement(newChild);\n            }\n\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = childrenKeyMap && childrenKeyMap.get(newChildKey);\n\n            if (existingChild && newChildren[i].canOverwrite(existingChild)) {\n                // We're replacing an existing child element, it might be the very same object\n                if (existingChild !== newChildren[i]) {\n                    newChildren[i] = this.overwriteChild(existingChild, newChildren[i]);\n                }\n                newChildren[i].redraw();\n                if (newChildren[i].node !== currentChildNode) {\n                    domNode.insertBefore(newChildren[i].node, currentChildNode);\n                }\n            } else {\n                // Getting here means we are not replacing anything, should just render\n                newChild.mount(this, currentChildNode);\n            }\n        }\n\n        if (this.children.length) {\n            // Remove children that don't need to be here\n            let newChildrenSet = new Set(newChildren);\n\n            for (let i = 0; i < this.children.length; i += 1) {\n                if (!newChildrenSet.has(this.children[i])) {\n                    this.children[i].destroyNode();\n                }\n            }\n        }\n\n        this.children = newChildren;\n\n        this.applyNodeAttributes();\n\n        this.applyRef();\n\n        return true;\n    }\n\n    getOptionsAsNodeAttributes() {\n        return setObjectPrototype(this.options, NodeAttributes);\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new NodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    extraNodeAttributes(attr) {}\n\n    applyNodeAttributes() {\n        let attr;\n        if (this.extraNodeAttributes != NOOP_FUNCTION) {\n            // Create a copy of options, that is modifiable\n            attr = this.getNodeAttributes(true);\n            this.extraNodeAttributes(attr);\n        } else {\n            attr = this.getNodeAttributes(false);\n        }\n        attr.apply(this.node, this.constructor.domAttributesMap);\n    }\n\n    setAttribute(key, value) {\n        this.getOptionsAsNodeAttributes().setAttribute(key, value, this.node, this.constructor.domAttributesMap);\n    }\n\n    setStyle(key, value) {\n        this.getOptionsAsNodeAttributes().setStyle(key, value, this.node);\n    }\n\n    removeStyle(key) {\n        this.getOptionsAsNodeAttributes().removeStyle(key, this.node);\n    }\n\n    addClass(className) {\n        this.getOptionsAsNodeAttributes().addClass(className, this.node);\n    }\n\n    removeClass(className) {\n        this.getOptionsAsNodeAttributes().removeClass(className, this.node);\n    }\n\n    hasClass(className) {\n        return this.getOptionsAsNodeAttributes().hasClass(className);\n    }\n\n    toggleClass(className) {\n        if (!this.hasClass(className)) {\n            this.addClass(className);\n        } else {\n            this.removeClass(className);\n        }\n    }\n\n    get styleSheet() {\n        return this.getStyleSheet();\n    }\n\n    set styleSheet(value) {\n        this.options.styleSheet = value;\n        this.redraw();\n    }\n\n    addListenersFromOptions() {\n        for (const key in this.options) {\n            if (typeof key === \"string\" && key.startsWith(\"on\") && key.length > 2) {\n                const eventType = key.substring(2);\n\n                const addListenerMethodName = \"add\" + eventType + \"Listener\";\n                const handlerMethodName = \"on\" + eventType + \"Handler\";\n\n                // The handlerMethod might have been previously added\n                // by a previous call to this function or manually by the user\n                if (typeof this[addListenerMethodName] === \"function\" && !this.hasOwnProperty(handlerMethodName)) {\n                    this[handlerMethodName] = (event) => {\n                        UI.event = event;\n                        if (this.options[key]) {\n                            // TODO: arguments should be (event, this)!\n                            this.options[key](this, event);\n                        }\n                    };\n\n                    // Actually add the listener\n                    this[addListenerMethodName](this[handlerMethodName]);\n                }\n            }\n        }\n    }\n\n    refLink(name) {\n        return {parent: this, name: name};\n    }\n\n    refLinkArray(arrayName, index) {\n        if (!this.hasOwnProperty(arrayName)) {\n            this[arrayName] = [];\n        }\n        return {parent: this[arrayName], name: index};\n    }\n\n    bindToNode(node, doRedraw) {\n        this.node = node;\n        if (doRedraw) {\n            this.clearNode();\n            this.redraw();\n        }\n        return this;\n    }\n\n    mount(parent, nextSiblingNode) {\n        if (!parent.node) {\n            parent = new UI.Element().bindToNode(parent);\n        }\n        this.parent = parent;\n        if (this.node) {\n            parent.insertChildNodeBefore(this, nextSiblingNode);\n            this.dispatch(\"changeParent\", this.parent);\n            return;\n        }\n\n        this.createNode();\n        this.redraw();\n\n        parent.insertChildNodeBefore(this, nextSiblingNode);\n\n        this.addListenersFromOptions();\n\n        this.onMount();\n    }\n\n    // You need to overwrite the next child manipulation rutines if this.options.children !== this.children\n    appendChild(child) {\n        // TODO: the next check should be done with a decorator\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle appendChild, you need to implement it for \" + this.constructor;\n        }\n        this.options.children.push(child);\n        child.mount(this, null);\n        return child;\n    }\n\n    insertChild(child, position) {\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle insertChild, you need to implement it for \" + this.constructor;\n        }\n        position = position || 0;\n\n        this.options.children.splice(position, 0, child);\n\n        const nextChildNode = position + 1 < this.options.children.length ? this.children[position + 1].node : null;\n\n        child.mount(this, nextChildNode);\n\n        return child;\n    }\n\n    eraseChild(child, destroy = true) {\n        let index = this.options.children.indexOf(child);\n\n        if (index < 0) {\n            // child not found\n            return null;\n        }\n        return this.eraseChildAtIndex(index, destroy);\n    }\n\n    eraseChildAtIndex(index, destroy=true) {\n        if (index < 0 || index >= this.options.children.length) {\n            console.error(\"Erasing child at invalid index \", index, this.options.children.length);\n            return;\n        }\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle eraseChild, you need to implement it for \" + this.constructor;\n        }\n        let erasedChild = this.options.children.splice(index, 1)[0];\n        if (destroy) {\n            erasedChild.destroyNode();\n        } else {\n            this.node.removeChild(erasedChild.node);\n        }\n        return erasedChild;\n    }\n\n    eraseAllChildren() {\n        while (this.children.length > 0) {\n            this.eraseChildAtIndex(this.children.length - 1);\n        }\n    }\n\n    show() {\n        this.removeClass(\"hidden\");\n    }\n\n    hide() {\n        this.addClass(\"hidden\");\n    }\n\n    insertChildNodeBefore(childElement, nextSiblingNode) {\n        this.node.insertBefore(childElement.node, nextSiblingNode);\n    }\n\n    // TODO: should be renamed emptyNode()\n    clearNode() {\n        while (this.node && this.node.lastChild) {\n            this.node.removeChild(this.node.lastChild);\n        }\n    }\n\n    isInDocument() {\n        return document.body.contains(this.node);\n    }\n\n    // TODO: this method also doesn't belong here\n    getWidthOrHeight(parameter) {\n        let node = this.node;\n        if (!node) {\n            return 0;\n        }\n        let value = parseFloat(parameter === \"width\" ? node.offsetWidth : node.offsetHeight);\n        return value || 0;\n    }\n\n    getHeight() {\n        return this.getWidthOrHeight(\"height\");\n    };\n\n    getWidth() {\n        return this.getWidthOrHeight(\"width\");\n    }\n\n    setHeight(value) {\n        this.setStyle(\"height\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    };\n\n    setWidth(value) {\n        this.setStyle(\"width\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    }\n\n    addNodeListener(name, callback, ...args) {\n        this.node.addEventListener(name, callback, ...args);\n        const handler = {\n            remove: () => {\n                this.removeNodeListener(name, callback, ...args);\n            }\n        };\n        this.addCleanupJob(handler);\n        return handler;\n    }\n\n    removeNodeListener(name, callback) {\n        this.node.removeEventListener(name, callback);\n    }\n\n    // TODO: methods can be automatically generated by addNodeListener(UI.Element, \"dblclick\", \"DoubleClick\") for instance\n    addClickListener(callback) {\n        return this.addNodeListener(\"click\", callback);\n    }\n\n    removeClickListener(callback) {\n        this.removeNodeListener(\"click\", callback);\n    }\n\n    addDoubleClickListener(callback) {\n        return this.addNodeListener(\"dblclick\", callback);\n    }\n\n    removeDoubleClickListener(callback) {\n        this.removeNodeListener(\"dblclick\", callback);\n    }\n\n    addChangeListener(callback) {\n        return this.addNodeListener(\"change\", callback);\n    }\n}\n\nUI.createElement = function (tag, options, ...children) {\n    if (!tag) {\n        console.error(\"Create element needs a valid object tag, did you mistype a class name?\");\n        return;\n    }\n\n    options = options || {};\n\n    options.children = unwrapArray(children);\n\n    if (options.ref) {\n        if (typeof options.ref === \"string\") {\n            if (UI.renderingStack.length > 0) {\n                options.ref = {\n                    parent: UI.renderingStack[UI.renderingStack.length - 1],\n                    name: options.ref\n                };\n            } else {\n                throw Error(\"Failed to automatically link ref, there needs to be an element in the rendering stack\");\n            }\n        }\n\n        if (options.key) {\n            console.error(\"Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\\n\" +\n                          \"Are you using the options from another object? Shame!\", options);\n        }\n\n        options.key = \"_ref\" + options.ref.name;\n    }\n\n    if (options.hasOwnProperty(\"class\")) {\n        console.error(\"Invalid UI Element attribute: class. Did you mean className?\");\n    }\n\n    if (typeof tag === \"string\") {\n        options.nodeType = tag;\n        tag = UIElement;\n    }\n\n    return new tag(options);\n};\n\nUIElement.domAttributesMap = NodeAttributes.defaultAttributesMap;\n\n// Explicitly know that extraNodeAttributes doesn't do anything, but have it to be callable when doing inheritance\nUIElement.prototype.extraNodeAttributes = NOOP_FUNCTION;\n\nUI.Element = UIElement;\n\nUI.str = function (value) {\n    return new UI.TextElement(value);\n};\n\n// Keep a map for every base class, and for each base class keep a map for each nodeType, to cache classes\nlet primitiveMap = new WeakMap();\n\nUI.Primitive = (BaseClass, nodeType) => {\n    if (!nodeType) {\n        nodeType = BaseClass;\n        BaseClass = UI.Element;\n    }\n    let baseClassPrimitiveMap = primitiveMap.get(BaseClass);\n    if (!baseClassPrimitiveMap) {\n        baseClassPrimitiveMap = new Map();\n        primitiveMap.set(BaseClass, baseClassPrimitiveMap);\n    }\n    let resultClass = baseClassPrimitiveMap.get(nodeType);\n    if (resultClass) {\n        return resultClass;\n    }\n    resultClass = class Primitive extends BaseClass {\n        getNodeType() {\n            return nodeType;\n        }\n    };\n    baseClassPrimitiveMap.set(nodeType, resultClass);\n    return resultClass;\n};\n\nexport {UIElement, UI};\n","export const Orientation = {\n    HORIZONTAL: 1,\n    VERTICAL: 2,\n};\n\nexport const Direction = {\n    UP: \"up\",\n    LEFT: \"left\",\n    DOWN: \"down\",\n    RIGHT: \"right\",\n};\n\nexport const Level = {\n    NONE: null,\n    DEFAULT: \"default\",\n    INFO: \"info\",\n    PRIMARY: \"primary\",\n    SECONDARY: \"secondary\",\n    SUCCESS: \"success\",\n    WARNING: \"warning\",\n    DANGER: \"danger\",\n    ERROR: \"danger\",\n};\n\nexport const Size = {\n    NONE: null,\n    EXTRA_SMALL: \"xs\",\n    SMALL: \"sm\",\n    MEDIUM: \"default\",\n    DEFAULT: \"default\",\n    LARGE: \"lg\",\n    EXTRA_LARGE: \"xl\",\n};\n\nexport const VoteStatus = {\n    NONE: null,\n    LIKE: 1,\n    DISLIKE: 0,\n};\n\nexport const ActionStatus = {\n    DEFAULT: 1,\n    RUNNING: 2,\n    SUCCESS: 3,\n    FAILED: 4,\n};\n","import {UI} from \"./UIBase\";\n\nexport function getOffset(node) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    if (!node) {\n        return {left: 0, top: 0};\n    }\n    let nodePosition = node.style && node.style.position;\n    let left = 0;\n    let top = 0;\n    while (node) {\n        let nodeStyle = node.style || {};\n        if (nodePosition === \"absolute\" && nodeStyle.position === \"relative\") {\n            return {left: left, top: top};\n        }\n        left += node.offsetLeft;\n        top += node.offsetTop;\n        node = node.offsetParent;\n    }\n    return {left: left, top: top};\n}\n\nexport function getComputedStyle(node, attribute) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    let computedStyle = window.getComputedStyle(node, null);\n    return (attribute) ? computedStyle.getPropertyValue(attribute) : computedStyle;\n}\n\nexport function changeParent(element, newParent) {\n    const currentParent = element.parent;\n    currentParent.eraseChild(element, false);\n    newParent.appendChild(element);\n}\n","import {UI} from \"./UIBase\";\nimport {dashCase} from \"../base/Utils\";\nimport {NodeAttributes, defaultToPixelsAttributes} from \"./NodeAttributes\";\n\n// TODO: should this be actually better done throught the dynamic CSS API, without doing through the DOM?\n// So far it's actually better like this, since browsers like Chrome allow users to edit classes\nclass StyleInstance extends UI.TextElement {\n    constructor(options) {\n        super(options);\n        this.setOptions(options);\n    }\n\n    setOptions(options) {\n        this.options = options;\n        this.options.attributes = this.options.attributes || {};\n        this.attributes = new Map();\n        for (let key in this.options.attributes) {\n            this.attributes.set(key, this.options.attributes[key]);\n        }\n    }\n\n    getValue() {\n        let str = this.options.selector + \"{\";\n        for (let [key, value] of this.attributes) {\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            // Ignore keys with null or undefined value\n            if (value == null) {\n                continue;\n            }\n\n            key = dashCase(key);\n\n            // If it's a size property, and the value is a number, assume it's in pixels\n            if ((value instanceof Number || typeof value === \"number\") &&\n                value != 0 && defaultToPixelsAttributes.has(key)) {\n                value = value + \"px\";\n            }\n\n            // TODO: if key starts with vendor-, replace it with the browser specific one (and the plain one)\n            str += key + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    copyState(element) {\n        this.setOptions(element.options);\n    }\n\n    setAttribute(name, value) {\n        this.attributes.set(name, value);\n        this.redraw();\n    }\n\n    deleteAttribute(name) {\n        this.attributes.delete(name);\n        this.redraw();\n    }\n}\n\nclass StyleElement extends UI.Primitive(\"style\") {\n    getNodeAttributes() {\n        // TODO: allow custom style attributes (media, scoped, etc)\n        let attr = new NodeAttributes({});\n        if (this.options.name) {\n            attr.setAttribute(\"name\", this.options.name);\n        }\n        return attr;\n    }\n}\n\nconst ALLOWED_SELECTOR_STARTS = new Set([\":\", \">\", \" \", \"+\", \"~\", \"[\", \".\"]);\n\n// TODO: figure out how to work with animation frames, this only creates a wrapper class\nclass DynamicStyleElement extends StyleElement {\n    toString() {\n        return this.getClassName();\n    }\n\n    // Overwrite valueOf, so when using the + operator should seamlessly concatenate to create a valid className\n    valueOf() {\n        return \" \" + this.getClassName();\n    }\n\n    // TODO: use a cached decorator here\n    getClassName() {\n        if (this.className) {\n            return this.className;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.className = (this.options.name ||  \"autocls\") + \"-\" + this.constructor.instanceCounter;\n        return this.className;\n    }\n\n    getSelector() {\n        return this.options.selectorName || \".\" + this.getClassName();\n    }\n\n    // A cyclic dependency in the style object will cause an infinite loop here\n    getStyleInstances(selector, style) {\n        let result = [];\n        let ownStyle = {}, haveOwnStyle = false;\n        for (let key in style) {\n            let value = style[key];\n            if (value == null) {\n                continue;\n            }\n            let isProperValue = (typeof value === \"string\" || value instanceof String\n                              || typeof value === \"number\" || value instanceof Number\n                              || typeof value === \"function\");\n            if (isProperValue) {\n                ownStyle[key] = value;\n                haveOwnStyle = true;\n            } else {\n                // Check that this actually is a valid subselector\n                let firstChar = String(key).charAt(0);\n                if (!ALLOWED_SELECTOR_STARTS.has(firstChar)) {\n                    console.error(\"First character of your selector is invalid.\");\n                    continue;\n                }\n                // TODO: maybe optimize for waste here?\n                let subStyle = this.getStyleInstances(selector + key, value);\n                result.push(...subStyle);\n            }\n        }\n\n        if (haveOwnStyle) {\n            result.unshift(new StyleInstance({selector: selector, key: selector, attributes: ownStyle}));\n        }\n        return result;\n    }\n\n    render() {\n        let style = this.options.style || {};\n        if (typeof style === \"function\") {\n            style = style();\n        }\n        if (style.selectorName) {\n            this.options.selectorName = style.selectorName;\n            delete style.selectorName;\n        }\n        return this.getStyleInstances(this.getSelector(), style);\n    }\n\n    setStyle(key, value) {\n        this.options.style[key] = value;\n        this.children[0].setAttribute(key, value);\n    }\n\n    setSubStyle(selector, key, value) {\n        throw Error(\"Implement me!\");\n    }\n\n    getStyleObject() {\n        return this.options.style;\n    }\n}\n\nclass KeyframeElement extends StyleElement {\n    toString() {\n        return this.getKeyframeName();\n    }\n\n    getKeyframeName() {\n        if (this.keyframeName) {\n            return this.keyframeName;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.keyframeName = (this.options.name || \"autokeyframe\") + \"-\" + this.constructor.instanceCounter;\n        return this.keyframeName;\n    }\n\n    getValue(style) {\n        let str = \"{\";\n        for (let key in style) {\n            let value = style[key];\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            if (value == null) {\n                continue;\n            }\n            str += dashCase(key) + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    getKeyframeInstance(keyframe) {\n        let result = \"{\";\n        for (let key in keyframe) {\n            let value = keyframe[key];\n            result += key + \" \" + this.getValue(value);\n        }\n        return result + \"}\";\n    }\n\n    render() {\n        return \"@keyframes \" + this.getKeyframeName() + this.getKeyframeInstance(this.options.keyframe || {});\n    }\n}\n\nexport {StyleInstance, StyleElement, KeyframeElement, DynamicStyleElement}\n","export function isDescriptor(desc) {\n    if (!desc || !desc.hasOwnProperty) {\n        return false;\n    }\n\n    const keys = ['value', 'initializer', 'get', 'set'];\n\n    for (let key of keys) {\n        if (desc.hasOwnProperty(key)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function decorate(handleDescriptor, entryArgs) {\n    if (isDescriptor(entryArgs[entryArgs.length - 1])) {\n        return handleDescriptor(...entryArgs, []);\n    } else {\n        return function () {\n            return handleDescriptor(...arguments, entryArgs);\n        };\n    }\n}\n\nexport function createDefaultSetter(key) {\n    return function set(newValue) {\n        Object.defineProperty(this, key, {\n            configurable: true,\n            writable: true,\n            // IS enumerable when reassigned by the outside word\n            enumerable: true,\n            value: newValue\n        });\n\n        return newValue;\n    };\n}\n","import {decorate, createDefaultSetter} from './Utils';\n\nfunction handleDescriptor(target, key, descriptor) {\n    const { configurable, enumerable, initializer, value } = descriptor;\n    // The \"key\" property is constructed with accessor descriptor (getter / setter),\n    // but the first time the getter is used, the property is reconstructed with data descriptor.\n    return {\n        configurable,\n        enumerable,\n\n        get() {\n            // This happens if someone accesses the property directly on the prototype\n            if (this === target) {\n                return;\n            }\n\n            const ret = initializer ? initializer.call(this) : value;\n\n            Object.defineProperty(this, key, {\n                configurable,\n                enumerable,\n                writable: true,\n                value: ret\n            });\n\n            return ret;\n        },\n\n        set: createDefaultSetter(key)\n    };\n}\n\nexport function lazyInitialize(...args) {\n    return decorate(handleDescriptor, args);\n}\n\nlet lazyInit = lazyInitialize;\n\nexport {lazyInit};\n","import {deepCopy} from \"../base/Utils\";\nimport {lazyInit} from \"./LazyInitialize\";\n\nfunction evaluateStyleRuleObject(target, initializer, value, options) {\n    let result = initializer ? initializer.call(target) : value;\n    if (typeof result === \"function\") {\n        result = result();\n    }\n    if (Array.isArray(result)) {\n        result = Object.assign({}, ...result);\n    }\n    return result;\n}\n\nfunction getStyleRuleKey(key) {\n    return \"__style__\" + key;\n}\n\nfunction getKeyframesRuleKey(key) {\n    return \"__keyframes__\" + key;\n}\n\n// TODO: this function can be made a lot more generic, to wrap plain object initializer with inheritance support\nfunction styleRuleWithOptions() {\n    let options = Object.assign({}, ...arguments); //Simpler notation?\n    // TODO: Remove this if you don't think it's appropiate, I thought a warning would do no harm\n    if (!options.targetMethodName) {\n        console.error(\"WARNING: targetMethodName not specified in the options (default is \\\"css\\\")\");\n    }\n    let targetMethodName = options.targetMethodName || \"css\";\n\n    function styleRuleDecorator(target, key, descriptor) {\n        const {initializer, value} = descriptor;\n\n        descriptor.objInitializer = function () {\n            let style = evaluateStyleRuleObject(this, initializer, value, options);\n\n            // TODO: a bit of a hack, clean this up\n            style[\"prefferedClassName\"] = key;\n\n            if (options.selector) {\n                style[\"selectorName\"] = options.selector;\n            }\n\n            if (options.inherit) {\n                // Get the value we set in the prototype of the parent class\n                let parentDesc = Object.getPrototypeOf(target)[getStyleRuleKey(key)];\n                if (!parentDesc) {\n                    console.error(\"You're trying to inherit a rule that isn't implemented in the parent: \" + key);\n                }\n                let parentStyle = evaluateStyleRuleObject(this, parentDesc.objInitializer, parentDesc.value, options);\n                style = deepCopy({}, parentStyle, style);\n                return style;\n            }\n\n            return style;\n        };\n\n        // Change the prototype of this object to be able to access the old descriptor/value\n        target[options.getKey(key)] = Object.assign({}, descriptor);\n\n        descriptor.initializer = function () {\n            let style = descriptor.objInitializer.call(this);\n            return this[targetMethodName](style);\n        };\n\n        delete descriptor.value;\n\n        return lazyInit(target, key, descriptor);\n    }\n\n    return styleRuleDecorator;\n}\n\n// TODO: Second argument is mostly useless (implied from targetMethodName)\nlet styleRule = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: false,\n});\n\nlet styleRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: true,\n});\n\nexport function styleRuleCustom(options) {\n    return styleRuleWithOptions(Object.assign({\n        targetMethodName: \"css\",\n        getKey: getStyleRuleKey,\n        inherit: false,\n    }, options));\n}\n\nlet keyframesRule = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: false,\n});\n\n// TODO: This is currently not working (I think)\nlet keyframesRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: true,\n});\n\nexport {styleRule, styleRuleInherit, keyframesRule, keyframesRuleInherit, styleRuleWithOptions}\n\n","import {StyleElement, KeyframeElement, DynamicStyleElement} from \"./StyleElement\";\nimport {Dispatchable} from \"../base/Dispatcher\";\n\n// Class meant to group multiple classes inside a single <style> element, for convenience\n// TODO: pattern should be more robust, to be able to only update classes\nclass StyleSheet extends Dispatchable {\n    constructor(options={}) {\n        super();\n        this.options = Object.assign({\n            parent: document.head,\n            name: options.name || this.constructor.getElementName(), // call only if needed\n        }, options);\n        this.elements = new Set();\n        if (!this.options.delayedMount) {\n            this.ensureMounted();\n        }\n        this.getTheme().addStyleSheet(this);\n    }\n\n    ensureMounted() {\n        if (this.styleElement) {\n            return;\n        }\n        const styleElementOptions = {\n            children: [],\n            name: this.options.name,\n        };\n        this.styleElement = StyleElement.create(this.options.parent, styleElementOptions);\n    }\n\n    static getInstance() {\n        if (!this.hasOwnProperty(\"singletonInstance\")) {\n            this.singletonInstance = new this();\n        }\n        return this.singletonInstance;\n    }\n\n    // Generate an instance, and also make sure to instantiate all style elements\n    static initialize() {\n        const styleSheet = this.getInstance();\n\n        for (const key in this.prototype) {\n            // Just hit the getter to instantiate the style\n            if (!styleSheet[key]) {\n                console.log(\"This is here to prevent a bundling optimization bug\");\n            }\n        }\n    }\n\n    static getElementName() {\n        this.elementNameCounter = (this.elementNameCounter || 0) + 1;\n        let name = this.name;\n        if (this.elementNameCounter > 1) {\n            name += \"-\" + this.elementNameCounter;\n        }\n        return name;\n    }\n\n    getTheme() {\n        return this.options.theme || this.constructor.theme;\n    }\n\n    setTheme(theme) {\n        this.options.theme = theme;\n    }\n\n    getThemeProperty(key, defaultValue) {\n        const theme = this.getTheme();\n        return (theme && theme.getProperty(key, defaultValue)) || defaultValue;\n    }\n\n    get themeProperties() {\n        const theme = this.getTheme();\n        return (theme && theme.getProperties()) || {};\n    }\n\n    ensureFirstUpdate() {\n        if (this._firstUpdate) {\n            return;\n        }\n\n        this._firstUpdate = true;\n        this.ensureMounted();\n        // Call all listeners before update for the very first time, to update any possible variables\n        this.dispatch(\"beforeUpdate\", this);\n    }\n\n    css(style) {\n        this.ensureFirstUpdate();\n        if (arguments.length > 1) {\n            style = Object.assign({}, ...arguments);\n        }\n        let elementOptions = {style: style};\n\n        // Get the preferred name, maybe cleanup later\n        const nameKey = \"prefferedClassName\";\n        if (style[nameKey]) {\n            elementOptions.name = style[nameKey];\n            delete style[nameKey];\n        }\n\n        let element = new DynamicStyleElement(elementOptions);\n        this.elements.add(element);\n        let styleInstances = element.render();\n        for (let styleInstance of styleInstances) {\n            this.styleElement.appendChild(styleInstance);\n        }\n        return element;\n    }\n\n    keyframes(keyframes) {\n        this.ensureFirstUpdate();\n        // This is not really necessarily as I don't believe it will ever be used\n        if (arguments.length > 1) {\n            keyframes = Object.assign({}, ...arguments);\n        }\n        let element = new KeyframeElement({keyframe: keyframes});\n        this.elements.add(element);\n        this.styleElement.appendChild(element);\n        return element;\n    }\n\n    addBeforeUpdateListener(callback) {\n        return this.addListener(\"beforeUpdate\", callback);\n    }\n\n    update() {\n        if (!this._firstUpdate) {\n            return;\n        }\n        this.dispatch(\"beforeUpdate\", this);\n\n        for (const key of Object.keys(this)) {\n            if (this[key] instanceof DynamicStyleElement) {\n                const desc = this[\"__style__\" + key];\n                const func = desc && desc.objInitializer;\n                if (func) {\n                    this[key].options.style = func.call(this);\n                }\n            }\n        }\n\n        let children = [];\n        for (let value of this.elements) {\n            if (value instanceof StyleElement) {\n                let styleElements = value.render();\n                children.push(...styleElements);\n            }\n        }\n        this.styleElement.options.children = children;\n        this.styleElement.redraw();\n    }\n}\n\n// Helper class, meant to only keep one class active for an element from a set of classes\n// TODO: move to another file\nclass ExclusiveClassSet {\n    constructor(classList, element) {\n        // TODO: check that classList is an array (or at least iterable)\n        this.classList = classList;\n        this.element = element;\n    }\n\n    static fromObject(obj, element) {\n        let classList = [];\n        for (let key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                classList.push(obj[key]);\n            }\n        }\n        return Object.assign(new ExclusiveClassSet(classList, element), obj);\n    }\n\n    set(element, classInstance) {\n        if (!classInstance) {\n            classInstance = element;\n            element = this.element;\n        }\n        for (let cls of this.classList) {\n            if (cls === classInstance) {\n                element.addClass(cls);\n            } else {\n                element.removeClass(cls);\n            }\n        }\n    }\n}\n\nfunction wrapCSS(context, style) {\n    return {\n        [context]: style\n    };\n}\n\nfunction hover(style) {\n    return wrapCSS(\":hover\", style);\n}\n\nfunction active(style) {\n    return wrapCSS(\":active\", style);\n}\n\nfunction focus(style) {\n    return wrapCSS(\":focus\", style);\n}\n\nlet styleMap = new WeakMap();\n\nexport {StyleSheet, ExclusiveClassSet, styleMap, wrapCSS, hover, focus, active};\n\nexport * from \"../decorators/Style\";\n","// Primitive utils for wrapping browser info\nclass Device {\n    static isTouchDevice() {\n        if (!this.hasOwnProperty(\"_isTouchDevice\")) {\n            this._isTouchDevice = !!((\"createTouch\" in window.document) ||\n                                            (navigator.MaxTouchPoints > 0) ||\n                                            (navigator.msMaxTouchPoints > 0) ||\n                                            (\"ontouchstart\" in window));\n        }\n        return this._isTouchDevice;\n    }\n\n    static isMobileDevice() {\n        if (!this.hasOwnProperty(\"_isMobileDevice\")) {\n            const mobileDevices = [\"Android\", \"webOS\", \"iPad\", \"iPhone\", \"iPod\", \"BlackBerry\", \"Windows Phone\"];\n            this._isMobileDevice = false;\n            for (let device of mobileDevices) {\n                if (navigator.userAgent.indexOf(device) !== -1) {\n                    this._isMobileDevice = true;\n                }\n            }\n        }\n        return this._isMobileDevice;\n    }\n\n    static getEventTouchIdentifier(event) {\n        return Math.min(...[...event.touches].map(touch => touch.identifier));\n    }\n\n    static getEventTouch(event) {\n        const identifier = this.getEventTouchIdentifier(event);\n        return [...event.touches].find(touch => touch.identifier === identifier);\n    }\n\n    static getEventCoord(event, axis, reference=\"client\") {\n        let coordName = reference + axis;\n        if (event[coordName]) {\n            return event[coordName];\n        }\n        if (event.touches) {\n            return this.getEventTouch(event)[coordName];\n        }\n        if (event.originalEvent) {\n            return this.getEventCoord(event.originalEvent, axis, reference);\n        }\n\n        console.warn(\"Couldn't find coordinates for event. Maybe wrong reference point? (client/page/screen)\");\n    }\n\n    static getEventX(event, reference=\"client\") {\n        return this.getEventCoord(event, \"X\", reference);\n    }\n\n    static getEventY(event, reference=\"client\") {\n        return this.getEventCoord(event, \"Y\", reference);\n    }\n\n    static getBrowser() {\n        // TODO: should try to use navigator\n        if ((!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {\n            return \"Opera\";\n        }\n        if (typeof InstallTrigger !== 'undefined') {\n            return \"Firefox\";\n        }\n        if (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) {\n            return \"Safari\";\n        }\n        if (document.documentMode) {\n            return \"Internet Explorer\";\n        }\n        if (window.StyleMedia) {\n            return \"Edge\";\n        }\n        if (window.chrome && window.chrome.webstore) {\n            return \"Chrome\";\n        }\n        return \"Unknown\";\n    }\n\n    static supportsEvent(eventName) {\n        if (!this.cachedSupportedValues.has(eventName)) {\n            var element = document.createElement(\"div\");\n            let onEventName = \"on\" + eventName;\n            var isSupported = (onEventName in element);\n            if (!isSupported) {\n                element.setAttribute(onEventName, \"return;\");\n                isSupported = typeof element[onEventName] === \"function\";\n            }\n            element = null;\n            this.cachedSupportedValues.set(eventName, isSupported);\n        }\n        return this.cachedSupportedValues.get(eventName);\n    }\n}\n\nDevice.cachedSupportedValues = new Map();\n\nexport {Device};","import {Device} from \"../base/Device\";\n\nexport const Draggable = (BaseClass) => class Draggable extends BaseClass {\n    _clickCallbacks = new Map();\n    _clickDragListeners = new Map();\n\n    addClickListener(callback) {\n        if (this._clickCallbacks.has(callback)) {\n            return;\n        }\n        let callbackWrapper = () => {\n            if (this._okForClick) {\n                callback();\n            }\n        };\n        this._clickCallbacks.set(callback, callbackWrapper);\n        super.addClickListener(callbackWrapper);\n\n        if (this._clickDragListeners.has(callback)) {\n            return;\n        }\n        let clickDragListener = {\n            onStart: () => { this.dragForClickStarted(); },\n            onDrag: () => { this.dragForClick(); }\n        };\n        this._clickDragListeners.set(callback, clickDragListener);\n        this.addDragListener(clickDragListener);\n    }\n\n    dragForClickStarted() {\n        this._okForClick = true;\n    }\n\n    dragForClick() {\n        this._okForClick = false;\n    }\n\n    removeClickListener(callback) {\n        let callbackWrapper = this._clickCallbacks.get(callback);\n        if (callbackWrapper) {\n            this._clickCallbacks.delete(callback);\n            super.removeClickListener(callbackWrapper);\n        }\n        if (!this._clickDragListeners) {\n            return;\n        }\n        let clickDragListener = this._clickDragListeners.get(callback);\n        if (clickDragListener) {\n            this._clickDragListeners.delete(callback);\n            this.removeDragListener(clickDragListener);\n        }\n    }\n\n    createDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    createTouchDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n            listenerWrapper.touchEventIdentifier = Device.getEventTouchIdentifier(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n            event.preventDefault();\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (event.touches.length && Device.getEventTouchIdentifier(event) === listenerWrapper.touchEventIdentifier) {\n                return;\n            }\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    addDragListener(listeners) {\n        let listenerWrapper = this.createDragListenerWrapper(listeners);\n        let touchListenerWrapper = this.createTouchDragListenerWrapper(listeners);\n        this.addNodeListener(\"touchstart\", touchListenerWrapper.onWrapperStart);\n        this.addNodeListener(\"mousedown\", listenerWrapper.onWrapperStart);\n        // TODO: Replace with our body\n        document.body.addEventListener(\"touchend\", touchListenerWrapper.onWrapperEnd);\n        document.body.addEventListener(\"mouseup\", listenerWrapper.onWrapperEnd);\n\n        if (!this.hasOwnProperty(\"_dragListeners\")) {\n            this._dragListeners = [];\n        }\n        this._dragListeners.push(touchListenerWrapper);\n        this._dragListeners.push(listenerWrapper);\n    }\n\n    removeDragListener(listeners) {\n        if (this._dragListeners) {\n            for (let i = this._dragListeners.length - 1; i >= 0; i -= 1) {\n                if (this._dragListeners[i].onStart === listeners.onStart &&\n                    this._dragListeners[i].onDrag === listeners.onDrag &&\n                    this._dragListeners[i].onEnd === listeners.onEnd) {\n\n                    this.removeNodeListener(\"touchstart\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperEnd);\n                    this.removeNodeListener(\"mousedown\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperEnd);\n\n                    this._dragListeners.splice(i, 1);\n                }\n            }\n        }\n    }\n};\n","export const COLORS_BY_NAME = {\n    aliceblue: \"#f0f8ff\",\n    antiquewhite: \"#faebd7\",\n    aqua: \"#00ffff\",\n    aquamarine: \"#7fffd4\",\n    azure: \"#f0ffff\",\n    beige: \"#f5f5dc\",\n    bisque: \"#ffe4c4\",\n    black: \"#000000\",\n    blanchedalmond: \"#ffebcd\",\n    blue: \"#0000ff\",\n    blueviolet: \"#8a2be2\",\n    brown: \"#a52a2a\",\n    burlywood: \"#deb887\",\n    cadetblue: \"#5f9ea0\",\n    chartreuse: \"#7fff00\",\n    chocolate: \"#d2691e\",\n    coral: \"#ff7f50\",\n    cornflowerblue: \"#6495ed\",\n    cornsilk: \"#fff8dc\",\n    crimson: \"#dc143c\",\n    cyan: \"#00ffff\",\n    darkblue: \"#00008b\",\n    darkcyan: \"#008b8b\",\n    darkgoldenrod: \"#b8860b\",\n    darkgray: \"#a9a9a9\",\n    darkgreen: \"#006400\",\n    darkkhaki: \"#bdb76b\",\n    darkmagenta: \"#8b008b\",\n    darkolivegreen: \"#556b2f\",\n    darkorange: \"#ff8c00\",\n    darkorchid: \"#9932cc\",\n    darkred: \"#8b0000\",\n    darksalmon: \"#e9967a\",\n    darkseagreen: \"#8fbc8f\",\n    darkslateblue: \"#483d8b\",\n    darkslategray: \"#2f4f4f\",\n    darkturquoise: \"#00ced1\",\n    darkviolet: \"#9400d3\",\n    deeppink: \"#ff1493\",\n    deepskyblue: \"#00bfff\",\n    dimgray: \"#696969\",\n    dodgerblue: \"#1e90ff\",\n    firebrick: \"#b22222\",\n    floralwhite: \"#fffaf0\",\n    forestgreen: \"#228b22\",\n    fuchsia: \"#ff00ff\",\n    gainsboro: \"#dcdcdc\",\n    ghostwhite: \"#f8f8ff\",\n    gold: \"#ffd700\",\n    goldenrod: \"#daa520\",\n    gray: \"#808080\",\n    green: \"#008000\",\n    greenyellow: \"#adff2f\",\n    honeydew: \"#f0fff0\",\n    hotpink: \"#ff69b4\",\n    indianred: \"#cd5c5c\",\n    indigo: \"#4b0082\",\n    ivory: \"#fffff0\",\n    khaki: \"#f0e68c\",\n    lavender: \"#e6e6fa\",\n    lavenderblush: \"#fff0f5\",\n    lawngreen: \"#7cfc00\",\n    lemonchiffon: \"#fffacd\",\n    lightblue: \"#add8e6\",\n    lightcoral: \"#f08080\",\n    lightcyan: \"#e0ffff\",\n    lightgoldenrodyellow: \"#fafad2\",\n    lightgray: \"#d3d3d3\",\n    lightgreen: \"#90ee90\",\n    lightpink: \"#ffb6c1\",\n    lightsalmon: \"#ffa07a\",\n    lightseagreen: \"#20b2aa\",\n    lightskyblue: \"#87cefa\",\n    lightslategray: \"#778899\",\n    lightsteelblue: \"#b0c4de\",\n    lightyellow: \"#ffffe0\",\n    lime: \"#00ff00\",\n    limegreen: \"#32cd32\",\n    linen: \"#faf0e6\",\n    magenta: \"#ff00ff\",\n    maroon: \"#800000\",\n    mediumaquamarine: \"#66cdaa\",\n    mediumblue: \"#0000cd\",\n    mediumorchid: \"#ba55d3\",\n    mediumpurple: \"#9370db\",\n    mediumseagreen: \"#3cb371\",\n    mediumslateblue: \"#7b68ee\",\n    mediumspringgreen: \"#00fa9a\",\n    mediumturquoise: \"#48d1cc\",\n    mediumvioletred: \"#c71585\",\n    midnightblue: \"#191970\",\n    mintcream: \"#f5fffa\",\n    mistyrose: \"#ffe4e1\",\n    moccasin: \"#ffe4b5\",\n    navajowhite: \"#ffdead\",\n    navy: \"#000080\",\n    oldlace: \"#fdf5e6\",\n    olive: \"#808000\",\n    olivedrab: \"#6b8e23\",\n    orange: \"#ffa500\",\n    orangered: \"#ff4500\",\n    orchid: \"#da70d6\",\n    palegoldenrod: \"#eee8aa\",\n    palegreen: \"#98fb98\",\n    paleturquoise: \"#afeeee\",\n    palevioletred: \"#db7093\",\n    papayawhip: \"#ffefd5\",\n    peachpuff: \"#ffdab9\",\n    peru: \"#cd853f\",\n    pink: \"#ffc0cb\",\n    plum: \"#dda0dd\",\n    powderblue: \"#b0e0e6\",\n    purple: \"#800080\",\n    red: \"#ff0000\",\n    rosybrown: \"#bc8f8f\",\n    royalblue: \"#4169e1\",\n    saddlebrown: \"#8b4513\",\n    salmon: \"#fa8072\",\n    sandybrown: \"#f4a460\",\n    seagreen: \"#2e8b57\",\n    seashell: \"#fff5ee\",\n    sienna: \"#a0522d\",\n    silver: \"#c0c0c0\",\n    skyblue: \"#87ceeb\",\n    slateblue: \"#6a5acd\",\n    slategray: \"#708090\",\n    snow: \"#fffafa\",\n    springgreen: \"#00ff7f\",\n    steelblue: \"#4682b4\",\n    tan: \"#d2b48c\",\n    teal: \"#008080\",\n    thistle: \"#d8bfd8\",\n    tomato: \"#ff6347\",\n    turquoise: \"#40e0d0\",\n    violet: \"#ee82ee\",\n    wheat: \"#f5deb3\",\n    white: \"#ffffff\",\n    whitesmoke: \"#f5f5f5\",\n    yellow: \"#ffff00\",\n    yellowgreen: \"#9acd32\"\n};\n\n\n/*\n * This class contains methods for operating with colors. Its objects are kept in hsva format with normalized\n * attributes (each attribute has value between 0 and 1 inclusive), and can be converted from/to rgba.\n */\nexport class Color {\n    constructor(color) {\n        if (color) {\n            this.setColor(color);\n        }\n    }\n\n    setColor(color) {\n        this.color = this.constructor.parseColor(color);\n    }\n\n    getColor() {\n        let rgba = this.getRgba();\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    /*\n     * @param color A color string of the types: native name, hex3, hex6, rgb, rgba, hsl, hsla\n     *              or a Color object, or a hsla color array\n     */\n    static parseColor(color) {\n        if (color instanceof Color) {\n            return color.color;\n        } else if (color instanceof Array) {\n            // Add the alpha parameter at the end\n            if (color.length === 3) {\n                color.push(1);\n            }\n            return color;\n        }\n\n        color = color.trim().toLowerCase();\n\n        // Check if color is given by name\n        if (COLORS_BY_NAME.hasOwnProperty(color)) {\n            color = COLORS_BY_NAME[color];\n        }\n\n        let values = [];\n\n        // Check for hex3 (e.g. \"#f00\")\n        let hex3 = color.match(/^#([0-9a-f]{3})$/i);\n        if (hex3) {\n            values = [\n                parseInt(hex3[1].charAt(0), 16) * 0x11,\n                parseInt(hex3[1].charAt(1), 16) * 0x11,\n                parseInt(hex3[1].charAt(2), 16) * 0x11,\n                1\n            ];\n        }\n\n        // Check for hex6 (e.g. \"#ff0000\")\n        let hex6 = color.match(/^#([0-9a-f]{6})$/i);\n        if (hex6) {\n            values = [\n                parseInt(hex6[1].substr(0, 2), 16),\n                parseInt(hex6[1].substr(2, 2), 16),\n                parseInt(hex6[1].substr(4, 2), 16),\n                1\n            ];\n        }\n\n        // Check for rgba (e.g. \"rgba(255, 0, 0, 0.5)\")\n        let rgba = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+.*\\d*)\\s*\\)$/i);\n        if (rgba) {\n            values = [\n                parseInt(rgba[1]),\n                parseInt(rgba[2]),\n                parseInt(rgba[3]),\n                parseFloat(rgba[4])\n            ];\n        }\n\n        // Check for rgb (e.g. \"rgb(255, 0, 0)\")\n        let rgb = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n        if (rgb) {\n            values = [\n                parseInt(rgb[1]),\n                parseInt(rgb[2]),\n                parseInt(rgb[3]),\n                1\n            ];\n        }\n        return values;\n    }\n\n    // TODO: this should be implemented as a factory that generates an interpolator object, that just takes in a t\n    static interpolate(firstColor, secondColor, t = 0.5) {\n        let firstColorArray = Color.parseColor(firstColor);\n        let secondColorArray = Color.parseColor(secondColor);\n\n        return Color.convertToRgba([\n            parseInt(firstColorArray[0] * (1 - t) + secondColorArray[0] * t),\n            parseInt(firstColorArray[1] * (1 - t) + secondColorArray[1] * t),\n            parseInt(firstColorArray[2] * (1 - t) + secondColorArray[2] * t),\n            parseInt(firstColorArray[3] * (1 - t) + secondColorArray[3] * t)\n        ]);\n    }\n\n    static addOpacity(color, opacity) {\n        let colorArray = Color.parseColor(color);\n        return Color.convertToRgba([\n            parseInt(colorArray[0]),\n            parseInt(colorArray[1]),\n            parseInt(colorArray[2]),\n            opacity\n        ]);\n    }\n\n    static convertToRgba(rgba) {\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    static isLight(color) {\n        let values = Color.parseColor(color);\n        return values[0] * 0.3 + values[1] * 0.59 + values[2] * 0.11 > 188;\n    }\n}\n\n\nexport function lighten(color, amount) {\n    if (amount >= 0) {\n        return Color.interpolate(color, \"#fff\", amount);\n    } else {\n        return darken(color, -amount);\n    }\n}\n\n\nexport function darken(color, amount) {\n    if (amount >= 0) {\n        let rgba = Color.parseColor(Color.interpolate(color, \"#000\", amount));\n        for (let i = 0; i < 3; i += 1) {\n            let root = Math.pow(255 - rgba[i], 0.7);\n            rgba[i] = parseInt(rgba[i] - root * amount);\n            if (rgba[i] < 0) {\n                rgba[i] = 0;\n            }\n        }\n        return Color.convertToRgba(rgba);\n    } else {\n        return lighten(color, -amount);\n    }\n}\n\n\nexport function enhance(color, amount) {\n    if (Color.isLight(color)) {\n        return darken(color, amount);\n    } else {\n        return lighten(color, amount);\n    }\n}\n\n\nexport function buildColors(color, dark=true) {\n    let colors = [];\n    let darkenPercents;\n    if (!dark) {\n        darkenPercents = [0.1, 0, -0.2, -0.3, -0.35, -0.2, -1];\n    } else if (Color.isLight(color)) {\n        darkenPercents = [0.05, 0, 0.05, 0.1, 0.15, 0.3, 0.8];\n    } else {\n        darkenPercents = [-0.3, 0, 0.1, 0.2, 0.23, 0.1, -1];\n    }\n    for (let i = 0; i < darkenPercents.length; i += 1) {\n        colors.push(darken(color, darkenPercents[i]));\n    }\n    return colors;\n}\n\n\nexport class ColorGenerator {\n    static FIRST_COLORS = [\"#337ab7\", \"#5cb85c\",  \"#f0ad4e\", \"#5bc0de\", \"#d9534f\"];\n    static cache = new Map();\n\n    static getPersistentColor(uniqueId) {\n        if (uniqueId < this.FIRST_COLORS.length) {\n            return this.FIRST_COLORS[uniqueId];\n        }\n        if (!this.cache.has(uniqueId)) {\n            this.cache.set(uniqueId, this.getRandomColor());\n        }\n        return this.cache.get(uniqueId);\n    }\n\n    static getRandomColor() {\n        const allowed = \"3456789ABC\";\n        let color = \"#\";\n        for (let i = 0; i < 6; i += 1) {\n            color += allowed.charAt(parseInt(Math.random() * allowed.length));\n        }\n        return color;\n    }\n}\n","import {Dispatchable} from \"../../base/Dispatcher\";\nimport {UI} from \"../UIBase\";\nimport {StyleSheet} from \"../Style\";\nimport {CallThrottler} from \"../../base/Utils\";\n\nfunction getInstance(styleSheet) {\n    if (typeof styleSheet === \"function\") {\n        if (typeof styleSheet.getInstance === \"function\") {\n            styleSheet = styleSheet.getInstance();\n        } else {\n            styleSheet = styleSheet();\n        }\n    }\n    return styleSheet;\n}\n\nfunction getInstanceForObject(obj) {\n    if (!obj) {\n        return null;\n    }\n    let styleSheet = (obj.theme && obj.theme.get(obj)) || obj.styleSheet;\n    return getInstance(styleSheet);\n}\n\nclass Theme extends Dispatchable {\n    constructor(name=\"\") {\n        super();\n        this.styleSheetSymbol = Symbol(\"Theme\" + name);\n        this.classSet = new Set();\n        this.styleSheetSet = new Set();\n        this.properties = {};\n        this.updateThrottler = new CallThrottler({throttle: 50});\n        this.updateThrottled = this.updateThrottler.wrap(() => this.updateStyleSheets());\n        window.addEventListener(\"resize\", this.updateThrottled);\n    }\n\n    register(cls, styleSheet) {\n        cls.theme = this;\n        if (!cls.styleSheet) {\n            cls.styleSheet = styleSheet;\n        }\n        this.set(cls, styleSheet);\n    }\n\n    set(cls, styleSheet) {\n        cls[this.styleSheetSymbol] = styleSheet;\n        this.classSet.add(cls);\n    }\n\n    get(cls) {\n        if (!(typeof cls === \"function\")) {\n            cls = cls.constructor;\n        }\n        return cls[this.styleSheetSymbol];\n    }\n\n    getProperties() {\n        return this.properties;\n    }\n\n    getProperty(key, defaultValue) {\n        const value = this.properties[key] || defaultValue;\n        return (typeof value === \"function\") ? value() : value;\n    }\n\n    setProperties(properties, update=true) {\n        Object.assign(this.properties, properties);\n        if (update) {\n            this.updateThrottled();\n        }\n    }\n\n    setProperty(key, value) {\n        this.properties[key] = value;\n    }\n\n    getAllStyleSheets() {\n        let styleSheetSet = new Set(this.styleSheetSet);\n        for (const cls of this.classSet.values()) {\n            styleSheetSet.add(this.get(cls));\n        }\n        return Array.from(styleSheetSet).map(styleSheet => {\n            if (styleSheet.getInstance) {\n                return styleSheet.getInstance();\n            }\n            return styleSheet;\n        });\n    }\n\n    addStyleSheet(styleSheet) {\n        this.styleSheetSet.add(styleSheet);\n    }\n\n    removeStyleSheet(styleSheet) {\n        this.styleSheetSet.delete(styleSheet);\n    }\n\n    updateStyleSheets() {\n        for (const styleSheet of this.getAllStyleSheets()) {\n            if (styleSheet.update) {\n                styleSheet.update();\n            }\n\n        }\n    }\n\n    static register(cls, styleSheet) {\n        return this.Global.register(...arguments);\n    }\n\n    static get(cls) {\n        return this.Global.get(...arguments);\n    }\n\n    static addStyleSheet(styleSheet) {\n        this.Global.addStyleSheet(styleSheet);\n    }\n\n    static setProperties(properties) {\n        this.Global.setProperties(...arguments);\n    }\n\n    static getProperties() {\n        return this.Global.getProperties();\n    }\n}\n\nTheme.Global = new Theme(\"Global\");\n\nUI.Element.prototype.getStyleSheet = function styleSheetGetter() {\n    return getInstanceForObject(this.options) || getInstanceForObject(this.constructor);\n};\n\nfunction registerStyle(styleClass, theme=Theme.Global) {\n    return (target) => {\n        theme.register(target, styleClass);\n    }\n}\n\nStyleSheet.theme = Theme.Global;\n\nexport {Theme, registerStyle};\n","import {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {enhance} from \"./Color\";\nimport {Device} from \"../base/Device\";\nimport {Orientation, Level, Size} from \"./Constants\";\nimport {Theme} from \"./style/Theme\";\n\n// TODO: export these properly, don't use a namespace here\nlet GlobalStyle = {\n};\n\nexport function getTextColor(backgroundColor) {\n    return enhance(backgroundColor, 1);\n}\n\nTheme.setProperties({\n    COLOR_BACKGROUND: \"#fff\",\n    COLOR_BACKGROUND_ALTERNATIVE: \"#eee\",\n    COLOR_BACKGROUND_BODY: \"#f8f8f8\",\n    COLOR_FOREGROUND_BODY: \"#f2f2f2\",\n    COLOR_BACKGROUND_BADGE: \"#777\",\n    COLOR_PRIMARY: \"#337ab7\",\n    COLOR_SECONDARY: \"#358ba4\",\n    COLOR_SUCCESS: \"#5cb85c\",\n    COLOR_INFO: \"#5bc0de\",\n    COLOR_WARNING: \"#f0ad4e\",\n    COLOR_DANGER: \"#d9534f\",\n\n    COLOR_LINK: \"#337ab7\",\n\n    FONT_SIZE_EXTRA_SMALL: \"10px\",\n    FONT_SIZE_SMALL: \"12px\",\n    FONT_SIZE_DEFAULT: \"14px\",\n    FONT_SIZE_LARGE: \"17px\",\n    FONT_SIZE_EXTRA_LARGE: \"21px\",\n\n    BASE_BORDER_RADIUS: 0,\n    BASE_BOX_SHADOW: \"0px 0px 10px rgb(160, 162, 168)\",\n    BASE_BORDER_WIDTH: 0,\n    BASE_BORDER_STYLE: \"solid\",\n    BASE_BORDER_COLOR: \"#ddd\",\n\n    BUTTON_BORDER_RADIUS: \"0.2rem\",\n\n    CARD_PANEL_HEADER_HEIGHT: 30,\n    CARD_PANEL_HEADER_HEIGHT_LARGE: 40,\n    CARD_PANEL_HEADING_PADDING: 10,\n    CARD_PANEL_HEADING_PADDING_LARGE: 20,\n    CARD_PANEL_TEXT_TRANSFORM: \"inherit\",\n\n    DARK_BOX_SHADOW: \"0px 0px 10px rgba(0, 0, 0, .6)\",\n\n    ROW_LIST_ROW_HEIGHT: 30,\n    ROW_LIST_ROW_HEIGHT_LARGE: 40,\n    ROW_LIST_ROW_PADDING: 10,\n    ROW_LIST_ROW_PADDING_LARGE: 20,\n    ROW_LIST_ROW_BORDER_WIDTH: 1,\n\n    FONT_FAMILY_SANS_SERIF: \"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif\",\n    FONT_FAMILY_SERIF: \"serif\",\n    FONT_FAMILY_MONOSPACE: \"'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace\",\n    FONT_FAMILY_DEFAULT: () => Theme.getProperties().FONT_FAMILY_SANS_SERIF,\n\n    NAV_MANAGER_NAVBAR_HEIGHT: 50,\n    NAV_MANAGER_BOX_SHADOW_NAVBAR: \"0px 0px 10px rgb(0, 0, 0)\",\n    NAV_MANAGER_BOX_SHADOW_SIDE_PANEL: \"0px 0px 10px #202e3e\",\n\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE: 0,\n\n    FLAT_TAB_AREA_COLOR_BACKGROUND: \"#f3f3f3\",\n    FLAT_TAB_AREA_LINE_HEIGHT: 30,\n    FLAT_TAB_AREA_PADDING_SIDES: 10,\n});\n\nexport class BasicLevelSizeStyleSheet extends StyleSheet {\n    Level(level) {\n        if (this[level]) {\n            return this[level];\n        }\n        for (let type of Object.keys(Level)) {\n            if (level == Level[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n}\n\nexport const BasicLevelStyleSheet = (colorToStyleFunction) => class BasicLevelStyleClass extends BasicLevelSizeStyleSheet {\n    colorStyleRule(color, textColor) {\n        return colorToStyleFunction(color, textColor || getTextColor(color));\n    }\n\n    @styleRule\n    BASE = this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND);\n\n    @styleRule\n    PRIMARY = this.colorStyleRule(this.themeProperties.COLOR_PRIMARY);\n\n    @styleRule\n    SECONDARY = this.colorStyleRule(this.themeProperties.COLOR_SECONDARY);\n\n    @styleRule\n    SUCCESS = this.colorStyleRule(this.themeProperties.COLOR_SUCCESS);\n\n    @styleRule\n    INFO = this.colorStyleRule(this.themeProperties.COLOR_INFO);\n\n    @styleRule\n    WARNING = this.colorStyleRule(this.themeProperties.COLOR_WARNING);\n\n    @styleRule\n    DANGER = this.colorStyleRule(this.themeProperties.COLOR_DANGER);\n};\n\n\nclass FlexContainerStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        display: \"flex\",\n        \">*\": {\n            marginLeft: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginLeft: \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">*\": {\n            marginTop: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginTop: \"0px\",\n        }\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nclass ContainerStyle extends StyleSheet {\n    getSizeStyle(mobilePixels, desktopPercent) {\n        return {\n            margin: Device.isMobileDevice() ? `0 ${mobilePixels}px` : `0% ${desktopPercent}%`,\n        }\n    }\n\n    @styleRule\n    EXTRA_SMALL = this.getSizeStyle(6, 15);\n\n    @styleRule\n    SMALL = this.getSizeStyle(4, 10);\n\n    @styleRule\n    MEDIUM = this.getSizeStyle(4, 6);\n\n    @styleRule\n    LARGE = this.getSizeStyle(2, 3);\n\n    @styleRule\n    EXTRA_LARGE = this.getSizeStyle(2, 1);\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\n\nclass Utils extends StyleSheet {\n    extraTop = () => this.themeProperties[Device.isMobileDevice() ? \"MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE\" :\n        \"MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\"];\n\n    @styleRule\n    fullHeight = {\n        height: \"100%\",\n    };\n\n    @styleRule\n    hidden = {\n        display: \"hidden\"\n    };\n\n    // Use this class for content that has no space between it and the navbar.\n    @styleRule\n    fullContainer = {\n        width: \"100%\",\n        height: () => \"calc(100% + \" + this.extraTop() + \"px)\",\n        marginTop: () => -this.extraTop()\n    }\n}\n\nGlobalStyle.FlexContainer = FlexContainerStyle.getInstance();\nGlobalStyle.Container = ContainerStyle.getInstance();\nGlobalStyle.Utils = Utils.getInstance();\n\nexport {GlobalStyle};\n","import {UI} from \"./UIBase\";\nimport {BasicLevelStyleSheet} from \"./GlobalStyle\";\nimport {Orientation} from \"./Constants\";\nimport {registerStyle} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\n\nclass SimpleStyledElement extends UI.Element {\n    getLevel() {\n        return this.options.level || (this.parent && this.parent.getLevel && this.parent.getLevel());\n    }\n\n    setLevel(level) {\n        this.updateOptions({level});\n    }\n\n    getSize() {\n        return this.options.size || (this.parent && this.parent.getSize && this.parent.getSize());\n    }\n\n    setSize(size) {\n        this.updateOptions({size});\n    }\n}\n\n\nclass IconableInterface extends SimpleStyledElement {\n    render() {\n        return [this.beforeChildren(), this.getLabel(), super.render()];\n    };\n\n    getLabel() {\n        return (this.options.label != null) ? this.options.label : \"\";\n    }\n\n    setLabel(label) {\n        this.updateOptions({label: label});\n    }\n\n    //TODO: this should live in a base iconable class, of which you'd only use this.beforeChildren\n    getFaIcon() {\n        return this.options.faIcon;\n    }\n\n    setFaIcon(value) {\n        this.options.faIcon = value;\n        this.redraw();\n    }\n\n    beforeChildren() {\n        if (!this.getFaIcon()) {\n            return null;\n        }\n        let iconOptions = {\n            className: \"fa fa-\" + this.getFaIcon(),\n        };\n        if (this.getLabel()) {\n            iconOptions.style = {\n                marginRight: \"5px\",\n            }\n        }\n\n        return <span {...iconOptions} />;\n    }\n}\n\nlet labelColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker = {\n        backgroundColor: colors[2],\n        color: colors[6],\n        textDecoration: \"none\",\n    };\n    let regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    return Object.assign({}, regular, {\n        \":hover\": darker,\n        \":hover:disabled\": regular,\n        \":focus\": darker,\n        \":active\": darker,\n    });\n};\n\nexport class LabelStyle extends BasicLevelStyleSheet(labelColorToStyle) {\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [{\n        fontWeight: \"bold\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.07em 0.4em\",\n        borderRadius: \"0.3em\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"bottom\",\n        lineHeight: 4/3 + \"\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.05em 0.2em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.05em 0.2em\",\n    };\n}\n\n\n@registerStyle(LabelStyle)\nclass Label extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet badgeColorToStyle = (color) => {\n    const colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n};\n\nexport class BadgeStyle extends BasicLevelStyleSheet(badgeColorToStyle) {\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [{\n        display: \"inline-block\",\n        padding: \"0.25em 0.55em\",\n        fontWeight: \"700\",\n        lineHeight: \"1\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        backgroundColor: \"#777\",\n        borderRadius: \"0.8em\",\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.1em 0.2em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n\n@registerStyle(BadgeStyle)\nclass Badge extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet progressBarColorToStyle = (color) => {\n    let colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n    };\n};\n\nclass ProgressBarStyle extends BasicLevelStyleSheet(progressBarColorToStyle) {\n    @styleRule\n    container = {\n        height: \"20px\",\n        marginBottom: \"20px\",\n        overflow: \"hidden\",\n        backgroundColor: \"#f5f5f5\",\n        borderRadius: \"4px\",\n        boxShadow: \"inset 0 1px 2px rgba(0, 0, 0, .1)\",\n    };\n\n    @styleRule\n    DEFAULT = [{\n        float: \"left\",\n        width: \"0\",\n        height: \"100%\",\n        lineHeight: \"20px\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        backgroundColor: \"#337ab7\",\n        boxShadow: \"inset 0 -1px 0 rgba(0, 0, 0, .15)\",\n        transition: \"width .6s ease\",\n        fontColor: \"#ffffff\",\n    }, {\n        fontSize: \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)];\n\n    @styleRule\n    striped = {\n        backgroundImage: \"linear-gradient(45deg, rgba(255, 255, 255, .15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .15) 50%, rgba(255, 255, 255, .15) 75%, transparent 75%, transparent)\",\n        backgroundSize: \"40px 40px\",\n    };\n\n    @styleRule\n    active = {\n        animation: \"progress-bar-stripes 2s linear infinite\",\n    };\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"8px\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n@registerStyle(ProgressBarStyle)\nclass ProgressBar extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        let valueInPercent = (this.options.value || 0) * 100;\n        let orientation = Orientation.HORIZONTAL;\n        if (this.options.hasOwnProperty(\"orientation\")) {\n            orientation = this.options.orientation;\n        }\n        let barStyle;\n        if (orientation === Orientation.HORIZONTAL) {\n            barStyle = {\n                width: valueInPercent + \"%\",\n                height: this.options.height + \"px\",\n            };\n        } else {\n            barStyle = {\n                height: valueInPercent + \"%\",\n                width: \"5px\",\n            }\n        }\n        let barOptions = {\n            className: this.styleSheet.DEFAULT,\n            style: barStyle,\n        };\n\n        if (this.options.disableTransition) {\n            Object.assign(barOptions.style, {\n                transition: \"none\",\n            });\n        }\n\n        if (this.options.level) {\n            barOptions.className += \" \" + this.styleSheet.Level(this.getLevel());\n        }\n        if (this.options.striped) {\n            barOptions.className += \" \" + this.styleSheet.striped;\n        }\n        if (this.options.active) {\n            barOptions.className += \" \" + this.styleSheet.active;\n        }\n        if (this.options.color) {\n            barOptions.style.backgroundColor = this.options.color;\n        }\n\n        return <div {...barOptions}>\n            <span>{this.options.label}</span>\n        </div>;\n    }\n\n    set(value) {\n        if (value < 0)\n            value = 0;\n        else if (value > 1)\n            value = 1;\n        this.options.value = value;\n        this.redraw();\n    }\n}\n\n\nexport {SimpleStyledElement, IconableInterface, Label, Badge, ProgressBar};\n","// TODO: this file existed to hold generic classes in a period of fast prototyping, has a lot of old code\nimport {UI} from \"./UIBase\";\nimport {Device} from \"../base/Device\";\nimport {Draggable} from \"./Draggable\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {getOffset} from \"./Utils\";\nimport {Orientation} from \"./Constants\";\nimport {ProgressBar} from \"./Bootstrap3\";\n\n// A very simple class, all this does is implement the `getTitle()` method\nclass Panel extends UI.Element {\n    getTitle() {\n        return this.options.title;\n    }\n}\n\nclass SlideBar extends Draggable(UI.Element) {\n    getDefaultOptions() {\n        return {\n            value: 0,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"display\", \"inline-block\");\n        attr.setStyle(\"position\", \"relative\");\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getSliderValue() {\n        return this.options.value * this.options.size - (this.options.barSize / 2);\n    }\n\n    render() {\n        return [\n            <ProgressBar ref=\"progressBar\" active=\"true\" value={this.options.value} disableTransition={true}\n                            orientation={this.getOrientation()}\n                            style={Object.assign({\n                                position: \"relative\",\n                            }, this.getProgressBarStyle())}\n            />,\n            <div ref=\"slider\" style={Object.assign({\n                                backgroundColor: \"black\",\n                                position: \"absolute\",\n                            }, this.getSliderStyle())}>\n            </div>\n        ];\n    }\n\n    setValue(value) {\n        value = Math.max(value, 0);\n        value = Math.min(value, 1);\n\n        this.options.value = value;\n        this.progressBar.set(this.options.value);\n        this.slider.setStyle(this.getOrientationAttribute(), this.getSliderValue() + \"px\");\n\n        this.dispatch(\"change\", this.options.value);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    onMount() {\n        this.addDragListener(this.getDragConfig());\n    }\n}\n\nclass HorizontalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.width || 100;\n        options.barSize = options.barSize || options.barWidth || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: \"5px\",\n            width: this.options.size + \"px\",\n            top: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            width: this.options.barSize + \"px\",\n            height: \"20px\",\n            left: this.getSliderValue() + \"px\",\n            top: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"left\";\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventX(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaX / this.options.size);\n            },\n        };\n    }\n}\nclass VerticalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.height || 100;\n        options.barSize = options.barSize || options.barHeight || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: this.options.size + \"px\",\n            width: \"5px\",\n            left: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            height: this.options.barSize + \"px\",\n            width: \"20px\",\n            top: this.getSliderValue() + \"px\",\n            left: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"top\";\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventY(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaY / this.options.size);\n            },\n        };\n    }\n}\n\nclass Link extends UI.Primitive(\"a\") {\n    extraNodeAttributes(attr) {\n        // TODO: do we want this as a default?\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n\n        if (this.options.newTab) {\n            this.options.target = \"_blank\";\n        }\n\n        return options;\n    }\n\n    render() {\n        if (this.options.value) {\n            return [this.options.value];\n        }\n        return super.render();\n    }\n}\n\nclass Image extends UI.Primitive(\"img\") {\n}\n\n// Beware coder: If you ever use this class, you should have a well documented reason\nclass RawHTML extends UI.Element {\n    getInnerHTML() {\n        return this.options.innerHTML || this.options.__innerHTML;\n    }\n\n    redraw() {\n        this.node.innerHTML = this.getInnerHTML();\n        this.applyNodeAttributes();\n        this.applyRef();\n    }\n}\n\nclass ViewportMeta extends UI.Primitive(\"meta\") {\n    getDefaultOptions() {\n        return {\n            scale: this.getDesiredScale(),\n            initialScale: 1,\n            maximumScale: 1,\n        }\n    }\n\n    getDesiredScale() {\n        const MIN_WIDTH = this.options.minDeviceWidth;\n        return (MIN_WIDTH) ? Math.min(window.screen.availWidth, MIN_WIDTH) / MIN_WIDTH : 1;\n    }\n\n    getContent() {\n        let rez = \"width=device-width\";\n        rez += \",initial-scale=\" + this.options.scale;\n        rez += \",maximum-scale=\" + this.options.scale;\n        rez += \",user-scalable=no\";\n        return rez;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setAttribute(\"name\", \"viewport\");\n        attr.setAttribute(\"content\", this.getContent());\n    }\n\n    maybeUpdate() {\n        const desiredScale = this.getDesiredScale();\n        if (desiredScale != this.options.scale) {\n            this.updateOptions({scale: desiredScale});\n        }\n    }\n\n    onMount() {\n        window.addEventListener(\"resize\", () => this.maybeUpdate());\n    }\n}\n\nclass TemporaryMessageArea extends UI.Primitive(\"span\") {\n    getDefaultOptions() {\n        return {\n            margin: 10\n        };\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.value || \"\"}/>];\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        // TODO: nope, not like this\n        attr.setStyle(\"marginLeft\", this.options.margin + \"px\");\n        attr.setStyle(\"marginRight\", this.options.margin + \"px\");\n        return attr;\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.textElement.setValue(value);\n    }\n\n    setColor(color) {\n        this.setStyle(\"color\", color);\n    }\n\n    showMessage(message, color=\"black\", displayDuration=2000) {\n        this.setColor(color);\n        this.clear();\n        this.setValue(message);\n        if (displayDuration) {\n            this.clearValueTimeout = setTimeout(() => this.clear(), displayDuration);\n        }\n    }\n\n    clear() {\n        this.setValue(\"\");\n        if (this.clearValueTimeout) {\n            clearTimeout(this.clearValueTimeout);\n            this.clearValueTimeout = null;\n        }\n    }\n}\n\n// Just putting in a lot of methods, to try to think of an interface\nclass ScrollableMixin extends UI.Element {\n    getDesiredExcessHeightTop() {\n        return 600;\n    }\n\n    getDesiredExcessHeightBottom() {\n        return 600;\n    }\n\n    getHeightScrollPercent() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        if (scrollHeight === height) {\n            return 0;\n        }\n        return this.node.scrollTop / (scrollHeight - height);\n    }\n\n    getExcessTop() {\n        return this.node.scrollTop;\n    }\n\n    getExcessBottom() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        return scrollHeight - height - this.node.scrollTop;\n    }\n\n    haveExcessTop() {\n        return this.getExcessTop() > this.getDesiredExcessHeightTop();\n    }\n\n    haveExcessBottom() {\n        return this.getExcessBottom() > this.getDesiredExcessHeightBottom();\n    }\n\n    popChildTop() {\n        this.eraseChildAtIndex(0);\n    }\n\n    popChildBottom() {\n        this.eraseChildAtIndex(this.children.length - 1);\n    }\n\n    removeExcessTop() {\n        while (this.haveExcessTop()) {\n            this.popChildTop();\n        }\n    }\n\n    removeExcessBottom() {\n        while (this.haveExcessBottom()) {\n            this.popChildBottom();\n        }\n    }\n\n    pushChildTop(element, removeExcessBottom=true) {\n        if (removeExcessBottom) {\n            this.removeExcessBottom();\n        }\n        this.insertChild(element, 0);\n    }\n\n    pushChildBottom(element, removeExcessTop=true) {\n        if (removeExcessTop) {\n            this.removeExcessTop();\n        }\n        this.appendChild(element);\n        this.appendChild(element);\n    }\n\n    saveScrollPosition() {\n        // If at top or bottom, save that\n        // If anywhere in the middle, save the offset of the first child with a positive offset, and keep that constant\n        this.options.scrollTop = this.node.scrollTop;\n        let maxScrollTop = this.node.scrollHeight - this.node.clientHeight;\n        this.options.scrollInfo = {\n            scrollAtTop: (this.options.scrollTop === 0),\n            scrollAtBottom: (this.options.scrollTop === maxScrollTop),\n            // visibleChildrenOffsets: {}\n        };\n    }\n\n    applyScrollPosition() {\n        this.node.scrollTop = this.options.scrollTop || this.node.scrollTop;\n    }\n\n    scrollToHeight(height) {\n        this.node.scrollTop = height;\n    }\n\n    scrollToTop() {\n        this.scrollToHeight(0);\n    }\n\n    scrollToBottom() {\n        this.scrollToHeight(this.node.scrollHeight);\n    }\n};\n\n//TODO: this class would need some binary searches\nclass InfiniteScrollable extends ScrollableMixin {\n    setOptions(options) {\n        options = Object.assign({\n            entries: [],\n            entryComparator: (a, b) => {\n                return a.id - b.id;\n            },\n            firstRenderedEntry: 0,\n            lastRenderedEntry: -1,\n        }, options);\n        super.setOptions(options);\n        // TODO: TEMP for testing\n        this.options.children = [];\n        if (this.options.staticTop) {\n            this.options.children.push(this.options.staticTop);\n        }\n        for (let entry of this.options.entries) {\n            this.options.children.push(this.renderEntry(entry));\n        }\n    }\n\n    getFirstVisibleIndex() {\n    }\n\n    getLastVisibleIndex() {\n    }\n\n    renderEntry(entry) {\n        if (this.options.entryRenderer) {\n            return this.options.entryRenderer(entry);\n        } else {\n            console.error(\"You need to pass option entryRenderer or overwrite the renderEntry method\");\n        }\n    }\n\n    pushEntry(entry) {\n        this.insertEntry(entry, this.options.entries.length);\n    }\n\n    insertEntry(entry, index) {\n        let entries = this.options.entries;\n        if (index == null) {\n            index = 0;\n            while (index < entries.length &&\n                this.options.entryComparator(entries[index], entry) <= 0) {\n                index++;\n            }\n        }\n        entries.splice(index, 0, entry);\n\n        // Adjust to the children\n        if (this.options.staticTop) {\n            index += 1;\n        }\n\n        // TODO: only if in the rendered range, insert in options.children;\n        let uiElement = this.renderEntry(entry);\n        this.insertChild(uiElement, index);\n    }\n}\n\nclass TimePassedSpan extends UI.Primitive(\"span\") {\n    render() {\n        return this.getTimeDeltaDisplay(this.options.timeStamp);\n    }\n\n    getDefaultOptions() {\n        return {\n            style: {\n                color: \"#aaa\"\n            }\n        }\n    }\n\n    getTimeDeltaDisplay(timeStamp) {\n        let timeNow = Date.now();\n        let timeDelta = parseInt((timeNow - timeStamp * 1000) / 1000);\n        let timeUnitsInSeconds = [31556926, 2629743, 604800, 86400, 3600, 60];\n        let timeUnits = [\"year\", \"month\", \"week\", \"day\", \"hour\", \"minute\"];\n        if (timeDelta < 0) {\n            timeDelta = 0;\n        }\n        for (let i = 0; i < timeUnits.length; i += 1) {\n            let value = parseInt(timeDelta / timeUnitsInSeconds[i]);\n            if (timeUnitsInSeconds[i] <= timeDelta) {\n                return value + \" \" + timeUnits[i] + (value > 1 ? \"s\" : \"\") + \" ago\";\n            }\n        }\n        return \"Few seconds ago\";\n    }\n\n    static addIntervalListener(callback) {\n        if (!this.updateFunction) {\n            this.TIME_DISPATCHER = new Dispatchable();\n            this.updateFunction = setInterval(() => {\n                this.TIME_DISPATCHER.dispatch(\"updateTimeValue\");\n            }, 5000);\n        }\n        return this.TIME_DISPATCHER.addListener(\"updateTimeValue\", callback);\n    }\n\n    onMount() {\n        this._updateListener = this.constructor.addIntervalListener(() => {\n            this.redraw();\n        })\n    }\n\n    onUnmount() {\n        this._updateListener && this._updateListener.remove();\n    }\n};\n\n\nexport {Link, Panel, Image, RawHTML, TimePassedSpan, TemporaryMessageArea, SlideBar, VerticalSlideBar,\n    HorizontalSlideBar, ScrollableMixin, InfiniteScrollable, ViewportMeta};","import {StyleSheet, styleRule} from \"../Style\";\n\nclass InputStyle extends StyleSheet {\n    @styleRule\n    inputElement = {\n        transition: \"border-color ease-in-out .15s, box-shadow ease-in-out .15s\",\n        padding: \"0.4em 0.54em\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"4px\",\n        fontSize: \"90%\",\n        \":focus\": {\n            outline: \"0\",\n            borderColor: \"#66afe9\",\n            boxShadow: \"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6)\",\n        },\n    };\n\n    @styleRule\n    checkboxInput = {\n        marginLeft: \"0.2em\",\n        display: \"inline-block\",\n        width: \"initial !important\",\n        marginRight:\"0.5em\",\n        marginBottom: \"-.1em\",\n        height: \"1em\",\n    };\n\n    @styleRule\n    select = {\n        height: \"2.12em\",\n    };\n}\n\nexport {InputStyle};\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {InputStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n\n@registerStyle(InputStyle)\nclass InputableElement extends UI.Element {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.inputElement);\n    }\n}\n\n\nclass Input extends UI.Primitive(InputableElement, \"input\") {\n    extraNodeAttributes(attr) {\n        let type = this.getInputType();\n        if (type) {\n            attr.setAttribute(\"type\", type);\n        }\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.setValue(this.options.value);\n        }\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    setValue(newValue) {\n        this.node.value = newValue;\n    }\n\n    getInputType() {\n        // Must be overloaded\n        return null;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\nInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"autocomplete\"],\n    [\"autofocus\", {noValue: true}],\n    [\"formaction\"],\n    [\"maxLength\", {domName: \"maxlength\"}],\n    [\"minLength\", {domName: \"minlength\"}],\n    [\"name\"],\n    [\"placeholder\"],\n    [\"readonly\"],\n    [\"required\"],\n    [\"value\"],\n]);\n\n\nclass SubmitInput extends Input {\n    getInputType() {\n        return \"submit\";\n    }\n}\nSubmitInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"formenctype\"],\n    [\"formmethod\"],\n    [\"formnovalidate\"],\n    [\"formtarget\"]\n]);\n\n\nclass TextInput extends Input {\n    getInputType() {\n        return \"text\";\n    }\n}\n\n\nclass NumberInput extends Input {\n    getInputType() {\n        return \"number\";\n    }\n\n    getValue() {\n        let val = super.getValue();\n        return parseInt(val) || parseFloat(val);\n    }\n}\nNumberInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"min\"],\n    [\"max\"],\n    [\"step\"],\n]);\n\n\nclass EmailInput extends Input {\n    getInputType() {\n        return \"email\";\n    }\n}\n\n\nclass PasswordInput extends Input {\n    getInputType() {\n        return \"password\";\n    }\n}\n\n\nclass FileInput extends Input {\n    getInputType() {\n        return \"file\";\n    }\n\n    getFiles() {\n        return this.node.files;\n    }\n\n    getFile() {\n        // TODO: this is valid only if multipleFiles is false\n        return this.getFiles()[0];\n    }\n\n    getAsFormData() {\n        let formData = new FormData();\n        for (let file of this.getFiles()) {\n            formData.append(file.name, file);\n        }\n        return formData;\n    }\n}\nFileInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"multipleFiles\", {domName: \"multiple\", noValue: true}],\n    [\"fileTypes\", {domName: \"accept\"}],\n]);\n\n\nclass CheckboxInput extends Input {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.checkboxInput);\n    }\n\n    getInputType() {\n        return \"checkbox\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nCheckboxInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"checked\", {noValue: true}]\n]);\n\n\nclass RadioInput extends CheckboxInput {\n    getInputType() {\n        return \"radio\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nRadioInput.domAttributesMap = CreateNodeAttributesMap(CheckboxInput.domAttributesMap, [\n    [\"name\"]\n]);\n\n\nclass TextArea extends UI.Primitive(InputableElement, \"textarea\") {\n    applyNodeAttributes() {\n        super.applyNodeAttributes();\n        this.node.readOnly = this.options.readOnly || false;\n    }\n\n    setReadOnly(value) {\n        this.options.readOnly = value;\n        this.node.readOnly = value;\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.node.value = this.options.value + \"\";\n        }\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.node.value = value;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\n\n\nclass Select extends UI.Primitive(InputableElement, \"select\") {\n    render() {\n        this.givenOptions = this.options.options || [];\n        let selectOptions = [];\n\n        for (let i = 0; i < this.givenOptions.length; i += 1) {\n            let options = {\n                key: i\n            };\n            if (this.givenOptions[i] == this.options.selected) {\n                options.selected = true;\n            }\n            selectOptions.push(<option {...options}>{this.givenOptions[i].toString()}</option>);\n        }\n\n        return selectOptions;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.select);\n    }\n\n    get() {\n        let selectedIndex = this.getIndex();\n        return this.givenOptions[selectedIndex];\n    }\n\n    set(value) {\n        for (let i = 0; i < this.givenOptions.length; i++) {\n            if (this.givenOptions[i] === value) {\n                this.setIndex(i);\n                return;\n            }\n        }\n        console.error(\"Can't set the select option \", value, \"\\nAvailable options: \", this.givenOptions);\n    }\n\n    getIndex() {\n        return this.node.selectedIndex;\n    }\n\n    setIndex(index) {\n        this.node.selectedIndex = index;\n        this.options.selected = this.givenOptions[index];\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.selected) {\n            this.set(this.options.selected);\n        }\n    }\n}\n\nexport {InputStyle, Input, SubmitInput, TextInput, NumberInput, EmailInput, PasswordInput, FileInput,\n        CheckboxInput, RadioInput, TextArea, Select};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FormStyle extends StyleSheet {\n    @styleRule\n    form = {\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    formGroup = {\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    formField = {\n        \">label\": {\n            width: \"100%\",\n        },\n        display: \"block\",\n        padding: \"6px 0px\",\n        lineHeight: \"1.42857143\",\n        color: \"#555\",\n        maxWidth: \"600px\",\n        margin: \"0 auto\",\n        \"[disabled]\": {\n            opacity: \"1\",\n            cursor: \"not-allowed\",\n        },\n        \"[readonly]\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    sameLine = {\n        \">label>*:nth-child(1)\": {\n            display: \"inline-block\",\n            textAlign: \"right\",\n            paddingRight: \"1em\",\n            width: \"30%\",\n            verticalAlign: \"middle\",\n        },\n        \">label>*:nth-child(2)\": {\n            display: \"inline-block\",\n            width: \"70%\",\n            verticalAlign: \"middle\",\n        },\n    };\n\n    separatedLineInputStyle = {\n        marginRight: \"0.5em\",\n        width: \"100%\",\n        height: \"2.4em\",\n    };\n\n    @styleRule\n    separatedLine = {\n        padding: \"6px 10px\",\n        \">label>*:nth-child(1)\": {\n            verticalAlign: \"sub\",\n        },\n        \">label>input\": this.separatedLineInputStyle,\n        \">label>select\": this.separatedLineInputStyle,\n        \">label>textarea\": this.separatedLineInputStyle,\n        \">label>input[type='checkbox']\": {\n            marginLeft: \"10px\",\n            verticalAlign: \"middle\",\n        }\n    };\n\n    @styleRule\n    hasError = {\n        color: \"#a94442\",\n    };\n}\n\nexport {FormStyle};\n","import {FormStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FormStyle)\nclass Form extends UI.Primitive(\"form\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.form);\n    }\n\n    onMount() {\n        // Form elements by default refresh the page when a button inside them is clicked, so we prevent that.\n        this.addNodeListener(\"submit\", (event) => event.preventDefault());\n    }\n}\n\n@registerStyle(FormStyle)\nclass FormGroup extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formGroup);\n    }\n\n    setError(errorMessage) {\n        this.errorField.node.textContent = errorMessage;\n        this.addClass(this.styleSheet.hasError);\n    }\n\n    removeError() {\n        this.errorField.node.textContent = \"\";\n        this.removeClass(this.styleSheet.hasError);\n    }\n\n    getErrorField() {\n        return <span ref=\"errorField\" style={{float: \"right\"}}></span>;\n    }\n\n    getChildrenToRender() {\n        return [this.render(), this.getErrorField()];\n    }\n}\n\n\nclass FormField extends FormGroup {\n    inline() {\n        return !(this.options.inline === false ||\n                 (this.parent && this.parent.options && this.parent.options.inline === false));\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formField);\n        if (this.inline()) {\n            attr.addClass(this.styleSheet.sameLine);\n        } else {\n            attr.addClass(this.styleSheet.separatedLine);\n        }\n    }\n\n    getLabel() {\n        if (this.options.label) {\n            return <strong>{this.options.label}</strong>;\n        }\n        return null;\n    }\n\n    render() {\n        if (this.options.contentFirst) {\n            return [<label>{[super.render(),this.getLabel()]}</label>];\n        } else {\n            return [<label>{[this.getLabel(),super.render()]}</label>];\n        }\n    }\n}\n\nexport {Form, FormGroup, FormField};\n","import {NodeAttributes} from \"../NodeAttributes\";\n\n// Setting these attributes as styles in mozilla has no effect.\n// To maintain compatibility between moz and webkit, whenever\n// one of these attributes is set as a style, it is also set as a\n// node attribute.\nconst MozStyleElements = new Set([\"width\", \"height\", \"rx\", \"ry\", \"cx\", \"cy\", \"x\", \"y\"]);\n\nexport class SVGNodeAttributes extends NodeAttributes {\n    fixMozAttributes(node) {\n        if (this.hasOwnProperty(\"style\")) {\n            for (let attributeName of MozStyleElements.values()) {\n                if (this.style.hasOwnProperty(attributeName) && !this.hasOwnProperty(attributeName)) {\n                    this.setAttribute(attributeName, this.style[attributeName], node);\n                }\n            }\n        }\n    }\n\n    setStyle(attributeName, value, node) {\n        super.setStyle(attributeName, value, node);\n        if (MozStyleElements.has(attributeName)) {\n            this.setAttribute(attributeName, value, node);\n        }\n    }\n\n    applyClassName(node) {\n        // SVG elements have a different API for setting the className than regular DOM nodes\n        if (this.className) {\n            node.setAttribute(\"class\", String(this.className));\n        } else {\n            node.removeAttribute(\"class\");\n        }\n    }\n\n    apply(node, attributesMap) {\n        this.transform = this.transform || this.translate;\n        super.apply(node, attributesMap);\n        this.fixMozAttributes(node);\n    }\n}\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {uniqueId} from \"../../base/Utils\";\nimport {SVGNodeAttributes} from \"./SVGNodeAttributes\";\nimport {Device} from \"../../base/Device\";\nimport {applyDebugFlags} from \"../Debug\";\n\n\nlet SVG = {};\n\nSVG.Element = class SVGElement extends UI.Element {\n    createNode() {\n        this.node = document.createElementNS(\"http://www.w3.org/2000/svg\", this.getNodeType());\n        applyDebugFlags(this);\n        return this.node;\n    }\n\n    getScreenCoordinatedForPoint(point) {\n        const node = this.node;\n        // TODO: this is a good argument to always keep a reference to the Stem element in the nodes\n        const svgNode = node.ownerSVGElement || node;\n\n        if (svgNode.createSVGPoint) {\n            // Using native SVG transformations\n            // See https://msdn.microsoft.com/en-us/library/hh535760(v=vs.85).aspx\n            let svgPoint = svgNode.createSVGPoint();\n            svgPoint.x = point.x;\n            svgPoint.y = point.y;\n            return svgPoint.matrixTransform(node.getScreenCTM().inverse());\n        }\n\n        const rect = this.getBoundingClientRect();\n        return {\n        \tx: point.x - rect.left - node.clientLeft,\n        \ty: point.y - rect.top - node.clientTop,\n        };\n    }\n\n    getMouseCoordinatesForEvent(event=window.event) {\n        return this.getScreenCoordinatedForPoint({x: Device.getEventX(event), y: Device.getEventY(event)});\n    }\n\n    saveState() {\n        let state = {};\n        state.options = Object.assign({}, this.options);\n        return state;\n    }\n\n    setState(state) {\n        this.setOptions(state.options);\n    }\n\n    getOptionsAsNodeAttributes() {\n        let attr = this.options;\n        attr.__proto__ = SVGNodeAttributes.prototype;\n        return attr;\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new SVGNodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    translate(x=0, y=0) {\n        this.options.translate = \"translate(\" + x + \",\" + y + \")\";\n    }\n\n    getHashCode() {\n        return uniqueId(this);\n    }\n\n    //TODO(@all) : getBoundingClientRect is unreliable, reimplement it.\n    getBoundingClientRect() {\n        let element = this.node;\n        let x = 0;\n        let y = 0;\n        while(element && element !== document.body) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n            element = element.offsetParent || element.parentNode;\n        }\n        if (element) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n        }\n        let pos = this.node.getBoundingClientRect();\n        return {\n            top: pos.top - y,\n            left: pos.left - x,\n            width: pos.width,\n            bottom: pos.bottom - y,\n            height: pos.height,\n            right: pos.right - x\n        };\n    }\n\n    getBBox() {\n        return this.node.getBBox();\n    }\n\n    getHeight() {\n        return this.getBoundingClientRect().height;\n    }\n\n    getWidth() {\n        return this.getBoundingClientRect().width;\n    }\n\n    toFront() {\n        const parentNode = this.node && this.node.parentElement;\n        if (parentNode) {\n            parentNode.removeChild(this.node);\n            parentNode.appendChild(this.node);\n        }\n    }\n\n    toBack() {\n    }\n\n    setOpacity(newOpacity) {\n        this.options.opacity = newOpacity;\n        if (this.node) {\n            this.node.setAttribute(\"opacity\", newOpacity);\n        }\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"stroke\", color);\n            this.node.setAttribute(\"fill\", color)\n        }\n    }\n\n    remove() {\n    }\n\n    getSvg() {\n        return this.parent.getSvg();\n    }\n};\n\nSVG.Element.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"fill\"],\n    [\"height\"],\n    [\"opacity\"],\n    [\"stroke\"],\n    [\"strokeWidth\", {domName: \"stroke-width\"}],\n    [\"clipPath\", {domName: \"clip-path\"}],\n    [\"transform\"],\n    [\"width\"],\n    [\"cx\"],\n    [\"cy\"],\n    [\"rx\"],\n    [\"ry\"],\n    [\"x\"],\n    [\"y\"],\n    [\"x1\"],\n    [\"y1\"],\n    [\"x2\"],\n    [\"y2\"],\n    [\"offset\"],\n    [\"stopColor\", {domName: \"stop-color\"}],\n    [\"strokeDasharray\", {domName: \"stroke-dasharray\"}],\n    [\"strokeLinecap\", {domName: \"stroke-linecap\"}],\n    [\"viewBox\", {domName: \"viewBox\"}],\n]);\n\nexport {SVG};\n","import {SVG} from \"./SVGBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {UI} from \"../UIBase\";\n\nSVG.Text = class SVGText extends SVG.Element {\n    getNodeType() {\n        return \"text\";\n    }\n\n    getDefaultOptions() {\n        return {\n            text: \"\",\n            fontSize: \"15px\",\n            color: \"black\",\n            dy: \"0.35em\",\n            textAnchor: \"middle\",\n            selectable: false\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        // TODO: For some reason, still selectable in mozilla...\n        if (!this.options.selectable) {\n            attr.setStyle(\"-webkit-user-select\", \"none\");\n            attr.setStyle(\"-khtml-user-select\", \"none\");\n            attr.setStyle(\"-moz-user-select\", \"none\");\n            attr.setStyle(\"-ms-user-select\", \"none\");\n            attr.setStyle(\"user-select\", \"none\");\n        }\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.text + \"\"} />];\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    setText(text) {\n        this.options.text = text;\n        this.textElement.setValue(text + \"\");\n    }\n\n    getText() {\n        return this.options.text;\n    }\n\n    setPosition(x, y) {\n        this.setX(x);\n        this.setY(y);\n    }\n\n    getColor() {\n        return this.options.color;\n    }\n\n    setColor(color, fillOnly=false) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"fill\", color);\n            if (!fillOnly) {\n                this.node.setAttribute(\"stroke\", color);\n            }\n        }\n    }\n};\n\nSVG.Text.domAttributesMap = CreateNodeAttributesMap(SVG.Element.domAttributesMap, [\n    [\"dx\"],\n    [\"dy\"],\n    [\"fontFamily\", {domName: \"font-family\"}],\n    [\"fontSize\", {domName: \"font-size\"}],\n    [\"textAnchor\", {domName: \"text-anchor\"}]\n]);","// TODO: this whole file is mosly here to not break compatibility with pre-Stem code, need refactoring\nexport var EPS = 1e-6;\n\n// Check if a value is equal to zero. Use epsilon check.\nexport var isZero = function (val, epsilon=EPS) {\n    return (Math.abs(val) < epsilon);\n};\n\n// Simulate C/C++ rand() function\nexport var rand = function (mod) {\n    return Math.floor(Math.random() * mod);\n};\n\nexport var equal = function (val1, val2, epsilon=EPS) {\n    return isZero(val1-val2, epsilon);\n};\n\nexport var equalPoints = function (p1, p2, epsilon=EPS) {\n    return isZero(p1.x - p2.x, epsilon) && isZero(p1.y - p2.y, epsilon);\n};\n\n// Compute square of a number\nexport var sqr = function (x) {\n    return x * x;\n};\n\n// Compute the distance between 2 points\nexport var distance = function (p1, p2) {\n    return Math.sqrt(sqr(p1.x - p2.x) + sqr(p1.y - p2.y));\n};\n\nexport var signedDistancePointLine = function (point, line) {\n    return (line.a * point.x + line.b * point.y + line.c) / Math.sqrt(sqr(line.a) + sqr(line.b));\n};\n\nexport var distancePointLine = function (point, line) {\n    return Math.abs(signedDistancePointLine(point, line));\n};\n\nexport var pointOnSegment = function (point, segmentStart, segmentEnd, epsilon) {\n    epsilon = epsilon || EPS;\n    return Math.abs(distance(point, segmentStart) + distance(point, segmentEnd) -\n        distance(segmentStart, segmentEnd)) <= epsilon;\n};\n\nexport var perpendicularFoot = function (point, line) {\n    var distance = (line.a * point.x + line.b * point.y + line.c) / (sqr(line.a) + sqr(line.b));\n    return {\n        x: point.x - line.a * distance,\n        y: point.y - line.b * distance\n    }\n};\n\nexport var lineEquation = function (A, B) {\n    return {\n        a: B.y - A.y,\n        b: A.x - B.x,\n        c: A.y * B.x - A.x * B.y\n    }\n};\n\n// Compute angle between 2 points in grad\nexport var angleGrad = function (p1, p2) {\n    return gradian(angleRad(p1, p2));\n};\n\n// Transform gradian in radian\nexport var radian = function (angle) {\n    return angle * Math.PI / 180;\n};\n\n// Transform radian in gradian\nexport var gradian = function (angle) {\n    return angle * 180 / Math.PI;\n};\n\n// Compute angle between 2 points in rad\nexport var angleRad = function (p1, p2) {\n    p2 = p2 || {'x': 0, 'y': 0};\n    return Math.atan2(p1.y - p2.y, p1.x - p2.x);\n};\n\n// TODO: lots of these should be methods of the point class, not global functions\nexport var crossProduct = function (p1, p2, p0) {\n    p0 = p0 || {x:0, y:0};\n    return (p1.x - p0.x) * (p2.y - p0.y) - (p1.y - p0.y) * (p2.x - p0.x);\n};\n\nexport var rotatePoint = function (point, orig, angle) {\n    // TODO: WTF, default argument value in the middle of argument list?\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: Math.cos(angle) * (point.x - orig.x) - Math.sin(angle) * (point.y - orig.y) + orig.x,\n        y: Math.sin(angle) * (point.x - orig.x) + Math.cos(angle) * (point.y - orig.y) + orig.y\n    };\n};\n\nexport var translatePoint = function (point, dx, dy) {\n    return {\n        x: point.x + dx,\n        y: point.y + dy\n    };\n};\n\nexport var scalePoint = function (point, orig, sx, sy) {\n    sy = sy || sx;\n    return {\n        x: (point.x - orig.x) * sx + orig.x,\n        y: (point.y - orig.y) * sy + orig.y\n    }\n};\n\nexport var polarToCartesian = function (angle, radius, orig) {\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: radius * Math.cos(angle) + orig.x,\n        y: radius * Math.sin(angle) + orig.y\n    };\n};\n\nexport var circlesIntersection = function (circle1, circle2) {\n    var points;\n    var centerDistance;\n    // TODO(@all) These vars are magic. Find out what they do and add comments\n    var l;\n    var h;\n\n    centerDistance = distance(circle1, circle2);\n    if (centerDistance > circle1.r + circle2.r) {\n        return [];\n    }\n\n    l = (sqr(circle1.r)- sqr(circle2.r) + sqr(centerDistance)) / (2 * centerDistance);\n    if (sqr(circle1.r) - sqr(l) < 0) {\n        return [];\n    }\n\n    h = Math.sqrt(sqr(circle1.r) - sqr(l));\n\n    points = [];\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) + h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) - h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) - h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) + h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n\n    return points;\n};\n\nexport var bound = function (value, minValue, maxValue) {\n    if (value < minValue) {\n        return minValue;\n    }\n    if (value > maxValue) {\n        return maxValue;\n    }\n    return value;\n};\n\nexport var getVector = function (startPoint, endPoint) {\n    return {\n        x: endPoint.x - startPoint.x,\n        y: endPoint.y - startPoint.y\n    };\n};\n\nexport var vectorLength = function (vector) {\n    return distance({x:0, y:0}, vector);\n};\n\nexport var normalizeVector = function (vector) {\n    let len = vectorLength(vector);\n    if (Math.abs(len) < EPS) {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n    return {\n        x: vector.x / len,\n        y: vector.y / len\n    };\n};\n\nexport var scaleVector = function (vector, scalar) {\n    return {\n        x: vector.x * scalar,\n        y: vector.y * scalar\n    };\n};\n\nexport var addVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x + vector2.x,\n        y: vector1.y + vector2.y\n    };\n};\n\nexport var subtractVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x - vector2.x,\n        y: vector1.y - vector2.y\n    };\n};\n\nexport var triangleArea = function (point1, point2, point3) {\n    return 0.5 * Math.abs(crossProduct(point1, point2, point3));\n};\n\nexport var inRange = function (value, minValue, maxValue) {\n    if (isNaN(value)) {\n        return false;\n    }\n    return minValue <= value && value <= maxValue;\n};\n\nexport var interpolationValue = function (interpolationArray, X) {\n    var Y = 0;\n    var aux;\n    var i;\n    var j;\n\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        if (interpolationArray.x === X) {\n           return interpolationArray.y;\n        }\n    }\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        aux = interpolationArray[i].y;\n        for (j = 0; j < interpolationArray.length; j += 1) {\n            if (i !== j) {\n                aux = aux * (X - interpolationArray[j].x) / (interpolationArray[i].x - interpolationArray[j].x);\n            }\n        }\n        Y += aux;\n    }\n\n    return Y;\n};\n","import {SVG} from \"./SVGBase\";\nimport * as math from \"../../math\";\n\nSVG.SVGRoot = class SVGRoot extends SVG.Element {\n    getNodeType() {\n        return \"svg\";\n    }\n\n    getSvg() {\n        return this;\n    }\n};\n\nSVG.RawSVG = class RawSVG extends SVG.SVGRoot {\n    redraw() {\n        super.redraw();\n        this.node.innerHTML = this.options.innerHTML;\n    }\n};\n\nSVG.Group = class SVGGroup extends SVG.Element {\n    getNodeType() {\n        return \"g\";\n    }\n\n    setColor(color) {\n        for (let i = 0; i < this.children.length; i += 1) {\n            this.children[i].setColor(color);\n        }\n    }\n};\n\nSVG.Defs = class SVGDefs extends SVG.Element {\n    getNodeType() {\n        return \"defs\";\n    }\n};\n\nSVG.ClipPath = class ClipPath extends SVG.Element {\n    getNodeType() {\n        return \"clipPath\";\n    }\n};\n\nSVG.Path = class SVGPath extends SVG.Element {\n    getNodeType() {\n        return \"path\";\n    }\n\n    getDefaultOptions() {\n        return {\n            d: \"\"\n        }\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPath());\n        return attr;\n    }\n\n    getPath() {\n        return this.options.d;\n    }\n\n    setPath(newPath) {\n        this.options.d = newPath;\n        this.node.setAttribute(\"d\", this.options.d);\n    }\n\n    getLength() {\n        return this.node.getTotalLength();\n    }\n\n    getPointAtLength(len) {\n        return this.node.getPointAtLength(len);\n    }\n\n    getPointAtLengthWithAngle(len) {\n        let totalLength = this.getLength();\n        let epsilon;\n        if (totalLength <= 1) {\n            epsilon = totalLength / 1000;\n        } else {\n            epsilon = Math.min(totalLength / 1000, Math.log(totalLength), 1);\n        }\n        let p1 = this.getPointAtLength(len);\n        let p2 = this.getPointAtLength(Math.min(len + epsilon, totalLength));\n        let p3 = this.getPointAtLength(Math.max(len - epsilon, 0));\n        return {\n            x: p1.x,\n            y: p1.y,\n            alpha: 180 * Math.atan2(p3.y - p2.y, p3.x - p2.x) / Math.PI\n        };\n    }\n};\n\nSVG.Circle = class SVGCircle extends SVG.Element {\n    getNodeType() {\n        return \"circle\";\n    }\n\n    getDefaultOptions() {\n        return {\n            radius: 0,\n            center: {x: 0, y: 0}\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"r\", this.options.radius);\n        attr.setAttribute(\"cx\", this.options.center.x);\n        attr.setAttribute(\"cy\", this.options.center.y);\n        return attr;\n    }\n\n    getRadius() {\n        return this.options.radius;\n    }\n\n    setRadius(radius) {\n        this.options.radius = radius;\n\n        this.setAttribute(\"r\", radius);\n    }\n\n    setCenter(x, y) {\n        this.options.center.x = x;\n        this.options.center.y = y;\n\n        this.setAttribute(\"cx\", x);\n        this.setAttribute(\"cy\", y);\n    }\n\n    getCenter() {\n        return this.options.center;\n    }\n\n    toPath() {\n        let r = this.options.radius;\n        let cx = this.options.center.x;\n        let cy = this.options.center.y;\n        let pathString = \"M\" + (cx - r) + \" \" + cy +            // Starting point is W\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + (-r) +    // Move to N\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + r +       // Move to E\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + r +    // Move to S\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + (-r);  // Finally, move back to W\n        return new SVG.Path({d: pathString});\n    }\n};\n\nSVG.Stop = class SVGStop extends SVG.Element {\n    getNodeType() {\n        return \"stop\";\n    }\n};\n\nSVG.RadialGradient = class SVGRadialGradient extends SVG.Element {\n    getNodeType() {\n        return \"radialGradient\";\n    }\n};\n\nSVG.LinearGradient = class SVGLinearGradient extends SVG.Element {\n    getNodeType() {\n        return \"linearGradient\";\n    }\n};\n\n//TODO Complete this class\nSVG.Ellipse = class SVGEllipse extends SVG.Element {\n    getNodeType() {\n        return \"ellipse\";\n    }\n};\n\nSVG.CircleArc = class SVGCircleArc extends SVG.Path {\n    getPath() {\n        let startAngle = this.options.startAngle;\n        let endAngle = this.options.endAngle;\n        let radius = this.options.radius;\n        let center = this.options.center;\n\n        var angleDiff = endAngle - startAngle + (endAngle < startAngle ? (2 * Math.PI) : 0);\n        var startPoint = math.polarToCartesian(startAngle, radius, center);\n        var endPoint = math.polarToCartesian(endAngle, radius, center);\n        var sweepFlag;\n        var largeArcFlag;\n\n        // Set largeArcFlag and sweepFlag\n        if (angleDiff <= Math.PI) {\n            largeArcFlag = 0;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 0;\n            } else {\n                sweepFlag = 1;\n            }\n        } else {\n            largeArcFlag = 1;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 1;\n            } else {\n                sweepFlag = 0;\n            }\n        }\n\n        return \"M \" + startPoint.x + \" \" + startPoint.y +\n            \" A \" + radius + \" \" + radius + \" 0 \" + largeArcFlag + \" \" + sweepFlag + \" \" +\n            endPoint.x + \" \" + endPoint.y;\n    }\n};\n\nSVG.Rect = class SVGRect extends SVG.Element {\n    getNodeType() {\n        return \"rect\";\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    getWidth() {\n        return this.options.width;\n    }\n\n    setWidth(width) {\n        this.options.width = width;\n        this.node.setAttribute(\"width\", this.options.width);\n    }\n\n    getHeight() {\n        return this.options.height;\n    }\n\n    setHeight(height) {\n        this.options.height = height;\n        this.node.setAttribute(\"height\", this.options.height);\n    }\n};\n\nSVG.Line = class SVGLine extends SVG.Element {\n    getNodeType() {\n        return \"line\";\n    }\n\n    getDefaultOptions() {\n        return {\n            fill: \"black\",\n            stroke: \"black\"\n        };\n    }\n\n    //TODO(@all): Make the getters for x1, y1, x2, y2\n\n    setLine(x1, y1, x2, y2) {\n        this.options.x1 = x1;\n        this.options.y1 = y1;\n        this.options.x2 = x2;\n        this.options.y2 = y2;\n\n        this.setAttribute(\"x1\", x1);\n        this.setAttribute(\"y1\", y1);\n        this.setAttribute(\"x2\", x2);\n        this.setAttribute(\"y2\", y2);\n    }\n};\n\nSVG.Polygon = class Polygon extends SVG.Path {\n    getDefaultOptions() {\n        return {\n            points: []\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPolygonPath());\n        return attr;\n    }\n\n    getPolygonPath() {\n        let pathString = \"\";\n        for (let i = 0; i < this.options.points.length; ++i) {\n            if (i == 0) {\n                pathString += \"M \";\n            }\n            else {\n                pathString += \"L \";\n            }\n            pathString += this.options.points[i].x + \" \" + this.options.points[i].y + \" \";\n        }\n        pathString += \"Z\";\n        return pathString;\n    }\n\n    setPoints(points) {\n        this.options.points = points;\n        this.setPath(this.getPolygonPath());\n    }\n};","import {equal} from \"../math\";\n\nclass Transition {\n    constructor(options) {\n        this.func = options.func;\n        this.context = options.context;\n        this.duration = options.duration || 0;\n        this.startTime = options.startTime || 0;\n        this.dependsOn = options.dependsOn || [];\n        this.speedFactor = 1;\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    hasDependencyOn(t) {\n        for (let transition of this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    setStartTime(time) {\n        this.startTime = time;\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        return this;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += (now - this.pauseTime);\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    forceStart() {\n        this.restart();\n        this.func(0.0, this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(1.0, this.context);\n        this.stop();\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n    }\n\n    restart() {\n        delete this.stopped;\n        return this;\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    nextStep(now=Date.now()) {\n        // Return if transition is stopped\n        if (this.isStopped()) {\n            return this;\n        }\n        this.lastT = this.getFraction(now);\n        // Return if transitions not started yet\n        if (this.lastT < 0) {\n            return this;\n        }\n        // Call the animation function\n        this.func(this.lastT, this.context);\n        // Stop the animation if it's the last step\n        if (this.lastT === 1) {\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime + this.duration / this.speedFactor;\n    }\n}\n\nclass Modifier extends Transition {\n    constructor(options) {\n        super(options);\n        this.reverseFunc = options.reverseFunc;\n        this.context = options.context;\n    }\n\n    // WTF, so basically JSON.stringify??\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"   reverseFunc: \" + this.reverseFunc.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    forceStart() {\n        this.restart();\n        this.reverseFunc(this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(this.context);\n        this.stop();\n        return this;\n    }\n\n    nextStep(now=Date.now()) {\n        if (this.isStopped()) {\n            return this;\n        }\n        if (now >= this.startTime) {\n            this.func(this.context);\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime;\n    }\n}\n\nclass TransitionList {\n    constructor(startTime=0) {\n        this.startTime = startTime;\n        this.speedFactor = 1;\n        this.transitions = [];\n        this.dependsOn = [];\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   transitions: [\" + (this.transitions.length ? this.transitions[0].toString() : \"\") + \" ...]\\n\"+\n                \"}\\n\";\n    }\n\n    add(transition, forceFinish=true) {\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    push(transition, forceFinish=true) {\n        transition.setStartTime(this.getLength());\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    setStartTime(startTime) {\n        let timeDelta = startTime - this.startTime;\n        this.startTime = startTime;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.setStartTime(transition.startTime + timeDelta);\n        }\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.stop();\n        }\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].pause(now);\n            }\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += now - this.pauseTime;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].resume(now);\n            }\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    nextStep() {\n        // Return if transition list is stopped\n        if (this.isStopped()) {\n            return;\n        }\n\n        if (this.onNewFrame) {\n            this.onNewFrame(this.getFraction());\n        }\n\n        let finished = true;\n        let stk = [];\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (!transition.isStopped()) {\n                if (transition.canAdvance()) {\n                    transition.nextStep();\n                    while (stk.length !== 0 && this.transitions[stk[stk.length - 1]].canAdvance()) {\n                        this.transitions[stk[stk.length - 1]].nextStep();\n                        stk.pop();\n                    }\n                } else {\n                    stk.push(i);\n                }\n                finished = false;\n            }\n        }\n        if (finished) {\n            this.stop();\n        }\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            this.transitions[i].setSpeedFactor(speedFactor, now);\n        }\n        return this;\n    }\n\n    restart() {\n        delete this.stopped;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.restart();\n        }\n        this.sortByEndTime();\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    getEndTime() {\n        let endTime = 0;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transitionEndTime = this.transitions[i].getEndTime();\n            if (transitionEndTime > endTime) {\n                endTime = transitionEndTime;\n            }\n        }\n        return endTime;\n    }\n\n    hasDependencyOn(t) {\n        for (let transition in this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    sortByStartTime() {\n        // TODO: this comparator should be global\n        this.transitions.sort((a, b) => {\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return b.startTime - a.startTime;\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return b.getEndTime() - a.getEndTime();\n            }\n            if (a.hasDependencyOn(b)) {\n                return 1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n    sortByEndTime() {\n        this.transitions.sort((a, b) => {\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return a.getEndTime() - b.getEndTime();\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return a.startTime - b.startTime;\n            }\n            if (a.hasDependencyOn(b)) {\n                return -1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n\n    forceStart(now=Date.now()) {\n        this.sortByStartTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.startTime <= now) {\n                transition.forceStart(now);\n            }\n        }\n        return this;\n    }\n\n    forceFinish(now=Date.now(), startTime=-1) {\n        this.sortByEndTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.getEndTime() >= startTime) {\n                if (transition instanceof TransitionList) {\n                transition.forceFinish(now, startTime);\n                } else {\n                    if (typeof now === \"undefined\" || transition.getEndTime() < now) {\n                        transition.forceFinish();\n                    }\n                }\n            }\n        }\n        return this;\n    }\n\n    startAtPercent(startPercent, now=Date.now()) {\n        cancelAnimationFrame(this.animationFrameId);\n        this.restart();\n        // TODO(@wefgef): Buggy\n        let paused = this.pauseTime;\n        if (paused) {\n            this.resume();\n        }\n        this.forceStart(now);\n        this.setStartTime(now - startPercent * this.getLength());\n        this.forceFinish(now);\n        // TODO(@wefgef): Huge hack to deal with force transition\n        this.nextStep();\n        this.nextStep();\n        if (paused) {\n            this.pause();\n        }\n\n        let functionWrapper = () => {\n            if (this.isStopped()) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            this.animationFrameId = requestAnimationFrame(functionWrapper);\n        };\n        this.animationFrameId = requestAnimationFrame(functionWrapper);\n    }\n}\n\nexport {Transition, Modifier, TransitionList};","import {SVG} from \"./SVGBase\";\nimport {Transition} from \"../Transition\";\nimport {Color} from \"../Color\";\n\nSVG.AnimatedSVG = class AnimatedSVG extends SVG.SVGRoot {\n    onMount() {\n        if (this.options.transition) {\n            this.options.transition.setStartTime(Date.now());\n            let animationWrapper = () => {\n                if (this.options.transition.isStopped()) {\n                    if (this.options.repeat) {\n                        this.options.transition.setStartTime(Date.now());\n                        this.options.transition.restart();\n                        requestAnimationFrame(animationWrapper);\n                    }\n                    return;\n                }\n                if (!this.options.transition.pauseTime) {\n                    this.options.transition.nextStep();\n                }\n                requestAnimationFrame(animationWrapper);\n            };\n            requestAnimationFrame(animationWrapper);\n        }\n    }\n};\n\nSVG.Element.prototype.blinkTransition = function (options) {\n    let config = {\n        duration: 2000,\n        times: 2,\n        firstColor: \"grey\",\n        secondColor: \"black\",\n        executeLastStep: true,\n        startTime: 0,\n        dependsOn: []\n    };\n    Object.assign(config, options);\n    return new Transition({\n        func: (t, context) => {\n            if (t > 1 - context.interval && !context.executeLastStep) {\n                this.setColor(context.firstColor);\n            } else {\n                this.setColor(Math.floor((1 - t) / context.interval) % 2 === 1 ? context.firstColor : context.secondColor);\n            }\n        },\n        context: {\n            firstColor: config.firstColor,\n            secondColor: config.secondColor,\n            interval: 1 / (2 * config.times),\n            executeLastStep: config.executeLastStep\n        },\n        duration: config.duration,\n        startTime: config.startTime,\n        dependsOn: config.dependsOn\n    });\n};\nSVG.Element.prototype.changeOpacityTransition = function(opacity, duration, dependsOn=[], startTime=0) {\n    if (!this.options.hasOwnProperty(\"opacity\")) {\n        this.options.opacity = 1;\n    }\n    return new Transition({\n        func: (t, context) => {\n            this.setOpacity((1 - t) * context.opacity + t * opacity);\n        },\n        context: {\n            opacity: this.options.opacity\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};\nSVG.Element.prototype.changeColorTransition = function(color, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setColor(Color.interpolate(context.color, color, t));\n            },\n            context: {\n                color: this.getColor()\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\n\nSVG.Text.prototype.moveTransition = function(coords, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setPosition(\n                    (1 - t) * context.x + t * coords.x,\n                    (1 - t) * context.y + t * coords.y\n                );\n            },\n            context: {\n                x: this.options.x,\n                y: this.options.y\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\nSVG.Text.prototype.changeFillTransition = function(color, duration, dependsOn=[], startTime=0) {\n    return new Transition({\n        func: (t, context) => {\n            this.setColor(Color.interpolate(context.color, color, t), true);\n        },\n        context: {\n            color: this.getColor()\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};","import {UI} from \"./UIBase\";\nimport {GlobalStyle} from \"./GlobalStyle\";\n\nclass Switcher extends UI.Element {\n    constructor(options) {\n        super(options);\n        this.childMap = new WeakMap();\n        this.numRedraws = 0;\n    }\n\n    getDefaultOptions() {\n        return {\n            fullHeight: false,\n            preserveScroll: true,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.fullHeight) {\n            attr.addClass(GlobalStyle.Utils.fullHeight);\n        }\n    }\n\n    copyState(element) {\n        let options = Object.assign({}, element.options, {\n            children: this.overwriteElements(this.options.children || [], element.options.children || []),\n        });\n\n        this.setOptions(options);\n\n        for (let child of this.options.children) {\n            if (child.options.active) {\n                this.activeChild = child;\n            }\n        }\n    }\n\n    render() {\n        return this.activeChild || this.options.children[0];\n    }\n\n    overwriteElements(existingElements, newElements) {\n        let keyMap = this.getElementKeyMap(existingElements) || new Map();\n        for (let i = 0; i < newElements.length; i += 1) {\n            let newChild = newElements[i];\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = keyMap.get(newChildKey);\n            if (existingChild === newChild) {\n                continue;\n            }\n            if (existingChild && newChild.canOverwrite(existingChild)) {\n                newElements[i] = newChild = this.overwriteChild(existingChild, newChild);\n            }\n        }\n        return newElements;\n    }\n\n    redraw() {\n        this.numRedraws += 1;\n\n        //basic things for our current node\n        this.applyNodeAttributes();\n        this.applyRef();\n\n        // This render may be required to update this.options.children\n        UI.renderingStack.push(this);\n        this.render();\n        UI.renderingStack.pop();\n\n        if (this.options.children.length == 0) {\n            return;\n        }\n\n        for (let child of this.options.children) {\n            if (this.options.lazyRender) {\n                this.getChildProperties(child).isUpToDate = false;\n                child.applyRef();\n            } else {\n                this.updateChild(child);\n            }\n        }\n\n        this.updateActiveChild(this.activeChild || this.options.children[0]);\n    }\n\n    getChildProperties(child) {\n        if (!this.childMap.has(child)) {\n            this.childMap.set(child, {\n                isMounted: !!child.node,\n                redrawIndex: -1,\n            });\n        }\n        return this.childMap.get(child);\n    }\n\n    updateChild(child) {\n        if (this.getChildProperties(child).redrawIndex < this.numRedraws) {\n            if (!child.node) {\n                child.mount(this);\n            } else {\n                child.redraw();\n            }\n            this.getChildProperties(child).redrawIndex = this.numRedraws;\n        }\n    }\n\n    appendChild(child, doMount=false) {\n        this.options.children.push(child);\n        if (doMount) {\n            child.mount(this);\n        }\n        if (this.options.children.length == 1) {\n            this.setActive(child);\n        }\n        return child;\n    }\n\n    getActive() {\n        return this.activeChild;\n    }\n\n    insertChildNodeBefore(child, nextSibling) {\n        let childProperties = this.getChildProperties(child);\n        childProperties.isMounted = true;\n        childProperties.redrawIndex = this.numRedraws;\n    }\n\n    updateActiveChild(element) {\n        while (this.node.firstChild) {\n            //TODO: would be useful here to be able to access the matching UI Element\n            this.node.removeChild(this.node.firstChild);\n        }\n\n        if (element == null) {\n            this.activeChild = null;\n            return;\n        }\n\n        this.updateChild(element);\n\n        this.node.appendChild(element.node);\n        this.children[0] = this.activeChild = element;\n    }\n\n    deactivateChild(child) {\n        child.dispatch(\"hide\");\n        child.dispatch(\"setActive\", false);\n        if (this.options.preserveScroll) {\n            this.getChildProperties(child).scrollTop = this.node.scrollTop;\n        }\n    }\n\n    activateChild(child) {\n        child.dispatch(\"setActive\", true);\n        child.dispatch(\"show\");\n        if (this.options.preserveScroll) {\n            this.node.scrollTop = this.getChildProperties(child).scrollTop || 0;\n        }\n    }\n\n    setActive(element) {\n        if (this.activeChild === element) {\n            return;\n        }\n        if (this.activeChild) {\n            this.deactivateChild(this.activeChild);\n        }\n        this.updateActiveChild(element);\n        if (this.activeChild) {\n            this.activateChild(this.activeChild);\n        }\n    }\n\n    hasChild(element) {\n        return this.childMap.has(element);\n    }\n\n    onMount() {\n        this.addListener(\"shouldRedrawChild\", (event) => {\n            if (event.child.isInDocument()) {\n                event.child.redraw();\n            } else {\n                this.getChildProperties(event.child).isUpToDate = false;\n            }\n        });\n    }\n}\n\nexport {Switcher};\n","import {UI} from \"./UIBase\";\nimport {Switcher} from \"./Switcher\";\nimport {Dispatcher} from \"../base/Dispatcher\";\nimport {PageTitleManager} from \"../base/PageTitleManager\";\nimport {unwrapArray} from \"../base/Utils\";\n\nexport class Router extends Switcher {\n    static parseURL(path=location.pathname) {\n        if (!Array.isArray(path)) {\n            path = path.split(\"/\");\n        }\n        return path.filter(str => str != \"\");\n    }\n\n    static joinURLParts(urlParts) {\n        if (urlParts.length) {\n            return \"/\" + urlParts.join(\"/\") + \"/\";\n        } else {\n            return \"/\";\n        }\n    }\n\n    static changeURL(url, replaceHistory=false) {\n        if (Array.isArray(url)) {\n            url = this.joinURLParts(url);\n        }\n\n        if (url === window.location.pathname) {\n            return;\n        }\n        const historyArgs = [{}, PageTitleManager.getTitle(), url];\n        if (replaceHistory) {\n            window.history.replaceState(...historyArgs);\n        } else {\n            window.history.pushState(...historyArgs);\n        }\n\n        this.updateURL();\n    }\n\n    static updateURL() {\n        this.Global.setURL(this.parseURL());\n    }\n\n    static setGlobalRouter(router) {\n        this.Global = router;\n        window.onpopstate = () => {\n            this.updateURL();\n            Dispatcher.Global.dispatch(\"externalURLChange\");\n        };\n\n        this.updateURL();\n    }\n\n    clearCache() {\n        this.getRoutes().clearCache();\n    }\n\n    // TODO: should be named getRootRoute() :)\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getPageNotFound() {\n        const element = UI.createElement(\"h1\", {children: [\"Can't find url, make sure you typed it correctly\"]});\n        element.pageTitle = \"Page not found\";\n        return element;\n    }\n\n    getPageToRender(urlParts) {\n        return this.getRoutes().getPage(urlParts) || this.getPageNotFound();\n    }\n\n    setURL(urlParts) {\n        urlParts = unwrapArray(urlParts);\n\n        const page = this.getPageToRender(urlParts);\n\n        const activePage = this.getActive();\n\n        if (activePage !== page) {\n            activePage && activePage.dispatch(\"urlExit\");\n            this.setActive(page);\n            page.dispatch(\"urlEnter\");\n        }\n\n        if (this === this.constructor.Global) {\n            PageTitleManager.setTitle(page.pageTitle);\n        }\n\n        this.dispatch(\"change\", urlParts, page, activePage);\n    }\n\n    addChangeListener(callback) {\n        return this.addListener(\"change\", callback);\n    }\n\n    onMount() {\n        if (!Router.Global) {\n            this.constructor.setGlobalRouter(this);\n        }\n    }\n}\n\nexport class Route {\n    static ARG_KEY = \"%s\";\n    cachedPages = new Map();\n\n    constructor(expr, pageGenerator, subroutes=[], options={}) {\n        this.expr = (expr instanceof Array) ? expr : [expr];\n        this.pageGenerator = pageGenerator;\n        this.subroutes = unwrapArray(subroutes);\n        if (typeof options === \"string\") {\n            options = {title: options}\n        }\n        this.options = options;\n        this.cachedPages = new Map();\n    }\n\n    clearCache() {\n        this.cachedPages.clear();\n        for (const subroute of this.subroutes) {\n            subroute.clearCache();\n        }\n    }\n\n    matches(urlParts) {\n        if (urlParts.length < this.expr.length) {\n            return null;\n        }\n        let args = [];\n        for (let i = 0; i < this.expr.length; i += 1) {\n            const isArg = this.expr[i] === this.constructor.ARG_KEY;\n            if (urlParts[i] != this.expr[i] && !isArg) {\n                return null;\n            }\n            if (isArg) {\n                args.push(urlParts[i]);\n            }\n        }\n        return {\n            args: args,\n            urlParts: urlParts.slice(this.expr.length)\n        }\n    }\n\n    getPageTitle() {\n        return this.options.title;\n    }\n\n    generatePage(...argsArray) {\n        if (!this.pageGenerator) {\n            return null;\n        }\n\n        const serializedArgs = argsArray.toString();\n        if (!this.cachedPages.has(serializedArgs)) {\n            const pageGenerator = this.pageGenerator;\n            const args = unwrapArray(argsArray);\n            const generatorArgs = {args, argsArray};\n            const page = (pageGenerator.prototype instanceof UI.Element) ? new pageGenerator(generatorArgs) : pageGenerator(generatorArgs);\n            if (!page.pageTitle) {\n                const myPageTitle = this.getPageTitle();\n                if (myPageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n            }\n            this.cachedPages.set(serializedArgs, page);\n        }\n        return this.cachedPages.get(serializedArgs);\n    }\n\n    matchesOwnNode(urlParts) {\n        return urlParts.length === 0;\n    }\n\n    getPage(urlParts, router, ...argsArray) {\n        if (this.matchesOwnNode(urlParts)) {\n            return this.generatePage(...argsArray);\n        }\n        for (const subroute of this.subroutes) {\n            const match = subroute.matches(urlParts);\n            if (match) {\n                if (match.args.length) {\n                    argsArray.push(match.args);\n                }\n                let page = subroute.getPage(match.urlParts, router, ...argsArray);\n                if (page && !page.pageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n                return page;\n            }\n        }\n    }\n}\n\nexport class TerminalRoute extends Route {\n    constructor(expr, pageGenerator, options={}) {\n        super(expr, pageGenerator, [], options);\n    }\n\n    matchesOwnNode(urlParts) {\n        return true;\n    }\n\n    getPage(urlParts, router) {\n        const page = super.getPage(...arguments);\n        setTimeout(() => {\n            page.setURL(urlParts);\n        });\n        return page;\n    }\n}\n","import {UI} from \"./UIBase\";\n\n// This is the object that will be used to translate text\nlet translationMap = null;\n\n// Keep a set of all UI Element that need to be updated when the language changes\n// Can't use a weak set here unfortunately because we need iteration\n// That's why we must make sure to remove all nodes from the set when destroying them\nUI.TranslationElements = new Set();\n\nUI.TranslationTextElement = class TranslationTextElement extends UI.TextElement {\n    constructor(value) {\n        if (arguments.length === 1) {\n            super(value);\n        } else {\n            super(\"\");\n            this.setValue(...arguments);\n        }\n    }\n\n    setValue(value) {\n        if (arguments.length > 1) {\n            this.value = Array.from(arguments);\n        } else {\n            this.value = value;\n        }\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    evaluateSprintf(str, ...values) {\n        throw Error(\"Not yet implemented\");\n    }\n\n    evaluate(strings, ...values) {\n        if (!Array.isArray(strings)) {\n            return this.evaluateSprintf(...arguments);\n            // This means strings is a string with the sprintf pattern\n        } else {\n            // Using template literals https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals\n            if (arguments.length != strings.length) {\n                console.error(\"Invalid arguments to evaluate \", Array.from(arguments));\n            }\n            let result = strings[0];\n            for (let i = 1; i < arguments.length; i++) {\n                result += arguments[i];\n                result += strings[i];\n            }\n            return result;\n        }\n    }\n\n    getValue() {\n        let value = this.value;\n        if (Array.isArray(this.value)) {\n            value = (translationMap && translationMap.get(...value)) || this.evaluate(...value);\n        } else {\n            // TODO: if translationMap.get() returns \"\", keep, skip only if returning null\n            value = (translationMap && translationMap.get(value)) || value;\n        }\n        return value;\n    }\n\n    onMount() {\n        UI.TranslationElements.add(this);\n    }\n\n    onUnmount() {\n        UI.TranslationElements.delete(this);\n    }\n};\n\n// This method is a shorthand notation to create a new translatable text element\n// TODO: should also support being used as a string template\nUI.T = (str) => {\n    return new UI.TranslationTextElement(str);\n};\n\n// TODO @mciucu this should be wrapped in a way that previous requests that arrive later don't get processed\n// TODO: should this be done with promises?\n// Function to be called with a translation map\n// The translationMap object needs to implement .get(value) to return the translation for value\nfunction setTranslationMap(_translationMap) {\n    if (translationMap === _translationMap) {\n        return;\n    }\n    translationMap = _translationMap;\n    for (let textElement of UI.TranslationElements.values()) {\n        textElement.redraw();\n    }\n}\n\nlet languageStore = null;\n\n// This function should be called to set the language store to watch for changes\n// The languageStore argumenent needs to implement .getLocale(), addListener(\"localChange\", (language) =>{})\n// The language objects need to implement .buildTranslation(callback), where callback should be called with a translationMap\nfunction setLanguageStore(_languageStore) {\n    languageStore = _languageStore;\n\n    let currentLocale = languageStore.getLocale();\n    // If there's a default language already set, build the translation table for it\n    if (currentLocale) {\n        currentLocale.buildTranslation(setTranslationMap);\n    }\n\n    // Add a listener for whenever the language changes\n    languageStore.addListener(\"localeChange\", (language) => {\n        language.buildTranslation(setTranslationMap);\n    });\n}\n\nfunction getTranslationMap() {\n    return translationMap;\n}\n\nexport {setLanguageStore, setTranslationMap, getTranslationMap};\n","import {StyleSheet, styleRule} from \"../Style\";\nimport {enhance} from \"../Color\";\nimport {Device} from \"../../base/Device\";\n\n\n\nexport class HorizontalOverflowStyle extends StyleSheet {\n    baseColor = () =>  this.themeProperties.COLOR_PRIMARY;\n    arrowColor = () => enhance(this.baseColor(), .8);\n    arrowBackground = () => this.baseColor();\n    arrowHoverColor = () => enhance(this.baseColor(), 1);\n    arrowHoverBackground = () => enhance(this.baseColor(), -.3);\n\n    transitionTime = .15;\n\n    arrow = {\n        zIndex: \"1\",\n        alignItems: \"center\",\n        padding: \".3em\",\n        fontSize: \"150% !important\",\n        height: \"100%\",\n        position: \"absolute\",\n        cursor: \"pointer\",\n        top: 0,\n        color: () => this.arrowColor(),\n        backgroundColor: () => this.arrowBackground(),\n        \":hover\": {\n            color: () => this.arrowHoverColor(),\n            backgroundColor: () => this.arrowHoverBackground(),\n        }\n    };\n\n    @styleRule\n    leftArrow = Object.assign({}, this.arrow, {\n        left: 0,\n        borderRight: () => \"2px solid \" + this.arrowHoverBackground(),\n    });\n\n    @styleRule\n    rightArrow = Object.assign({}, this.arrow, {\n        right: 0,\n        borderLeft: () => \"2px solid \" + this.arrowHoverBackground(),\n    });\n\n    @styleRule\n    horizontalOverflow = {\n        position: \"relative\",\n        width: \"100%\",\n        \">:first-child\": {\n            display: \"flex\",\n        },\n        \">:last-child\": {\n            display: \"flex\",\n        },\n    };\n\n    @styleRule\n    childrenContainer = {\n        width: \"100%\",\n        overflow: Device.isMobileDevice() ? \"auto\" : \"hidden\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    swipeAnimation = {\n        transition: \"margin-left \" + this.transitionTime + \"s ease\",\n    };\n\n    @styleRule\n    hiddenArrow = {\n        display: \"none !important\",\n    };\n\n    @styleRule\n    pusherContainer = {\n        overflow: Device.isMobileDevice() ? \"auto\" : \"hidden\",\n        position: \"relative\",\n        display: \"flex\",\n        width: \"100%\",\n    }\n}\n","import {enhance} from \"../Color\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\nimport {HorizontalOverflowStyle} from \"../horizontal-overflow/Style\";\n\nclass BaseTabAreaStyle extends StyleSheet {\n    @styleRule\n    tab = {\n        userSelect: \"none\",\n        display: \"inline-block\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    activeTab = {};\n\n    @styleRule\n    nav = {\n        listStyle: \"none\",\n    };\n\n    @styleRule\n    switcher = {\n        flex: \"1\",\n        overflow: \"auto\",\n    };\n\n    @styleRule\n    tabArea = {\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nclass DefaultTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        marginBottom: \"-1px\",\n        textDecoration: \"none !important\",\n        marginRight: \"2px\",\n        lineHeight: \"1.42857143\",\n        border: \"1px solid transparent\",\n        borderRadius: \"4px 4px 0 0\",\n        padding: \"8px\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        \":hover\": {\n            cursor: \"pointer\",\n            backgroundColor: \"#eee\",\n            color: \"#555\",\n            border: \"1px solid #ddd\",\n            borderBottomColor: \"transparent\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: \"#555 !important\",\n        cursor: \"default !important\",\n        backgroundColor: \"#fff !important\",\n        border: \"1px solid #ddd !important\",\n        borderBottomColor: \"transparent !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        borderBottom: \"1px solid #ddd\",\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n    };\n}\n\nclass MinimalistTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        lineHeight: \"1.42857143\",\n        paddingTop: \"6px\",\n        paddingLeft: \"8px\",\n        paddingRight: \"8px\",\n        paddingBottom: \"4px\",\n        color: \"#666\",\n        borderBottom: \"2px solid transparent\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: \"rgba(51,122,183,1)\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        fontWeight: \"bold\",\n        color: \"rgba(51,122,183,1)\",\n        cursor: \"default !important\",\n        borderBottom: \"2px solid rgba(51,122,183,1) !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        position: \"relative\",\n        borderBottom: \"1px solid #aaa\",\n    };\n}\n\nclass FlatTabAreaStyle extends BaseTabAreaStyle {\n    transitionTime = .3;\n\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        padding: () => this.themeProperties.FLAT_TAB_AREA_PADDING_SIDES,\n        letterSpacing: \"0.5px\",\n        color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.4) + \"!important\",\n        fontWeight: \"bold\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.6) + \"!important\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.8) + \"!important\",\n        cursor: \"default !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        whiteSpace: \"nowrap\",\n        position: \"relative\",\n        paddingTop: \"4px\",\n        backgroundColor: () => this.themeProperties.COLOR_FOREGROUND_BODY,\n    };\n\n    @styleRule\n    activeBar = {\n        height: 3,\n        backgroundColor: () => this.themeProperties.COLOR_PRIMARY,\n        position: \"absolute\",\n        left: 0,\n        bottom: 0,\n    };\n\n    @styleRule\n    activeBarAnimated = {\n        transition: `${this.transitionTime}s width, ${this.transitionTime}s left`,\n    };\n\n    @styleRule\n    activeOnRender = {\n        paddingBottom: () => this.themeProperties.FLAT_TAB_AREA_PADDING_SIDES - 3,\n        borderBottom: () => \"3px solid \" + this.themeProperties.COLOR_PRIMARY,\n    };\n}\n\nclass FlatTabAreaHorizontalOverflowStyle extends HorizontalOverflowStyle {\n    baseColor = () => this.themeProperties.COLOR_FOREGROUND_BODY;\n    arrowColor = () => enhance(this.baseColor(), .4);\n    arrowBackground = () => this.baseColor();\n    arrowHoverColor = () => enhance(this.baseColor(), .8);\n    arrowHoverBackground = () => enhance(this.baseColor(), .1);\n}\n\nexport {BaseTabAreaStyle, DefaultTabAreaStyle, MinimalistTabAreaStyle, FlatTabAreaStyle,\n    FlatTabAreaHorizontalOverflowStyle};\n","import {UI} from \"../UIBase\";\nimport {Switcher} from \"../Switcher\";\nimport {Link} from \"../UIPrimitives\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {DefaultTabAreaStyle} from \"./Style\";\nimport {unwrapArray} from \"../../base/Utils\";\n\n\nclass BasicTabTitle extends Link {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tab);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.activeTab);\n        }\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    canOverwrite(existingElement) {\n        // Disable reusing with different panels, since we want to attach listeners to the panel\n        return super.canOverwrite(existingElement) && this.options.panel === existingElement.options.panel;\n    }\n\n    setActive(active) {\n        this.options.active = active;\n        this.redraw();\n        if (active) {\n            this.options.activeTabDispatcher.setActive(this.getPanel(), () => {\n                this.setActive(false);\n            });\n        }\n    }\n\n    getPanel() {\n        return this.options.panel;\n    }\n\n    getTitle() {\n        if (this.options.title) {\n            return this.options.title;\n        }\n        let panel = this.getPanel();\n        if (typeof panel.getTitle === \"function\") {\n            return panel.getTitle();\n        }\n        return panel.options.title;\n    }\n\n    render() {\n        return [this.getTitle()];\n    }\n\n    onMount() {\n        super.onMount();\n\n        if (this.options.active) {\n            this.setActive(true);\n        }\n\n        this.addClickListener(() => {\n            this.setActive(true);\n        });\n\n        if (this.options.panel && this.options.panel.addListener) {\n            this.attachListener(this.options.panel, \"show\", () => {\n                this.setActive(true);\n            });\n        }\n    }\n}\n\n\nclass TabTitleArea extends UI.Element {\n}\n\n\n@registerStyle(DefaultTabAreaStyle)\nclass TabArea extends UI.Element {\n    activeTabDispatcher = new SingleActiveElementDispatcher();\n\n    getDefaultOptions() {\n        return {\n            autoActive: true, // means the first Tab will be automatically selected\n            // lazyRender: true, // TODO: should be true by default\n            panelClass: null, // Custom css class can be added to panels\n            titleAreaClass: null, // Custom css class can be added to title area\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tabArea);\n    }\n\n    createTabPanel(panel) {\n        let tab = <BasicTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                 active={panel.options.active} href={panel.options.tabHref}\n                                 styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n\n    appendChild(panel, doMount) {\n        let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n        this.options.children.push(panel);\n\n        this.titleArea.appendChild(tabTitle);\n        this.switcherArea.appendChild(tabPanel, doMount || !this.options.lazyRender);\n    };\n\n    getTitleArea(tabTitles) {\n        let titleAreaClass = this.styleSheet.nav;\n        if (this.options.titleAreaClass) {\n            titleAreaClass += \" \" + this.options.titleAreaClass;\n        }\n        return <TabTitleArea ref=\"titleArea\" className={titleAreaClass}>\n            {tabTitles}\n        </TabTitleArea>;\n    }\n\n    getSwitcher(tabPanels) {\n        let switcherClass = this.styleSheet.switcher;\n        if (this.options.panelClass) {\n            switcherClass += \" \" + this.options.panelClass;\n        }\n        return <Switcher className={switcherClass} ref=\"switcherArea\" lazyRender={this.options.lazyRender}>\n            {tabPanels}\n        </Switcher>;\n    }\n\n    getChildrenToRender() {\n        let tabTitles = [];\n        let tabPanels = [];\n        let activeTab;\n\n        for (const panel of unwrapArray(this.render())) {\n            let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n            if (this.activePanel === tabPanel) {\n                activeTab = tabTitle;\n            }\n\n            tabTitles.push(tabTitle);\n            tabPanels.push(tabPanel);\n        }\n\n        if (!activeTab) {\n            for (const tabTitle of tabTitles) {\n                if (tabTitle.options.active) {\n                    activeTab = tabTitle;\n                }\n            }\n        } else {\n            for (let i = 0; i < tabPanels.length; i += 1) {\n                const tabTitle = tabTitles[i];\n                const tabPanel = tabPanels[i];\n\n                if (tabTitle.options.active) {\n                    tabTitle.options.active = false;\n                }\n                if (tabPanels.options.active) {\n                    tabPanels.options.active = false;\n                }\n\n                if (activeTab === tabTitle) {\n                    tabPanel.options.active = true;\n                    tabTitle.options.active = true;\n                }\n            }\n        }\n\n        if (this.options.autoActive && !activeTab && tabTitles.length > 0) {\n            tabTitles[0].options.active = true;\n        }\n\n        return [\n            this.getTitleArea(tabTitles),\n            this.getSwitcher(tabPanels),\n        ];\n    };\n\n    setActive(panel) {\n        this.activeTabDispatcher.setActive(panel);\n    }\n\n    getActive() {\n        return this.activeTabDispatcher.getActive();\n    }\n\n    onSetActive(panel) {\n        this.switcherArea.setActive(panel);\n        this.activePanel = panel;\n    }\n\n    onMount() {\n        this.attachListener(this.activeTabDispatcher, (panel) => {\n            this.onSetActive(panel);\n        });\n\n        this.addListener(\"resize\", () => {\n            this.switcherArea.dispatch(\"resize\");\n        });\n    }\n}\n\nexport * from \"./Style\";\nexport {TabTitleArea, BasicTabTitle, TabArea};\n","// Contains classes to abstract some generic Font Awesome usecases.\nimport {UI} from \"./UIBase\";\nimport {Direction} from \"./Constants\";\n\nclass FAIcon extends UI.Primitive(\"i\") {\n    getIcon() {\n        return this.options.icon;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(\"fa\");\n        attr.addClass(\"fa-\" + this.getIcon());\n        if (this.options.size) {\n            attr.addClass(\"fa-\" + this.options.size);\n        }\n    }\n\n    setIcon(icon) {\n        this.options.icon = icon;\n        this.redraw();\n    }\n}\n\nclass FACollapseIcon extends FAIcon {\n    getIcon() {\n        if (this.options.collapsed) {\n            return \"angle-right\";\n        } else {\n            return \"angle-down\";\n        }\n    }\n\n    setCollapsed(collapsed) {\n        this.options.collapsed = collapsed;\n        this.redraw();\n    }\n\n    toggleCollapsed() {\n        this.setCollapsed(!this.options.collapsed);\n    }\n}\n\nclass FASortIcon extends FAIcon {\n    getIcon() {\n        if (this.options.direction === Direction.UP) {\n            return \"sort-asc\";\n        } else if (this.options.direction === Direction.DOWN){\n            return \"sort-desc\";\n        } else {\n            return \"sort\";\n        }\n    }\n\n    setDirection(direction) {\n        this.options.direction = direction;\n        this.redraw();\n    }\n}\n\nexport {FAIcon, FACollapseIcon, FASortIcon};\n","import {UI} from \"../UIBase\";\nimport {FAIcon} from \"../FontAwesome\";\nimport {registerStyle} from \"../style/Theme\";\nimport {HorizontalOverflowStyle} from \"./Style\";\n\n\n\n@registerStyle(HorizontalOverflowStyle)\nexport class HorizontalOverflow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            swipePercent: .5,\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.horizontalOverflow);\n    }\n\n    getChildrenToRender() {\n        return [\n            <FAIcon ref=\"leftArrow\" icon=\"chevron-left\" className={`${this.styleSheet.leftArrow} ${this.styleSheet.hiddenArrow}`}/>,\n            <div ref=\"childrenContainer\" className={this.styleSheet.childrenContainer}>\n                <div ref=\"swipeHelperChild\"/>\n                <div ref=\"pusherContainer\" className={this.styleSheet.pusherContainer}>\n                    {this.render()}\n                </div>\n            </div>,\n            <FAIcon ref=\"rightArrow\" icon=\"chevron-right\" className={`${this.styleSheet.rightArrow} ${this.styleSheet.hiddenArrow}`}/>\n        ];\n    }\n\n    appendChild(...args) {\n        this.pusherContainer.appendChild(...args);\n    }\n\n    eraseChild(...args) {\n        this.pusherContainer.eraseChild(...args);\n    }\n\n    checkForOverflow() {\n        const children = this.pusherContainer.children;\n\n        if (!children.length) {\n            return;\n        }\n\n        let shouldOverflowRight = false;\n        let shouldOverflowLeft = false;\n\n        const elementRect = this.node.getBoundingClientRect();\n\n        for (let child of children) {\n            const childRect = child.node.getBoundingClientRect();\n            shouldOverflowRight |= elementRect.left + elementRect.width < childRect.left + childRect.width - 1;\n            shouldOverflowLeft |= elementRect.left > childRect.left;\n        }\n\n        const leftArrowHidden = !this.leftArrow.getWidth();\n        if (shouldOverflowLeft && leftArrowHidden) {\n            this.leftArrow.removeClass(this.styleSheet.hiddenArrow);\n        } else if (!shouldOverflowLeft && !leftArrowHidden) {\n            this.leftArrow.addClass(this.styleSheet.hiddenArrow);\n        }\n\n        const rightArrowHidden = !this.rightArrow.getWidth();\n        if (shouldOverflowRight && rightArrowHidden) {\n            this.rightArrow.removeClass(this.styleSheet.hiddenArrow);\n        } else if (!shouldOverflowRight && !rightArrowHidden) {\n            this.rightArrow.addClass(this.styleSheet.hiddenArrow);\n        }\n    }\n\n    scrollContent(amount) {\n        let scrollLeft;\n        const containerNode = this.pusherContainer.node;\n        if (amount < 0) {\n            scrollLeft = Math.max(0, containerNode.scrollLeft + amount * this.getWidth());\n        } else {\n            scrollLeft = Math.min(containerNode.scrollWidth - this.getWidth(), containerNode.scrollLeft + amount * this.getWidth());\n        }\n\n        if (amount < 0) {\n            this.swipeHelperChild.setStyle(\"marginLeft\", scrollLeft - containerNode.scrollLeft);\n            containerNode.scrollLeft = scrollLeft;\n        }\n\n        this.pusherContainer.setWidth(\"fit-content\");\n        this.swipeHelperChild.addClass(this.styleSheet.swipeAnimation);\n\n        if (amount < 0) {\n            this.swipeHelperChild.setStyle(\"marginLeft\", 0);\n        } else {\n            this.swipeHelperChild.setStyle(\"marginLeft\", containerNode.scrollLeft - scrollLeft);\n        }\n\n        setTimeout(() => {\n            this.pusherContainer.setWidth(\"100%\");\n            this.swipeHelperChild.removeClass(this.styleSheet.swipeAnimation);\n            containerNode.scrollLeft = scrollLeft;\n            this.swipeHelperChild.setStyle(\"marginLeft\", 0);\n            this.checkForOverflow();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    scrollContentLeft() {\n        this.scrollContent(-this.options.swipePercent);\n    }\n\n    scrollContentRight() {\n        this.scrollContent(this.options.swipePercent);\n    }\n\n    // This method should be overwritten, and it is called whenever the position of the elements is changed.\n    handleEventAndHandlePositionChange(callback) {\n        callback();\n    }\n\n    onMount() {\n        this.pusherContainer.addNodeListener(\"scroll\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        this.addListener(\"resize\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        this.rightArrow.addClickListener(() => this.handleEventAndHandlePositionChange(() => this.scrollContentRight()));\n        this.leftArrow.addClickListener(() => this.handleEventAndHandlePositionChange(() => this.scrollContentLeft()));\n\n        // TODO: Create a resizeable-aware UI Element to be extended by this class and manage these listeners.\n        window.addEventListener(\"resize\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        setTimeout(() => this.checkForOverflow());\n    }\n}","import {UI} from \"../UIBase\";\nimport {FlatTabAreaStyle, FlatTabAreaHorizontalOverflowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {TabTitleArea, BasicTabTitle, TabArea} from \"./TabArea\";\nimport {HorizontalOverflow} from \"../horizontal-overflow/HorizontalOverflow\";\nimport {unwrapArray} from \"../../base/Utils\";\n\n\n\nexport class FlatTabTitle extends BasicTabTitle {\n    setActive(active) {\n        super.setActive(active);\n        if (active) {\n            this.options.activeTabTitleDispatcher.setActive(this, () => {\n                this.setActive(false);\n            });\n        }\n    }\n}\n\n\n// This class displays a bottom bar on the active tab, and when changing tabs it also moves the bottom bar.\n@registerStyle(FlatTabAreaStyle)\nexport class FlatTabTitleArea extends TabTitleArea {\n    constructor(...args) {\n        super(...args);\n        // Active bar left and width must be cached so the redraw is done seamlessly.\n        this.barLeft = 0;\n        this.barWidth = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.nav);\n    }\n\n    getChildrenToRender() {\n        for (const child of this.render()) {\n            if (child.options.active) {\n                child.addClass(this.styleSheet.activeOnRender);\n            }\n        }\n        return [\n            <HorizontalOverflow ref=\"horizontalOverflow\" styleSheet={FlatTabAreaHorizontalOverflowStyle}>\n                {this.render()}\n                <div ref=\"bar\" className={this.styleSheet.activeBar}\n                     style={{left: this.barLeft, width: this.barWidth}}/>\n            </HorizontalOverflow>,\n        ]\n    }\n\n    setActiveBar(activeTab) {\n        let barLeft = 0;\n        let barWidth = 0;\n        for (const tab of unwrapArray(this.render())) {\n            const tabWidth = tab.getWidth();\n            if (tab === activeTab) {\n                barWidth = tabWidth;\n                break;\n            }\n            barLeft += tabWidth;\n        }\n        this.bar.setStyle({\n            left: barLeft,\n            width: barWidth,\n        });\n        this.barLeft = barLeft;\n        this.barWidth = barWidth;\n    }\n\n    setActive(activeTab) {\n        if (this.activeTab) {\n            // Remove the border from the active tab and \"prepare\" the bar on the current active tab.\n            this.setActiveBar(this.activeTab);\n            this.activeTab.removeClass(this.styleSheet.activeOnRender);\n        }\n\n        // Animate the bar.\n        setTimeout(() => {\n            this.bar.addClass(this.styleSheet.activeBarAnimated);\n            this.setActiveBar(activeTab);\n        });\n\n        setTimeout(() => {\n            // Sometimes, another tab has been clicked between the start and end of an animation, so remove the\n            // active class on that tab, just in case.\n            if (this.activeTab) {\n                this.activeTab.removeClass(this.styleSheet.activeOnRender);\n            }\n            // Add the active class on the current tab.\n            activeTab.addClass(this.styleSheet.activeOnRender);\n            // Restore the bar to its \"unused\" state.\n            this.bar.removeClass(this.styleSheet.activeBarAnimated);\n            this.bar.setWidth(0);\n            // Update the active tab.\n            this.activeTab = activeTab;\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    onMount() {\n        super.onMount();\n        for (const child of this.options.children) {\n            if (child.options.active) {\n                this.setActive(child);\n            }\n        }\n        this.attachListener(this.options.activeTabTitleDispatcher, (tab) => this.setActive(tab));\n        this.addListener(\"resize\", () => this.horizontalOverflow.dispatch(\"resize\"));\n    }\n}\n\n\n@registerStyle(FlatTabAreaStyle)\nexport class FlatTabArea extends TabArea {\n    activeTabTitleDispatcher = new SingleActiveElementDispatcher();\n\n    getTitleArea(tabTitles) {\n        return <FlatTabTitleArea ref=\"titleArea\" activeTabTitleDispatcher={this.activeTabTitleDispatcher}\n                                 className={this.options.titleAreaClass || \"\"}>\n            {tabTitles}\n        </FlatTabTitleArea>;\n    }\n\n    createTabPanel(panel) {\n        let tab = <FlatTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                activeTabTitleDispatcher={this.activeTabTitleDispatcher}\n                                active={panel.options.active} href={panel.options.tabHref}\n                                styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n}\n","import {mapIterator} from \"../base/Utils\";\n\n// A map that supports multiple values to the same key\nclass MultiMap {\n    constructor() {\n        this.map = new Map();\n    }\n\n    static iterator(items) {\n        return items[Symbol.iterator];\n    }\n\n    // Methods that are called before every access inside\n    // the internal map\n    normalizeKey(key) {\n        return key;\n    }\n    \n    normalizeValue(value) {\n        return value;\n    }\n\n    append(key, value) {\n        let nKey = this.normalizeKey(key);\n        let nValue = this.normalizeValue(value);\n        if (this.map.has(nKey)) {\n            this.map.get(nKey).push(nValue);\n        } else {\n            this.map.set(nKey, [nValue]);\n        }\n    }\n\n    has(key) {\n        return this.map.has(this.normalizeKey(key));\n    }\n\n    delete(key) {\n        this.map.delete(this.normalizeKey(key));\n    }\n\n    set(key, value) {\n        this.map.set(this.normalizeKey(key), [this.normalizeValue(value)]);\n    }\n\n    get(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey)[0];\n        }\n        return null;\n    }\n\n    getAll(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey).slice();\n        }\n        return null;\n    }\n\n    forEach(callback, context) {\n        for (let [key, value] of this.entries()) {\n            callback.call(context, value, key, this);\n        }\n    }\n\n    keys() {\n        return mapIterator(this.entries(), entry => entry[0]);\n    }\n\n    values() {\n        return mapIterator(this.entries(), entry => entry[1]);\n    }\n\n    *entries() {\n        for (let [key, values] of this.map.entries()) {\n            for (let value of values) {\n                yield [key, value];\n            }\n        }\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n}\n\nexport {MultiMap};\n","import {MultiMap} from \"../data-structures/MultiMap\";\n\n// This class currently mirrors the functionality of Headers on Chrome at the time of implementation\n// TODO: It is specified that the function get() should return the result of getAll() and getAll() deprecated\nclass Headers extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj) {\n        super();\n        if (obj instanceof Headers) {\n            for (let [key, value] of obj) {\n                this.append(key, value);\n            }\n        } else if (obj) {\n            for (let key of Object.keys(obj)) {\n                this.append(key, obj[key]);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        if (typeof key !== 'string') {\n            key = String(key);\n        }\n        if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(key)) {\n            throw new TypeError('Invalid character in header field name');\n        }\n        return key.toLowerCase();\n    }\n\n    normalizeValue(value) {\n        if (typeof value !== \"string\") {\n            value = String(value);\n        }\n        return value;\n    }\n}\n\nfunction polyfillHeaders(global) {\n    global.Headers = global.Headers || Headers;\n}\n\nexport {Headers, polyfillHeaders};","import {MultiMap} from \"../data-structures/MultiMap\";\n\nclass URLSearchParams extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj=\"\") {\n        super(obj);\n        let str = String(obj);\n        if (str.indexOf(\"?\") === 0) {\n            str = str.slice(1);\n        }\n        for (let parameter of str.split(\"&\")) {\n            let index = parameter.indexOf(\"=\");\n            if (index !== -1) {\n                let key = this.constructor.decode(parameter.slice(0, index));\n                let value = this.constructor.decode(parameter.slice(index + 1));\n                this.append(key, value);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        return key.toString();\n    }\n\n    normalizeValue(value) {\n        return value.toString();\n    }\n\n    static encode(str) {\n        let replace = {\n            '!': '%21',\n            \"'\": '%27',\n            '(': '%28',\n            ')': '%29',\n            '~': '%7E',\n            '%20': '+',\n            '%00': '\\x00'\n        };\n        return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, (match) => {\n            return replace[match];\n        });\n    }\n\n    static decode(str) {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    }\n\n    toString() {\n        let query = [];\n        for (let [key, values] of this.map.entries()) {\n            let name = this.constructor.encode(key);\n            for (let value of values) {\n                query.push(name + \"=\" + this.constructor.encode(value));\n            }\n        }\n        return query.join(\"&\");\n    }\n}\n\nfunction polyfillURLSearchParams(global) {\n    global.URLSearchParams = global.URLSearchParams || URLSearchParams;\n}\n\nexport {URLSearchParams, polyfillURLSearchParams};","import {polyfillHeaders} from \"./Headers\";\nimport {polyfillURLSearchParams} from \"./URLSearchParams\";\n\nfunction fileReaderReady(reader) {\n    return new Promise((resolve, reject) => {\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject(reader.error);\n        };\n    });\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise;\n}\n\nfunction readBlobAsText(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise;\n}\n\nclass Body {\n    constructor() {\n        this.bodyUsed = false;\n    }\n\n    setBodyUsed() {\n        if (this.bodyUsed) {\n            return Promise.reject(new TypeError(\"Already read\"));\n        }\n        this.bodyUsed = true;\n    }\n\n    static decode(body) {\n        let form = new FormData();\n        for (let bytes of body.trim().split('&')) {\n            if (bytes) {\n                let split = bytes.split('=');\n                let name = split.shift().replace(/\\+/g, ' ');\n                let value = split.join('=').replace(/\\+/g, ' ');\n                form.append(decodeURIComponent(name), decodeURIComponent(value));\n            }\n        }\n        return form;\n    }\n\n    static cloneBuffer(buffer) {\n        if (buffer.slice) {\n            return buffer.slice();\n        } else {\n            let view = new Uint8Array(buffer.byteLength);\n            view.set(new Uint8Array(buffer));\n            return view.buffer;\n        }\n    }\n\n    initialize(bodyInit) {\n        this._bodyInit = bodyInit;\n        if (!bodyInit) {\n            this._bodyText = \"\";\n        } else if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n            this._bodyText = bodyInit;\n        } else if (Blob.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyBlob = bodyInit;\n        } else if (FormData.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyFormData = bodyInit;\n        } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyText = bodyInit.toString();\n        } else if (DataView.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit.buffer);\n            this._bodyInit = new Blob([this._bodyArrayBuffer]);\n        } else if (ArrayBuffer.prototype.isPrototypeOf(bodyInit) || ArrayBuffer.isView(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit);\n        } else {\n            throw new Error(\"unsupported BodyInit type\");\n        }\n\n        if (!this.headers.get(\"content-type\")) {\n            if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n                this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n            } else if (this._bodyBlob && this._bodyBlob.type) {\n                this.headers.set(\"content-type\", this._bodyBlob.type);\n            } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n                this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\");\n            }\n        }\n    }\n\n    blob() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return Promise.resolve(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n        }\n        if (this._bodyFormData) {\n            // I know this is technically wrong, but only we can create this scenario\n            return Promise.resolve(this._bodyFormData);\n        }\n        return Promise.resolve(new Blob([this._bodyText]));\n    }\n\n    arrayBuffer() {\n        if (this._bodyArrayBuffer) {\n            return this.setBodyUsed() || Promise.resolve(this._bodyArrayBuffer);\n        } else {\n            return this.blob().then(readBlobAsArrayBuffer);\n        }\n    }\n\n    readArrayBufferAsText() {\n        let view = new Uint8Array(this._bodyArrayBuffer);\n        let chars = new Array(view.length);\n\n        for (let i = 0; i < view.length; i++) {\n            chars[i] = String.fromCharCode(view[i]);\n        }\n        return chars.join(\"\");\n    }\n\n    text() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return readBlobAsText(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(this.readArrayBufferAsText());\n        }\n        if (this._bodyFormData) {\n            throw new Error(\"could not read FormData body as text\");\n        }\n        return Promise.resolve(this._bodyText);\n    }\n\n    formData() {\n        return this.text().then(this.constructor.decode);\n    }\n\n    json() {\n        return this.text().then(JSON.parse);\n    }\n}\n\nfunction polyfillBody(global) {\n    // TODO: Might want to polyfill other stuff\n    polyfillURLSearchParams(global);\n    polyfillHeaders(global);\n    global.Body = global.Body || Body;\n}\n\nexport {Body, polyfillBody};","import {Body} from \"./Body\";\n\nclass Request extends Body {\n    constructor(input, options={}) {\n        super();\n        let body = options.body;\n\n        if ((typeof input === \"string\") || (input instanceof String)) {\n            input = {\n                url: input\n            };\n        }\n\n        if (input.bodyUsed) {\n            throw new TypeError(\"Already read\");\n        }\n        if (!body && input.hasOwnProperty(\"_bodyInit\") && input._bodyInit != null) {\n            body = input._bodyInit;\n            input.bodyUsed = true;\n        }\n\n        this.method = this.constructor.normalizeMethod(options.method || input.method || \"GET\");\n        this.url = input.url;\n\n        let headerArgs = options.headers || input.headers || null;\n        this.headers = headerArgs ? new Headers(headerArgs) : new Headers();\n        this.context = options.context || input.context || \"\";\n        this.referrer = options.referrer || input.referrer || \"about:client\";\n        this.referrerPolicy = options.referrerPolicy || input.referrerPolicy || \"\";\n        this.mode = options.mode || input.mode || null;\n        this.credentials = options.credentials || input.credentials || \"omit\";\n        this.cache = options.cache || input.cache || \"default\";\n\n        if ((this.method === \"GET\" || this.method === \"HEAD\") && body) {\n            throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n        }\n        this.initialize(body);\n    }\n\n    static methods = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n    static normalizeMethod(method) {\n        let upcased = method.toUpperCase();\n        return (this.methods.indexOf(upcased) > -1) ? upcased : method;\n    }\n\n    clone() {\n        return new Request(this, {body: this._bodyInit});\n    }\n}\n\nfunction polyfillRequest(global) {\n    global.Request = global.Request || Request;\n}\n\nexport {Request, polyfillRequest};","import {Body} from \"./Body\";\n\nclass Response extends Body {\n    constructor(bodyInit, options) {\n        super();\n        options = options || {};\n\n        this.type = \"default\";\n        if (options.hasOwnProperty(\"status\")) {\n            this.status = options.status;\n        } else {\n            this.status = 200;\n        }\n        this.ok = (this.status >= 200 && this.status < 300);\n        if (options.hasOwnProperty(\"statusText\")) {\n            this.statusText = options.statusText;\n        } else {\n            this.statusText = \"OK\";\n        }\n        this.headers = new Headers(options.headers);\n        this.url = options.url || \"\";\n        this.initialize(bodyInit);\n    }\n\n    clone() {\n        return new Response(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new Headers(this.headers),\n            url: this.url\n        });\n    }\n\n    static error() {\n        let response = new Response(null, {status: 0, statusText: \"\"});\n        response.type = \"error\";\n        return response;\n    }\n    static redirectStatuses = [301, 302, 303, 307, 308];\n    static redirect(url, status) {\n        if (this.redirectStatuses.indexOf(status) === -1) {\n            throw new RangeError(\"Invalid status code\");\n        }\n        return new Response(null, {status: status, headers: {location: url}});\n    }\n}\n\nfunction polyfillResponse(global) {\n    global.Response = global.Response || Response;\n}\n\nexport {Response, polyfillResponse};","// Tries to be a more flexible implementation of fetch()\n// Still work in progress\n\nimport {isPlainObject} from \"./Utils\";\n\n// May need to polyfill Headers, Request, Response, Body, URLSearchParams classes, so import them\nimport {polyfillRequest} from \"../polyfill/Request\";\nimport {polyfillResponse} from \"../polyfill/Response\";\nimport {polyfillHeaders} from \"../polyfill/Headers\";\nimport {polyfillURLSearchParams} from \"../polyfill/URLSearchParams\";\n\n// TODO: should only call this in the first call to fetch, to not create unneeded dependencies?\nif (window) {\n    polyfillRequest(window);\n    polyfillResponse(window);\n    polyfillHeaders(window);\n    polyfillURLSearchParams(window);\n}\n\n// Parse the headers from an xhr object, to return a native Headers object\nfunction parseHeaders(xhr) {\n    const rawHeader = xhr.getAllResponseHeaders() || \"\";\n    const rawHeaderLines = rawHeader.split(/\\r?\\n/);\n    let headers = new Headers();\n\n    for (let line of rawHeaderLines) {\n        let parts = line.split(\":\");\n        let key = parts.shift().trim();\n        if (key) {\n            let value = parts.join(\":\").trim();\n            headers.append(key, value);\n        }\n    }\n    return headers;\n}\n\n// Creates a new URLSearchParams object from a plain object\n// Fields that are arrays are spread\nfunction getURLSearchParams(data) {\n    if (!isPlainObject(data)) {\n        return data;\n    }\n\n    let urlSearchParams = new URLSearchParams();\n    for (const key of Object.keys(data)) {\n        let value = data[key];\n        if (Array.isArray(value)) {\n            for (let instance of value) {\n                urlSearchParams.append(key + \"[]\", instance);\n            }\n        } else {\n            urlSearchParams.set(key, value);\n        }\n    }\n    return urlSearchParams;\n}\n\n// Appends search parameters from an object to a given URL or Request, and returns the new URL\nfunction composeURL(url, params) {\n    if (url.url) {\n        url = url.url;\n    }\n    // TODO: also extract the preexisting arguments in the url\n    if (params) {\n        url += \"?\" + getURLSearchParams(params);\n    }\n    return url;\n}\n\nexport function toFormData(data) {\n    let formData = new FormData();\n    for (const key of Object.keys(data)) {\n        formData.append(key, data[key]);\n    }\n    return formData;\n}\n\nclass XHRPromise {\n    constructor(request, options = {}) {\n        request = new Request(request, options);\n        let xhr = new XMLHttpRequest();\n        this.options = options;\n        this.request = request;\n        this.xhr = xhr;\n\n        this.promise = new Promise((resolve, reject) => {\n            this.promiseResolve = resolve;\n            this.promiseReject = reject;\n\n            xhr.onload = () => {\n                let headers = this.getResponseHeaders();\n\n                let body = xhr.response || xhr.responseText;\n                let responseInit = {\n                    status: xhr.status,\n                    statusText: xhr.statusText,\n                    headers: headers,\n                    url: xhr.responseURL || headers.get(\"X-Request-URL\"),\n                };\n                let response = new Response(body, responseInit);\n                // In case dataType is \"arrayBuffer\", \"blob\", \"formData\", \"json\", \"text\"\n                // Response has methods to return these as promises\n                if (typeof response[options.dataType] === \"function\") {\n                    // TODO: should whitelist dataType to json, blob\n                    response[options.dataType]().then((data) => {\n                        this.resolve(data);\n                    });\n                } else {\n                    this.resolve(response);\n                }\n            };\n\n            // TODO: also dispatch all arguments here on errors\n            xhr.onerror = () => {\n                this.reject(new TypeError(\"Network error\"));\n            };\n\n            // TODO: need to have an options to pass setting to xhr (like timeout value)\n            xhr.ontimeout = () => {\n                this.reject(new TypeError(\"Network timeout\"));\n            };\n\n            xhr.open(request.method, request.url, true);\n\n            if (request.credentials === \"include\") {\n                xhr.withCredentials = true;\n            }\n\n            // TODO: come back to this\n            xhr.responseType = \"blob\";\n\n            request.headers.forEach((value, name) => {\n                if (options.body instanceof FormData && name.toLowerCase() === \"content-type\") {\n                    return;\n                }\n                xhr.setRequestHeader(name, value);\n            });\n\n            // TODO: there's no need to send anything on a GET or HEAD\n            if (options.body instanceof FormData) {\n                this.send(options.body);\n            } else {\n                request.blob().then((blob) => {\n                    // The blob can be a FormData when we're polyfilling the Request class\n                    let body = ((blob instanceof FormData) || blob.size) ? blob : null;\n                    this.send(body);\n                });\n            }\n        });\n    }\n\n    getResponseHeaders() {\n        return parseHeaders(this.xhr);\n    }\n\n    send(body) {\n        this.getXHR().send(body);\n    }\n\n    getPostprocessors() {\n        return this.options.postprocessors || fetch.defaultPostprocessors;\n    }\n\n    getErrorPostprocessors() {\n        return this.options.errorPostprocessors || fetch.defaultErrorPostprocessors;\n    }\n\n    resolve(payload) {\n        for (const postprocessor of this.getPostprocessors()) {\n            try {\n                payload = postprocessor(payload, this) || payload;\n            } catch (exception) {\n                this.reject(exception);\n                return;\n            }\n        }\n\n        if (this.options.onSuccess) {\n            this.options.onSuccess(...arguments);\n        } else {\n            this.promiseResolve(...arguments);\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    reject(error) {\n        for (const postprocessor of this.getErrorPostprocessors()) {\n            error = postprocessor(error) || error;\n        }\n\n        if (this.options.onError) {\n            this.options.onError(...arguments);\n        } else {\n            if (this._chained) {\n                this.promiseReject(...arguments);\n            } else {\n                if (this.options.errorHandler) {\n                    this.options.errorHandler(...arguments);\n                } else {\n                    console.error(\"Unhandled fetch error\", ...arguments);\n                }\n            }\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    // TODO: next 2 functions should throw an exception if you have onSuccess/onError\n    then(onResolve, onReject) {\n        this._chained = true;\n        onReject = onReject || this.options.errorHandler;\n        return this.getPromise().then(onResolve, onReject);\n    }\n\n    catch() {\n        this._chained = true;\n        return this.getPromise().catch(...arguments);\n    }\n\n    getXHR() {\n        return this.xhr;\n    }\n\n    getPromise() {\n        return this.promise;\n    }\n\n    getRequest() {\n        return this.request;\n    }\n\n    abort() {\n        this.getXHR().abort();\n    }\n\n    addXHRListener(name, callback) {\n        this.getXHR().addEventListener(...arguments);\n    }\n\n    addProgressListener(callback) {\n        this.addXHRListener(\"progress\", ...arguments);\n    }\n}\n\n// TODO: this offers only partial compatibility with $.ajax\nfunction jQueryCompatibilityPreprocessor(options) {\n    if (options.type) {\n        options.method = options.type.toUpperCase();\n    }\n\n    if (options.contentType) {\n        options.headers.set(\"Content-Type\", options.contentType);\n    }\n\n    options.headers.set(\"X-Requested-With\", \"XMLHttpRequest\");\n\n    if (isPlainObject(options.data)) {\n        let method = options.method.toUpperCase();\n        if (method === \"GET\" || method === \"HEAD\") {\n            options.urlParams = options.urlParams || options.data;\n            if (options.cache === false) {\n                options.urlParams = getURLSearchParams(options.urlParams);\n                options.urlParams.set(\"_\", Date.now());\n            }\n        } else {\n            let formData = new FormData();\n            for (const key of Object.keys(options.data)) {\n                const value = options.data[key];\n                if (Array.isArray(value)) {\n                    for (const arrayValue of value) {\n                        formData.append(key + \"[]\", arrayValue);\n                    }\n                } else {\n                    formData.append(key, value);\n                }\n\n            }\n            options.body = formData;\n        }\n    } else {\n        options.body = options.body || options.data;\n    }\n\n    return options;\n}\n\n// Can either be called with\n// - 1 argument: (Request)\n// - 2 arguments: (url/Request, options)\nfunction fetch(input, ...args) {\n    // In case we're being passed in a single plain object (not Request), assume it has a url field\n    if (isPlainObject(input)) {\n        return fetch(input.url, ...arguments);\n    }\n\n    let options = Object.assign({}, ...args);\n\n    // Ensure that there's a .headers field for preprocessors\n    options.headers = new Headers(options.headers || {});\n\n    const preprocessors = options.preprocessors || fetch.defaultPreprocessors || [];\n\n    for (const preprocessor of preprocessors) {\n        options = preprocessor(options) || options;\n    }\n\n    options.onSuccess = options.onSuccess || options.success;\n    options.onError = options.onError || options.error;\n    options.onComplete = options.onComplete || options.complete;\n\n    if (typeof options.cache === \"boolean\") {\n        options.cache = options.cache ? \"force-cache\" : \"reload\";\n        // TODO: cache still isn't fully done\n    }\n\n    options.method = options.method || \"GET\";\n\n    // If there are any url search parameters, update the url from the urlParams or urlSearchParams fields\n    // These fields can be plain objects (jQuery style) or can be URLSearchParams objects\n    const urlParams = options.urlParams || options.urlSearchParams;\n    if (urlParams) {\n        // Change the URL of the request to add a query\n        if (input instanceof Request) {\n            input = new Request(composeURL(input.url, urlParams), input);\n        } else {\n            input = new Request(composeURL(input, urlParams), {});\n        }\n    }\n\n    return new XHRPromise(input, options);\n}\n\nfetch.defaultPreprocessors = [jQueryCompatibilityPreprocessor];\nfetch.defaultPostprocessors = [];\nfetch.defaultErrorPostprocessors = [];\n\nfetch.polyfill = true;\n\nexport {XHRPromise, fetch, composeURL, parseHeaders, getURLSearchParams, jQueryCompatibilityPreprocessor};\n","import {fetch} from \"./Fetch\";\n\nexport class AjaxHandler {\n    constructor(ajaxHandler=Ajax, errorHandler=null) {\n        this.parentHandler = ajaxHandler;\n        this.preprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPreprocessors);\n        this.postprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPostprocessors);\n        this.errorPostprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultErrorPostprocessors);\n        this.errorHandler = errorHandler;\n    }\n\n    fetch(request, ...args) {\n        let baseOptions = {\n            preprocessors: this.getPreprocessors(),\n            postprocessors: this.getPostprocessors(),\n            errorPostprocessors: this.getErrorPostprocessors(),\n            errorHandler: this.getErrorHandler(),\n        };\n\n        // Request may be a plain object or a url, not going to duplicate code from fetch\n        for (const key of Object.keys(baseOptions)) {\n            if (request[key]) {\n                delete baseOptions[key];\n            }\n        }\n\n        return fetch(request, baseOptions, ...args);\n    }\n\n    request() {\n        return this.fetch(...arguments)\n    }\n\n    // Feel free to modify the post and get methods for your needs\n    get(url, options) {\n        return this.fetch(...arguments, {method: \"GET\"});\n    }\n\n    getJSON(url, data, ...args) {\n        return this.get(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    post(url, options) {\n        return this.fetch(...arguments, {method: \"POST\"});\n    }\n\n    postJSON(url, data, ...args) {\n        return this.post(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    addPreprocessor(preprocessor) {\n        this.preprocessors.push(preprocessor);\n    }\n\n    getPreprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPreprocessors()) || [];\n        return [...this.preprocessors, ...inherited];\n    }\n\n    addPostprocessor(postprocessor) {\n        this.postprocessors.push(postprocessor);\n    }\n\n    getPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPostprocessors()) || [];\n        return [...inherited, ...this.postprocessors];\n    }\n\n    addErrorPostprocessor(postprocessor) {\n        this.errorPostprocessors.push(postprocessor);\n    }\n\n    getErrorPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getErrorPostprocessors()) || [];\n        return [...inherited, ...this.errorPostprocessors];\n    }\n\n    getErrorHandler() {\n        return this.errorHandler || (this.parentHandler && this.parentHandler.getErrorHandler());\n    }\n}\n\nexport class FixedURLAjaxHandler extends AjaxHandler {\n    constructor(url, ajaxHandler=Ajax, errorHandler=null) {\n        super(ajaxHandler, errorHandler);\n        this.url = url;\n    }\n\n    get(options) {\n        return super.get(this.url, ...arguments);\n    }\n\n    getJSON(data) {\n        return super.getJSON(this.url, data);\n    }\n\n    post(options) {\n        return super.post(this.url, ...arguments);\n    }\n\n    postJSON(data) {\n        return super.postJSON(this.url, data);\n    }\n}\n\nexport let Ajax = new AjaxHandler();","import {buildColors} from \"../Color\";\nimport {BasicLevelStyleSheet} from \"../GlobalStyle\";\nimport {styleRule} from \"../../decorators/Style\";\nimport {StyleSheet} from \"../Style\";\nimport {Orientation} from \"../Constants\";\n\nexport const buttonColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker1 = {\n        backgroundColor: colors[2],\n    };\n    let darker2 = {\n        backgroundColor: colors[3],\n    };\n    let darker3 = {\n        backgroundColor: colors[4],\n    };\n    const regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    const hoverDisabled = Object.assign({}, regular);\n    return Object.assign({}, regular, {\n        \":hover\": darker1,\n        \":hover:disabled\": hoverDisabled,\n        \":focus\": darker1,\n        \":active\": darker2,\n        \":hover:active\": darker3,\n        \":focus:active\": darker3,\n        \".active\": darker3,\n    });\n};\n\nexport class ButtonStyle extends BasicLevelStyleSheet(buttonColorToStyle) {\n    base = {\n        outline: \"0\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.4em 0.8em\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS || this.themeProperties.BASE_BORDER_RADIUS,\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        lineHeight: 4/3 + \"\",\n        marginBottom: \"0\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        userSelect: \"none\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    };\n\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [this.base, {\n        fontSize: \"14px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND)];\n\n    getLevel(level) {\n        return super.getLevel(level) || this.INFO;\n    }\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"12px\",\n        padding: \"0.2em 0.4em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"12px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"17px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"21px\",\n        padding: \"0.2em 0.4em\",\n    };\n}\n\nexport class ButtonGroupStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        pointerEvents: \"none\",\n        \">*\": {\n            \"margin-left\": \"5px\",\n            \"display\": \"inline-block\",\n            pointerEvents: \"initial\",\n        },\n        \">:first-child\": {\n            \"margin-left\": \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        pointerEvents: \"none\",\n        \">*\": {\n            \"margin-top\": \"5px\",\n            \"display\": \"block\",\n            pointerEvents: \"initial\",\n        },\n        \">:first-child\": {\n            \"margin-top\": \"0px\",\n        },\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nexport class RadioButtonGroupStyle extends StyleSheet {\n    @styleRule\n    DEFAULT = {\n        pointerEvents: \"none\",\n        \">*\": {\n            pointerEvents: \"initial\",\n            borderRadius: \"0\",\n        },\n        \">:last-child\": {\n            borderTopRightRadius: \"0.3em\",\n            borderBottomRightRadius: \"0.3em\",\n        },\n        \">:first-child\": {\n            borderTopLeftRadius: \"0.3em\",\n            borderBottomLeftRadius: \"0.3em\",\n        }\n    };\n}\n","import {Ajax} from \"../../base/Ajax\";\nimport {IconableInterface} from \"../Bootstrap3\";\nimport {UI} from \"../UIBase\";\nimport {ActionStatus} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonStyle)\nclass Button extends UI.Primitive(IconableInterface, \"button\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n\n    disable() {\n        this.options.disabled = true;\n        this.node.disabled = true;\n    }\n\n    enable() {\n        this.options.disabled = false;\n        this.node.disabled = false;\n    }\n\n    setEnabled(enabled) {\n        this.options.disabled = !enabled;\n        this.node.disabled = !enabled;\n    };\n}\n\n\nclass StateButton extends Button {\n    setOptions(options) {\n        options.state = (this.options && this.options.state) || options.state || ActionStatus.DEFAULT;\n\n        super.setOptions(options);\n\n        this.options.statusOptions = this.options.statusOptions || [];\n        for (let i = 0; i < 4; i += 1) {\n            if (typeof this.options.statusOptions[i] === \"string\") {\n                let statusLabel = this.options.statusOptions[i];\n                this.options.statusOptions[i] = {\n                    label: statusLabel,\n                    faIcon: \"\"\n                }\n            }\n        }\n    }\n\n    setState(status) {\n        this.options.state = status;\n        if (status === ActionStatus.DEFAULT) {\n            this.enable();\n        } else if (status === ActionStatus.RUNNING) {\n            this.disable();\n        } else if (status === ActionStatus.SUCCESS) {\n        } else if (status === ActionStatus.FAILED) {\n        }\n\n        this.redraw();\n    }\n\n    render() {\n        let stateOptions = this.options.statusOptions[this.options.state - 1];\n\n        this.options.label = stateOptions.label;\n        this.options.faIcon = stateOptions.faIcon;\n\n        return super.render();\n    }\n}\n\n\nclass AjaxButton extends StateButton {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions() || {}, {\n            resetToDefaultTimeout: 1000\n        });\n    }\n\n    getAjaxHandler() {\n        return this.options.ajaxHandler || Ajax;\n    }\n\n    setAjaxHandler(ajaxHandler) {\n        this.options.ajaxHandler = ajaxHandler;\n    }\n\n    clearResetTimeout() {\n        if (this.stateResetTimeout) {\n            clearTimeout(this.stateResetTimeout);\n            delete this.stateResetTimeout;\n        }\n    }\n\n    scheduleStateReset() {\n        this.clearResetTimeout();\n        this.stateResetTimeout = setTimeout(() => {\n            this.setState(ActionStatus.DEFAULT);\n            this.clearResetTimeout();\n        }, this.resetToDefaultTimeout);\n    }\n\n    ajax(methodName, ...args) {\n        this.setState(ActionStatus.RUNNING);\n        let ajaxPromise = this.getAjaxHandler()[methodName](...args);\n        ajaxPromise.getPromise().then(\n            (data) => {\n                this.setState(ActionStatus.SUCCESS);\n                this.scheduleStateReset();\n            },\n            (error) => {\n                this.setState(ActionStatus.FAILED);\n                this.scheduleStateReset();\n            }\n        );\n        return ajaxPromise;\n    }\n\n    ajaxCall(data) {\n        return this.ajax(\"fetch\", data);\n    }\n}\nfor (const methodName of [\"fetch\", \"request\", \"get\", \"post\", \"getJSON\", \"postJSON\"]) {\n    AjaxButton.prototype[methodName] = function(...args) {\n        return this.ajax(methodName, ...args);\n    }\n}\n\nexport {Button, StateButton, AjaxButton};\n","import {UI} from \"../UIBase\";\nimport {Button} from \"./Button\";\nimport {SimpleStyledElement} from \"../Bootstrap3\";\nimport {Orientation} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonGroupStyle, RadioButtonGroupStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonGroupStyle)\nclass ButtonGroup extends SimpleStyledElement {\n    getDefaultOptions() {\n        return {\n            orientation: Orientation.HORIZONTAL,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.Orientation(this.options.orientation));\n    }\n}\n\n\n@registerStyle(RadioButtonGroupStyle)\nclass RadioButtonGroup extends SimpleStyledElement {\n    setOptions(options) {\n        super.setOptions(options);\n        this.index = this.options.index || 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n    }\n\n    render() {\n        this.buttons = [];\n        for (let i = 0; i < this.options.givenOptions.length; i += 1) {\n            this.buttons.push(\n                <Button key={i} onClick={() => {this.setIndex(i);}} size={this.getSize()}\n                  label={this.options.givenOptions[i].toString()} level={this.getLevel()}\n                  className={this.index === i ? \"active\" : \"\"}/>);\n        }\n        return this.buttons;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    getValue() {\n        return this.options.givenOptions[this.index];\n    }\n\n    setIndex(index) {\n        this.dispatch(\"setIndex\", {\n            index: index,\n            oldIndex: this.index,\n            value: this.options.givenOptions[index],\n            oldValue: this.options.givenOptions[this.index]\n        });\n        this.buttons[this.index].removeClass(\"active\");\n        this.index = index;\n        this.buttons[this.index].addClass(\"active\");\n    }\n}\n\nexport {ButtonGroup, RadioButtonGroup};\n","import {UI} from \"./UIBase\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelStyleSheet} from \"./GlobalStyle\";\nimport {registerStyle} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\nimport {Level} from \"./Constants\";\n\nexport function cardPanelColorToStyle(color) {\n    let colors = buildColors(color);\n    return {\n        borderColor: colors[4],\n    };\n}\n\nexport class CardPanelStyle extends BasicLevelStyleSheet(cardPanelColorToStyle) {\n    @styleRule\n    DEFAULT = [{\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n        flexDirection: \"row\",\n        padding: \"5px\",\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT,\n        textTransform: this.themeProperties.CARD_PANEL_TEXT_TRANSFORM,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n    },\n        cardPanelHeaderColorToStyle(this.themeProperties.COLOR_BACKGROUND)\n    ];\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n    };\n\n    @styleRule\n    body = {\n    };\n\n    @styleRule\n    panel = [{\n        borderWidth: this.themeProperties.BASE_BORDER_WIDTH,\n        borderRadius: this.themeProperties.BASE_BORDER_RADIUS,\n        boxShadow: this.themeProperties.BASE_BOX_SHADOW,\n        borderStyle: this.themeProperties.BASE_BORDER_STYLE,\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND,\n    },\n        cardPanelColorToStyle(this.themeProperties.COLOR_BACKGROUND)\n    ];\n\n    @styleRule\n    centered = {\n        textAlign: \"center\",\n        justifyContent: \"center\",\n    };\n}\n\nfunction cardPanelHeaderColorToStyle(color){\n    let colors = buildColors(color);\n    return {\n        color: colors[6],\n        backgroundColor: colors[1],\n        borderBottomColor: colors[4],\n    };\n}\n\nexport const CardPanelHeaderStyle = BasicLevelStyleSheet(cardPanelHeaderColorToStyle);\n\n@registerStyle(CardPanelStyle)\nclass CardPanel extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.panel);\n    }\n\n    getLevel() {\n        return super.getLevel() || Level.PRIMARY;\n    }\n\n    getTitle() {\n        return this.options.title;\n    }\n\n    getHeaderStyleSheet() {\n        return CardPanelHeaderStyle.getInstance();\n    }\n\n    getDefaultOptions() {\n        return {\n            headingCentered: true,\n            bodyCentered: false,\n        };\n    }\n\n    getHeadingClasses() {\n        let headingClasses = \"\";\n        const headingLevel = this.getHeaderStyleSheet().Level(this.getLevel()),\n            {headingCentered} = this.options;\n\n        if (headingLevel) {\n            headingClasses = headingClasses + headingLevel;\n        }\n\n        headingClasses = headingClasses + this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            headingClasses = headingClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        if (headingCentered) {\n            headingClasses = headingClasses + this.styleSheet.centered;\n        }\n\n        return headingClasses;\n    }\n\n    getBodyClasses() {\n        const {bodyCentered} = this.options;\n\n        let bodyClasses = this.styleSheet.body;\n        if (bodyCentered) {\n            bodyClasses = bodyClasses + this.styleSheet.centered;\n        }\n\n        return bodyClasses;\n    }\n\n    getChildrenToRender() {\n        const headingClasses = this.getHeadingClasses();\n        const bodyClasses = this.getBodyClasses();\n\n        return [\n            <div ref=\"panelTitle\" className={headingClasses}>\n                {this.getTitle()}\n            </div>,\n            <div ref=\"panelBody\" className={bodyClasses} style={this.options.bodyStyle}>\n                {this.render()}\n            </div>,\n        ];\n    }\n}\n\nexport {CardPanel};\n","import {UI} from \"./UIBase\";\nimport {styleRule} from \"./Style\";\nimport {registerStyle} from \"./style/Theme\"\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelSizeStyleSheet} from \"./GlobalStyle\";\n\n\nclass RowListStyle extends BasicLevelSizeStyleSheet {\n    @styleRule\n    rowList = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    DEFAULT = {\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n\n        minHeight: this.themeProperties.ROW_LIST_ROW_HEIGHT,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING,\n\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND,\n    };\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.ROW_LIST_ROW_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n    };\n\n    @styleRule\n    alternativeColorsOddRow = {\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE,\n    };\n\n    @styleRule\n    noAlternativeColors = {\n        borderTopWidth: this.themeProperties.ROW_LIST_ROW_BORDER_WIDTH,\n        borderTopStyle: this.themeProperties.BASE_BORDER_STYLE,\n        borderTopColor: this.themeProperties.BASE_BORDER_COLOR,\n    };\n}\n\n\n@registerStyle(RowListStyle)\nexport class RowList extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.rowList);\n    }\n\n    getDefaultOptions(options) {\n        return {\n            alternateColors: true,\n        }\n    }\n\n    getRowClasses(index) {\n        let rowClasses = this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            rowClasses = rowClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        const {alternateColors} = this.options;\n\n        if (alternateColors && index % 2 === 1) {\n            rowClasses = rowClasses + this.styleSheet.alternativeColorsOddRow;\n        } else if (!alternateColors && index > 0) {\n            rowClasses = rowClasses + this.styleSheet.noAlternativeColors;\n        }\n\n        return rowClasses;\n    }\n\n    render() {\n        const {rows, rowParser} = this.options;\n\n        return rows.map((row, index) => {\n            return <div className={this.getRowClasses(index)}>\n                {rowParser(row)}\n            </div>\n        });\n    }\n}","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\nimport {CardPanelStyle} from \"../CardPanel\";\n\nclass CollapsibleStyle extends StyleSheet {\n    transitionDuration = 0.4;\n\n    @styleRule\n    collapsing = {\n        marginTop: \"0\",\n        transitionTimingFunction: \"ease\",\n        transitionDuration: `${this.transitionDuration}s`,\n        transitionProperty: \"margin-top\",\n        transitionDelay: \"-0.15s\",\n    };\n\n    @styleRule\n    collapsed = {\n        marginTop: \"-100% !important\",\n        transitionDelay: \"0s !important\",\n    };\n}\n\n\nclass CollapsiblePanelStyle extends CardPanelStyle {\n    @styleRuleInherit\n    panel = {\n        boxShadow: null,\n        borderWidth: \"1px\",\n        borderColor: \"#ccc !important\",\n        borderRadius: \"3px\",\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        borderBottom: \"1px solid transparent\",\n        borderTopLeftRadius: \"3px\",\n        borderTopRightRadius: \"3px\",\n        backgroundColor: \"#fefefe\",\n        \":hover\": {\n            backgroundColor: \"#f3f3f3\",\n        }\n    };\n\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":before\": {\n            transition: \"transform .2s linear\",\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            display: \"inline-block\",\n            lineHeight: \"0.7em\",\n            width: \"0.7em\",\n            fontSize: \"150%\",\n            verticalAlign: \"bottom\",\n            height: \"0.7em\",\n            textAlign: \"center\",\n            transform: \"rotate(0deg)\",\n            marginRight: \".2em\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":before\": {\n            transform: \"rotate(-90deg) !important\",\n        },\n    };\n}\n\nexport {CollapsibleStyle, CollapsiblePanelStyle};\n","import {CollapsibleStyle} from \"./Style\";\n\nfunction CollapsibleMixin(BaseClass, CollapsibleClass = CollapsibleStyle) {\n    class CollapsibleElement extends BaseClass {\n        getDefaultOptions() {\n            return {\n                collapsed: true,\n            };\n        }\n\n        static collapsibleStyleSheet = new CollapsibleClass();\n\n        getCollapsibleStyleSheet() {\n            return this.options.collapsibleStyleSheet || this.constructor.collapsibleStyleSheet;\n        }\n\n        expand(panel) {\n            this.options.collapsed = false;\n            this.dispatch(\"expand\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.removeClass(\"hidden\");\n            setTimeout(() => {\n                panel.removeClass(collapsibleStyle.collapsed);\n            }, 100);\n        }\n\n        collapse(panel) {\n            this.options.collapsed = true;\n            this.dispatch(\"collapse\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.addClass(collapsibleStyle.collapsed);\n            let transitionEndFunction = () => {\n                if (this.options.collapsed) {\n                    panel.addClass(\"hidden\");\n                }\n            };\n            panel.addNodeListener(\"transitionend\", transitionEndFunction);\n        }\n    }\n\n    return CollapsibleElement;\n}\n\n\nexport {CollapsibleMixin};\n","import {UI} from \"../UIBase\";\nimport {CollapsibleMixin} from \"./CollapsibleMixin\";\nimport {CardPanel} from \"../CardPanel\";\nimport {CollapsiblePanelStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(CollapsiblePanelStyle)\nclass CollapsiblePanel extends CollapsibleMixin(CardPanel) {\n    toggle() {\n        if (this.options.collapsed) {\n            this.expand();\n        } else {\n            this.collapse();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(this.styleSheet.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        this.toggleButton.addClass(this.styleSheet.collapsedButton);\n    }\n\n    setTitle(title) {\n        this.options.title = title;\n        this.toggleButton.setChildren(title);\n    }\n\n    getChildrenToRender() {\n        let collapsedPanelClass = \"\";\n        let collapsedHeadingClass = \"\";\n        let hiddenClass = \"\";\n        let contentStyle = {};\n\n        if (this.options.collapsed) {\n            collapsedHeadingClass = this.styleSheet.collapsedButton;\n            collapsedPanelClass = this.styleSheet.collapsed;\n            hiddenClass = \"hidden\";\n        }\n        if (!this.options.noPadding) {\n            contentStyle = {\n                padding: \"8px 8px\",\n            };\n        }\n\n        return [<div className={this.styleSheet.heading}>\n                    <div ref=\"toggleButton\"  className={`${this.styleSheet.button} ${collapsedHeadingClass}`}\n                        onClick={() => this.toggle()}>\n                        {this.getTitle()}\n                    </div>\n                </div>,\n                <div style={{overflow: \"hidden\"}}>\n                  <div ref=\"contentArea\" className={`${collapsedPanelClass} ${hiddenClass}`}\n                       style={contentStyle}>\n                        {this.render()}\n                    </div>\n                </div>\n        ];\n    }\n}\n\n\nclass DelayedCollapsiblePanel extends CollapsiblePanel {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            UI.renderingStack.push(this);\n            this.contentArea.options.children = this.render();\n            UI.renderingStack.pop();\n            this.contentArea.redraw();\n            this.delayedMount();\n        }\n        super.toggle();\n    }\n\n    render() {\n        if (!this._haveExpanded) {\n            return [];\n        }\n        return this.getDelayedChildren();\n    }\n}\n\nexport {CollapsiblePanel, DelayedCollapsiblePanel};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FloatingWindowStyle extends StyleSheet {\n    @styleRule\n    hiddenAnimated = {\n        visibility: \"hidden\",\n        opacity: \"0\",\n        transition: \"opacity 0.1s linear\",\n    };\n\n    @styleRule\n    visibleAnimated = {\n        visibility: \"visible\",\n        opacity: \"1\",\n        transition: \"opacity 0.1s linear\",\n    };\n}\n\n\nclass ModalStyle extends FloatingWindowStyle {\n    @styleRule\n    container = {\n        position: \"fixed\",\n        top: \"0px\",\n        left: \"0px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: \"9999\",\n    };\n\n    @styleRule\n    background = {\n        position: \"fixed\",\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.5)\",\n    };\n\n    @styleRule\n    header = {\n        padding: \"15px\",\n        borderBottom: \"1px solid #e5e5e5\",\n    };\n\n    @styleRule\n    body = {\n        position: \"relative\",\n        padding: \"15px\",\n    };\n\n    @styleRule\n    footer = {\n        padding: \"15px\",\n        textAlign: \"right\",\n        borderTop: \"1px solid #e5e5e5\",\n    };\n}\n\nexport {FloatingWindowStyle, ModalStyle};\n","import {UI} from \"../UIBase\";\nimport {FloatingWindowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FloatingWindowStyle)\nclass FloatingWindow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            transitionTime: 0,\n            style: {\n                zIndex: 2016,\n            }\n        };\n    }\n\n    fadeOut() {\n        this.removeClass(this.styleSheet.visibleAnimated);\n        this.addClass(this.styleSheet.hiddenAnimated);\n    }\n\n    fadeIn() {\n        this.removeClass(this.styleSheet.hiddenAnimated);\n        this.addClass(this.styleSheet.visibleAnimated);\n    }\n\n    show() {\n        // TODO: refactor this to use this.parent and UI.Element appendChild\n        if (!this.isInDocument()) {\n            this.parentNode.appendChild(this.node);\n            this.redraw();\n            setTimeout(() => {\n                this.fadeIn();\n            }, 0);\n        }\n    }\n\n    setParentNode(parentNode) {\n        this.options.parentNode = parentNode;\n    }\n\n    get parentNode() {\n        if (!this.options.parentNode) {\n            if (this.parent) {\n                if (this.parent instanceof HTMLElement) {\n                    this.options.parentNode = this.parent;\n                } else {\n                    this.options.parentNode = this.parent.node;\n                }\n            } else {\n                this.options.parentNode = document.body;\n            }\n        }\n        return this.options.parentNode;\n    }\n\n    hide() {\n        // TODO: refactor this to use this.parent and UI.Element removeChild\n        if (this.isInDocument()) {\n            this.fadeOut();\n            setTimeout(() => {\n                if (this.isInDocument()) {\n                    this.parentNode.removeChild(this.node);\n                }\n            }, this.options.transitionTime);\n        }\n    }\n}\n\n\nclass VolatileFloatingWindow extends FloatingWindow {\n    bindWindowListeners() {\n        this.hideListener = this.hideListener || (() => {this.hide();});\n        window.addEventListener(\"click\", this.hideListener);\n    }\n\n    toggle() {\n        if (!this.isInDocument()) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    show() {\n        if (!this.isInDocument()) {\n            this.bindWindowListeners();\n            super.show();\n        }\n    }\n\n    hide() {\n        if (this.isInDocument()) {\n            super.hide();\n        }\n    }\n\n    onUnmount() {\n        super.onUnmount();\n        window.removeEventListener(\"click\", this.hideListener);\n    }\n\n    onMount() {\n        if (!this.options.notVisible) {\n            this.bindWindowListeners();\n        } else {\n            setTimeout(() => {\n                this.hide();\n            });\n        }\n\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\nexport {FloatingWindow, VolatileFloatingWindow};\n","import {ButtonGroup} from \"../button/ButtonGroup\";\nimport {Button} from \"../button/Button\";\nimport {FloatingWindow} from \"./FloatingWindow\";\nimport {ModalStyle} from \"./Style\";\nimport {Panel, TemporaryMessageArea} from \"../UIPrimitives\";\nimport {UI} from \"../UIBase\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {Level, Size} from \"../Constants\";\n\n@registerStyle(ModalStyle)\nclass Modal extends UI.Element {\n    getDefaultOptions() {\n        return {\n            closeButton: true,\n            destroyOnHide: true,\n            visible: false,\n        };\n    }\n\n    getChildrenToRender() {\n        return [\n            <Panel ref=\"modalContainer\" className={(this.options.visible ? \"\" : \"hidden\") + this.styleSheet.container}>\n                <Panel ref=\"behindPanel\" className={this.styleSheet.hiddenAnimated + this.styleSheet.background} onClick={() => this.hide()}/>\n                {this.getModalWindow()}\n            </Panel>\n        ];\n    }\n\n    getModalWindow() {\n        let closeButton = null;\n        if (this.options.closeButton) {\n            // TODO: this should be in a method\n            closeButton = <div style={{right: \"10px\", zIndex: \"10\", position: \"absolute\"}}>\n                <Button className=\"close\" size={Size.EXTRA_LARGE} style={{border: \"none\"}} label=\"&times;\" onClick={() => this.hide()}/>\n            </div>;\n        }\n\n        return <FloatingWindow ref=\"modalWindow\" style={this.getModalWindowStyle()}>\n            {closeButton}\n            {this.render()}\n        </FloatingWindow>;\n    }\n\n    getModalWindowStyle() {\n        if (this.options.fillScreen) {\n            this.options.width = \"85%\";\n        }\n        // TODO(@Rocky): I don't like this very much, honestly...\n        return {\n            position: \"relative\",\n            padding: \"1%\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            borderRadius: \"10px\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: this.options.width || \"50%\",\n            height: this.options.height || \"auto\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    isVisible() {\n        return this.options.visible;\n    }\n\n    hide() {\n        if (!this.isVisible()) {\n            return;\n        }\n\n        this.options.visible = false;\n        this.modalWindow.fadeOut();\n\n        setTimeout(() => {\n            this.behindPanel.removeClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.addClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalContainer.addClass(\"hidden\");\n                if (this.options.destroyOnHide) {\n                    this.destroyNode();\n                }\n            }, this.modalWindow.options.transitionTime || 0);\n\n            this.detachListener(this.closeListenerHandler);\n        }, this.modalWindow.options.transitionTime || 0);\n        document.body.classList.remove(\"unscrollable\");\n    }\n\n    show() {\n        this.options.visible = true;\n        if (!this.node) {\n            this.mount(document.body);\n        }\n        this.modalContainer.removeClass(\"hidden\");\n        setTimeout(() => {\n            this.behindPanel.addClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.removeClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalWindow.fadeIn();\n            }, this.modalWindow.options.transitionTime);\n        }, 0);\n        this.closeListenerHandler = this.attachListener(Dispatcher.Global, \"closeAllModals\", () => {\n            this.hide();\n        });\n        document.body.classList.add(\"unscrollable\");\n    }\n\n    static show(options={}) {\n        let modal = new this(options);\n        modal.show();\n        return modal;\n    }\n}\n\n\nclass ActionModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            closeButton: false\n        });\n    }\n\n    getActionName() {\n        return this.options.actionName;\n    }\n\n    getActionLevel() {\n        return this.options.level || Level.DEFAULT;\n    }\n\n    getCloseName() {\n        return this.options.closeName || \"Close\";\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>{this.getHeader()}</div>,\n            (this.getBody() ? <div className={this.styleSheet.body}>{this.getBody()}</div> : null),\n            (this.getFooter() ? <div className={this.styleSheet.footer}>{this.getFooter()}</div> : null)\n        ];\n    }\n\n    getHeader() {\n        return <h4>{this.getTitle()}</h4>;\n    }\n\n    getTitle() {\n        return this.options.title || this.getActionName();\n    }\n\n    getBody() {\n        return null;\n    }\n\n    getActionButton() {\n        return <Button level={this.getActionLevel()} label={this.getActionName()}\n                       onClick={() => this.action()} ref=\"actionButton\" />;\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label={this.getCloseName()} onClick={() => this.hide()}/>\n                  {this.getActionButton()}\n            </ButtonGroup>\n        ];\n    }\n\n    action() {}\n}\n\n\nconst ActionModalButton = (ActionModal) => class ActionModalButton extends Button {\n    getModalOptions() {\n        let modalOptions = {\n            actionName: this.options.label,\n            level: this.options.level\n        };\n\n        Object.assign(modalOptions, this.options.modalOptions);\n        return modalOptions;\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            ActionModal.show(this.getModalOptions());\n        });\n    }\n};\n\n\nclass ErrorModal extends ActionModal {\n    getTitle() {\n        return \"An Error occurred\";\n    }\n\n    getBody() {\n        return this.options.error.message || this.options.error;\n    }\n\n    getFooter() {\n        return <Button level={Level.DANGER} label=\"Dismiss\" onClick={() => this.hide()}/>;\n    }\n}\n\nexport {Modal, ErrorModal, ActionModal, ActionModalButton};\n","import {styleRule, StyleSheet} from \"../Style\";\nimport {Device} from \"../../base/Device\";\n\nclass GlobalContainerStyle extends StyleSheet {\n    constructor() {\n        super({updateOnResize: Device.isMobileDevice()});\n    }\n\n    @styleRule\n    default = {\n        height: () => {return Device.isMobileDevice() ? `${window.innerHeight}px` : \"100vh\"},\n        paddingTop: this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT,\n        background: this.themeProperties.COLOR_BACKGROUND_BODY,\n        width: \"100%\",\n        \">*\": {\n            height: \"100%\",\n            width: \"100%\",\n            paddingTop:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\n                ),\n            paddingBottom:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP\n                ),\n            overflow: Device.isMobileDevice() ? \"\" : \"auto\",\n        }\n    };\n}\n\nexport {GlobalContainerStyle};","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {GlobalContainerStyle} from \"./Style\";\nimport {Device} from \"../../base/Device\";\n\n@registerStyle(GlobalContainerStyle)\nclass GlobalContainer extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.default);\n    }\n\n    onMount() {\n        if (!Device.isTouchDevice() || !Device.isMobileDevice()) {\n            Object.assign(document.body.style, {\n                overflow: \"hidden\",\n            });\n        }\n        GlobalContainer.Global = GlobalContainer.Global || this;\n    }\n}\n\nexport {GlobalContainer};","import {UI} from \"../UIBase\";\n\nclass Divider extends UI.Element {\n    dragMousedown(event) {};\n\n    dragMousemove(event) {};\n\n    dragMouseup(event) {};\n\n    dividerMousedownFunction(event) {\n        this.dragMousedown(event);\n        this.parent.dispatch(\"dividerMousedown\", {divider: this, domEvent: event});\n\n        let dragMousemoveFunction = (event) => {\n            this.dragMousemove(event);\n            event.preventDefault(); // for touch devices\n            this.parent.dispatch(\"dividerMousemove\", event);\n        };\n\n        this.parent.addNodeListener(\"touchmove\", dragMousemoveFunction);\n        this.parent.addNodeListener(\"mousemove\", dragMousemoveFunction);\n\n        let dragMouseupFunction = (event) => {\n            this.dragMouseup(event);\n            this.parent.dispatch(\"dividerMouseup\", event);\n            this.parent.removeNodeListener(\"touchmove\", dragMousemoveFunction);\n            window.removeEventListener(\"touchend\", dragMouseupFunction);\n            this.parent.removeNodeListener(\"mousemove\", dragMousemoveFunction);\n            window.removeEventListener(\"mouseup\", dragMouseupFunction);\n        };\n\n        window.addEventListener(\"touchend\", dragMouseupFunction);\n        window.addEventListener(\"mouseup\", dragMouseupFunction);\n    }\n\n    onMount() {\n        // TODO: fix this hack when Device.isTouchDevice works\n        this.addNodeListener(\"touchstart\", (event) => {this.touchDeviceTriggered = true; this.dividerMousedownFunction(event);});\n        this.addNodeListener(\"mousedown\", (event) => {if (!this.touchDeviceTriggered) {this.dividerMousedownFunction(event);}});\n    }\n}\n\nexport {Divider};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\n\nclass DividerStyle extends StyleSheet {\n    @styleRule\n    noTextSelection = {\n        \"-webkit-user-select\": \"none\",\n        \"-moz-user-select\": \"none\",\n        \"-ms-user-select\": \"none\",\n        \"-o-user-select\": \"none\",\n        userSelect: \"none\",\n    };\n}\n\nclass AccordionStyle extends DividerStyle {\n    @styleRule\n    accordion = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">:nth-of-type(even)\": {\n            flexGrow: \"1\",\n            flexShrink: \"1\",\n            flexBasis: \"auto\",\n            overflow: \"auto\",\n            position: \"relative\",\n        },\n        \">:nth-of-type(odd)\": {\n            fontSize: \"1em\",\n            textTransform: \"uppercase\",\n            padding: \"8px 8px\",\n        }\n    };\n\n    @styleRule\n    grab = {\n        cursor: \"grab\",\n        cursor: \"-moz-grab\",\n        cursor: \"-webkit-grab\",\n    };\n\n    @styleRule\n    grabbing = {\n        cursor: \"grabbing\",\n        cursor: \"-moz-grabbing\",\n        cursor: \"-webkit-grabbing\",\n    };\n\n    @styleRule\n    collapseIcon = {\n        width: \"0.7em\",\n        fontSize: \"120% !important\",\n        fontWeight: \"900 !important\",\n        textAlign: \"center\",\n        marginRight: \"0.2em\",\n    };\n}\n\n\nclass SectionDividerStyle extends DividerStyle {\n    barThickness = 2;\n    barPadding = 3;\n    dividerColor = () => \"#DDD\";\n\n    @styleRule\n    horizontalDivider = {\n        zIndex: \"10\",\n        position: \"absolute\",\n        height: \"100%\",\n        cursor: \"col-resize\",\n        width: this.barThickness + 2 * this.barPadding + \"px\",\n        background: () => this.dividerColor(),\n        backgroundClip: \"padding-box\",\n        borderLeft: `${this.barPadding}px solid transparent`,\n        borderRight: `${this.barPadding}px solid transparent`,\n        marginLeft: `${-this.barThickness / 2 - this.barPadding}px`,\n        marginRight: `${-this.barThickness / 2}px`,\n        display: \"inline-block\",\n    };\n\n    @styleRule\n    verticalDivider = {\n        zIndex: \"10\",\n        position: \"absolute\",\n        cursor: \"row-resize\",\n        width: \"100%\",\n        height: this.barThickness + 2 * this.barPadding +  \"px\",\n        background: () => this.dividerColor(),\n        backgroundClip: \"padding-box\",\n        borderBottom: `${this.barPadding}px solid transparent`,\n        borderTop: `${this.barPadding}px solid transparent`,\n        marginBottom: `${-this.barThickness / 2  - this.barPadding}px`,\n        marginTop: `${-this.barThickness / 2 - this.barPadding}px`,\n    };\n\n    @styleRule\n    horizontalSection = {\n        position: \"relative\",\n        whiteSpace: \"nowrap\",\n        \">*\": {\n            whiteSpace: \"initial\",\n            verticalAlign: \"top\",\n            paddingLeft: `${this.barThickness / 2 + this.barPadding}px`,\n            paddingRight: `${this.barThickness / 2 + this.barPadding}px`,\n        },\n        \">:first-child\": {\n            paddingLeft: \"0\",\n        },\n        \">:last-child\": {\n            paddingRight: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n        \">:nth-of-type(odd)\": {\n            display: \"inline-block\",\n        }\n    };\n\n    @styleRule\n    verticalSection = {\n        position: \"relative\",\n        \">*\": {\n            paddingTop: `${this.barThickness / 2 + this.barPadding}px`,\n            paddingBottom: `${this.barThickness / 2 + this.barPadding}px`,\n        },\n        \">:first-child\": {\n            paddingTop: \"0\",\n        },\n        \">:last-child\": {\n            paddingBottom: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n    };\n}\n\nclass TitledDividerStyle extends SectionDividerStyle {\n    barThickness = 16;\n    barPadding = 1;\n    transitionTime = .3;\n\n    dividerStyle = {\n        backgroundColor: \"white\",\n        borderColor: \"#DDD !important\",\n    };\n\n    @styleRuleInherit\n    horizontalDivider = Object.assign(this.dividerStyle, {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        \">*\": {\n            flex: \"1\",\n            display: \"flex\",\n            color: \"rgba(0,0,0, .4)\",\n        },\n        \">:first-child\": {\n            alignItems: \"flex-end\",\n        },\n        \">:last-child\": {\n            alignItems: \"flex-start\",\n        },\n        \">:nth-child(2)\": {\n            flex: \".2\",\n            alignItems: \"center\",\n        }\n    });\n\n    @styleRule\n    horizontalDots = {\n        transform: \"rotate(90deg) scaleX(5)\",\n    };\n\n    @styleRuleInherit\n    verticalDivider = Object.assign(this.dividerStyle, {\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n\n    @styleRule\n    verticalDots = {\n        flex: \"1\",\n        fontSize: \"70% !important\",\n        height: 0,\n        textAlign: \"center\",\n        transform: \"scaleX(10) translateY(-.4em)\",\n    };\n\n    @styleRule\n    arrowButton = {\n        fontSize: \"230% !important\",\n        padding: \"1em .2em\",\n        color: \"rgba(0,0,0, .4)\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"black\",\n        }\n    };\n\n    @styleRule\n    buttonsDisabled = {\n        \">:first-child\": {\n            pointerEvents: \"none\",\n        },\n        \">:last-child\": {\n            pointerEvents: \"none\",\n        },\n    };\n\n    @styleRule\n    barCollapsePanel = {\n        position: \"relative\",\n        \">:first-child\": {\n            width: \"100%\",\n            height: \"100%\",\n        },\n        \">:nth-child(2)\": {\n            display: \"none\",\n            opacity: \"0\",\n            transition: \"opacity \" + this.transitionTime + \"s ease\",\n        },\n    };\n\n    @styleRule\n    hiddenContent = {\n        \">:first-child\": {\n            display: \"none\",\n        },\n        \">:nth-child(2)\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    collapsedBarTitle = {\n        cursor: \"pointer\",\n        borderLeft: \"1px solid #ccc\",\n        borderRight: \"1px solid #ccc\",\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        backgroundColor: \"#fff\",\n        flexDirection: \"column\",\n        zIndex: 5,\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        \":hover\": {\n            backgroundColor: \"#f3f3f3\",\n        },\n        \">:nth-child(2)\": {\n            flex: \"1\",\n            transform: \"rotate(90deg)\",\n        },\n        \">:nth-child(2)>:first-child\": {\n            textTransform: \"uppercase\",\n            fontWeight: \"bold\",\n            fontSize: \"130%\",\n            whiteSpace: \"nowrap\",\n            marginTop: \"-.4em\",\n            transform: \"translateY(10%)\",\n        },\n        \">*\": {\n            display: \"flex\",\n            alignItems: \"center\",\n        },\n        \">:first-child\": {\n            flex: \".5\",\n            fontSize: \"180%\",\n        },\n        \">:last-child\": {\n            flex: \".5\",\n            fontSize: \"180%\",\n        },\n    };\n\n    @styleRule\n    animatedSectionDivider = {\n        \">*\": {\n            transition: this.transitionTime + \"s height ease, \" + this.transitionTime + \"s width ease\",\n        }\n    };\n\n    @styleRule\n    paddingRemoved = {\n        \">*\": {\n            padding: \"0 !important\",\n            overflow: \"hidden\",\n        },\n        \">:nth-of-type(even)\": {\n            display: \"none !important\",\n        }\n    };\n}\n\nexport {AccordionStyle, SectionDividerStyle, TitledDividerStyle};\n","// TODO: Too much \"hidden\"\nimport {Device} from \"../../base/Device\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Divider} from \"./Divider\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {SectionDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\n\n\n\n// options.orientation is the orientation of the divided elements\n@registerStyle(SectionDividerStyle)\nexport class DividerBar extends Divider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            orientation: Orientation.HORIZONTAL,\n        });\n    }\n\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalDivider);\n        } else {\n            attr.addClass(this.styleSheet.horizontalDivider);\n        }\n    }\n}\n\n\n/* SectionDivider class should take in:\n    - Vertical or horizontal separation\n    - All the children it's dividing\n    - An option on how to redivide the sizes of the children\n */\n@registerStyle(SectionDividerStyle)\nexport class SectionDivider extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({\n            autoCollapse: false,\n        }, super.getDefaultOptions())\n    }\n\n    constructor(options) {\n        super(options);\n        this.uncollapsedSizes = new WeakMap();\n    }\n\n    getDividerBarClass() {\n        return DividerBar;\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalSection);\n        } else {\n            attr.addClass(this.styleSheet.horizontalSection);\n        }\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n\n    getDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            return element.getWidth();\n        } else {\n            return element.getHeight();\n        }\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    getMinDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL && element.options.hasOwnProperty(\"minWidth\")) {\n            return element.options.minWidth;\n        } else if (this.getOrientation() === Orientation.VERTICAL && element.options.hasOwnProperty(\"minHeight\")) {\n            return element.options.minHeight;\n        } else {\n            return this.getDimension(this) / this.panels.length / 4;\n        }\n    }\n\n    getHiddenDivider(index) {\n        let divider;\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i + 1].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        divider = null;\n        for(let i = index - 1; i >= 0; i -= 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        return null;\n    }\n\n    getVisibleDivider(index) {\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        return null;\n    }\n\n    collapseChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getVisibleDivider(index);\n        if (divider) {\n            divider.hide();\n        }\n\n        this.setDimension(child, \"0\");\n        child.hide();\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) !== 0 && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + childSize / unCollapsedCount) * 100\n                                  / parentSize - 0.5 / this.children.length + \"%\");\n            }\n        }\n\n        this.recalculateDimensions();\n    }\n\n    expandChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getHiddenDivider(index);\n        if (divider) {\n            divider.show();\n        }\n\n        child.show();\n        let childSize = this.uncollapsedSizes.get(child);\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - childSize / (unCollapsedCount - 1)) * 100\n                                  / parentSize - this.panels.length / 2 + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n        this.recalculateDimensions();\n    }\n\n    isCollapsed(child) {\n        return !this.getDimension(child);\n    }\n\n    toggleChild(index) {\n        if (this.isCollapsed(this.panels[index])) {\n            this.expandChild(index);\n        } else {\n            this.collapseChild(index);\n        }\n    }\n\n    recalculateDimensions() {\n        if (!this.isInDocument()) {\n            return;\n        }\n        let parentSize = this.getDimension(this);\n        let fixedTotalSize = 0;\n        let unfixedTotalSize = 0;\n        for (let panel of this.panels) {\n            if (panel.options.fixed) {\n                fixedTotalSize += this.getDimension(panel);\n            } else {\n                unfixedTotalSize += this.getDimension(panel);\n            }\n        }\n        let ratio = (parentSize - fixedTotalSize) / parentSize;\n        for (let panel of this.panels) {\n            if (!panel.options.fixed && !panel.hasClass(\"hidden\")) {\n                this.setDimension(panel, this.getDimension(panel) * 100 * ratio / unfixedTotalSize + \"%\");\n            }\n        }\n    }\n\n    getPreviousUnfixedChild(index) {\n        for (let i = index; i >= 0 ; i -= 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    getNextUnfixedChild(index) {\n        for (let i = index + 1; i < this.panels.length; i += 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    dividerMouseDownFunction(dividerEvent) {\n        let previousEvent = dividerEvent.domEvent;\n        const index = this.dividers.indexOf(dividerEvent.divider);\n\n        const previousPanel = this.getPreviousUnfixedChild(index);\n        const nextPanel = this.getNextUnfixedChild(index);\n\n        if (previousPanel && nextPanel) {\n            const parentSize = this.getDimension(this);\n            let panelsSize = parentSize;\n\n            for (let panel of this.panels) {\n                if (panel.options.fixed) {\n                    panelsSize -= this.getDimension(panel);\n                }\n            }\n\n            const deltaFunction = (this.getOrientation() === Orientation.HORIZONTAL ?\n                                 (event) => Device.getEventX(event) :  (event) => Device.getEventY(event));\n\n            const mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n                const delta = deltaFunction(event) - deltaFunction(previousEvent);\n\n                const nextSize = this.getDimension(nextPanel) - delta;\n                const previousSize = this.getDimension(previousPanel) + delta;\n\n                if (this.options.autoCollapse) {\n                    if ((delta > 0 && nextPanel.collapsed) || (delta < 0 && previousPanel.collapsed)) {\n                        return;\n                    }\n\n                    if (delta < 0 && nextPanel.collapsed && this.options.autoCollapse) {\n                        this.expandChild(index + 1);\n                        return;\n                    }\n\n                    if (delta > 0 && previousPanel.collapsed) {\n                        this.expandChild(index);\n                        return;\n                    }\n\n                    if (nextSize < this.getMinDimension(nextPanel)) {\n                        this.collapseChild(index + 1);\n                        return;\n                    }\n\n                    if (previousSize < this.getMinDimension(previousPanel)) {\n                        this.collapseChild(index);\n                        return;\n                    }\n                } else {\n                    if (nextSize < this.getMinDimension(nextPanel) || previousSize < this.getMinDimension(previousPanel)) {\n                        return;\n                    }\n                }\n\n                this.setDimension(nextPanel, nextSize * 100 / parentSize + \"%\");\n                this.setDimension(previousPanel, previousSize * 100 / parentSize + \"%\");\n\n                previousEvent = event;\n            });\n\n            const mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n                if (this.clearListeners) {\n                    this.clearListeners();\n                }\n            });\n\n            this.clearListeners = () => {\n                mouseMoveListener.remove();\n                mouseUpListener.remove();\n                this.clearListeners = null;\n            }\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMouseDownFunction(dividerEvent));\n        setTimeout(() => {\n            this.recalculateDimensions();\n        });\n    }\n\n    getChildrenToRender() {\n        const children = [];\n        this.dividers = [];\n        this.panels = [];\n        let leftChildVisible = false;\n        const DividerBarClass = this.getDividerBarClass();\n\n        for (let child of unwrapArray(this.render())) {\n            if (this.panels.length) {\n                let hiddenClass = \"hidden\";\n                if (leftChildVisible && !child.hasClass(\"hidden\")) {\n                    hiddenClass = \"\";\n                }\n                let divider = <DividerBarClass className={hiddenClass} orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            leftChildVisible |= !child.hasClass(\"hidden\");\n            children.push(child);\n            this.panels.push(child);\n        }\n        return children;\n    }\n}","// TODO: This class is incomplete for horizontal orientation and more than 2 panels.\n\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {DividerBar, SectionDivider} from \"./SectionDivider\";\nimport {TitledDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\nimport {FAIcon} from \"../FontAwesome\";\n\n\n\n@registerStyle(TitledDividerStyle)\nclass TitledSectionDividerBar extends DividerBar {\n    render() {\n        if (this.options.orientation === Orientation.VERTICAL) {\n            return [\n\n                <FAIcon icon=\"ellipsis-h\" className={this.styleSheet.verticalDots} />,\n\n            ]\n        } else {\n            return [\n                <div><FAIcon ref=\"rightButton\" icon=\"caret-right\" className={this.styleSheet.arrowButton}/></div>,\n                <div><FAIcon icon=\"bars\" className={this.styleSheet.horizontalDots}/></div>,\n                <div><FAIcon ref=\"leftButton\" icon=\"caret-left\" className={this.styleSheet.arrowButton} /></div>,\n            ];\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.leftButton.addNodeListener(\"mousedown\", (event) => {\n            event.stopPropagation();\n        });\n        this.leftButton.addClickListener(() => {\n            this.dispatch(\"collapsePrevious\");\n        });\n        this.rightButton.addNodeListener(\"mousedown\", (event) => {\n            event.stopPropagation();\n        });\n        this.rightButton.addClickListener(() => {\n            this.dispatch(\"collapseNext\");\n        })\n    }\n}\n\n\n@registerStyle(TitledDividerStyle)\nclass BarCollapsePanel extends UI.Element {\n    extraNodeAttributes(attr) {\n        const panelChild = this.getGivenChildren()[0];\n        attr.addClass(this.styleSheet.barCollapsePanel);\n        let panelSize = panelChild.options.size;\n        if (this.collapsed) {\n            attr.addClass(this.styleSheet.hiddenContent);\n            panelSize = this.options.collapsedSize;\n        }\n        if (panelSize) {\n            if (this.options.orientation === Orientation.VERTICAL) {\n                attr.setStyle(\"height\", panelSize);\n            } else {\n                attr.setStyle(\"width\", panelSize);\n            }\n        }\n\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.setStyle(\"width\", \"100%\");\n        } else {\n            attr.setStyle(\"height\", \"100%\");\n        }\n    }\n\n    getChildrenToRender() {\n        this.collapsed = this.getGivenChildren()[0].options.collapsed;\n        const isFirst = this.parent.panels.indexOf(this) === 0;\n        const isLast = this.parent.panels.indexOf(this) === this.parent.panels.length - 1;\n        const firstCaret = isLast ? \"left\" : \"right\";\n        const lastCaret = isFirst ? \"right\" : \"left\";\n        return [\n            this.render(),\n            <div ref=\"collapsedBarTitle\" style={{display: this.collapsed ? \"flex\": \" none\"}}\n                 className={this.styleSheet.collapsedBarTitle}>\n                <div><FAIcon icon={\"caret-\" + firstCaret}/></div>\n                <div className={this.styleSheet.title}>\n                    <div>\n                        {this.options.title}\n                    </div>\n                </div>\n                <div><FAIcon icon={\"caret-\" + lastCaret}/></div>\n            </div>\n        ]\n    }\n\n    toggle() {\n        if (this.collapsed) {\n            this.collapsed = false;\n            this.removeClass(this.styleSheet.hiddenContent);\n            this.collapsedBarTitle.setStyle(\"display\", \"none\");\n        } else {\n            this.collapsed = true;\n            this.collapsedBarTitle.setStyle(\"display\", \"flex\");\n            setTimeout(() => {\n                this.addClass(this.styleSheet.hiddenContent);\n            }, 100)\n\n        }\n    }\n\n    onMount() {\n         this.collapsedBarTitle.addClickListener(() => {\n             this.dispatch(\"expand\");\n         });\n         this.addListener(\"resize\", () => {\n             for (const child of unwrapArray(this.render())) {\n                 child.dispatch(\"resize\");\n             }\n         })\n    }\n}\n\n\n@registerStyle(TitledDividerStyle)\nexport class TitledSectionDivider extends SectionDivider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            collapsedSize: 40,\n            autoCollapse: true,\n        });\n    }\n\n    getDividerBarClass() {\n        return TitledSectionDividerBar;\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    collapseChild(index) {\n        if (this.clearListeners) {\n            this.clearListeners();\n        }\n\n        this.addClass(this.styleSheet.paddingRemoved);\n        this.addClass(this.styleSheet.animatedSectionDivider);\n\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        this.setDimension(child, this.options.collapsedSize);\n        child.toggle();\n\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + (childSize - this.options.collapsedSize)/ unCollapsedCount) * 100\n                                  / parentSize + \"%\");\n            }\n        }\n\n        setTimeout(() => {\n            this.removeClass(this.styleSheet.animatedSectionDivider);\n            this.recalculateDimensions();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    expandChild(index) {\n        this.removeClass(this.styleSheet.paddingRemoved);\n        this.addClass(this.styleSheet.animatedSectionDivider);\n\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let childSize = this.uncollapsedSizes.get(child);\n        child.toggle();\n\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - (childSize - this.options.collapsedSize)/ (unCollapsedCount - 1)) * 100\n                                  / parentSize + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n\n\n        setTimeout(() => {\n            this.removeClass(this.styleSheet.animatedSectionDivider);\n            this.recalculateDimensions();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n\n    getChildrenToRender() {\n        const children = [];\n        this.dividers = [];\n        this.panels = [];\n        const DividerBarClass = this.getDividerBarClass();\n\n        for (const child of unwrapArray(this.render())) {\n            if (child.options.collapsed) {\n                this.addClass(this.styleSheet.paddingRemoved);\n            }\n            if (this.panels.length) {\n                let divider = <DividerBarClass orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            const wrappedChild = <BarCollapsePanel orientation={this.options.orientation} collapsedSize={this.options.collapsedSize}\n                                                   title={child.options.title || \"...\"}>{child}</BarCollapsePanel>;\n            children.push(wrappedChild);\n            this.panels.push(wrappedChild);\n        }\n        return children;\n    }\n\n    onMount() {\n        super.onMount();\n        for (let i = 0; i < this.panels.length; i += 1) {\n            const panel = this.panels[i];\n            this.attachListener(panel, \"expand\", () => {\n                this.uncollapsedSizes.set(panel, this.getDimension(this) / this.panels.length);\n                this.expandChild(i);\n            });\n        }\n        for (let i = 0; i < this.dividers.length; i += 1) {\n            this.attachListener(this.dividers[i], \"collapseNext\", () => this.collapseChild(i + 1));\n            this.attachListener(this.dividers[i], \"collapsePrevious\", () => this.collapseChild(i));\n        }\n    }\n}","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {getComputedStyle} from \"../Utils\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Device} from \"../../base/Device\";\nimport {AccordionStyle} from \"./Style\";\nimport {FACollapseIcon} from \"../../ui/FontAwesome\";\nimport {Divider} from \"./Divider\";\n\n@registerStyle(AccordionStyle)\nclass AccordionDivider extends Divider {\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n        this.addClass(this.styleSheet.grabbing);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n        this.removeClass(this.styleSheet.grabbing);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.grab);\n    }\n\n    render() {\n        return [<FACollapseIcon ref=\"collapseIcon\" collapsed={false} className={this.styleSheet.collapseIcon}/>, this.options.children];\n    }\n\n    setCollapsed(value) {\n        this.collapseIcon.setCollapsed(value);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addListener(\"togglePanel\", () => {this.collapseIcon.toggleCollapsed();});\n    }\n}\n\n\n@registerStyle(AccordionStyle)\nclass Accordion extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.accordion);\n    }\n\n    getChildrenToRender() {\n        let children = [];\n        this.dividers = [];\n        this.panels = [];\n        for (let child of unwrapArray(this.render())) {\n            let title = (child.getTitle ? child.getTitle() : (child.options.title ? child.options.title : \"\"));\n            let divider = <AccordionDivider>{title}</AccordionDivider>;\n            this.dividers.push(divider);\n            this.panels.push(child);\n            children.push(divider);\n            children.push(child);\n        }\n        return children;\n    }\n\n    getNextVisibleChild(index) {\n        for (let i = index; i < this.panels.length; i += 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    getPreviousVisibleChild(index) {\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    dividerMousedownFunction(dividerEvent) {\n        let dragTriggered, panelsHeight, totalFlex;\n\n        let previousEvent = dividerEvent.domEvent;\n        let index = this.dividers.indexOf(dividerEvent.divider);\n\n        let previousPanel = this.getPreviousVisibleChild(index);\n        let nextPanel = this.getNextVisibleChild(index);\n\n        panelsHeight = this.getHeight();\n        for (let divider of this.dividers) {\n            panelsHeight -= divider.getHeight();\n        }\n        totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n\n        let mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n            dragTriggered = true;\n            if (index != -1 && nextPanel && previousPanel) {\n                // Calculate the height to transfer from one panel to another\n                let delta = (Device.getEventY(event) - Device.getEventY(previousEvent)) * totalFlex / panelsHeight;\n\n                let nextSize = parseFloat(getComputedStyle(nextPanel.node, \"flex\"));\n                let previousSize = parseFloat(getComputedStyle(previousPanel.node, \"flex\"));\n\n                // Cap the delta value, to at most zero our panels\n                delta = Math.sign(delta) * Math.min(Math.abs(delta), (delta > 0 ? nextSize : previousSize));\n\n                nextPanel.setStyle(\"flex\", nextSize - delta);\n                previousPanel.setStyle(\"flex\", previousSize + delta);\n\n                previousEvent = event;\n\n                this.dispatch(\"dragging\");\n            }\n        });\n\n        let mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n            if (!dragTriggered) {\n                dividerEvent.divider.dispatch(\"togglePanel\");\n                this.toggleChild(this.panels[index]);\n            }\n            mouseMoveListener.remove();\n            mouseUpListener.remove();\n            this.dispatch(\"childrenStatusChange\");\n        });\n    }\n\n    toggleChild(child) {\n        let totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n        let sign = child.hasClass(\"hidden\") ? 1 : -1;\n        totalFlex += sign * parseFloat(getComputedStyle(child, \"flex\"));\n        child.toggleClass(\"hidden\");\n        if (totalFlex < 1) {\n            for (let panel of this.panels) {\n                if (!panel.hasClass(\"hidden\") && parseFloat(getComputedStyle(panel.node, \"flex\")) < 1) {\n                    panel.setStyle(\"flex\", 1);\n                }\n            }\n        }\n    }\n\n    getChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: getComputedStyle(panel.node, \"flex\"),\n                collapsed: panel.hasClass(\"hidden\")\n            });\n        }\n        return childrenStatus;\n    }\n\n    getDefaultChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: 1,\n                collapsed: false\n            })\n        }\n        return childrenStatus;\n    }\n\n    setChildrenStatus(childrenStatus) {\n        for (let i = 0; i < childrenStatus.length; i += 1) {\n            this.panels[i].setStyle(\"flex\", childrenStatus[i].flex);\n            let collapsed = childrenStatus[i].collapsed;\n            if (collapsed) {\n                this.panels[i].addClass(\"hidden\");\n            } else {\n                this.panels[i].removeClass(\"hidden\");\n            }\n            this.dividers[i].setCollapsed(collapsed);\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMousedownFunction(dividerEvent));\n    }\n}\n\nexport {Accordion};\n","import {UI} from \"./UIBase\";\nimport {registerStyle} from \"./style/Theme\";\nimport {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {FAIcon} from \"../ui/FontAwesome\";\nimport {Orientation} from \"./Constants\";\n\nclass CarouselStyle extends StyleSheet {\n    navigatorHeight = \"35px\";\n    hoverColor = \"#364251\";\n    transitionTime = \"0.3\";\n    textColor = \"inherit\";\n    navigatorTransitionTime = \"0s\";\n\n    @styleRule\n    carousel = {\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    container = {\n        whiteSpace: \"nowrap\",\n        height: \"100%\",\n        \">*\": {\n            width: \"100%\",\n            height: \"100%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n        },\n        \">:first-child\": {\n            width: \"0\",\n            transition: `margin-left ease ${this.transitionTime}s`,\n        }\n    };\n\n    @styleRule\n    navigator = {\n        width: \"100%\",\n        height: this.navigatorHeight,\n        display: \"flex\",\n    };\n\n    @styleRule\n    navigatorIcon = {\n        color: this.textColor,\n        fontSize: \"180% !important\",\n        textAlign: \"center\",\n        cursor: \"pointer\",\n        flex: \"1\",\n        fontWeight: \"900 !important\",\n        lineHeight: this.navigatorHeight + \" !important\",\n        transition: `background-color ${this.navigatorTransitionTime}`,\n        \":hover\": {\n            backgroundColor: this.hoverColor,\n        },\n    };\n}\n\nclass CarouselNavigator extends UI.Element {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.navigator);\n    }\n\n    render() {\n        return [\n            <FAIcon icon=\"angle-left\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"previousPage\");}} />,\n            <FAIcon icon=\"angle-right\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"nextPage\");}} />,\n        ];\n    }\n}\n\n\n@registerStyle(CarouselStyle)\nclass Carousel extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.carousel);\n    }\n\n    appendChild(child, doMount) {\n        this.options.children.push(child);\n        if (doMount) {\n            this.setActive(child);\n        }\n        child.mount(this, null);\n        this.redraw();\n    }\n\n    eraseChild(child) {\n        if (this.options.children.indexOf(child) === this.options.children.length - 1) {\n            this.setActiveIndex(Math.max(this.options.children.length - 2, 0));\n        }\n        this.options.children.splice(this.options.children.indexOf(child), 1);\n        this.redraw();\n    }\n\n    render() {\n        if (this.activeIndex == null) {\n            this.activeIndex = 0;\n            for (let i = 0; i < this.options.children.length; i += 1) {\n                if (this.options.children[i].options.active) {\n                    this.activeIndex = i;\n                    break;\n                }\n            }\n        }\n\n        return [<CarouselNavigator className={this.options.children.length > 1 ? \"\" : \"hidden\"}/>,\n            <div className={this.styleSheet.container}>\n                <div ref=\"pusher\" style={{marginLeft: `${-this.activeIndex * 100}%`}}/>\n                {this.options.children}\n            </div>];\n    }\n\n    setActive(panel) {\n        this.setActiveIndex(this.options.children.indexOf(panel));\n    }\n\n    setActiveIndex(index) {\n        this.activeIndex = index;\n        this.pusher.setStyle(\"margin-left\", `${-index * this.getWidth()}px`);\n    }\n\n    getActive() {\n        return this.options.children[this.activeIndex];\n    }\n\n    onMount() {\n        this.addListener(\"nextPage\", () => this.setActiveIndex((this.activeIndex + 1) % this.options.children.length));\n        this.addListener(\"previousPage\", () => this.setActiveIndex((this.activeIndex + this.options.children.length - 1) % this.options.children.length));\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n}\n\nexport {Carousel, CarouselStyle};\n","import {StyleSheet, styleRule} from \"./Style\";\n\nclass RangePanelStyle extends StyleSheet {\n    rowHeight = 52;\n\n    @styleRule\n    default = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        overflow: \"auto\",\n        overflowY: \"hidden\",\n    };\n\n    @styleRule\n    tableContainer = {\n        flex: \"1\",\n        height: \"100%\",\n        width: \"100%\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    scrollablePanel = {\n        overflow: \"auto\",\n        height: \"calc(100% - 30px)\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    fakePanel = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    footer = {\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        position: \"absolute\",\n        bottom: \"0px\",\n        width: \"100%\",\n        whiteSpace: \"nowrap\",\n        paddingBottom: \"15px\",\n        paddingTop: \"3px\",\n    };\n\n    @styleRule\n    jumpToButton = {\n        marginLeft: \"5px\",\n        padding: \"2.3px 10px\",\n        verticalAlign: \"bottom\",\n    };\n\n    @styleRule\n    table = {\n        width: \"calc(100% - 15px)\",\n        marginBottom: \"0px\",\n        top: \"0px\",\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        \">tbody>tr>td\": {\n            height: `${this.rowHeight}px !important`,\n            whiteSpace: \"nowrap !important\",\n        }\n    };\n}\n\nexport {RangePanelStyle};\n","import {UI} from \"./UIBase\";\nimport {Button} from \"./button/Button\";\nimport {NumberInput} from \"./input/Input\";\nimport {RangePanelStyle} from \"./RangePanelStyle\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {Size} from \"./Constants\";\n\nfunction RangePanelInterface(PanelClass) {\n    class RangePanel extends PanelClass {\n    }\n    return RangePanel;\n}\n\n\nclass EntriesManager extends Dispatchable {\n    constructor(entries, options={}) {\n        super();\n        this.rawEntries = entries;\n        this.options = options;\n        this.cacheEntries();\n    }\n\n    getRawEntries() {\n        return this.rawEntries;\n    }\n\n    cacheEntries() {\n        this.cachedEntries = this.sortEntries(this.filterEntries(this.getRawEntries()));\n        this.dispatch(\"update\");\n    }\n\n    getEntries() {\n        return this.cachedEntries;\n    }\n\n    getEntriesCount() {\n        return this.cachedEntries.length;\n    }\n\n    getEntriesRange(low, high) {\n        return this.cachedEntries.slice(low, high);\n    }\n\n    updateEntries(entries) {\n        this.rawEntries = entries;\n        this.cacheEntries();\n    }\n\n    sortEntries(entries) {\n        return this.getComparator() ? entries.sort(this.getComparator()) : entries;\n    }\n\n    filterEntries(entries) {\n        const filter = this.getFilter();\n        return filter ? entries.filter(filter) : entries;\n    }\n\n    getComparator() {\n        return this.options.comparator;\n    }\n\n    setComparator(comparator) {\n        this.options.comparator = comparator;\n        this.cacheEntries();\n    }\n\n    getFilter() {\n        return this.options.filter;\n    }\n\n    setFilter(filter) {\n        this.options.filter = filter;\n        this.cacheEntries();\n    }\n}\n\n\n// A wrapper for tables which optimizes rendering when many entries / updates are involved. It currently has hardcoded\n// row height for functionality reasons.\nfunction RangeTableInterface(TableClass) {\n    class RangeTable extends UI.Primitive(TableClass, \"div\") {\n        constructor(options) {\n            super(options);\n            this.lowIndex = 0;\n            this.highIndex = 0;\n        }\n\n        getRangePanelStyleSheet() {\n            return RangePanelStyle.getInstance();\n        }\n\n        getRowHeight() {\n            return this.options.rowHeight || this.getRangePanelStyleSheet().rowHeight;\n        }\n\n        getEntriesManager() {\n            if (!this.entriesManager) {\n                this.entriesManager = new EntriesManager(super.getEntries());\n            }\n            return this.entriesManager;\n        }\n\n        extraNodeAttributes(attr) {\n            attr.addClass(this.getRangePanelStyleSheet().default);\n        }\n\n        render() {\n            const rangePanelStyleSheet = this.getRangePanelStyleSheet();\n            const fakePanelHeight = (this.getRowHeight() * this.getEntriesManager().getEntriesCount() + 1) + \"px\";\n            const headHeight = this.containerHead ? this.containerHead.getHeight() : 0;\n            this.computeIndices();\n\n            // Margin is added at redraw for the case when the scoreboard has horizontal scrolling during a redraw.\n            const margin = (this.node &&  this.node.scrollLeft) || 0;\n\n            return [\n                <div ref=\"tableContainer\" className={rangePanelStyleSheet.tableContainer}\n                     style={{paddingTop: headHeight + \"px\", marginLeft: margin + \"px\"}}>\n                    <div ref=\"scrollablePanel\" className={rangePanelStyleSheet.scrollablePanel}>\n                        <div ref=\"fakePanel\" className={rangePanelStyleSheet.fakePanel} style={{height: fakePanelHeight}}/>\n                        <table ref=\"container\" className={`${this.styleSheet.table} ${rangePanelStyleSheet.table}`}\n                                               style={{marginLeft: -margin + \"px\"}}>\n                            <thead ref=\"containerHead\">\n                            {this.renderContainerHead()}\n                            </thead>\n                            <tbody ref=\"containerBody\">\n                            {this.renderContainerBody()}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>,\n                <div ref=\"footer\" className={rangePanelStyleSheet.footer} style={{marginLeft: margin + \"px\"}}>\n                    <span ref=\"tableFooterText\">\n                        {this.getFooterContent()}\n                    </span>\n                    <NumberInput ref=\"jumpToInput\" placeholder=\"jump to...\" style={{textAlign: \"center\",}}/>\n                    <Button ref=\"jumpToButton\" size={Size.SMALL} className={rangePanelStyleSheet.jumpToButton}>Go</Button>\n                </div>\n            ];\n        }\n\n        applyScrollState() {\n            this.scrollablePanel.node.scrollTop = this.scrollState;\n        }\n\n        saveScrollState() {\n            if (this.scrollablePanel && this.scrollablePanel.node) {\n                this.scrollState = this.scrollablePanel.node.scrollTop;\n            }\n        }\n\n        renderContainerHead() {\n            return this.renderTableHead();\n        }\n\n        renderContainerBody() {\n            // TODO: this method should not be here, and tables should have a method \"getEntriesToRender\" which will be overwritten in this class.\n            this.rows = [];\n\n            const entries = this.getEntriesManager().getEntriesRange(this.lowIndex, this.highIndex);\n\n            for (let i = 0; i < entries.length; i += 1) {\n                const entry = entries[i];\n                const RowClass = this.getRowClass(entry);\n                this.rows.push(<RowClass key={this.getEntryKey(entry, i + this.lowIndex)} index={i + this.lowIndex}\n                                         {...this.getRowOptions(entry)} parent={this}/>);\n            }\n            return this.rows;\n        }\n\n        getFooterContent() {\n            if (this.lowIndex + 1 > this.highIndex) {\n                return `No results. Jump to `;\n            }\n            return `${this.lowIndex + 1} ➞ ${this.highIndex} of ${this.getEntriesManager().getEntriesCount()}. `;\n        }\n\n        jumpToIndex(index) {\n            // Set the scroll so that the requested position is in the center.\n            const lowIndex = parseInt(index - (this.highIndex - this.lowIndex) / 2 + 1);\n            const scrollRatio = lowIndex / (this.getEntriesManager().getEntriesCount() + 0.5);\n            this.scrollablePanel.node.scrollTop = scrollRatio * this.scrollablePanel.node.scrollHeight;\n        }\n\n        computeIndices() {\n            if (!this.tableContainer || !this.containerHead || !this.footer) {\n                return;\n            }\n            const scrollRatio = this.scrollablePanel.node.scrollTop / this.scrollablePanel.node.scrollHeight;\n            const entriesCount = this.getEntriesManager().getEntriesCount();\n            // Computing of entries range is made using the physical scroll on the fake panel.\n            this.lowIndex = parseInt(scrollRatio * (entriesCount + 0.5));\n            if (isNaN(this.lowIndex)) {\n                this.lowIndex = 0;\n            }\n            this.highIndex = Math.min(this.lowIndex + parseInt((this.getHeight() - this.containerHead.getHeight()\n                    - this.footer.getHeight()) / this.getRowHeight()), entriesCount);\n        }\n\n        setScroll() {\n            // This is the main logic for rendering the right entries. Right now, it best works with a fixed row height,\n            // for other cases no good results are guaranteed. For now, that row height is hardcoded in the class'\n            // stylesheet.\n\n            if (this.inSetScroll) {\n                return;\n            }\n            if (!document.body.contains(this.node)) {\n                this.tableFooterText.setChildren(this.getFooterContent());\n                this.containerBody.setChildren(this.renderContainerBody());\n                return;\n            }\n            this.inSetScroll = true;\n            this.computeIndices();\n            // Ugly hack for chrome stabilization.\n            // This padding top makes the scrollbar appear only on the tbody side\n            this.tableContainer.setStyle(\"paddingTop\", this.containerHead.getHeight() + \"px\");\n            this.fakePanel.setHeight(this.getRowHeight() * this.getEntriesManager().getEntriesCount() + \"px\");\n            // The scrollable panel must have the exact height of the tbody so that there is consistency between entries\n            // rendering and scroll position.\n            this.scrollablePanel.setHeight(this.getRowHeight() * (this.highIndex - this.lowIndex) + \"px\");\n            // Update the entries and the footer info.\n            this.tableFooterText.setChildren(this.getFooterContent());\n            this.containerBody.setChildren(this.renderContainerBody());\n            // This is for setting the scrollbar outside of the table area, otherwise the scrollbar wouldn't be clickable\n            // because of the logic in \"addCompatibilityListeners\".\n            this.container.setWidth(this.fakePanel.getWidth() + \"px\");\n            this.inSetScroll = false;\n        }\n\n        addCompatibilityListeners() {\n            // The physical table has z-index -1 so it does not respond to mouse events, as it is \"behind\" fake panel.\n            // The following listeners repair that.\n            this.addNodeListener(\"mousedown\", () => {\n                this.container.setStyle(\"pointerEvents\", \"all\");\n            });\n            this.container.addNodeListener(\"mouseup\", (event) => {\n                const mouseDownEvent = new MouseEvent(\"click\", event);\n                const domElement = document.elementFromPoint(parseFloat(event.clientX), parseFloat(event.clientY));\n                setTimeout(() => {\n                    this.container.setStyle(\"pointerEvents\", \"none\");\n                    domElement.dispatchEvent(mouseDownEvent);\n                }, 100);\n            });\n\n            // Adding listeners that force resizing\n            this.addListener(\"setActive\", () => {\n                this.setScroll();\n            });\n            this.addListener(\"resize\", () => {\n                this.setScroll();\n            });\n            window.addEventListener(\"resize\", () => {\n                this.setScroll();\n            });\n        }\n\n        addTableAPIListeners() {\n            // This event isn't used anywhere but this is how range updates should be made.\n            this.addListener(\"entriesChange\", (event) => {\n                if (!(event.leftIndex >= this.highIndex || event.rightIndex < this.lowIndex)) {\n                    this.setScroll();\n                }\n            });\n            this.addListener(\"showCurrentUser\", () => {\n                const index = this.getEntriesManager().getEntries().map(entry => entry.userId).indexOf(USER.id) + 1;\n                this.jumpToIndex(index);\n            });\n            // Delay is added for smoother experience of scrolling.\n            this.attachListener(this.getEntriesManager(), \"update\", () => {\n                this.setScroll();\n            });\n        }\n\n        addSelfListeners() {\n            this.scrollablePanel.addNodeListener(\"scroll\", () => {\n                this.setScroll();\n            });\n            this.addNodeListener(\"scroll\", () => {\n                this.tableContainer.setStyle(\"marginLeft\", this.node.scrollLeft);\n                this.footer.setStyle(\"marginLeft\", this.node.scrollLeft);\n                this.container.setStyle(\"marginLeft\", -this.node.scrollLeft);\n            });\n            window.addEventListener(\"resize\", () => {\n                this.tableContainer.setStyle(\"marginLeft\", 0);\n                this.footer.setStyle(\"marginLeft\", 0);\n                this.container.setStyle(\"marginLeft\", 0);\n            });\n            this.jumpToInput.addNodeListener(\"keyup\", (event) => {\n                if (event.code === \"Enter\") {\n                    this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n                }\n            });\n            this.jumpToButton.addClickListener(() => {\n                this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n            });\n        }\n\n        onMount() {\n            super.onMount();\n\n            this.addCompatibilityListeners();\n\n            this.addTableAPIListeners();\n\n            this.addSelfListeners();\n\n            setTimeout(() => {\n                this.redraw();\n            })\n        }\n    }\n    return RangeTable;\n}\n\nexport {RangePanelInterface, RangeTableInterface, EntriesManager};\n","import {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\n\nclass TableStyle extends StyleSheet {\n    cellStyle =  {\n        padding: \"8px\",\n        lineHeight: \"1.42857143\",\n        verticalAlign: \"top\",\n        borderTop: \"1px solid #ddd\",\n    };\n\n    theadCellStyle = {\n        borderBottom: \"2px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    table = {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        marginBottom: \"20px\",\n        borderSpacing: \"0\",\n        borderCollapse: \"collapse\",\n        \">*>*>td\": this.cellStyle,\n        \">*>*>th\": this.cellStyle,\n        \">*>thead>*>*\": this.theadCellStyle,\n    };\n\n    @styleRule\n    tableStripped = {\n        \">tbody>tr:nth-of-type(odd)\": {\n            backgroundColor: \"#f5f5f5\",\n        }\n    };\n\n}\n\nclass SortableTableStyle extends TableStyle {\n    @styleRule\n    sortIcon = {\n        position: \"absolute\",\n        right: \"0px\",\n        bottom: \"0px\",\n        visibility: \"hidden\",\n        float: \"right\",\n    };\n\n    @styleRuleInherit\n    table = {\n        [\" th:hover .\" + this.sortIcon.getClassName()]: {\n            visibility: \"inherit\",\n        },\n        \" th:hover\": {\n            cursor: \"pointer\",\n        }\n    };\n}\n\nexport {TableStyle, SortableTableStyle};\n","import {TableStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n// TODO: the whole table architecture probably needs a rethinking\nclass TableRow extends UI.Primitive(\"tr\") {\n    render() {\n        let rowCells = [];\n\n        for (let column of this.options.columns) {\n            rowCells.push(this.renderEntryCell(column));\n        }\n\n        return rowCells;\n    }\n\n    renderEntryCell(column) {\n        return <td style={column.cellStyle} key={column.id}>{column.value(this.options.entry, this.options.index)}</td>;\n    }\n};\n\n@registerStyle(TableStyle)\nclass Table extends UI.Primitive(\"table\") {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.setColumns(options.columns || []);\n        this.entries = options.entries || [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.table);\n    }\n\n    getRowClass() {\n        return TableRow;\n    }\n\n    getRowOptions(entry) {\n        return {\n            entry: entry,\n            columns: this.columns,\n        };\n    }\n\n    render() {\n        return [\n            <thead>\n                {this.renderTableHead()}\n            </thead>,\n            <tbody>\n                {this.renderTableBody()}\n            </tbody>\n        ];\n    }\n\n    renderTableHead() {\n        return <tr>{this.columns.map(this.renderHeaderCell, this)}</tr>;\n    }\n\n    getEntryKey(entry, index) {\n        return entry.id != null ? entry.id : index;\n    }\n\n    renderTableBody() {\n        this.rows = [];\n\n        let entries = this.getEntries();\n        for (let i = 0; i < entries.length; i += 1) {\n            let entry = entries[i];\n            let RowClass = this.getRowClass(entry);\n            this.rows.push(<RowClass key={this.getEntryKey(entry, i)} index={i} {...this.getRowOptions(entry)} parent={this}/>);\n        }\n        return this.rows;\n    }\n\n    // Renders the whole header cell based on a column\n    renderHeaderCell(column) {\n        return <th style={column.headerStyle} ref={\"columnHeader\" + column.id}>\n                {this.renderColumnHeader(column)}\n            </th>;\n    }\n\n    // Only renders the content of the header cell\n    renderColumnHeader(column) {\n        if (typeof column.headerName === \"function\") {\n            return column.headerName();\n        }\n        return column.headerName;\n    }\n\n    // Original entries should not be modified. Overwrite this function to appy any modification in a new array.\n    getEntries() {\n        return this.entries || [];\n    }\n\n    columnDefaults(column, index) {\n        column.id = index;\n    }\n\n    setColumns(columns) {\n        this.columns = columns;\n        for (let i = 0; i < this.columns.length; i += 1) {\n            this.columnDefaults(this.columns[i], i);\n        }\n    }\n}\n\nexport * from \"./Style\";\nexport {Table, TableRow};\n","import {UI} from \"../UIBase\";\nimport {Table, TableRow} from \"./Table\";\nimport {CollapsibleMixin} from \"../collapsible/CollapsibleMixin\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule} from \"../../decorators/Style\";\n\nclass TableRowInCollapsibleTable extends TableRow {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    render() {\n        return <tr>{super.render()}</tr>;\n    }\n}\n\nclass CollapsibleTableStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":after\": {\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            float: \"left\",\n            fontWeight: \"bold\",\n            width: \"0.7em\",\n            fontSize: \"130%\",\n            verticalAlign: \"top\",\n            height: \"0.7em\",\n            marginTop: \"-0.2em\",\n            textAlign: \"center\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":after\": {\n            content: \"\\\"\\\\f105\\\" !important\",\n        },\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        backgroundColor: \"initial !important\",\n    };\n}\n\nlet collapsibleTableStyle = new CollapsibleTableStyle();\n\n// TODO: refactor this to support redraw and render override\nclass CollapsibleTableRow extends CollapsibleMixin(TableRow) {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    getDefaultOptions() {\n        return {\n            collapsed: true,\n        }\n    }\n\n    onMount() {\n        this.toggleButton.addClickListener(() => this.toggle());\n    }\n\n    toggle() {\n        if (!this.options.collapsed) {\n            this.collapse();\n        } else {\n            this.expand();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        setTimeout(() => {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n        }, this.getCollapsibleStyleSheet().transitionDuration * 500);\n    }\n\n    // TODO: Very bad redraw practice here\n    redraw() {\n        if (!super.redraw()) {\n            return false;\n        }\n\n        if (this.options.collapsed) {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.addClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.addClass(\"hidden\");\n        } else {\n            this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.removeClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.removeClass(\"hidden\");\n        }\n        return true;\n    }\n\n    getInitialCollapsedContent() {\n        return this.renderCollapsible(this.options.entry);\n    }\n\n    render() {\n        return [\n            <tr className={collapsibleTableStyle.heading}>{super.render()}</tr>,\n            <tr>\n                <td style={{overflow: \"hidden\", padding: \"0px\"}}\n                    colspan={this.options.columns.length}>\n                    <div ref=\"contentArea\"\n                         className={`${this.getCollapsibleStyleSheet().collapsed} hidden`}>\n                            {this.getInitialCollapsedContent()}\n                    </div>\n                </td>\n            </tr>\n        ];\n    }\n}\n\nclass DelayedCollapsibleTableRow extends CollapsibleTableRow {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            this.redrawCollapsible();\n        }\n        super.toggle();\n    }\n\n    redrawCollapsible() {\n        UI.renderingStack.push(this);\n        this.contentArea.options.children = this.renderCollapsible(this.options.entry);\n        UI.renderingStack.pop();\n        this.contentArea.redraw();\n    }\n\n    getInitialCollapsedContent() {\n        return [];\n    }\n}\n\nfunction CollapsibleTableInterface(BaseTableClass) {\n    return class CollapsibleTable extends BaseTableClass {\n        setOptions(options) {\n            super.setOptions(options);\n\n            if (options.renderCollapsible) {\n                this.renderCollapsible = options.renderCollapsible;\n            }\n        }\n\n        render() {\n            return [\n                <thead>\n                    {this.renderTableHead()}\n                </thead>,\n                this.renderTableBody()\n            ];\n        }\n\n        getRowClass() {\n            return CollapsibleTableRow;\n        }\n\n        setColumns(columns) {\n            let toggleColumn = {\n                value: (entry) => {\n                    let rowClass = this.getRowClass(entry);\n                    // TODO: Fix it lad!\n                    if (rowClass === CollapsibleTableRow || rowClass.prototype instanceof CollapsibleTableRow) {\n                        return <a ref=\"toggleButton\"\n                        className={`${collapsibleTableStyle.button} ${collapsibleTableStyle.collapsedButton}`}/>;\n                    }\n                    return <a ref=\"toggleButton\"/>;\n                },\n                cellStyle: {\n                    width: \"1%\",\n                    \"whiteSpace\": \"nowrap\",\n                }\n            };\n\n            super.setColumns([toggleColumn].concat(columns));\n        }\n    };\n}\n\nlet CollapsibleTable = CollapsibleTableInterface(Table);\n\nexport {CollapsibleTable, CollapsibleTableInterface, CollapsibleTableRow, DelayedCollapsibleTableRow,\n        TableRowInCollapsibleTable, collapsibleTableStyle};\n","import {SortableTableStyle} from \"./Style\";\nimport {FASortIcon} from \"../FontAwesome\";\nimport {UI} from \"../UIBase\";\nimport {Table} from \"./Table\";\nimport {defaultComparator} from \"../../base/Utils\";\nimport {Direction} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\n\nfunction SortableTableInterface(BaseTableClass, SortIconClass = FASortIcon) {\n    @registerStyle(SortableTableStyle)\n    class SortableTable extends BaseTableClass {\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.addClass(this.styleSheet.table);\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n\n            this.columnSortingOrder = options.columnSortingOrder || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            // TODO: fix multiple clicks registered here\n            // Sort table by clicked column\n            for (let column of this.columns) {\n                this[\"columnHeader\" + column.id].addClickListener(() => {\n                    this.sortByColumn(column);\n                    this.dispatch(\"reorder\");\n                });\n            }\n        }\n\n        renderColumnHeader(column) {\n            let sortIcon = <SortIconClass className={this.styleSheet.sortIcon}/>;\n            if (this.sortBy === column) {\n                if (this.sortDescending) {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.DOWN}/>;\n                } else {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.UP}/>;\n                }\n            }\n\n            return <div style={{position: \"relative\"}}>{super.renderColumnHeader(column)} {sortIcon}</div>;\n        }\n\n        sortByColumn(column) {\n            if (column === this.sortBy) {\n                this.sortDescending = (this.sortDescending != true);\n            } else {\n                this.sortDescending = true;\n            }\n\n            this.sortBy = column;\n\n            this.redraw();\n        }\n\n        getComparator() {\n            if (!this.sortBy && this.columnSortingOrder.length === 0) {\n                return null;\n            }\n\n            const colCmp = (a, b, col) => {\n                if (!col) return 0;\n\n                let keyA = col.rawValue ? col.rawValue(a) : col.value(a);\n                let keyB = col.rawValue ? col.rawValue(b) : col.value(b);\n                return col.cmp(keyA, keyB);\n            };\n\n            return (a, b) => {\n                let cmpRes;\n\n                if (this.sortBy) {\n                    cmpRes = colCmp(a, b, this.sortBy);\n                    if (cmpRes !== 0) {\n                        return (this.sortDescending ? -cmpRes : cmpRes);\n                    }\n                }\n\n                for (let i = 0; i < this.columnSortingOrder.length; i += 1) {\n                    cmpRes = colCmp(a, b, this.columnSortingOrder[i]);\n                    if (this.columnSortingOrder[i].sortDescending) {\n                        cmpRes = -cmpRes;\n                    }\n\n                    if (cmpRes !== 0) {\n                        return cmpRes;\n                    }\n                }\n                return 0;\n            }\n        }\n\n        sortEntries(entries) {\n            let sortedEntries = entries.slice();\n\n            if (this.getComparator()) {\n                sortedEntries.sort(this.getComparator());\n            }\n\n            return sortedEntries;\n        }\n\n        getEntries() {\n            return this.sortEntries(super.getEntries());\n        }\n\n        columnDefaults(column, index) {\n            super.columnDefaults(column, index);\n\n            if (!column.hasOwnProperty(\"cmp\")) {\n                column.cmp = defaultComparator;\n            }\n        }\n    }\n    return SortableTable;\n}\n\nlet SortableTable = SortableTableInterface(Table);\n\nexport {SortableTable, SortableTableInterface};\n","import {isPlainObject, isNumber} from \"../base/Utils\";\n\nexport class TimeUnit {\n    static CANONICAL = {};\n    static ALL = [];\n    static FIXED_DURATION = [];\n    static VARIABLE_DURATION = [];\n\n    constructor(name, baseUnit, multiplier, options = {}) {\n        this.name = name;\n        this.pluralName = name + \"s\";\n        this.baseUnit = baseUnit;\n        this.multiplier = multiplier;\n        this.milliseconds = ((baseUnit && baseUnit.getMilliseconds()) || 1) * multiplier;\n        this.variableMultiplier = options.variableMultiplier || false;\n        this.variableDuration = this.variableMultiplier || (baseUnit && baseUnit.isVariable());\n    }\n\n    static toTimeUnit(timeUnit) {\n        if (timeUnit instanceof TimeUnit) {\n            return timeUnit;\n        }\n        return this.CANONICAL[timeUnit];\n    }\n\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    getPluralName() {\n        return this.pluralName;\n    }\n\n    getMilliseconds() {\n        return this.milliseconds;\n    }\n\n    isVariable() {\n        return this.variableDuration;\n    }\n\n    hasVariableMultiplier() {\n        return this.variableMultiplier;\n    }\n\n    getDateValue(date) {\n\n    }\n\n    setDateValue(date, value) {\n    }\n}\n\nTimeUnit.MILLISECOND = new TimeUnit(\"millisecond\", null, 1);\nTimeUnit.SECOND = new TimeUnit(\"second\", TimeUnit.MILLISECOND, 1000);\nTimeUnit.MINUTE = new TimeUnit(\"minute\", TimeUnit.SECOND, 60);\nTimeUnit.HOUR = new TimeUnit(\"hour\", TimeUnit.MINUTE, 60);\nTimeUnit.DAY = new TimeUnit(\"day\", TimeUnit.HOUR, 24, {variableMultiplier: true});\nTimeUnit.WEEK = new TimeUnit(\"week\", TimeUnit.DAY, 7);\nTimeUnit.MONTH =  new TimeUnit(\"month\", TimeUnit.DAY, 30, {variableMultiplier: true});\nTimeUnit.QUARTER = new TimeUnit(\"quarter\", TimeUnit.MONTH, 3);\nTimeUnit.TRIMESTER = new TimeUnit(\"trimester\", TimeUnit.MONTH, 4);\nTimeUnit.SEMESTER = new TimeUnit(\"semester\", TimeUnit.MONTH, 6);\nTimeUnit.YEAR = new TimeUnit(\"year\", TimeUnit.DAY, 365, {variableMultiplier: true});\n\nTimeUnit.DAY.dateMethodSuffix = \"Date\";\nTimeUnit.MONTH.dateMethodSuffix = \"Month\";\nTimeUnit.YEAR.dateMethodSuffix = \"FullYear\";\n\nexport class Duration {\n    constructor(duration) {\n        if (duration instanceof self.Date) {\n            throw new Error(\"Can't automatically transform Date to Duration, use date.getTime() if you really want to\");\n        }\n        if (isNumber(duration)) {\n            this.milliseconds = duration;\n            return;\n        }\n        if (duration instanceof Duration) {\n            Object.assign(this, duration);\n            return;\n        }\n        if (isPlainObject(duration)) {\n            this.milliseconds = 0;\n            for (const key of Object.keys(duration)) {\n                let timeUnit = TimeUnit.CANONICAL[key];\n                if (!timeUnit) {\n                    throw Error(\"Unknown time unit:\", key);\n                }\n                // TODO: throw an error if can't parse these values\n                if (timeUnit.isVariable()) {\n                    this[key] = parseInt(duration[key]);\n                    this.relativeDuration = true;\n                } else {\n                    this.milliseconds += parseFloat(duration[key]) * timeUnit.milliseconds;\n                }\n            }\n            return;\n        }\n        if (arguments.length > 0) {\n            throw Error(\"Invalid Duration arguments: \", ...arguments);\n        }\n        this.milliseconds = 0;\n    }\n\n    static toDuration(duration) {\n        if (duration instanceof Duration) {\n            return duration;\n        }\n        return new this(duration);\n    }\n\n    increment(duration) {\n        duration = this.constructor.toDuration(duration);\n        for (const key in duration) {\n            if (!(key in TimeUnit.CANONICAL)) {\n                continue;\n            }\n            if (this.hasOwnProperty(key)) {\n                this[key] += duration[key];\n            } else {\n                this[key] = duration[key];\n            }\n        }\n        return this;\n    }\n\n    add(duration) {\n        return this.clone().increm(duration);\n    }\n\n    subtract(duration) {\n        duration = this.constructor.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    // Returns true if was defined terms of absolute primitives (anything less than a day)\n    isAbsolute() {\n        return !this.isVariable();\n    }\n\n    isVariable() {\n        return this.relativeDuration;\n    }\n\n    negate() {\n        let duration = new Duration(this);\n        for (const key in duration) {\n            if (key in TimeUnit.CANONICAL) {\n                duration[key] = -duration[key];\n            }\n        }\n        return duration;\n    }\n\n    // Returns a new Duration with a positive length\n    abs() {\n        return new Duration(Math.abs(+this));\n    }\n\n    clone() {\n        return new Duration(this);\n    }\n\n    // The primitive value\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    toNanoseconds() {\n        return Math.floor(+this * 1e6);\n    }\n\n    // TODO: for all these units, should have a way to get the float and int value\n    toMilliseconds() {\n        return Math.floor(+this);\n    }\n\n    getMilliseconds() {\n        return this.toMilliseconds() % 1000;\n    }\n\n    toSeconds() {\n        return Math.floor(+this / 1000);\n    }\n\n    getSeconds() {\n        return this.toSeconds() % 60;\n    }\n\n    toMinutes() {\n        return Math.floor(+this / (1000 * 60));\n    }\n\n    getMinutes() {\n        return this.toMinutes() % 60;\n    }\n\n    toHours() {\n        return Math.floor(+this / (1000 * 60 * 60));\n    }\n\n    getHours() {\n        return this.toHours() % 24;\n    }\n\n    toDays() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24));\n    }\n\n    toMonths() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 30));\n    }\n\n    toYears() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 365));\n    }\n\n    toString(locale) {\n        // Humanize the duration (should work with localization)\n    }\n}\n\nexport function addCanonicalTimeUnit(key, timeUnit) {\n    TimeUnit.ALL.push(timeUnit);\n    if (timeUnit.isVariable()) {\n        TimeUnit.VARIABLE_DURATION.push(timeUnit);\n    } else {\n        TimeUnit.FIXED_DURATION.push(timeUnit);\n    }\n\n    TimeUnit.CANONICAL[timeUnit.name] = timeUnit;\n    if (timeUnit.pluralName) {\n        TimeUnit.CANONICAL[timeUnit.pluralName] = timeUnit;\n    }\n\n    const timeUnitsName = timeUnit.pluralName;\n\n    // TODO: not sure about this anymore\n    Duration[key] = new Duration({\n        [timeUnitsName]: 1,\n    });\n}\n\nexport function addCanonicalTimeUnits() {\n    for (const key in TimeUnit) {\n        const timeUnit = TimeUnit[key];\n        if (timeUnit instanceof TimeUnit) {\n            addCanonicalTimeUnit(key, timeUnit);\n        }\n    }\n}\n\naddCanonicalTimeUnits();\n","import {padNumber, suffixWithOrdinal, extendsNative, instantiateNative, isNumber} from \"../base/Utils\";\nimport {TimeUnit, Duration} from \"./Duration\";\n\n// MAX_UNIX_TIME is either ~Feb 2106 in unix seconds or ~Feb 1970 in unix milliseconds\n// Any value less than this is interpreted as a unix time in seconds\n// If you want to go around this behavious, you can use the static method .fromUnixMilliseconds()\n// To disable, set this value to 0\nexport let MAX_AUTO_UNIX_TIME = Math.pow(2, 32);\n\nconst BaseDate = self.Date;\n\n@extendsNative\nclass StemDate extends BaseDate {\n    // Still need to do this mess because of Babel, should be removed when moving to native ES6\n    static create(value) {\n        // Try to do an educated guess if this date is in unix seconds or milliseconds\n        if (arguments.length === 1 && isNumber(value) && value < MAX_AUTO_UNIX_TIME) {\n            return instantiateNative(BaseDate, StemDate, value * 1000.0);\n        } else {\n            return instantiateNative(BaseDate, StemDate, ...arguments);\n        }\n    }\n\n    static toDate(date) {\n        if (date instanceof StemDate) {\n            return date;\n        } else {\n            return new this(date);\n        }\n    }\n\n    static now() {\n        return new this(BaseDate.now());\n    }\n\n    toDate() {\n        return this;\n    }\n\n    static fromUnixMilliseconds(unixMilliseconds) {\n        return this.create(new BaseDate(unixMilliseconds));\n    }\n\n    static fromUnixSeconds(unixSecons) {\n        return this.fromUnixMilliseconds(unixSecons * 1000);\n    }\n\n    // Creates a Date object from an instance of DOMHighResTimeStamp, returned by performance.now() for instance\n    static fromHighResTimestamp(highResTimestamp) {\n        return this.fromUnixMilliseconds(highResTimestamp + self.performance.timing.navigationStart)\n    }\n\n    // You don't usually need to call this in most cases, constructor uses MAX_AUX_UNIX_TIME\n    static unix(unixTime) {\n        return this.fromUnixSeconds(unixTime);\n    }\n\n    set(date) {\n        date = this.constructor.toDate(date);\n        this.setTime(date.setTime());\n    }\n\n    clone() {\n        return new this.constructor(this.getTime());\n    }\n\n    toUnix() {\n        return this.getTime() / 1000;\n    }\n\n    unix() {\n        return Math.floor(this.toUnix());\n    }\n\n    isBefore(date) {\n        return this.getTime() < StemDate.toDate(date).getTime();\n    }\n\n    equals(date) {\n        return this.getTime() === StemDate.toDate(date).getTime();\n    }\n\n    get(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        return timeUnit.getDateValue(this);\n    }\n\n    isSame(date, timeUnit) {\n        if (!timeUnit) {\n            return this.equals(date);\n        }\n\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        date = this.constructor.toDate(date);\n        let diff = this.diff(date);\n        if (diff >= 2 * timeUnit) {\n            // If the distance between the two dates is more than 2 standard lengths of the time unit\n            // This would be wrong if you would have time unit that can sometimes last more than twice their canonical duration\n            // Works correctly for all implemented time units\n            return false;\n        }\n        return this.get(timeUnit) == date.get(timeUnit);\n    }\n\n    isAfter(date) {\n        return this.getTime() > StemDate.toDate(date).getTime();\n    }\n\n    isSameOrBefore(date) {\n        return this.isBefore(date) || this.equals(date);\n    }\n\n    isSameOrAfter(date) {\n        return this.isAfter(date) || this.equals(date);\n    }\n\n    isBetween(a, b) {\n        return this.isSameOrAfter(a) && this.isSameOrBefore(b);\n    }\n\n    getWeekDay() {\n        return this.getDay();\n    }\n\n    addUnit(timeUnit, count = 1) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        count = parseInt(count);\n\n        if (!timeUnit.isVariable()) {\n            this.setTime(this.getTime() + timeUnit.getMilliseconds() * count);\n            return this;\n        }\n\n        while (!timeUnit.dateMethodSuffix) {\n            count *= timeUnit.multiplier;\n            timeUnit = timeUnit.baseUnit;\n        }\n\n        const dateMethodSuffix = timeUnit.dateMethodSuffix;\n        const currentValue = this[\"get\" + dateMethodSuffix]();\n        this[\"set\" + dateMethodSuffix](currentValue + count);\n\n        return this;\n    }\n\n    static min() {\n        // TODO: simplify and remove code duplication\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isBefore(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    static max() {\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isAfter(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    // Assign the given date if current value if greater than it\n    capUp(date) {\n        date = this.constructor.toDate(date);\n        if (this.isAfter(date)) {\n            this.set(date);\n        }\n    }\n\n    // Assign the given date if current value if less than it\n    capDown(date) {\n        date = this.constructor.toDate(date);\n        if (this.isBefore(date)) {\n            this.set(date);\n        }\n    }\n\n    roundDown(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        // TODO: this is wrong for semester, etc, should be different then\n        while (timeUnit = timeUnit.baseUnit) {\n            this[\"set\" + timeUnit.dateMethodSuffix](0);\n        }\n        return this;\n    }\n\n    roundUp(timeUnit) {\n        const roundDown = this.clone().roundDown(timeUnit);\n        if (this.equals(roundDown)) {\n            this.set(roundDown);\n            return this;\n        }\n        this.addUnit(timeUnit);\n        return this.roundDown(timeUnit);\n    }\n\n\n    round(timeUnit) {\n        let roundUp = this.clone().roundUp(timeUnit);\n        let roundDown = this.clone().roundDown(timeUnit);\n        // At a tie, preffer to round up, that's where time's going\n        if (this.diff(roundUp) <= this.diff(roundDown)) {\n            this.setTime(roundUp.getTime());\n        } else {\n            this.setTime(roundDown.getTime());\n        }\n        return this;\n    }\n\n    add(duration) {\n        duration = Duration.toDuration(duration);\n        if (duration.isAbsolute()) {\n            this.setTime(this.getTime() + duration.toMilliseconds());\n            return this;\n        }\n        for (const key in duration) {\n            const timeUnit = TimeUnit.CANONICAL[key];\n            if (timeUnit) {\n                this.addUnit(timeUnit, duration[key]);\n            }\n        }\n        return this;\n    }\n\n    subtract(duration) {\n        duration = Duration.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    diffDuration(date) {\n        return new Duration(this.diff(date));\n    }\n\n    // TODO: this should be a duration\n    diff(date) {\n        date = this.constructor.toDate(date);\n        return Math.abs(+this - date);\n    }\n\n    // Just to keep moment compatibility, until we actually implement locales\n    locale(loc) {\n        return this;\n    }\n\n    static splitToTokens(str) {\n        // TODO: \"[HH]HH\" will be split to [\"HH\", \"HH\"], so the escape does not solve the problem\n        let tokens = [];\n        let lastIsLetter = null;\n        let escapeByCurlyBracket = false;\n        let escapeBySquareBracket = false;\n        for (let i = 0; i < str.length; i++) {\n            let charCode = str.charCodeAt(i);\n            if (charCode === 125 && escapeByCurlyBracket) { // '}' ending the escape\n                escapeByCurlyBracket = false;\n                lastIsLetter = null;\n            } else if (charCode === 93 && escapeBySquareBracket) { // ']' ending the escape\n                escapeBySquareBracket = false;\n                lastIsLetter = null;\n            } else if (escapeByCurlyBracket || escapeBySquareBracket) { // The character is escaped no matter what it is\n                tokens[tokens.length - 1] += str[i];\n            } else if (charCode === 123) { // '{' starts a new escape\n                escapeByCurlyBracket = true;\n                tokens.push(\"\");\n            } else if (charCode === 91) { // '[' starts a new escape\n                escapeBySquareBracket = true;\n                tokens.push(\"\");\n            } else {\n                let isLetter = (65 <= charCode && charCode <= 90) || (97 <= charCode && charCode <= 122);\n                if (isLetter === lastIsLetter) {\n                    tokens[tokens.length - 1] += str[i];\n                } else {\n                    tokens.push(str[i]);\n                }\n                lastIsLetter = isLetter;\n            }\n        }\n        if (escapeByCurlyBracket || escapeBySquareBracket) {\n            console.warn(\"Unfinished escaped sequence!\");\n        }\n        return tokens;\n    }\n\n    evalToken(token) {\n        let func = this.constructor.tokenFormattersMap.get(token);\n        if (!func) {\n            return token;\n        }\n        return func(this);\n    }\n\n    format(str=\"ISO\") {\n        let tokens = this.constructor.splitToTokens(str);\n        tokens = tokens.map(token => this.evalToken(token));\n        return tokens.join(\"\");\n    }\n\n    isValid() {\n        return (this.toString() !== \"Invalid Date\");\n    }\n\n    utc() {\n        // Temp hack\n        return this.constructor.fromUnixMilliseconds(+this + this.getTimezoneOffset() * 60 * 1000);\n    }\n\n    isLeapYear() {\n        let year = this.getFullYear();\n        return (year % 4 == 0) && ((year % 100 != 0) || (year % 400 == 0));\n    }\n\n    daysInMonth() {\n        // The 0th day of the next months is actually the last day in the current month\n        let lastDayInMonth = new BaseDate(this.getFullYear(), this.getMonth() + 1, 0);\n        return lastDayInMonth.getDate();\n    }\n\n    getDaysCountPerMonth(index) {\n        const months = [31, 28 + this.isLeapYear(), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        return months[index];\n    }\n\n    getDayInYear() {\n        const month = this.getMonth();\n        let totalDays = 0;\n        for (let i = 0; i < month; i += 1) {\n            totalDays += this.getDaysCountPerMonth(i);\n        }\n        return totalDays + this.getDate() - 1;\n    }\n\n    getWeekInYear() {\n        return (this.getDayInYear() - this.getWeekDay()) / 7;\n    }\n}\n\nDuration.prototype.format = function (pattern) {\n    return StemDate.fromUnixMilliseconds(this.toMilliseconds()).utc().format(pattern);\n};\n\nconst miniWeekDays = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\nconst shortWeekDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nconst longWeekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconst shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nconst longMonths = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\nclass DateLocale {\n    constructor(obj={}) {\n        Object.assign(this, obj);\n        this.formats = this.formats || {};\n    }\n\n    getFormat(longDate) {\n        return this.formats[longDate];\n    }\n\n    setFormat(pattern, func) {\n        this.formats[pattern] = func;\n    }\n\n    format(date, pattern) {\n        return date.format(pattern);\n    }\n\n    getRelativeTime() {\n        throw Error(\"Not implemented\");\n    }\n}\n\nStemDate.tokenFormattersMap = new Map([\n    [\"ISO\", date => date.toISOString()],\n\n    [\"Y\", date => date.getFullYear()],\n    [\"YY\", date => padNumber(date.getFullYear() % 100, 2)],\n    [\"YYYY\", date => date.getFullYear()],\n\n    [\"M\", date => (date.getMonth() + 1)],\n    [\"MM\", date => padNumber(date.getMonth() + 1, 2)],\n    [\"MMM\", date => shortMonths[date.getMonth()]],\n    [\"MMMM\", date => longMonths[date.getMonth()]],\n\n    [\"D\", date => date.getDate()],\n    [\"Do\", date => suffixWithOrdinal(date.getDate())],\n    [\"DD\", date => padNumber(date.getDate(), 2)],\n\n    [\"d\", date => date.getWeekDay()],\n    [\"do\", date => suffixWithOrdinal(date.getWeekDay())],\n    [\"dd\", date => miniWeekDays[date.getWeekDay()]],\n    [\"ddd\", date => shortWeekDays[date.getWeekDay()]],\n    [\"dddd\", date => longWeekdays[date.getWeekDay()]],\n\n    [\"H\", date => date.getHours()],\n    [\"HH\", date => padNumber(date.getHours(), 2)],\n    [\"h\", date => date.getHours() % 12],\n    [\"hh\", date => padNumber(date.getHours() % 12, 2)],\n\n    [\"m\", date => date.getMinutes()],\n    [\"mm\", date => padNumber(date.getMinutes(), 2)],\n\n    [\"s\", date => date.getSeconds()],\n    [\"ss\", date => padNumber(date.getSeconds(), 2)],\n\n    [\"S\", date => Math.floor(date.getMilliseconds() / 100)],\n    [\"SS\", date => padNumber(Math.floor(date.getMilliseconds() / 10), 2)],\n    [\"SSS\", date => padNumber(date.getMilliseconds(), 3)],\n    [\"ms\", date => padNumber(date.getMilliseconds(), 3)],\n\n    [\"LL\", date => date.format(\"MMMM Do, YYYY\")],\n]);\n\nlet Date = StemDate;\n\nexport {Date, StemDate};\n","import {StemDate} from \"./Date\";\nimport {TimeUnit} from \"./Duration\"\n\n// File meant to handle server time/client time differences\nlet ServerTime = {\n    now() {\n        return StemDate().subtract(this.getOffset());\n    },\n\n    getOffset() {\n        return this.offset;\n    },\n\n    set(date, onlyIfMissing=false) {\n        if (!onlyIfMissing || this.offset == null) {\n            this.offset = Date.now() - (new StemDate(date));\n        }\n    },\n\n    setPageLoadTime(unixTime, estimatedLatency=0) {\n        this.serverPageLoad = unixTime;\n        this.offset = performance.timing.responseStart - unixTime * 1000;\n    }\n};\n\n// TODO: should use +TimeUnit.DAY\nexport const DAY_IN_MILLISECONDS = 24 * 60 * 60 * 1000;\n\n// TODO: should have a generic method time1.isSame(\"x\", time);\nexport function isDifferentDay(timeA, timeB) {\n    // return !StemDate(timeA).same(TimeUnit.DAY, timeB);\n    timeA = StemDate(timeA);\n    timeB = StemDate(timeB);\n\n    // First check if difference is gre\n    if (timeA.diff(timeB) > +TimeUnit.DAY) {\n        return true;\n    }\n    // Check if different day of the month, when difference is less than a day\n    return (timeA.getDate() !== timeB.getDate());\n}\n\nexport {ServerTime};\n\nexport * from \"./Date\";\nexport * from \"./Duration\";\n","import {UI} from \"./UIBase\";\nimport {TextInput} from \"./input/Input\";\nimport {VolatileFloatingWindow} from \"./modal/FloatingWindow\";\nimport {VerticalSlideBar} from \"./UIPrimitives\";\nimport {StemDate, DAY_IN_MILLISECONDS} from \"../time/Time\";\n\nclass DatePickerTable extends UI.Element {\n\n}\n\nclass TimePickerWidget extends UI.Element {\n    render() {\n        let hours = parseInt(this.options.time / (60 * 60 * 1000));\n        let minutes = parseInt((this.options.time - 60 * 60 * 1000 * hours) / (60 * 1000));\n        let seconds = parseInt((this.options.time - 60 * 60 * 1000 * hours - 60 * 1000 * minutes) / (1000));\n        let textSpanStyle = {\n            display: \"inline-block\",\n            flex: 1,\n            textAlign: \"center\",\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            padding: \"0 5px\"\n        };\n        return [\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <div style={textSpanStyle} ref=\"hours\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"minutes\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"seconds\" />\n            </div>,\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <VerticalSlideBar value={hours / 23} ref=\"hourSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={minutes / 59} ref=\"minuteSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={seconds / 59} ref=\"secondSlider\" height={200} barHeight={5} style={{flex: 1, marginRight: \"5px\"}}/>\n            </div>\n        ];\n    }\n\n    onMount() {\n        let changeCallback = () => {\n            let hours = parseInt(this.hourSlider.getValue() * 23);\n            let minutes = parseInt(this.minuteSlider.getValue() * 59);\n            let seconds = parseInt(this.secondSlider.getValue() * 59);\n            this.hours.node.innerHTML = (hours < 10 ? \"0\" : \"\") + hours;\n            this.minutes.node.innerHTML = (minutes < 10 ? \"0\" : \"\") + minutes;\n            this.seconds.node.innerHTML = (seconds < 10 ? \"0\" : \"\") + seconds;\n            let time = (hours * 60 * 60  + minutes * 60 + seconds) * 1000;\n            this.dispatch(\"changeTime\", time);\n        };\n        this.hourSlider.addListener(\"change\", changeCallback);\n        this.minuteSlider.addListener(\"change\", changeCallback);\n        this.secondSlider.addListener(\"change\", changeCallback);\n        changeCallback();\n    }\n}\n\nclass DateTimeWindow extends VolatileFloatingWindow {\n    setOptions(options) {\n        options.style = Object.assign({\n            marginBottom: \"5px\",\n            border: \"1px solid #bbb\",\n            borderRadius: \"2px\",\n            position: \"absolute\",\n            overflow: \"auto\",\n            boxShadow: \"0 6px 12px rgba(0,0,0,.175)\",\n            backgroundColor: \"white\",\n            padding: \"10px\",\n            zIndex: 10000\n        }, options.style || {});\n        super.setOptions(options);\n        this.computeInitial();\n    }\n\n    render() {\n        return [\n            <DatePickerTable ref=\"datePicker\" date={this.date} />,\n            <TimePickerWidget ref=\"timePicker\" time={this.time} />\n        ];\n    }\n\n    computeInitial() {\n        let initialDateTime = StemDate.parse(this.formatISO(this.options.initialDateTime)) || StemDate.now();\n        this.time = initialDateTime % DAY_IN_MILLISECONDS;\n        this.date = parseInt(initialDateTime / DAY_IN_MILLISECONDS);\n    }\n\n    formatISO(str) {\n        if (!str) {\n            return \"\";\n        }\n        while (str.indexOf(\"/\") !== -1) {\n            str = str.replace(\"/\", \" \");\n        }\n        while (str.indexOf(\":\") !== -1) {\n            str = str.replace(\":\", \" \");\n        }\n        let tokens = str.split(\" \");\n        return tokens[2] + \"-\" + tokens[1] + \"-\" + tokens[0] + \"T\" + tokens[3] + \":\" + tokens[4] + \":\" + tokens[5] + \".000Z\";\n    }\n\n    getValue() {\n        let currentDate = this.time + DAY_IN_MILLISECONDS * this.date;\n        currentDate = StemDate.create(currentDate);\n        let date = currentDate.toISOString();\n        date = date.slice(8, 10) + \"/\" + date.slice(5, 7) + \"/\" + date.slice(0, 4);\n        return date + \" \" + currentDate.toTimeString().slice(0, 8);\n    }\n\n    onMount() {\n        this.options.output.setValue(this.getValue());\n        this.datePicker.addListener(\"changeDate\", (date) => {\n            this.date = date;\n            this.options.output.setValue(this.getValue());\n        });\n        this.timePicker.addListener(\"changeTime\", (time) => {\n            this.time = time;\n            this.options.output.setValue(this.getValue());\n        });\n    }\n}\n\nclass DateTimePicker extends UI.Element {\n    setOptions(options) {\n        options.format = options.format || \"DD/MM/YYYY HH:mm:ss\";\n        super.setOptions(options);\n        if (this.options.date) {\n            this.setDate(this.options.date);\n        }\n    }\n\n    parseDateFromString(str, format) {\n        if (format !== \"DD/MM/YYYY HH:mm:ss\") {\n            throw Error(\"Format not supported!\");\n        }\n        // Just parsing DD/MM/YYYY HH:mm:ss for now\n        while (str.indexOf('/') !== -1) {\n            str = str.replace('/', ' ');\n        }\n        while (str.indexOf(':') !== -1) {\n            str = str.replace(':', ' ');\n        }\n        let tokens = str.split(' ');\n        let integerTokens = [];\n        for (let token of tokens) {\n            let number = parseFloat(token);\n            if (!isNaN(number)) {\n                integerTokens.push(number);\n            }\n        }\n        let years = (integerTokens.length >= 3 ? integerTokens[2] : 0);\n        let months = (integerTokens.length >= 2 ? integerTokens[1] - 1 : 0);\n        let days = (integerTokens.length >= 1 ? integerTokens[0] : 0);\n        let hours = (integerTokens.length >= 4 ? integerTokens[3] : 0);\n        let minutes = (integerTokens.length >= 5 ? integerTokens[4] : 0);\n        let seconds = (integerTokens.length >= 6 ? integerTokens[5] : 0);\n        let date = new StemDate(years, months, days, hours, minutes, seconds);\n        if (!date.getTime()) {\n            return null;\n        }\n        return date;\n    }\n\n    getDate() {\n        let str = this.textInput.getValue();\n        if (!str) {\n            return null;\n        }\n        let format = this.options.format;\n        return this.parseDateFromString(str, format);\n    }\n\n    setDate(date) {\n        this.options.date = date;\n        this.options.dateString = date.format(this.options.format);\n        if (this.textInput) {\n            this.textInput.setValue(this.options.dateString);\n        }\n    }\n\n    render() {\n        return [\n            <TextInput ref=\"textInput\" placeholder={this.options.format} value={this.options.dateString || \"\"} />,\n            /*<Button ref=\"calendarSpan\" faIcon=\"calendar\"/>*/\n        ]\n    }\n\n    // onMount() {\n    //     this.calendarSpan.addClickListener((event) => {\n    //         if (!this.dateTimeWindow) {\n    //             let textInputOffset = getOffset(this.textInput);\n    //             this.dateTimeWindow = DateTimeWindow.create(document.body, {\n    //                 style: {\n    //                     top: textInputOffset.top + 5 + this.textInput.getHeight() + \"px\",\n    //                     left: textInputOffset.left + 5 + \"px\"\n    //                 },\n    //                 initialDateTime: this.textInput.getValue(),\n    //                 output: this.textInput\n    //             });\n    //         } else {\n    //             this.dateTimeWindow.hide();\n    //             delete this.dateTimeWindow;\n    //         }\n    //         event.stopPropagation();\n    //     });\n    // }\n}\n\nexport {DateTimePicker};\n","export function enqueueIfNotLoaded(target, key, descriptor) {\n    const method = descriptor.value;\n    return Object.assign({}, descriptor, {\n        value: function() {\n            if (this.isLoaded()) {\n                return method.call(this, ...arguments);\n            } else {\n                this.enqueueMethodCall(method, arguments);\n                return null;\n            }\n        }\n    });\n}\n\n\nexport const EnqueueableMethodMixin = (BaseClass) => class EnqueueableMethodClass extends BaseClass {\n    isLoaded() {\n        throw Error(\"Not implemented!\");\n    }\n\n    enqueueMethodCall(method, args) {\n        this.methodCallQueue = this.methodCallQueue || [];\n        this.methodCallQueue.push([method, args]);\n    }\n\n    resolveQueuedMethods() {\n        if (!this.isLoaded()) {\n            throw Error(\"Cannot process scheduled jobs, element not loaded\");\n        }\n        for (let methodCall of this.methodCallQueue || []) {\n            methodCall[0].call(this, ...methodCall[1]);\n        }\n        delete this.methodCallQueue;\n    }\n};\n","// Wrapper over the Ace code editor, needs ace to be loaded\n// TODO: should be renamed to AceCodeEditor?\nimport {UI} from \"./UIBase\";\nimport {StyleSheet, styleRule} from \"./Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {EnqueueableMethodMixin, enqueueIfNotLoaded} from \"../base/EnqueueableMethodMixin\";\n\n\nclass CodeEditor extends EnqueueableMethodMixin(UI.Element) {\n    static requireAce(callback) {\n        throw Error(\"You need to implement requireAce\");\n    }\n\n    isLoaded() {\n        return !!this.getAce();\n    }\n\n    setOptions(options) {\n        let defaultOptions = {\n            aceMode: \"text\",\n            readOnly: false,\n            aceTheme: \"dawn\",\n            aceKeyboardHandler: \"ace\",\n            fontSize: 14,\n            tabSize: 4,\n            showLineNumber: true,\n            showPrintMargin: false,\n            printMarginSize: 80,\n        };\n        options = Object.assign(defaultOptions, options);\n\n        super.setOptions(options);\n\n        if (this.options.aceMode) {\n            this.options.aceMode = this.options.aceMode.toLowerCase();\n        }\n\n        if (this.options.aceMode === \"cpp\" || this.options.aceMode === \"c\") {\n            this.options.aceMode = \"c_cpp\";\n        }\n\n        if (this.getAce()) {\n            this.applyAceOptions();\n        }\n    }\n\n    redraw() {\n        if (this.getAce()) {\n            this.aceResize();\n            this.applyRef();\n            return;\n        }\n        super.redraw();\n    }\n\n    whenLoaded(callback) {\n        if (this.isLoaded()) {\n            callback();\n        } else {\n            this.addListenerOnce(\"aceReady\", callback);\n        }\n    }\n\n    onMount() {\n        // Sometimes when the parent div resizes the ace editor doesn't fully update.\n        this.addListener(\"resize\", () => {\n            this.aceResize();\n        });\n\n        this.addListener(\"change\", () => {\n            this.aceResize();\n        });\n\n        if (!window.ace) {\n            this.constructor.requireAce(() => {\n                this.onDelayedMount();\n            });\n            return;\n        }\n        this.onDelayedMount();\n    }\n\n    onDelayedMount() {\n        this.ace = window.ace.edit(this.node);\n\n        // Removes some warnings\n        this.getAce().$blockScrolling = Infinity;\n\n        this.resolveQueuedMethods();\n\n        this.applyAceOptions();\n\n        //#voodoo was here to automatically redraw when unhiding\n        //This Ace event listener might be useful in the future\n        this.getAce().renderer.$textLayer.addEventListener(\"changeCharacterSize\", (event) => {\n            this.aceResize();\n        });\n        this.dispatch(\"aceReady\");\n    }\n\n    getAce() {\n        return this.ace;\n    }\n\n    getValue() {\n        return this.getAce().getValue();\n    }\n\n    @enqueueIfNotLoaded\n    applyAceOptions() {\n        //set the language mode\n        this.setAceMode(this.options.aceMode);\n        this.setAceKeyboardHandler(this.options.aceKeyboardHandler);\n        this.setAceTheme(this.options.aceTheme);\n        this.setAceFontSize(this.options.fontSize);\n        this.setAceTabSize(this.options.tabSize);\n        this.setAceLineNumberVisible(this.options.showLineNumber);\n        this.setAcePrintMarginVisible(this.options.showPrintMargin);\n        this.setAcePrintMarginSize(this.options.printMarginSize);\n        this.setReadOnly(this.options.readOnly);\n        this.setUseWrapMode(this.options.lineWrapping || false);\n\n        if (this.options.numLines) {\n            this.options.maxLines = this.options.minLines = this.options.numLines;\n        }\n\n        if (this.options.maxLines) {\n            this.setAceOptions({\n                maxLines: this.options.maxLines\n            });\n        }\n\n        if (this.options.minLines) {\n            this.setAceOptions({\n                minLines: this.options.minLines\n            });\n        }\n\n        if (this.options.value) {\n            this.setValue(this.options.value, -1);\n        }\n        if (this.options.hasOwnProperty(\"enableBasicAutocompletion\") ||\n            this.options.hasOwnProperty(\"enableLiveAutocompletion\")) {\n            let langTools =\"/static/js/ext/ace/ext-language_tools.js\";\n            require([langTools], () => {\n                this.setBasicAutocompletion(this.options.enableBasicAutocompletion);\n                this.setLiveAutocompletion(this.options.enableLiveAutocompletion);\n                this.setSnippets(this.options.enableSnippets);\n            });\n        }\n    }\n\n    @enqueueIfNotLoaded\n    aceResize() {\n        this.getAce().resize();\n    }\n\n    @enqueueIfNotLoaded\n    setValue(sourceCode, fakeUserChange) {\n        // We need to wrap the ace call in these flags so any event listeners can know if this change\n        // was done by us or by the user\n        this.apiChange = !fakeUserChange;\n        this.getAce().setValue(sourceCode, -1);\n        this.apiChange = false;\n    }\n\n    @enqueueIfNotLoaded\n    setAceOptions(options) {\n        this.getAce().setOptions(options);\n    }\n\n    // TODO: should this be setEditable?\n    @enqueueIfNotLoaded\n    setReadOnly(value) {\n        this.getAce().setReadOnly(value);\n    };\n\n    @enqueueIfNotLoaded\n    setAceMode(aceMode) {\n        if (aceMode.hasOwnProperty(\"aceMode\")) {\n            aceMode = aceMode.aceMode;\n        }\n        this.getAce().getSession().setMode(\"ace/mode/\" + aceMode);\n    }\n\n    getAceKeyboardHandler() {\n        return this.getAce().$keybindingId;\n    }\n\n    @enqueueIfNotLoaded\n    setAceKeyboardHandler(keyboardHandler) {\n        if (keyboardHandler.hasOwnProperty(\"aceName\")) {\n            keyboardHandler = keyboardHandler.aceName;\n        }\n        this.getAce().setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n    }\n\n    getAceMode() {\n        return this.getAce().getSession().getMode();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTheme(theme) {\n        if (theme.hasOwnProperty(\"aceName\")) {\n            theme = theme.aceName;\n        }\n        this.getAce().setTheme(\"ace/theme/\" + theme);\n    }\n\n    getAceTheme() {\n        return this.getAce().getTheme();\n    }\n\n    @enqueueIfNotLoaded\n    setAceFontSize(fontSize) {\n        this.getAce().setOptions({\n            fontSize: fontSize + \"px\"\n        });\n    }\n\n    getAceFontSize() {\n        return this.getAce().getFontSize();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTabSize(tabSize) {\n        this.getAce().setOptions({\n            tabSize: tabSize\n        });\n    }\n\n    getAceTabSize() {\n        return this.getAce().getOption(\"tabSize\");\n    }\n\n    @enqueueIfNotLoaded\n    setAceLineNumberVisible(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getAceLineNumberVisible() {\n        return this.getAce().renderer.getShowGutter();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginVisible(value) {\n        this.getAce().setShowPrintMargin(value);\n    }\n\n    getAcePrintMarginVisible() {\n        return this.getAce().getShowPrintMargin();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginSize(printMarginSize) {\n        this.getAce().setPrintMarginColumn(printMarginSize);\n    }\n\n    getAcePrintMarginSize() {\n        return this.getAce().getPrintMarginColumn();\n    }\n\n    @enqueueIfNotLoaded\n    setBasicAutocompletion(value) {\n        this.getAce().setOptions({\n            enableBasicAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setLiveAutocompletion(value) {\n        this.getAce().setOptions({\n            enableLiveAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setSnippets(value) {\n        this.getAce().setOptions({\n            enableSnippets: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setAnnotations(annotations) {\n        this.getAce().getSession().setAnnotations(annotations);\n    }\n\n    @enqueueIfNotLoaded\n    setUseWrapMode(value) {\n        this.getAce().getSession().setUseWrapMode(value);\n    }\n\n    @enqueueIfNotLoaded\n    setIndentedSoftWrap(value) {\n        this.getAce().setOption(\"indentedSoftWrap\", value);\n    }\n\n    @enqueueIfNotLoaded\n    blockScroll() {\n        this.getAce().$blockScrolling = Infinity;\n    }\n\n    @enqueueIfNotLoaded\n    setFoldStyle(foldStyle) {\n        this.getAce().getSession().setFoldStyle(foldStyle);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightActiveLine(value) {\n        this.getAce().setHighlightActiveLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightGutterLine(value) {\n        this.getAce().setHighlightGutterLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setShowGutter(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getScrollTop() {\n        return this.getAce().getSession().getScrollTop();\n    }\n\n    @enqueueIfNotLoaded\n    setScrollTop(value) {\n        this.getAce().getSession().setScrollTop(value);\n    }\n\n    @enqueueIfNotLoaded\n    addMarker(startLine, startCol, endLine, endCol, ...args) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().addMarker(new Range(startLine, startCol, endLine, endCol), ...args);\n    }\n\n    @enqueueIfNotLoaded\n    removeMarker(marker) {\n        this.getAce().getSession().removeMarker(marker);\n    }\n\n    getRendererLineHeight() {\n        return this.getAce().renderer.lineHeight;\n    }\n\n    getTextRange(startLine, startCol, endLine, endCol) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().doc.getTextRange(new Range(startLine, startCol, endLine, endCol));\n    }\n\n    @enqueueIfNotLoaded\n    setTextRange(startLine, startCol, endLine, endCol, text) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().replace(new Range(startLine, startCol, endLine, endCol), text);\n    }\n\n    @enqueueIfNotLoaded\n    removeLine(line) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().remove(new Range(line, 0, line + 1, 0));\n    }\n\n    @enqueueIfNotLoaded\n    insertAtLine(line, str) {\n        let column = this.getAce().session.getLine(line - 1).length;\n        this.getAce().gotoLine(line, column);\n        this.insert(str);\n    }\n\n    @enqueueIfNotLoaded\n    replaceLine(line, str) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().replace(new Range(line, 0, line + 1, 0), str);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionEventListener(event, callback) {\n        this.getAce().getSession().addEventListener(event, callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionChangeListener(callback) {\n        this.addAceSessionEventListener(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceChangeListener(callback) {\n        this.getAce().on(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceEventListener() {\n        this.getAce().addEventListener(...arguments);\n    }\n\n    @enqueueIfNotLoaded\n    focus() {\n        this.getAce().focus();\n    }\n\n    @enqueueIfNotLoaded\n    gotoEnd() {\n        let editor = this.getAce();\n        let editorRow = editor.session.getLength() - 1;\n        let editorColumn = editor.session.getLine(editorRow).length;\n        editor.gotoLine(editorRow + 1, editorColumn);\n    }\n\n    @enqueueIfNotLoaded\n    setUndoManager(undoManager) {\n        this.getAce().getSession().setUndoManager(undoManager);\n    }\n\n    @enqueueIfNotLoaded\n    setAceRendererOption(key, value) {\n        this.getAce().renderer.setOption(key, value);\n    }\n\n    // Inserts the text at the current cursor position\n    @enqueueIfNotLoaded\n    insert(text) {\n        this.getAce().insert(text);\n    }\n\n    // Appends the text at the end of the document\n    @enqueueIfNotLoaded\n    append(text) {\n        var lastRow = this.getAce().getSession().getLength() - 1;\n        if (lastRow < 0) {\n            lastRow = 0;\n        }\n        var lastRowLength = this.getAce().getSession().getLine(lastRow).length;\n        var scrolledToBottom = this.getAce().isRowFullyVisible(lastRow);\n        // console.log(\"Scroll to bottom \", scrolledToBottom);\n        this.getAce().getSession().insert({\n            row: lastRow,\n            column: lastRowLength\n        }, text);\n\n        this.aceResize();\n\n        if (scrolledToBottom) {\n            // TODO: Include scroll lock option!\n            // TODO: See if scrolling to bottom can be done better\n            // TODO: for some reason the scroll bar height is not being updated, this needs to be fixed\n            this.getAce().scrollToLine(this.getAce().getSession().getLength() - 1, true, true, function () {});\n        }\n    }\n\n    copyTextToClipboard() {\n        this.getAce().selectAll();\n        this.getAce().focus();\n        document.execCommand('copy');\n    }\n}\n\n\nclass StaticCodeHighlighterStyle extends StyleSheet {\n    @styleRule\n    hideActive = {\n        \" .ace_gutter-active-line\": {\n            display: \"none\",\n        },\n        \" .ace_active-line\": {\n            display: \"none\",\n        },\n        \" .ace_cursor\": {\n            display: \"none\",\n        }\n    }\n}\n\n\n@registerStyle(StaticCodeHighlighterStyle)\nclass StaticCodeHighlighter extends CodeEditor {\n    setOptions(options) {\n        options = Object.assign({\n            fontSize: 13,\n            readOnly: true,\n            lineWrapping: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.hideActive)\n    }\n}\n\nexport {CodeEditor, StaticCodeHighlighter};\n","import {UI, Image, Link, registerStyle, StyleSheet, styleRule} from \"UI\";\n\n\n\nconst getPathPrefix = () => window.location.hostname === \"localhost\" ? \"../../\" : \"dbribeapp/\";\n\nlet transitionDelay = .9;\n\nconst getTransitionDelay = () => {\n    transitionDelay += .1;\n    return transitionDelay;\n};\n\nclass ImportedSVG extends Image {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            src: getPathPrefix() + \"static/svg/\" + this.getSVGName() + \".svg\",\n        });\n    }\n\n    getSVGName() {\n        return this.options.svgName;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            opacity: 0,\n            transform: \"translateY(-69px)\",\n            backdropFilter: \"blur(10px)\",\n            transition: \"transform, opacity, backdrop-filter\",\n            transitionDuration: \"1s\",\n            transitionTimingFunction: \"ease\",\n            transitionDelay: getTransitionDelay() + \"s\",\n        });\n    }\n\n    onMount() {\n        super.onMount();\n        setTimeout(() => {\n            this.setStyle({\n                opacity: 1,\n                transform: \"translateY(0)\",\n                backdropFilter: \"blur(0)\",\n            });\n        });\n    }\n}\n\n\nclass LogoStyle extends StyleSheet {\n    @styleRule\n    logo = {\n        display: \"inline-block\",\n        margin: \"20px\",\n        height: \"80px\",\n        width: \"80px\",\n        transitionProperty: \"transform\",\n        transitionTimingFunction: \"ease\",\n        transform: \"translateY(0) scale(1)\",\n        transitionDuration: \".3s\",\n        \":hover\": {\n            transform: \"translateY(-8px) scale(1.1)\",\n        }\n    }\n}\n\n\n@registerStyle(LogoStyle)\nexport class Logo extends Link {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            href: this.getHref(),\n            newTab: true,\n        });\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.logo);\n    }\n\n    render() {\n        return [<ImportedSVG svgName={this.getSVGName()}/>];\n    }\n}\n\n\nexport class MediumLogo extends Logo {\n    getSVGName() {return \"medium\";}\n\n    getHref() {return \"https://medium.com/@dbribe\";}\n}\n\n\nexport class FacebookLogo extends Logo {\n    getSVGName() {return \"facebook\";}\n\n    getHref() {return \"https://www.facebook.com/k1r496\";}\n}\n\n\nexport class GitHubLogo extends Logo {\n    getSVGName() {return \"github\";}\n\n    getHref() {return \"https://github.com/dbribe\";}\n}\n\n\nexport class InstagramLogo extends Logo {\n    getSVGName() {return \"instagram\";}\n\n    getHref() {return \"https://www.instagram.com/dbribe/\";}\n}\n\n\nexport class LinkedInLogo extends Logo {\n    getSVGName() {return \"linkedin\";}\n\n    getHref() {return \"https://www.linkedin.com/in/denis-mita/\";}\n}\n\n\nexport class PinterestLogo extends Logo {\n    getSVGName() {return \"pinterest\";}\n\n    getHref() {return \"https://www.pinterest.co.uk/skywalkerrr1996/\";}\n}\n\n\nexport class TwitterLogo extends Logo {\n    getSVGName() {return \"twitter\";}\n\n    getHref() {return \"https://twitter.com/d_bribe\";}\n}\n\n\nexport class YouTubeLogo extends Logo {\n    getSVGName() {return \"youtube\";}\n\n    getHref() {return \"https://www.youtube.com/channel/UC0k47b8_h6x2I7R5vMTLpMg?view_as=subscriber\";}\n}\n\n\nexport class Shadow extends ImportedSVG {\n    getSVGName() {return \"shadow\";}\n}\n\n\nexport class DBribe extends ImportedSVG {\n    getSVGName() {return \"dbribe\";}\n}","import {UI, Link, registerStyle, RawHTML} from \"UI\";\nimport {StyleSheet, styleRule} from \"UI\";\nimport {MediumLogo, FacebookLogo, InstagramLogo, GitHubLogo, LinkedInLogo, PinterestLogo, YouTubeLogo, TwitterLogo,\n    Shadow, DBribe} from \"./SVGComponents\";\n\n\nclass IndexPageStyle extends StyleSheet {\n    @styleRule\n    container = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n    };\n}\n\n\n@registerStyle(IndexPageStyle)\nexport class IndexPage extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        return [\n            <div style={{flex: 1, width: \"-webkit-fill-available\", maxWidth: \"550px\", padding: \"30px\", paddingTop: 0}}>\n                <DBribe style={{display: \"block\", margin: \"10vh auto\", marginBottom: \"5vh\", width: \"100%\"}}/>\n            </div>,\n            <div style={{ minHeight: \"40vh\", margin: \"0 auto\", textAlign: \"center\"}}>\n                <YouTubeLogo/>\n                <LinkedInLogo/>\n                <FacebookLogo/>\n                <InstagramLogo/>\n                <TwitterLogo/>\n                <MediumLogo/>\n                <PinterestLogo/>\n                <GitHubLogo/>\n            </div>\n        ];\n    }\n\n    onMount() {\n\n    }\n}","import {Dispatchable} from \"../base/Dispatcher\";\n\nclass State extends Dispatchable {\n    constructor() {\n        super();\n        this.stores = new Map();\n        // A version of applyEvent that's binded to this\n        // TODO: applyEvent should use the @bind decorator\n        this.applyEventWrapper = (event) => {\n            this.applyEvent(event);\n        }\n    }\n\n    getStore(objectType) {\n        objectType = objectType && objectType.toLowerCase();\n        return this.stores.get(objectType);\n    }\n\n    getStoreForEvent(event) {\n        const objectType = event.objectType || event.store;\n        return this.getStore(objectType);\n    }\n\n    addStore(store) {\n        let objectType = store.objectType.toLowerCase();\n        if (!this.stores.has(objectType)) {\n            this.stores.set(objectType, store);\n        } else {\n            throw Error(\"GlobalState: Adding a store for an existing object type: \" + store.objectType);\n        }\n    }\n\n    applyEvent(event) {\n        if (event == null) {\n            return;\n        }\n        if (Array.isArray(event)) {\n            for (let individualEvent of event) {\n                this.applyEvent(individualEvent);\n            }\n            return;\n        }\n        if (event.state) {\n            this.importState(event.state);\n            // We can have events that only have a state\n            if (!this.getStoreForEvent(event)) {\n                return;\n            }\n        }\n        let store = this.getStoreForEvent(event);\n        if (store) {\n            return store.applyEvent(event);\n        } else {\n            console.log(\"GlobalState: Missing store for event: \", event);\n        }\n    }\n\n    get(objectType, objectId) {\n        let store = this.getStore(objectType);\n        if (store) {\n            let args = Array.prototype.slice.call(arguments, 1);\n            return store.get(...args);\n        } else {\n            console.error(\"GlobalState: Can't find store \", objectType);\n            return null;\n        }\n    }\n\n    // Import the store for objectType and remove it from stateMap\n    importStateFromTempMap(objectType, stateMap) {\n        let storeState = stateMap.get(objectType);\n        stateMap.delete(objectType);\n\n        let store = this.getStore(objectType);\n\n        if (!store) {\n            console.error(\"Failed to import state, can't find store \", objectType);\n            return;\n        }\n        for (let dependency of store.getDependencies()) {\n            this.importStateFromTempMap(dependency.toLowerCase(), stateMap);\n        }\n        store.importState(storeState);\n    }\n\n    // Imports the state information from a plain object\n    importState(state) {\n        if (Array.isArray(state)) {\n            for (let obj of state) {\n                this.importState(obj);\n            }\n            return;\n        }\n        // Import everything in a map and then do an implicit topological sort by dependencies\n        let stateMap = new Map();\n        for (let objectType in state) {\n            stateMap.set(objectType.toLowerCase(), state[objectType]);\n        }\n        while (stateMap.size > 0) {\n            let allKeys = stateMap.keys();\n            let objectType = allKeys.next().value;\n            this.importStateFromTempMap(objectType, stateMap);\n        }\n    }\n}\n\nlet GlobalState = new State();\n\n// When creating a store without an explicit state, this value should be assumes\n// Change it to null for instance of you don't want stores to be added to any state by default\nlet DefaultState = GlobalState;\n\nself.GlobalState = GlobalState;\n\nexport {State, GlobalState, DefaultState};\n","import {Dispatchable, CleanupJobs} from \"../base/Dispatcher\";\nimport {DefaultState} from \"./State\";\n\n// The store information is kept in a symbol, to not interfere with serialization/deserialization\nexport const StoreSymbol = Symbol(\"Store\");\n\nclass StoreObject extends Dispatchable {\n    constructor(obj, event, store) {\n        super();\n        Object.assign(this, obj);\n        this.setStore(store);\n    };\n\n    static getStoreName() {\n        return this.name;\n    }\n\n    setStore(store) {\n        this[StoreSymbol] = store;\n    }\n\n    getStore() {\n        return this[StoreSymbol];\n    }\n\n    // By default, applying an event just shallow copies the fields from event.data\n    applyEvent(event) {\n        Object.assign(this, event.data);\n    };\n\n    // Add a listener for all updates, callback will receive the events after they were applied\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n\n    // Add a listener on updates from events with this specific type.\n    // Can accept an array as eventType\n    // Returns an object that implements the Cleanup interface.\n    addEventListener(eventType, callback) {\n        if (Array.isArray(eventType)) {\n            const handlers = eventType.map(e => this.addEventListener(e, callback));\n            return new CleanupJobs(handlers);\n        }\n        // Ensure the private event dispatcher exists\n        if (!this._eventDispatcher) {\n            this._eventDispatcher = new Dispatchable();\n            this.addUpdateListener((event) => {\n                this._eventDispatcher.dispatch(event.type, event, this);\n            });\n        }\n        return this._eventDispatcher.addListener(eventType, callback);\n    }\n\n    getStreamName() {\n        throw \"getStreamName not implemented\";\n    }\n\n    registerToStream() {\n        this.getStore().getState().registerStream(this.getStreamName());\n    }\n}\n\nclass BaseStore extends Dispatchable {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super();\n        this.options = options;\n        this.objectType = objectType.toLowerCase();\n        this.ObjectWrapper = ObjectWrapper;\n        this.attachToState();\n    }\n\n    attachToState() {\n        if (this.getState()) {\n            this.getState().addStore(this);\n        }\n    }\n\n    getState() {\n        // Allow explicit no state\n        if (this.options.hasOwnProperty(\"state\")) {\n            return this.options.state;\n        } else {\n            return DefaultState;\n        }\n    }\n\n    // Is used by the state object to see which stores need to be loaded first\n    getDependencies() {\n        return this.options.dependencies || [];\n    }\n}\n\n// Store type primarily intended to store objects that come from a server DB, and have a unique numeric .id field\nclass GenericObjectStore extends BaseStore {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super(...arguments);\n        this.objects = new Map();\n    }\n\n    has(id) {\n        return !!this.get(id);\n    }\n\n    get(id) {\n        if (id == null) {\n            return null;\n        }\n        return this.objects.get(parseInt(id));\n    }\n\n    clear() {\n        this.objects.clear();\n        this.dispatch(\"update\", null, null);\n    }\n\n    getObjectIdForEvent(event) {\n        return event.objectId || event.data.id;\n    }\n\n    getObjectForEvent(event) {\n        let objectId = this.getObjectIdForEvent(event);\n        return this.get(objectId);\n    }\n\n    // TODO: should this default to iterable?\n    all(asIterable) {\n        let values = this.objects.values();\n        if (!asIterable) {\n            values = Array.from(values);\n        }\n        return values;\n    }\n\n    createObject(event) {\n        const obj = new this.ObjectWrapper(event.data, event, this);\n        obj.setStore(this);\n        return obj;\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        let existingObject = this.getObjectForEvent(event);\n\n        if (existingObject) {\n            let refreshEvent = Object.assign({}, event);\n            refreshEvent.type = \"refresh\";\n            existingObject.applyEvent(refreshEvent);\n            existingObject.dispatch(\"update\", event);\n            return existingObject;\n        } else {\n            let newObject = this.createObject(event);\n            this.objects.set(this.getObjectIdForEvent(event), newObject);\n\n            if (sendDispatch) {\n                this.dispatch(\"create\", newObject, event);\n            }\n            return newObject;\n        }\n    }\n\n    applyUpdateOrCreateEvent(event) {\n        var obj = this.getObjectForEvent(event);\n        if (!obj) {\n            obj = this.applyCreateEvent(event, false);\n            this.dispatch(\"create\", obj, event);\n        } else {\n            this.applyEventToObject(obj, event);\n        }\n        this.dispatch(\"updateOrCreate\", obj, event);\n        return obj;\n    }\n\n    applyDeleteEvent(event) {\n        let objDeleted = this.getObjectForEvent(event);\n        if (objDeleted) {\n            this.objects.delete(this.getObjectIdForEvent(event));\n            objDeleted.dispatch(\"delete\", event, objDeleted);\n            this.dispatch(\"delete\", objDeleted, event);\n        }\n        return objDeleted;\n    }\n\n    applyEventToObject(obj, event) {\n        obj.applyEvent(event);\n        obj.dispatch(\"update\", event);\n        this.dispatch(\"update\", obj, event);\n        return obj;\n    }\n\n    applyEvent(event) {\n        event.data = event.data || {};\n\n        if (event.type === \"create\") {\n            return this.applyCreateEvent(event);\n        } else if (event.type === \"delete\") {\n            return this.applyDeleteEvent(event);\n        } else if (event.type === \"updateOrCreate\") {\n            return this.applyUpdateOrCreateEvent(event);\n        } else {\n            var obj = this.getObjectForEvent(event);\n            if (!obj) {\n                console.error(\"I don't have object of type \", this.objectType, \" \", event.objectId);\n                return;\n            }\n            return this.applyEventToObject(obj, event);\n        }\n    }\n\n    importState(objects) {\n        objects = objects || [];\n        for (let obj of objects) {\n            this.fakeCreate(obj);\n        }\n    }\n\n    // Create a fake creation event, to insert the raw object\n    fakeCreate(obj, eventType=\"fakeCreate\") {\n        if (!obj) {\n            return;\n        }\n        var event = {\n            objectType: this.objectType,\n            objectId: obj.id,\n            type: eventType,\n            data: obj,\n        };\n        return this.applyCreateEvent(event);\n    }\n\n    // Add a listener on all object creation events\n    // If fakeExisting, will also pass existing objects to your callback\n    addCreateListener(callback, fakeExisting) {\n        if (fakeExisting) {\n            for (let object of this.objects.values()) {\n                let event = {\n                    objectType: this.objectType,\n                    objectId: object.id,\n                    type: \"fakeCreate\",\n                    data: object,\n                };\n                callback(object, event);\n            }\n        }\n\n        return this.addListener(\"create\", callback);\n    }\n\n    // Add a listener for any updates to objects in store\n    // The callback will receive the object and the event\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    // Add a listener for any object deletions\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n}\n\nclass SingletonStore extends BaseStore {\n    constructor(objectType, options={}) {\n        super(objectType, SingletonStore, options);\n    }\n\n    get() {\n        return this;\n    }\n\n    all() {\n        return [this];\n    }\n\n    applyEvent(event) {\n        Object.assign(this, event.data);\n        this.dispatch(\"update\", event, this);\n    }\n\n    importState(obj) {\n        Object.assign(this, obj);\n        this.dispatch(\"update\", event, this);\n    }\n\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n}\n\n// Use the same logic as StoreObject when listening to events\nSingletonStore.prototype.addEventListener = StoreObject.prototype.addEventListener;\n\nexport {StoreObject, BaseStore, GenericObjectStore, SingletonStore};\n","// TODO: this file should be called StoreExtenders\nimport {unwrapArray, splitInChunks} from \"../base/Utils\";\nimport {Ajax} from \"../base/Ajax\";\nimport {GlobalState} from \"./State\";\n\nconst AjaxFetchMixin = (BaseStoreClass) => class AjaxFetchMixin extends BaseStoreClass {\n    fetch(id, successCallback, errorCallback, forceFetch=false) {\n        if (!forceFetch) {\n            let obj = this.get(id);\n            if (obj) {\n                successCallback(obj);\n                return;\n            }\n        }\n        if (!this.fetchJobs) {\n            this.fetchJobs = [];\n        }\n        this.fetchJobs.push({id: id, success: successCallback, error: errorCallback});\n        if (!this.fetchTimeout) {\n            this.fetchTimeout = setTimeout(() => {\n                this.executeAjaxFetch();\n            }, this.options.fetchTimeoutDuration || 0);\n        }\n    };\n\n    getFetchRequestData(ids, fetchJobs) {\n        return {\n            ids: ids,\n        };\n    }\n\n    getFetchRequestObject(ids, fetchJobs) {\n        let requestData = this.getFetchRequestData(ids, fetchJobs);\n\n        // TODO: options.fetchURL should also support a function(ids, fetchJobs), do it when needed\n        return {\n            url: this.options.fetchURL,\n            type: this.options.fetchType || \"GET\",\n            dataType: \"json\",\n            data: requestData,\n            cache: false,\n            success: (data) => {\n                GlobalState.importState(data.state || {});\n                for (let fetchJob of fetchJobs) {\n                    let obj = this.get(fetchJob.id);\n                    if (obj) {\n                        fetchJob.success(obj);\n                    } else {\n                        console.error(\"Failed to fetch object \", fetchJob.id, \" of type \", this.objectType);\n                        if (fetchJob.error) {\n                            fetchJob.error();\n                        }\n                    }\n                }\n            },\n            error: (error) => {\n                console.error(\"Failed to fetch objects of type \", this.objectType, \":\\n\", error);\n                for (let fetchJob of fetchJobs) {\n                    if (fetchJob.error) {\n                        fetchJob.error(error);\n                    }\n                }\n            }\n        }\n    }\n\n    //returns an array of ajax requests that have to be executed\n    getFetchRequests(fetchJobs) {\n        let idFetchJobs = new Map();\n\n        for (let fetchJob of fetchJobs) {\n            let objectId = fetchJob.id;\n            if (!idFetchJobs.has(objectId)) {\n                idFetchJobs.set(objectId, new Array());\n            }\n            idFetchJobs.get(objectId).push(fetchJob);\n        }\n\n        let maxChunkSize = this.options.maxFetchObjectCount || 256;\n\n        let idChunks = splitInChunks(Array.from(idFetchJobs.keys()), maxChunkSize);\n        let fetchJobsChunks = splitInChunks(Array.from(idFetchJobs.values()), maxChunkSize);\n\n        let requests = [];\n        for (let i = 0; i < idChunks.length; i += 1) {\n            requests.push(this.getFetchRequestObject(idChunks[i], unwrapArray(fetchJobsChunks[i])))\n        }\n\n        return requests;\n    }\n\n    executeAjaxFetch() {\n        let fetchJobs = this.fetchJobs;\n        this.fetchJobs = null;\n\n        let requests = this.getFetchRequests(fetchJobs);\n\n        for (let requestObject of requests) {\n            Ajax.fetch(requestObject);\n        }\n\n        clearTimeout(this.fetchTimeout);\n        this.fetchTimeout = null;\n    };\n\n};\n\nconst VirtualStoreObjectMixin = (BaseStoreObjectClass) => class VirtualStoreObjectMixin extends BaseStoreObjectClass {\n    hasTemporaryId() {\n        return (typeof this.id === \"string\" || this.id instanceof String) && this.id.startsWith(\"temp-\");\n    }\n\n    // Meant for updating temporary objects that need to exist before being properly created\n    updateId(newId) {\n            if (this.id == newId) {\n                return;\n            }\n            let oldId = this.id;\n            if (!this.hasTemporaryId()) {\n                console.error(\"This is only meant to replace temporary ids!\");\n            }\n            this.id = newId;\n            this.dispatch(\"updateId\", {oldId: oldId});\n        }\n};\n\n// TODO: there's still a bug in this class when not properly matching virtual obj sometimes I think\nconst VirtualStoreMixin = (BaseStoreClass) => class VirtualStoreMixin extends BaseStoreClass {\n    static generateVirtualId() {\n        if (!this.virtualIdCounter) {\n            this.virtualIdCounter = 0;\n        }\n        this.virtualIdCounter += 1;\n        return this.virtualIdCounter;\n    }\n\n    generateVirtualId() {\n        return this.constructor.generateVirtualId();\n    }\n\n    // TODO: we probably shouldn't have getVirtualObject take in an event\n    getVirtualObject(event) {\n        return this.objects.get(\"temp-\" + event.virtualId);\n    }\n\n    get(id) {\n        return this.objects.get(id);\n    }\n\n    applyUpdateObjectId(object, id) {\n        if (object.id === id) {\n            return;\n        }\n        let oldId = object.id;\n        object.updateId(id);\n        this.objects.delete(oldId);\n        this.objects.set(object.id, object);\n        this.dispatch(\"updateObjectId\", object, oldId);\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        if (event.virtualId) {\n            let existingVirtualObject = this.getVirtualObject(event);\n            if (existingVirtualObject) {\n                this.applyUpdateObjectId(existingVirtualObject, event.objectId);\n            }\n        }\n\n        return super.applyCreateEvent(...arguments);\n    }\n};\n\nexport {AjaxFetchMixin, VirtualStoreMixin, VirtualStoreObjectMixin};\n","// A basic store that can be used to keep objects that map to ISO-code backed languages\nimport {StoreObject, GenericObjectStore} from \"Store\";\n\nclass LanguageObject extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.translationMap = new Map();\n    }\n\n    toString() {\n        let name = this.name;\n        if (this.localName && this.localName != this.name) {\n            name += \" (\" + this.localName + \")\";\n        }\n        return name;\n    }\n\n    buildTranslation(callback) {\n        Language.dispatch(\"buildTranslationMap\", this);\n        callback(this.translationMap);\n    }\n}\n\nclass LanguageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"Language\", LanguageObject);\n    }\n\n    getLanguageForCode(isoCode) {\n        for (let language of this.all()) {\n            if (language.isoCode === isoCode) {\n                return language;\n            }\n        }\n    }\n\n    setLocale(language) {\n        if (this.Locale == language) {\n            return;\n        }\n        this.Locale = language;\n        this.dispatch(\"localeChange\", language);\n    }\n\n    getLocale() {\n        return this.Locale;\n    }\n}\n\nvar Language = new LanguageStoreClass();\n\nexport {Language};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {Language} from \"LanguageStore\";\n\nclass Article extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.edits = new Map();\n    }\n\n    canBeEditedByUser(user=USER) {\n        return user.isSuperUser || this.userCreatedId == user.id;\n    }\n\n    addEdit(articleEdit) {\n        this.edits.set(articleEdit.id, articleEdit);\n    }\n\n    getEdits() {\n        return Array.from(this.edits.values());\n    }\n\n    getTranslation(language=Language.Locale) {\n        for (let article of ArticleStore.all()) {\n            if (article.baseArticleId === this.id && article.languageId === language.id) {\n                return article;\n            }\n        }\n        return this;\n    }\n\n    getBaseArticle() {\n        return ArticleStore.get(this.baseArticleId) || this;\n    }\n}\n\nclass ArticleEdit extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass ArticleStoreClass extends AjaxFetchMixin(GenericObjectStore) {\n    getTranslation(id, language=Language.Locale) {\n        let baseArticle = this.get(id);\n        if (baseArticle) {\n            baseArticle = baseArticle.getTranslation(language);\n        }\n        return baseArticle;\n    }\n}\n\nvar ArticleStore = new ArticleStoreClass(\"article\", Article, {\n    fetchURL: \"/fetch_article/\",\n    maxFetchObjectCount: 32,\n});\n\nvar ArticleEditStore = new GenericObjectStore(\"articleedit\", ArticleEdit, {\n    dependencies: [\"article\"],\n});\n\nArticleEditStore.addCreateListener((articleEdit) => {\n    let article = articleEdit.getArticle();\n    article.addEdit(articleEdit);\n});\n\nexport {Article, ArticleStore, ArticleEditStore};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {ArticleStore} from \"ArticleStore\";\n\nclass BlogEntry extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass BlogEntryStoreClass extends GenericObjectStore {\n    constructor(objectType=\"BlogEntry\", ObjectWrapper=BlogEntry) {\n        super(objectType, ObjectWrapper, {\n            dependencies: [\"Article\"],\n        });\n    }\n\n    getEntryForURL(urlName) {\n        return this.all().find(blogEntry => blogEntry.urlName === urlName);\n    }\n}\n\nvar BlogEntryStore = new BlogEntryStoreClass();\n\nexport {BlogEntryStore};\n","// TODO: this file is in dire need of a rewrite\nexport class StringStream {\n    constructor(string, options) {\n        this.string = string;\n        this.pointer = 0;\n    }\n\n    done() {\n        return this.pointer >= this.string.length;\n    }\n\n    advance(steps=1) {\n        this.pointer += steps;\n    }\n\n    char() {\n        let ch = this.string.charAt(this.pointer);\n        this.pointer += 1;\n        return ch;\n    }\n\n    whitespace(whitespaceChar=/\\s/) {\n        let whitespaceStart = this.pointer;\n\n        while (!this.done() && whitespaceChar.test(this.at(0))) {\n            this.pointer += 1;\n        }\n\n        // Return the actual whitespace in case it is needed\n        return this.string.substring(whitespaceStart, this.pointer);\n    }\n\n    // Gets first encountered non-whitespace substring\n    word(validChars=/\\S/, skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let wordStart = this.pointer;\n        while (!this.done() && validChars.test(this.at(0))) {\n            this.pointer += 1;\n        }\n        return this.string.substring(wordStart, this.pointer);\n    }\n\n    number(skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let nanString = \"NaN\";\n        if (this.startsWith(nanString)) {\n            this.advance(nanString.length);\n            return NaN;\n        }\n\n        let sign = \"+\";\n        if (this.at(0) === \"-\" || this.at(0) === \"+\") {\n            sign = this.char();\n        }\n\n        let infinityString = \"Infinity\";\n        if (this.startsWith(infinityString)) {\n            this.advance(infinityString.length);\n            return sign === \"+\" ? Infinity : -Infinity;\n        }\n\n        let isDigit = (char) => {\n            return (char >= \"0\" || char <= \"9\");\n        };\n\n        if (this.at(0) === \"0\" && (this.at(1) === \"X\" || this.at(1) === \"x\")) {\n            // hexadecimal number\n            this.advance(2);\n\n            let isHexDigit = (char) => {\n                return isDigit(char) || (char >= \"A\" && char <= \"F\") ||(char >= \"a\" && char <= \"f\");\n            };\n\n            let numberStart = this.pointer;\n            while (!this.done() && isHexDigit(this.at(0))) {\n                this.pointer += 1;\n            }\n\n            return parseInt(sign + this.string.substring(numberStart), 16);\n        }\n\n        let numberStart = this.pointer;\n        while (!this.done() && isDigit(this.at(1))) {\n            this.pointer += 1;\n            if (this.peek === \".\") {\n                this.advance(1);\n                while (!this.done() && isDigit(this.at(1))) {\n                    this.pointer += 1;\n                }\n                break;\n            }\n        }\n        return parseFloat(sign + this.string.substring(numberStart, this.pointer));\n    }\n\n    // Gets everything up to delimiter, usually end of line, limited to maxLength\n    line(delimiter=/\\r*\\n/, maxLength=Infinity) {\n        if (delimiter instanceof RegExp) {\n            // Treat regex differently. It will probably be slower.\n            let str = this.string.substring(this.pointer);\n            let delimiterMatch = str.match(delimiter);\n\n            let delimiterIndex, delimiterLength;\n            if (delimiterMatch === null) {\n                // End of string encountered\n                delimiterIndex = str.length;\n                delimiterLength = 0;\n            } else {\n                delimiterIndex = delimiterMatch.index;\n                delimiterLength = delimiterMatch[0].length;\n            }\n\n            if (delimiterIndex >= maxLength) {\n                this.pointer += maxLength;\n                return str.substring(0, maxLength);\n            }\n\n            this.advance(delimiterIndex + delimiterLength);\n            return str.substring(0, delimiterIndex);\n        }\n\n        let delimiterIndex = this.string.indexOf(delimiter, this.pointer);\n\n        if (delimiterIndex === -1) {\n            delimiterIndex = this.string.length;\n        }\n\n        if (delimiterIndex - this.pointer > maxLength) {\n            let result = this.string.substring(this.pointer, this.pointer + maxLength);\n            this.advance(maxLength);\n            return result;\n        }\n\n        let result = this.string.substring(this.pointer, delimiterIndex);\n        this.pointer = delimiterIndex + delimiter.length;\n        return result;\n    }\n\n    // The following methods have no side effects\n\n    // Access char at offset position, relative to current pointer\n    at(index) {\n        return this.string.charAt(this.pointer + index);\n    }\n\n    peek(length=1) {\n        return this.string.substring(this.pointer, this.pointer + length);\n    }\n\n    startsWith(prefix) {\n        if (prefix instanceof RegExp) {\n            // we modify the regex to only check for the beginning of the string\n            prefix = new RegExp(\"^\" + prefix.toString().slice(1, -1));\n            return prefix.test(this.string.substring(this.pointer));\n        }\n        return this.peek(prefix.length) === prefix;\n    }\n\n    // Returns first position of match\n    search(pattern) {\n        let position;\n        if (pattern instanceof RegExp) {\n            position = this.string.substring(this.pointer).search(pattern);\n        } else {\n            position = this.string.indexOf(pattern, this.pointer) - this.pointer;\n        }\n        return position < 0 ? -1 : position;\n    }\n\n    clone() {\n        let newStream = new this.constructor(this.string);\n        newStream.pointer = this.pointer;\n        return newStream;\n    }\n}\n\nfunction kmp(input) {\n    if (input.length === 0) {\n        return [];\n    }\n\n    let prefix = [0];\n    let prefixLength = 0;\n\n    for (let i = 1; i < input.length; i += 1) {\n        while (prefixLength > 0 && input[i] !== input[prefixLength]) {\n            prefixLength = prefix[prefixLength];\n        }\n\n        if (input[i] === input[prefixLength]) {\n            prefixLength += 1;\n        }\n\n        prefix.push(prefixLength);\n    }\n    return prefix;\n}\n\nclass ModifierAutomation {\n    // build automaton from string\n    constructor(options) {\n        this.options = options;\n        this.steps = 0;\n        this.startNode = {\n            value: null,\n            startNode: true,\n        };\n        this.node = this.startNode;\n\n        let lastNode = this.startNode;\n\n        let char = options.pattern.charAt(0);\n        let startPatternNode = {\n            value: char,\n            startNode: true,\n        };\n\n        let patternPrefix = kmp(options.pattern);\n        let patternNode = [startPatternNode];\n\n        if (options.leftWhitespace) {\n            // We don't want to match if the first char is not preceeded by whitespace\n            let whitespaceNode = {\n                value: \" \",\n                whitespaceNode: true,\n            };\n            whitespaceNode.next = (input) => {\n                if (input === char) return startPatternNode;\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            lastNode.next = (input) => {\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            this.node = whitespaceNode;\n        } else {\n            lastNode.next = (input) => {\n                return input === char ? startPatternNode : this.startNode;\n            }\n        }\n        lastNode = startPatternNode;\n\n        for (let i = 1; i < options.pattern.length; i += 1) {\n            let char = options.pattern[i];\n            let newNode = {\n                value: char,\n            };\n            patternNode.push(newNode);\n\n            let backNode = (patternPrefix[i - 1] === 0) ? this.startNode : patternNode[patternPrefix[i - 1] - 1];\n\n            lastNode.next = (input) => {\n                if (input === char) {\n                    return newNode;\n                }\n\n                return backNode.next(input);\n            };\n            lastNode = newNode;\n        }\n        lastNode.patternLastNode = true;\n\n        if (options.captureContent) {\n            this.capture = [];\n            let captureNode = {\n                value: \"\",\n                captureNode: true,\n            };\n\n            // We treat the first character separately in order to support empty capture\n            let char = options.endPattern.charAt(0);\n            let endCaptureNode = {\n                value: char\n            };\n\n            let endPatternPrefix = kmp(options.endPattern);\n            let endPatternNodes = [endCaptureNode];\n\n            lastNode.next = captureNode.next = (input) => {\n                return input === char ? endCaptureNode : captureNode;\n            };\n\n            lastNode = endCaptureNode;\n            for (let i = 1; i < options.endPattern.length; i += 1) {\n                let char = options.endPattern[i];\n                let newNode = {\n                    value: char,\n                };\n                endPatternNodes.push(newNode);\n\n                let backNode = (endPatternPrefix[i - 1] === 0) ? captureNode : endPatternNodes[endPatternPrefix[i - 1] - 1];\n\n                lastNode.next = (input) => {\n                    if (input === char) {\n                        return newNode;\n                    }\n                    return backNode.next(input);\n                };\n                lastNode = newNode;\n            }\n\n            lastNode.endPatternLastNode = true;\n        }\n\n        lastNode.endNode = true;\n        lastNode.next = (input) => {\n            return this.startNode.next(input);\n        };\n    }\n\n    nextState(input) {\n        this.steps += 1;\n\n        this.node = this.node.next(input);\n\n        if (this.node.startNode) {\n            this.steps = 0;\n            delete this.patternStep;\n            delete this.endPatternStep;\n        }\n\n        if (this.node.patternLastNode) {\n            this.patternStep = this.steps - this.options.pattern.length + 1;\n        }\n        if (this.node.endPatternLastNode) {\n            // TODO(@all): Shouldn't it be this.options.endPattern.length instead of this.options.pattern.length?\n            this.endPatternStep = this.steps - this.options.pattern.length + 1;\n        }\n\n        return this.node;\n    }\n\n    done() {\n        return this.node.endNode;\n    }\n}\n\nclass Modifier {\n    constructor(options) {\n    }\n\n    modify(currentArray, originalString) {\n        let matcher = new ModifierAutomation({\n            pattern: this.pattern,\n            captureContent: this.captureContent, // TODO: some elements should not wrap\n            endPattern: this.endPattern,\n            leftWhitespace: this.leftWhitespace,\n        });\n\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let newArray = [];\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            let char = originalString[i];\n\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                matcher.nextState(\"\\\\\" + char); // prevent char from advancing automata\n                continue;\n            }\n\n            matcher.nextState(char);\n\n            if (matcher.done()) {\n                let modifierStart = i - (matcher.steps - matcher.patternStep);\n                let modifierEnd = i - (matcher.steps - matcher.endPatternStep) + this.endPattern.length;\n\n                let modifierCapture = [];\n\n                while (newArray.length > 0 && modifierStart <= newArray[newArray.length - 1].start) {\n                    let element = newArray.pop();\n\n                    modifierCapture.push(element);\n                }\n\n                if (newArray.length > 0 && modifierStart < newArray[newArray.length - 1].end) {\n                    let element = newArray.pop();\n                    newArray.push({\n                        isString: true,\n                        start: element.start,\n                        end: modifierStart,\n                    });\n                    modifierCapture.push({\n                        isString: true,\n                        start: modifierStart,\n                        end: element.end,\n                    });\n                }\n\n                if (currentElement.start < modifierStart) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: modifierStart,\n                    });\n                }\n                modifierCapture.reverse();\n\n                // this is the end of the capture\n                modifierCapture.push({\n                    isString: true,\n                    start: Math.max(currentElement.start, modifierStart),\n                    end: modifierEnd,\n                });\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(modifierCapture, originalString)),\n                    start: modifierStart,\n                    end: modifierEnd,\n                });\n\n                // We split the current element to in two(one will be captured, one replaces the current element\n                currentElement = {\n                    isString: true,\n                    start: modifierEnd,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n\n        return newArray;\n    }\n\n    processChildren(capture, originalString) {\n        return capture.map((element) => {\n            return this.processChild(element, originalString);\n        });\n    }\n\n    processChild(element, originalString) {\n        if (element.isDummy) {\n            return \"\";\n        } if (element.isString) {\n            return originalString.substring(element.start, element.end);\n        } else {\n            return element.content;\n        }\n    }\n}\n\nfunction InlineModifierMixin(BaseModifierClass) {\n    return class InlineModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.captureContent = true;\n        }\n\n        wrap(content) {\n            if (content.length > 0) {\n                content[0] = content[0].substring(content[0].indexOf(this.pattern) + this.pattern.length);\n\n                let lastElement = content.pop();\n                lastElement = lastElement.substring(0, lastElement.lastIndexOf(this.endPattern));\n                content.push(lastElement);\n\n                return {\n                    tag: this.tag,\n                    children: content\n                };\n            }\n        }\n    }\n}\n\nfunction LineStartModifierMixin(BaseModifierClass) {\n    return class LineStartModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.groupConsecutive = false;\n        }\n\n        isValidElement(element) {\n            return element.content &&\n                element.content.tag === \"p\" &&\n                element.content.children.length > 0 &&\n                !element.content.children[0].tag && // child is text string\n                element.content.children[0].startsWith(this.pattern);\n        }\n\n        modify(currentArray, originalString) {\n            let newArray = [];\n\n            for (let i = 0; i < currentArray.length; i += 1) {\n                let element = currentArray[i];\n                if (this.isValidElement(element)) {\n                    if (this.groupConsecutive) {\n                        let elements = [];\n\n                        let start, end;\n                        start = currentArray[i].start;\n                        while (i < currentArray.length && this.isValidElement(currentArray[i])) {\n                            elements.push(this.wrapItem(currentArray[i].content.children));\n\n                            i += 1;\n                        }\n                        // we make sure no elements are skipped\n                        i -= 1;\n\n                        end = currentArray[i].end;\n\n                        newArray.push({\n                            start: start,\n                            end: end,\n                            content: this.wrap(elements)\n                        });\n                    } else {\n                        // We use object assign here to keep the start and end properties. (Maybe along with others)\n                        let newElement = Object.assign({}, element, {\n                            content: this.wrap(element.content.children)\n                        });\n                        newArray.push(newElement);\n                    }\n\n                } else {\n                    newArray.push(element);\n                }\n            }\n            return newArray;\n        }\n\n        wrapItem(content) {\n            let firstChild = content[0];\n\n            let patternIndex = firstChild.indexOf(this.pattern);\n            let patternEnd = patternIndex + this.pattern.length;\n\n            content[0] = firstChild.substring(patternEnd);\n\n            return {\n                tag: this.itemTag,\n                children: content,\n            }\n        }\n\n        wrap(content) {\n            return {\n                tag: this.tag,\n                children: content,\n            }\n        }\n    }\n}\n\nfunction RawContentModifierMixin(BaseModifierClass) {\n    return class RawContentModifier extends BaseModifierClass {\n        processChildren(children, originalString) {\n            if (children.length === 0) {\n                return [];\n            }\n\n            return [originalString.substring(children[0].start, children[children.length - 1].end)];\n        }\n    }\n}\n\nexport class BlockCodeModifier extends Modifier {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"```\";\n        this.endPattern = \"\\n```\";\n        this.leftWhitespace = true;\n        this.captureContent = true;\n    }\n\n    processChildren(capture, originalString) {\n        this.codeOptions = null;\n        if (capture.length > 0) {\n            let codeBlock = originalString.substring(capture[0].start, capture[capture.length - 1].end);\n\n            codeBlock = codeBlock.substring(codeBlock.indexOf(this.pattern) + this.pattern.length);\n            codeBlock = codeBlock.substring(0, codeBlock.lastIndexOf(this.endPattern));\n\n            let firstLineEnd = codeBlock.indexOf(\"\\n\") + 1;\n            let firstLine = codeBlock.substring(0, firstLineEnd).trim();\n            codeBlock = codeBlock.substring(firstLineEnd);\n\n            if (firstLine.length > 0) {\n                this.codeOptions = {};\n                let lineStream = new StringStream(firstLine);\n                this.codeOptions.aceMode = lineStream.word();\n\n                Object.assign(this.codeOptions, MarkupParser.parseOptions(lineStream));\n            }\n\n            return codeBlock;\n        }\n        return \"\";\n    }\n\n    getElement(content) {\n        return {\n            tag: this.constructor.tag || \"pre\",\n            children: [content],\n        }\n    }\n\n    wrap(content, options) {\n        let codeHighlighter = this.getElement(content);\n\n        // TODO: this code should not be here\n        let codeOptions = {\n            aceMode: \"c_cpp\",\n            maxLines: 32,\n        };\n\n        if (this.codeOptions) {\n            Object.assign(codeOptions, this.codeOptions);\n            delete this.codeOptions;\n        }\n\n        Object.assign(codeOptions, codeHighlighter);\n        return codeOptions;\n    }\n}\n\nclass HeaderModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"#\";\n    }\n\n    wrap(content) {\n        let firstChild = content[0];\n\n        let hashtagIndex = firstChild.indexOf(\"#\");\n        let hashtagEnd = hashtagIndex + 1;\n        let headerLevel = 1;\n\n        let nextChar = firstChild.charAt(hashtagEnd);\n        if (nextChar >= \"1\" && nextChar <= \"6\") {\n            headerLevel = parseInt(nextChar);\n            hashtagEnd += 1;\n        } else if (nextChar === \"#\") {\n            while (headerLevel < 6 && firstChild.charAt(hashtagEnd) === \"#\") {\n                headerLevel += 1;\n                hashtagEnd += 1;\n            }\n        }\n\n        content[0] = firstChild.substring(hashtagEnd);\n        return {\n            tag: \"h\" + headerLevel,\n            children: content,\n        };\n    }\n}\n\nclass HorizontalRuleModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"---\";\n    }\n\n    wrap(content) {\n        return {\n            tag: \"hr\"\n        };\n    }\n}\n\nclass UnorderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ul\";\n        this.itemTag = \"li\";\n        this.pattern = \"- \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass OrderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ol\";\n        this.itemTag = \"li\";\n        this.pattern = \"1. \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass ParagraphModifier extends Modifier {\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let capturedContent = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                capturedContent.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if (originalString[i] === \"\\n\") {\n                if (currentElement.start < i) {\n                    capturedContent.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: i,\n                    });\n                }\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(capturedContent, originalString)),\n                    start: lineStart,\n                    end: i + 1,\n                });\n                capturedContent = [];\n                lineStart = i + 1;\n\n                if (originalString[i + 1] === \"\\n\") {\n                    let start, end;\n                    start = i;\n\n                    while (i + 1 < originalString.length && originalString[i + 1] === \"\\n\") {\n                        i += 1;\n                    }\n                    end = i + 1;\n\n                    newArray.push({\n                        content: {\n                            tag: \"br\",\n                        },\n                        start: start,\n                        end: end,\n                    });\n\n                    lineStart = i + 1;\n                } else {\n                    // TODO: these dummies break code. Refactor!\n                    // newArray.push({\n                    //     isDummy: true,\n                    //     start: i,\n                    //     end: i + 1,\n                    // });\n                }\n\n                currentElement = {\n                    isString: true,\n                    start: lineStart,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            capturedContent.push(currentElement);\n        }\n        if (capturedContent.length > 0) {\n            newArray.push({\n                content: this.wrap(this.processChildren(capturedContent, originalString)),\n                start: lineStart,\n                end: originalString.length,\n            })\n        }\n        return newArray;\n    }\n\n    wrap(capture) {\n        return {\n            tag: \"p\",\n            children: capture,\n        }\n    }\n}\n\nclass StrongModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"*\";\n        this.endPattern = \"*\";\n        this.tag = \"strong\";\n    }\n}\n\nclass ItalicModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"/\";\n        this.endPattern = \"/\";\n        this.tag = \"em\";\n    }\n}\n\nclass InlineCodeModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"`\";\n        this.endPattern = \"`\";\n        this.tag = \"code\";\n    }\n\n    processChildren(children, originalString) {\n        if (children.length === 0) {\n            return [];\n        }\n\n        return [originalString.substring(children[0].start, children[children.length - 1].end)];\n    }\n}\n\nclass InlineVarModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$\";\n        this.endPattern = \"$\";\n        this.tag = \"var\";\n    }\n}\n\nclass InlineLatexModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$$\";\n        this.endPattern = \"$$\";\n        this.tag = \"Latex\";\n    }\n}\n\nclass LinkModifier extends Modifier {\n\n    static isCorrectUrl(str) {\n        if (str.startsWith(\"http://\") || str.startsWith(\"https://\")) {\n            return true;\n        }\n    }\n    static trimProtocol(str) {\n        if (str[4] === 's') {\n            return str.substring(8, str.length);\n        }\n        return str.substring(7, str.length);\n    }\n\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        let checkAndAddUrl = (start, end) => {\n            let substr = originalString.substring(start, end);\n            if (this.constructor.isCorrectUrl(substr)) {\n                if (currentElement.start < start) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: start,\n                    });\n                }\n\n                newArray.push({\n                    isJSX: true,\n                    content: {\n                        tag: \"a\",\n                        href: substr,\n                        children: [this.constructor.trimProtocol(substr)],\n                        target: \"_blank\"\n                    },\n                    start: start,\n                    end: end,\n                });\n\n                currentElement = {\n                    isString: true,\n                    start: end,\n                    end: currentElement.end,\n                };\n            }\n        };\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if ((/\\s/).test(originalString[i])) {\n                checkAndAddUrl(lineStart, i);\n                lineStart = i + 1;\n            }\n        }\n        if (lineStart < originalString.length) {\n            checkAndAddUrl(lineStart, originalString.length);\n        }\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n        return newArray;\n    }\n}\n\nlet MarkupModifier = Modifier;\n\nexport {MarkupModifier, HeaderModifier, ParagraphModifier, InlineCodeModifier, InlineLatexModifier, StrongModifier, LinkModifier};\n\nclass MarkupParser {\n    constructor(options) {\n        options = options || {};\n\n        this.modifiers = options.modifiers || this.constructor.modifiers;\n        this.uiElements = options.uiElements || new Map();\n    }\n\n    parse(content) {\n        if (!content) return [];\n\n        let result = [];\n\n        let arr = this.parseUIElements(content);\n\n        for (let i = this.modifiers.length - 1; i >= 0; i -= 1) {\n            let modifier = this.modifiers[i];\n\n            arr = modifier.modify(arr, content);\n        }\n\n        for (let el of arr) {\n            if (el.isDummy) {\n                // just skip it\n            } else if (el.isString) {\n                result.push(content.substring(el.start, el.end));\n            } else {\n                result.push(el.content);\n            }\n        }\n        return result;\n    }\n\n    parseUIElements(content) {\n        let stream = new StringStream(content);\n\n        let result = [];\n        let textStart = 0;\n\n        while (!stream.done()) {\n            let char = stream.char();\n\n            if (char === \"<\" && (/[a-zA-Z]/).test(stream.at(0))) {\n                stream.pointer -= 1; //step back to beginning of ui element\n                let elementStart = stream.pointer;\n                let uiElement;\n                try {\n                    uiElement = this.parseUIElement(stream);\n                } catch (e) {\n                    // failed to parse jsx element\n                    continue;\n                }\n\n                if (this.uiElements.has(uiElement.tag)) {\n                    result.push({\n                        isString: true,\n                        start: textStart,\n                        end: elementStart,\n                    });\n\n                    result.push({\n                        content: uiElement,\n                        isJSX: true,\n                        start: elementStart,\n                        end: stream.pointer,\n                    });\n                    textStart = stream.pointer;\n                }\n            }\n        }\n\n        if (textStart < content.length) {\n            result.push({\n                isString: true,\n                start: textStart,\n                end: content.length,\n            });\n        }\n\n        return result;\n    }\n\n    parseUIElement(stream, delimiter=(/\\/?>/)) {\n        // content should be of type <ClassName option1=\"string\" option2={{jsonObject: true}} />\n        // TODO: support nested elements like <ClassName><NestedClass /></ClassName>\n\n        stream.whitespace();\n        if (stream.done()) {\n            return null;\n        }\n\n        if (stream.at(0) !== \"<\") {\n            throw Error(\"Invalid UIElement declaration.\");\n        }\n\n        let result = {};\n\n        stream.char(); // skip the '<'\n\n        result.tag = stream.word();\n        stream.whitespace();\n\n        Object.assign(result, this.parseOptions(stream, delimiter));\n        stream.line(delimiter);\n\n        return result;\n    }\n    \n    parseOptions(stream, optionsEnd) {\n        return this.constructor.parseOptions(stream, optionsEnd);\n    }\n\n    // optionsEnd cannot include whitespace or start with '='\n    static parseOptions(stream, optionsEnd) {\n        let options = {};\n\n        stream.whitespace();\n\n        while (!stream.done()) {\n            // argument name is anything that comes before whitespace or '='\n            stream.whitespace();\n\n            let validOptionName = /[\\w$]/;\n            let optionName;\n            if (validOptionName.test(stream.at(0))) {\n                optionName = stream.word(validOptionName);\n            }\n\n            stream.whitespace();\n\n            if (optionsEnd && stream.search(optionsEnd) === 0) {\n                options[optionName] = true;\n                break;\n            }\n            if (!optionName) {\n                throw Error(\"Invalid option name\");\n            }\n\n            if (stream.peek() === \"=\") {\n                stream.char();\n                stream.whitespace();\n\n                if (stream.done()) {\n                    throw Error(\"No argument given for option: \" + optionName);\n                }\n\n                if (stream.peek() === '\"') {\n                    // We have a string here\n                    let optionString = \"\";\n                    let foundStringEnd = false;\n\n                    stream.char();\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '\"') {\n                            foundStringEnd = true;\n                            break;\n                        }\n                        optionString += char;\n                    }\n\n                    if (!foundStringEnd) {\n                        // You did not close that string\n                        throw Error(\"Argument string not closed: \" + optionString);\n                    }\n                    options[optionName] = optionString;\n                } else if (stream.peek() === '{') {\n                    // Once you pop, the fun don't stop\n                    let bracketCount = 0;\n\n                    let validJSON = false;\n                    let jsonString = \"\";\n                    stream.char();\n\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '{') {\n                            bracketCount += 1;\n                        } else if (char === '}') {\n                            if (bracketCount > 0) {\n                                bracketCount -= 1;\n                            } else {\n                                // JSON ends here\n                                options[optionName] = jsonString.length > 0 ? this.parseJSON5(jsonString) : undefined;\n                                validJSON = true;\n                                break;\n                            }\n                        }\n                        jsonString += char;\n                    }\n                    if (!validJSON) {\n                        throw Error(\"Invalid JSON argument for option: \" + optionName + \". Input: \" + jsonString);\n                    }\n                } else {\n                    throw Error(\"Invalid argument for option: \" + optionName + \". Need string or JSON.\");\n                }\n            } else {\n                options[optionName] = true;\n            }\n            stream.whitespace();\n        }\n\n        return options;\n    }\n\n    parseTextLine(stream) {\n        let lastModifier = new Map();\n\n        let capturedContent = [];\n\n        // This will always be set to the last closed modifier\n        let capturedEnd = -1;\n\n        let textStart = stream.pointer;\n        let contentStart = stream.pointer;\n\n        while (!stream.done()) {\n            if (stream.startsWith(/\\s+\\r*\\n/)) {\n                // end of line, stop here\n                break;\n            }\n\n            if (stream.at(0) === \"<\") {\n                capturedContent.push({\n                    content: stream.string.substring(contentStart, stream.pointer),\n                    start: contentStart,\n                    end: stream.pointer\n                });\n                let uiElementStart = stream.pointer;\n                let uiElement = this.parseUIElement(stream, (/\\/*>/));\n                capturedContent.push({\n                    content: uiElement,\n                    start: uiElementStart,\n                    end: stream.pointer,\n                });\n                contentStart = stream.pointer;\n                continue;\n            }\n\n            let char = stream.char();\n\n            if (char === \"\\\\\") {\n                // escape next character\n                char += stream.char();\n            }\n        }\n\n        let remainingContent = stream.string.substring(textStart, stream.pointer);\n        if (remainingContent.length > 0) {\n            capturedContent.push(remainingContent);\n        }\n        stream.line(); // delete line endings\n\n        return capturedContent;\n    }\n}\n\nMarkupParser.modifiers = [\n    new BlockCodeModifier(),\n    new HeaderModifier(),\n    new HorizontalRuleModifier(),\n    new UnorderedListModifier(),\n    new OrderedListModifier(),\n    new ParagraphModifier(),\n    new InlineCodeModifier(),\n    new InlineLatexModifier(),\n    new InlineVarModifier(),\n    new StrongModifier(),\n    new ItalicModifier(),\n    new LinkModifier()\n];\n\n// json5.js\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\nMarkupParser.parseJSON5 = (function() {\n    // This is a function that can parse a JSON5 text, producing a JavaScript\n    // data structure. It is a simple, recursive descent parser. It does not use\n    // eval or regular expressions, so it can be used as a model for implementing\n    // a JSON5 parser in other languages.\n\n    // We are defining the function inside of another function to avoid creating\n    // global variables.\n\n    let at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch;           // The current character\n    let escapee = {\n        \"'\": \"'\",\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        '\\n': '',       // Replace escaped newlines in strings w/ empty string\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t'\n    };\n    let text;\n\n    let renderChar = (chr) => {\n        return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n    };\n\n    let error = (m) => {\n        // Call error when something is wrong.\n\n        let error = new SyntaxError();\n        // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n        error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n        error.at = at;\n        // These two property names have been chosen to agree with the ones in Gecko, the only popular\n        // environment which seems to supply this info on JSON.parse\n        error.lineNumber = lineNumber;\n        error.columnNumber = columnNumber;\n        throw error;\n    };\n\n    let next = (c) => {\n        // If a c parameter is provided, verify that it matches the current character.\n\n        if (c && c !== ch) {\n            error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n        }\n\n        // Get the next character. When there are no more characters,\n        // return the empty string.\n\n        ch = text.charAt(at);\n        at++;\n        columnNumber++;\n        if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n            lineNumber++;\n            columnNumber = 0;\n        }\n        return ch;\n    };\n\n    let peek = () => {\n        // Get the next character without consuming it or\n        // assigning it to the ch varaible.\n\n        return text.charAt(at);\n    };\n\n    let identifier = () => {\n        // Parse an identifier. Normally, reserved words are disallowed here, but we\n        // only use this for unquoted object keys, where reserved words are allowed,\n        // so we don't check for those here. References:\n        // - http://es5.github.com/#x7.6\n        // - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n        // - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n        // TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n        let key = ch;\n\n        // Identifiers must start with a letter, _ or $.\n        if ((ch !== '_' && ch !== '$') &&\n            (ch < 'a' || ch > 'z') &&\n            (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n        }\n\n        // Subsequent characters can contain digits.\n        while (next() && (\n            ch === '_' || ch === '$' ||\n            (ch >= 'a' && ch <= 'z') ||\n            (ch >= 'A' && ch <= 'Z') ||\n            (ch >= '0' && ch <= '9'))) {\n                key += ch;\n        }\n\n        return key;\n    };\n\n    let number = () => {\n        // Parse a number value.\n        var number, sign = '', string = '', base = 10;\n\n        if (ch === '-' || ch === '+') {\n            sign = ch;\n            next(ch);\n        }\n\n        // support for Infinity (could tweak to allow other words):\n        if (ch === 'I') {\n            number = word();\n            if (typeof number !== 'number' || isNaN(number)) {\n                error('Unexpected word for number');\n            }\n            return (sign === '-') ? -number : number;\n        }\n\n        // support for NaN\n        if (ch === 'N') {\n            number = word();\n            if (!isNaN(number)) {\n                error('expected word to be NaN');\n            }\n            // ignore sign as -NaN also is NaN\n            return number;\n        }\n\n        if (ch === '0') {\n            string += ch;\n            next();\n            if (ch === 'x' || ch === 'X') {\n                string += ch;\n                next();\n                base = 16;\n            } else if (ch >= '0' && ch <= '9') {\n                error('Octal literal');\n            }\n        }\n\n        switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n        }\n\n        if (sign === '-') {\n            number = -string;\n        } else {\n            number = +string;\n        }\n\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    };\n\n    let string = () => {\n        // Parse a string value.\n        let hex, i, string = '', uffff;\n        let delim; // double quote or single quote\n\n        // When parsing for string values, we must look for ' or \" and \\ characters.\n\n        if (ch === '\"' || ch === \"'\") {\n            delim = ch;\n            while (next()) {\n                if (ch === delim) {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (ch === '\\r') {\n                        if (peek() === '\\n') {\n                            next();\n                        }\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else if (ch === '\\n') {\n                    // unescaped newlines are invalid; see:\n                    // https://github.com/aseemk/json5/issues/24\n                    // TODO this feels special-cased; are there other\n                    // invalid unescaped chars?\n                    break;\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    };\n\n    let inlineComment = () => {\n        // Skip an inline comment, assuming this is one. The current character should\n        // be the second / character in the // pair that begins this inline comment.\n        // To finish the inline comment, we look for a newline or the end of the text.\n\n        if (ch !== '/') {\n            error(\"Not an inline comment\");\n        }\n\n        do {\n            next();\n            if (ch === '\\n' || ch === '\\r') {\n                next();\n                return;\n            }\n        } while (ch);\n    };\n\n    let blockComment = () => {\n        // Skip a block comment, assuming this is one. The current character should be\n        // the * character in the /* pair that begins this block comment.\n        // To finish the block comment, we look for an ending */ pair of characters,\n        // but we also watch for the end of text before the comment is terminated.\n\n        if (ch !== '*') {\n            error(\"Not a block comment\");\n        }\n\n        do {\n            next();\n            while (ch === '*') {\n                next('*');\n                if (ch === '/') {\n                    next('/');\n                    return;\n                }\n            }\n        } while (ch);\n\n        error(\"Unterminated block comment\");\n    };\n\n    let comment = () => {\n        // Skip a comment, whether inline or block-level, assuming this is one.\n        // Comments always begin with a / character.\n\n        if (ch !== '/') {\n            error(\"Not a comment\");\n        }\n\n        next('/');\n\n        if (ch === '/') {\n            inlineComment();\n        } else if (ch === '*') {\n            blockComment();\n        } else {\n            error(\"Unrecognized comment\");\n        }\n    };\n\n    let white = () => {\n        // Skip whitespace and comments.\n        // Note that we're detecting comments by only a single / character.\n        // This works since regular expressions are not valid JSON(5), but this will\n        // break if there are other valid values that begin with a / character!\n\n        while (ch) {\n            if (ch === '/') {\n                comment();\n            } else if (/\\s/.test(ch)) {\n                next();\n            } else {\n                return;\n            }\n        }\n    };\n\n    let word = () => {\n        // true, false, or null.\n\n        switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n                next('N');\n                next('a');\n                next('N');\n                return NaN;\n        }\n        error(\"Unexpected \" + renderChar(ch));\n    };\n\n    let value;\n\n    let array = () => {\n        // Parse an array value.\n        let array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            while (ch) {\n                if (ch === ']') {\n                    next(']');\n                    return array;   // Potentially empty array\n                }\n                // ES5 allows omitting elements in arrays, e.g. [,] and\n                // [,null]. We don't allow this in JSON5.\n                if (ch === ',') {\n                    error(\"Missing array element\");\n                } else {\n                    array.push(value());\n                }\n                white();\n                // If there's no comma after this value, this needs to\n                // be the end of the array.\n                if (ch !== ',') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    };\n\n    let object = () => {\n        // Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            while (ch) {\n                if (ch === '}') {\n                    next('}');\n                    return object;   // Potentially empty object\n                }\n\n                // Keys can be unquoted. If they are, they need to be\n                // valid JS identifiers.\n                if (ch === '\"' || ch === \"'\") {\n                    key = string();\n                } else {\n                    key = identifier();\n                }\n\n                white();\n                next(':');\n                object[key] = value();\n                white();\n                // If there's no comma after this pair, this needs to be\n                // the end of the object.\n                if (ch !== ',') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\n    value = () => {\n        // Parse a JSON value. It could be an object, an array, a string, a number,\n        // or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the above\n    // functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n        // If there is a reviver function, we recursively walk the new structure,\n        // passing each name/value pair to the reviver function for possible\n        // transformation, starting with a temporary root object that holds the result\n        // in an empty key. If there is not a reviver function, we simply return the\n        // result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n})();\n\nexport {MarkupParser};\n\n\n// TODO: these should be in a unit test file, not here\nexport function TestStringStream() {\n    let tests = [];\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.char();\n        if (temp !== \"A\") {\n            throw Error(\"char seems to fail. Expected: 'A' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"la\") {\n            throw Error(\"word seems to fail. Expected: 'la' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"bala\") {\n            throw Error(\"word seems to fail. Expected: 'bala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"portocala\") {\n            throw Error(\"word seems to fail. Expected: 'portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.word();\n        if (temp !== \"Ala\") {\n            throw Error(\"word seems to fail. Expected: 'Ala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.char();\n        if (temp !== \" \") {\n            throw Error(\"word seems to fail. Expected: ' ' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line();\n        if (temp !== \"bala    portocala\") {\n            throw Error(\"line seems to fail. Expected: 'bala    portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Buna bate toba\\n Bunica bate tare\\nBunica bate tobaaa \\nCu maciuca-n casa mare!\");\n\n        let temp;\n\n        temp = ss.line();\n        if (temp !== \"Buna bate toba\") {\n            throw Error(\"line seems to fail. Expected: 'Buna bate toba' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"Bunica\") {\n            throw Error(\"word seems to fail. Expected: 'Bunica' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\");\n        if (temp !== \" bate tare\") {\n            throw Error(\"line seems to fail. Expected: ' bate tare' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\", 11);\n        if (temp !== \"Bunica bate\") {\n            throw Error(\"line seems to fail. Expected: 'Bunica bate' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"tobaaa\") {\n            throw Error(\"line seems to fail. Expected: 'tobaaa' , got '\" + temp + \"'\");\n        }\n\n        ss.char();\n        temp = ss.line();\n        if (temp !== \"\") {\n            throw Error(\"line seems to fail. Expected: '' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line('\\n', 100);\n        if (temp !== \"Cu maciuca-n casa mare!\") {\n            throw Error(\"line seems to fail. Expected: 'Cu maciuca-n casa mare!' , got '\" + temp + \"'\");\n        }\n    });\n\n\n\n    let numFailed = 0;\n    for (let i = 0; i < tests.length; i += 1) {\n        try {\n            tests[i]();\n            console.log(\"Test \", i, \" ran successfully.\");\n        } catch (e) {\n            numFailed += 1;\n            console.log(\"Failed StringStream test \", i, \"! Reason: \", e);\n        }\n    }\n\n    console.log(\"Finished running all tests. Failed: \", numFailed);\n}\n","import {UI} from \"../ui/UI\";\nimport {MarkupParser} from \"./MarkupParser\";\nimport {StaticCodeHighlighter, Panel, Link, Image} from \"../ui/UI\";\n\n// Class that for every markup tag returns the UI class to instantiate for that element\nclass MarkupClassMap {\n    constructor(fallback, extraClasses=[]) {\n        this.classMap = new Map();\n        this.fallback = fallback;\n        for (const extraClass of extraClasses) {\n            this.addClass(extraClass[0], extraClass[1]);\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.set(className, classObject);\n    }\n\n    registerDependencies(dependencies) {\n        for (let dependency of dependencies) {\n            if (dependency && dependency.registerMarkup) {\n                dependency.registerMarkup(this);\n            }\n        }\n    }\n\n    static addClass(className, classObject) {\n        this.GLOBAL.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        let classObject = this.classMap.get(className);\n        if (!classObject && this.fallback) {\n            classObject = this.fallback.getClass(className);\n        }\n        return classObject;\n    }\n\n    get(className) {\n        return this.getClass(className);\n    }\n\n    has(className) {\n        return this.getClass(className);\n    }\n};\n\nMarkupClassMap.GLOBAL = new MarkupClassMap();\n\nclass MarkupRenderer extends Panel {\n    setOptions(options) {\n        if (!options.classMap) {\n            options.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n        }\n        if (!options.parser) {\n            options.parser = new MarkupParser({\n                uiElements: options.classMap,\n            });\n        }\n        super.setOptions(options);\n\n        this.setValue(this.options.value || \"\");\n        if (this.options.classMap) {\n            this.classMap = this.options.classMap;\n        }\n    }\n\n    setValue(value) {\n        if (typeof value === \"string\") {\n            this.options.rawValue = value;\n            try {\n                value = this.options.parser.parse(value);\n            } catch (e) {\n                console.error(\"Can't parse \", value, e);\n                value = {\n                    tag: \"span\",\n                    children: [value]\n                };\n            }\n        }\n        this.options.value = value;\n    }\n\n    reparse() {\n        if (this.options.rawValue) {\n            this.setValue(this.options.rawValue);\n        }\n    }\n\n    registerDependencies(dependencies) {\n        if (dependencies.length > 0) {\n            this.classMap.registerDependencies(dependencies);\n            this.reparse();\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        return this.classMap.getClass(className);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    convertToUI(value) {\n        if (value instanceof UI.TextElement || value instanceof UI.Element) {\n            // TODO: investigate this!\n            return value;\n        }\n\n        if (typeof value === \"string\") {\n            return new UI.TextElement(value);\n        }\n        if (Array.isArray(value)) {\n            return value.map(x => this.convertToUI(x));\n        }\n        if (value.children) {\n            value.children = this.convertToUI(value.children);\n        }\n\n        let classObject = this.getClass(value.tag) || value.tag;\n\n        // TODO: maybe just copy to another object, not delete?\n        //delete value.tag;\n        return UI.createElement(classObject, value, ...(value.children || []));\n    }\n\n    render() {\n        return this.convertToUI(this.getValue());\n    }\n}\n\nMarkupClassMap.addClass(\"CodeSnippet\", StaticCodeHighlighter);\n\nconst SafeUriEnhancer = (BaseClass, attribute) => class SafeUriClass extends BaseClass {\n    setOptions(options) {\n        if (options.hasOwnProperty(attribute) && !this.constructor.isSafeUri(options[attribute])) {\n            return super.setOptions(Object.assign({}, options, {[attribute]: undefined}));\n        }\n        return super.setOptions(options);\n    }\n\n    static isSafeUri(uri) {\n        return uri.indexOf(\":\") === -1 ||\n               uri.startsWith(\"http:\") ||\n               uri.startsWith(\"https:\") ||\n               uri.startsWith(\"mailto:\");\n    }\n};\n\nMarkupClassMap.addClass(\"Link\", SafeUriEnhancer(Link, \"href\"));\nMarkupClassMap.addClass(\"Image\", SafeUriEnhancer(Image, \"src\"));\n\nexport {MarkupClassMap, MarkupRenderer};\n","import {UI, Panel, Button, CodeEditor, SectionDivider, ButtonGroup, TextArea, Orientation, Level} from \"UI\";\nimport {MarkupRenderer} from \"markup/MarkupRenderer\";\n\n\nclass MarkupEditor extends Panel {\n    getDefaultOptions() {\n        return {\n            showButtons: true\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"textAlign\", \"center\");\n    }\n\n    getMarkupRenderer() {\n        let rendererOptions = {};\n        if (this.options.classMap) {\n            rendererOptions.classMap = this.options.classMap;\n        }\n        return <MarkupRenderer ref={this.refLink(\"markupRenderer\")} value={this.options.value} style={{height:\"100%\", overflow: \"auto\"}} {...rendererOptions} />;\n    }\n\n    getEditor() {\n        return <TextArea ref=\"codeEditor\" style={{\n            width: \"100%\",\n            height: \"calc(100% - 3px)\",\n            resize: \"none\",\n            backgroundColor: \"#F9F9F9\"\n        }} value={this.options.value || \"\"}/>;\n    }\n\n    render() {\n        let buttons;\n        if (this.options.showButtons) {\n            buttons = <ButtonGroup>\n                <Button ref=\"toggleLeftButton\" label={UI.T(\"Editor\")} level={Level.SUCCESS}/>\n                <Button ref=\"toggleRightButton\" label={UI.T(\"Article\")} level={Level.SUCCESS}/>\n            </ButtonGroup>;\n        }\n\n        return [\n            buttons,\n            <SectionDivider ref=\"sectionDivider\" orientation={Orientation.HORIZONTAL}\n                            style={{textAlign: \"initial\", height: \"100%\", width: \"100%\", display:\"inline-block\",\n                                    overflow: \"hidden\"}}>\n                <Panel ref=\"editorPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"hidden\"}}>\n                    {this.getEditor()}\n                </Panel>\n                <Panel ref=\"rendererPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"auto\", padding: \"10px\"}}>\n                    {this.getMarkupRenderer()}\n                </Panel>\n            </SectionDivider>\n        ]\n    }\n\n    updateValue(markup) {\n        this.markupRenderer.setValue(markup);\n        this.markupRenderer.redraw();\n    }\n\n    appendValue(markup, separator=\"\\n\") {\n        let value = this.getValue();\n        if (value && separator != null) {\n            value += separator;\n        }\n        value += markup;\n        this.setValue(value);\n        this.updateValue(value);\n    }\n\n    setEditorOptions() {\n        this.editorPanel.addListener(\"resize\", () => {\n            this.codeEditor.setWidth(this.editorPanel.getWidth() - 15);\n        });\n\n        this.codeEditor.addNodeListener(\"input\", () => {\n            let markup = this.codeEditor.getValue();\n            try {\n                this.updateValue(markup);\n            } catch (e) {\n                console.error(\"Exception in parsing markup: \", e);\n            }\n        });\n    }\n\n    onMount() {\n        if (this.options.showButtons) {\n            this.toggleLeftButton.addClickListener(() => {\n                if (this.editorPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(0);\n                    this.toggleLeftButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(0);\n                    this.toggleLeftButton.setLevel(Level.DANGER);\n                }\n            });\n            this.toggleRightButton.addClickListener(() => {\n                if (this.rendererPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(1);\n                    this.toggleRightButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(1);\n                    this.toggleRightButton.setLevel(Level.DANGER);\n                }\n            });\n        }\n\n        this.setEditorOptions();\n    }\n\n    getValue() {\n        return this.codeEditor.getValue();\n    }\n\n    setValue(value) {\n        this.updateValue(value);\n        return this.codeEditor.setValue(value);\n    }\n}\n\nexport {MarkupEditor};\n","import {Ajax} from \"Ajax\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nclass User extends StoreObject {\n    constructor(obj) {\n        super(obj);\n    }\n\n    getName() {\n    }\n\n    getCustomSetting(key, defaultValue) {\n        let keyChain = key.split(\":\");\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (key in currentDict) {\n                currentDict = currentDict[key];\n            } else {\n                return defaultValue;\n            }\n        }\n        return currentDict;\n    }\n\n    getParsedCustomSetting(key, defaultValue) {\n        return JSON.parse(this.getCustomSetting(key, defaultValue));\n    }\n\n    setCustomSetting(key, value) {\n        let keyChain = key.split(\":\");\n        let lastKey = keyChain.pop();\n        if (!this.customSettings) {\n            this.customSettings = {};\n        }\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (!(key in currentDict)) {\n                currentDict[key] = {};\n            }\n            currentDict = currentDict[key];\n        }\n        currentDict[lastKey] = value;\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: JSON.parse(value),\n            rawValue: value,\n            origin: \"set\",\n        });\n    }\n\n    saveCustomSetting(key, value) {\n        if (this.id != USER.id) {\n            console.error(\"Invalid user\");\n            return;\n        }\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: value,\n            origin: \"save\",\n        });\n\n        let request = {\n            customSettingsKey: key,\n            customSettingsValue: value,\n        };\n\n        if (!this.timeouts) {\n            this.timeouts = new Map();\n        }\n        if (this.timeouts.has(key)) {\n            clearTimeout(this.timeouts.get(key));\n        }\n        this.timeouts.set(key, setTimeout(() => {\n            Ajax.postJSON(\"/accounts/profile_changed/\", request).then(() => {}, () => {});\n        }));\n    }\n\n    applyEvent(event) {\n        if (event.type === \"setCustomSetting\") {\n            console.log(\"Updated custom settings: \", event);\n            this.setCustomSetting(event[\"data\"].key, event[\"data\"].value);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n}\n\nvar UserStore = new GenericObjectStore(\"user\", User);\n\nUserStore.getCurrentUser = function () {\n    return window.USER;\n};\n\nclass PublicUser extends StoreObject {\n    getDisplayHandle() {\n        let name;\n        if (this.displayName) {\n            name = this.name || this.username;\n        } else {\n            name = this.username || this.name;\n        }\n        return name || (\"user-\" + this.id);\n    }\n\n    getProfileUrl() {\n        if (this.username) {\n            return \"/user/\" + this.username;\n        } else {\n            return \"/userid/\" + this.id;\n        }\n    }\n}\n\n// TODO: extend AjaxFetchMixin, to put the options in the constructor\nvar PublicUserStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar PublicUserStore = new PublicUserStoreClass(\"publicuser\", PublicUser, {\n    fetchTimeoutDuration: 20,\n    maxFetchObjectCount: 512,\n    fetchURL: \"/accounts/public_user_profiles/\",\n});\n\nwindow.USER = Object.assign({\n    id: 0,\n    customSettings: {}\n}, window.USER || {});\n\nwindow.USER = UserStore.fakeCreate(window.USER);\n\nclass UserNotification extends StoreObject {\n    getUser() {\n        return UserStore.get(this.userId);\n    }\n\n    isRead() {\n        return (this.id <= this.getUser().lastReadNotificationId);\n    }\n}\n\nvar UserNotificationStore = new GenericObjectStore(\"UserNotification\", UserNotification, {dependencies: [\"user\"]});\n\nexport {UserStore, PublicUserStore, UserNotificationStore};\n","import {UI} from \"UI\";\nimport {PublicUserStore} from \"UserStore\";\n\nclass UserHandle extends UI.Element {\n    setOptions(options) {\n        options.userId = options.userId || options.id;\n\n        super.setOptions(options);\n\n        this.options.color = this.options.color || \"#2089b5\";\n        this.setUser(PublicUserStore.get(this.options.userId));\n    }\n\n    setUser(user) {\n        this.user = user;\n    }\n\n    getNodeType() {\n        return \"span\";\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        this.handle.setStyle(\"color\", color);\n    }\n\n    render() {\n        let handle;\n        if (!this.user) {\n            PublicUserStore.fetch(this.options.userId, (user) => {\n                this.setUser(user);\n                this.redraw();\n            });\n            handle = <b ref=\"handle\" style={{color: \"#BBB\"}}>{\"user-\" + this.options.userId}</b>;\n        } else {\n            handle = <span ref=\"handle\" style={{cursor: \"pointer\", color: this.options.color}}\n                      onClick={() => {window.open(this.user.getProfileUrl(), \"_blank\")}}><b>{this.user.getDisplayHandle()}</b></span>\n        }\n\n        //The purpose of the container is to simplify the usage of the popup.\n        return [\n            <span ref=\"container\" style={{position: \"relative\", overflow: \"hidden\"}}>\n                {handle}\n                {this.options.children}\n            </span>\n        ]\n    }\n}\n\nexport {UserHandle};\n","import {UI, SVG, Switcher, Button} from \"UI\";\nimport {MarkupRenderer, MarkupClassMap} from \"MarkupRenderer\";\nimport {Language} from \"LanguageStore\";\n\nimport {Article, ArticleStore} from \"./state/ArticleStore\";\n\n\nclass ArticleRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = options.classMap || this.constructor.markupClassMap;\n        super.setOptions(options);\n    }\n\n    getEditButton() {\n        if (this.options.showEditButton && this.options.article.canBeEditedByUser()) {\n            let url = this.options.editButtonUrl || (\"/article/\" + this.options.article.id + \"/edit/\");\n            return <div className=\"text-left\">\n                <a href={url} target=\"_blank\">\n                    <Button label={UI.T(\"Edit\")}\n                               style={{\"margin\": \"10px\"}}/></a>\n            </div>;\n        }\n    }\n\n    render() {\n        return [\n            this.getEditButton(),\n            super.render()\n        ];\n    }\n\n    setArticle(article) {\n        this.updateOptions({ article });\n    }\n\n    getValue() {\n        super.setValue(this.getArticleToRender().markup);\n        return super.getValue();\n    }\n\n    getArticleToRender() {\n        return this.options.article.getTranslation();\n    }\n\n    getArticleDependencies() {\n        const dependencies = this.options.article.dependency;\n        return dependencies && dependencies.split(\",\");\n    }\n\n    redraw() {\n        const dependencies = this.getArticleDependencies();\n        if (!dependencies) {\n            super.redraw();\n            return;\n        }\n\n        // Not using require directly to fool webpack\n        window[\"require\"](dependencies, (...args) => {\n            this.registerDependencies(args);\n            super.redraw();\n        });\n    }\n\n    onMount() {\n        if (this.options.liveLanguage) {\n            this.attachListener(Language, \"localeChange\", () => this.redraw());\n        }\n    }\n}\n\nclass RecursiveArticleRenderer extends ArticleRenderer {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.articleId = this.options.articleId || this.options.id;\n    }\n\n    redraw() {\n        if (this.options.article) {\n            return super.redraw();\n        } else {\n            ArticleStore.fetch(this.options.articleId, (article) => this.updateOptions({ article }));\n        }\n    }\n}\n\nclass ArticleSwitcher extends Switcher {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            fullHeight: true,\n        });\n    }\n\n    constructor() {\n        super(...arguments);\n        this.articleChildMap = new WeakMap();\n    }\n\n    setOptions(options) {\n        options = Object.assign({\n            lazyRender: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    getPageForArticle(article) {\n        if (!this.articleChildMap.has(article)) {\n            this.articleChildMap.set(article, <ArticleRenderer article={article} showEditButton={this.options.showEditButton} />);\n        }\n        return this.articleChildMap.get(article);\n    }\n\n    setActive(article) {\n        if (!(article instanceof Article)) {\n            super.setActive(article);\n            return;\n        }\n        super.setActive(this.getPageForArticle(article));\n    }\n\n    setActiveArticleId(articleId) {\n        ArticleStore.fetch(articleId, (article) => {\n            this.setActive(article);\n        });\n    }\n\n    onMount() {\n        super.onMount();\n        if (this.options.initialArticle) {\n            this.setActive(this.options.initialArticle);\n        }\n        if (this.options.initialArticleId) {\n            this.setActiveArticleId(this.options.initialArticleId);\n        }\n    }\n}\n\nArticleRenderer.markupClassMap = new MarkupClassMap(MarkupClassMap.GLOBAL, [\n    [\"Article\", RecursiveArticleRenderer],\n    [\"RawSVG\", SVG.RawSVG]\n]);\n\nexport {ArticleRenderer, RecursiveArticleRenderer, ArticleSwitcher};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\nconst color = {\n    BLUE: \"#20232d\",\n    HOVER_BLUE: \"#364251\",\n    BLACK: \"#181a22\",\n    HOVER_BLACK: \"#323539\",\n    WHITE: \"#eee\",\n};\n\nlet CSAStyle = {\n    color: color,\n};\n\nclass BlogStyle extends StyleSheet {\n    titleFontSize = \"2em\";\n\n    @styleRule\n    commentsTitle = {\n        height: \"20px\",\n        color: \"#333\",\n        marginTop: \"10px\",\n        fontSize: \"1em\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    bottomSection = {\n        marginTop: \"5px\",\n        height: \"50px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    blogEntryView = {\n        \"margin\": \"0 auto\",\n        \"width\": \"900px\",\n        \"max-width\": \"100%\",\n        // \"padding-top\": \"50px\",\n        // \"padding-bottom\": \"50px\",\n    };\n\n    title = {\n        \"font-size\": this.titleFontSize,\n        \"padding-top\": \"20px\",\n        \"padding-bottom\": \"10px\",\n        \"text-decoration\": \"italic\",\n        \"width\": \"100%\",\n        \"text-align\": \"center\",\n        \"word-wrap\": \"normal\",\n        \"line-height\": \"60px\",\n    };\n\n    writtenBy = {\n        \"width\": \"100%\",\n        \"text-align\": \"left\",\n        \"padding-top\": \"20px\",\n        \"font-size\": \"1em\",\n        \"color\": \"#666\",\n    };\n\n    article = {\n        \"text-align\": \"justify\",\n        \"font-size\": \"17px\",\n    };\n\n    link = {\n        textDecoration: \"none\",\n        textAlign: \"center\",\n        marginTop: \"-15pt\",\n        fontSize: \"1.1em\",\n    };\n\n    blogArticleRenderer = {\n        overflow: \"hidden\",\n        position: \"relative\",\n        maxHeight: \"180px\",\n        \"text-align\": \"justify\",\n        \"font-size\": \"17px\",\n        marginBottom: \"25px\",\n    };\n\n    @styleRule\n    whiteOverlay = {\n        height: \"100px\",\n        background: \"linear-gradient(rgba(255,255,255,0), #fff)\",\n        position: \"absolute\",\n        marginTop: \"-120px\",\n        pointerEvents: \"none\",\n        width: \"92%\",\n    };\n\n    @styleRule\n    loadMoreButton = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"40px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        borderColor: CSAStyle.color.BLUE,\n        fontSize: \"1em\",\n        transition: \".2s\",\n        textTransform: \"uppercase\",\n        opacity: \"1\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active:focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    sendMessageButtonStyle = {\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        borderColor: \"#333\",\n        fontSize: \"13px\",\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus:active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass BlogArticleRendererStyle extends StyleSheet {\n    hStyle = {\n        \"text-align\": \"center\",\n        \"margin-top\": \"30px\",\n        \"margin-bottom\": \"30px\",\n        \"width\": \"100%\",\n    };\n\n    @styleRule\n    blogArticleRenderer = {\n        \" h1\": this.hStyle,\n        \" h2\": this.hStyle,\n        \" h3\": this.hStyle,\n        \" h4\": this.hStyle,\n        \" h5\": this.hStyle,\n        \" h6\": this.hStyle,\n    };\n\n    @styleRule\n    quote = {\n        \"font-style\": \"italic\",\n        \"margin-top\": \"20px\",\n        \"margin-bottom\": \"20px\",\n        \"color\": \"#707070\",\n        \"float\": \"right\",\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n    };\n}\n\n\nexport {BlogStyle, BlogArticleRendererStyle};\n","import {UI, registerStyle} from \"UI\";\nimport {ArticleRenderer} from \"ArticleRenderer\";\nimport {MarkupClassMap} from \"MarkupRenderer\";\nimport {BlogArticleRendererStyle} from \"./BlogStyle\";\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogArticleRenderer extends ArticleRenderer {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.blogArticleRenderer);\n    }\n}\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogQuote extends UI.Primitive(\"div\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.quote);\n    }\n\n    render() {\n        return [\n            <div style={{\n                \"flex-grow\": \"1000000\",\n                \"min-width\": \"10%\",\n                \"display\": \"inline-block\",\n            }}></div>,\n            <div style={{\n                \"flex-grow\": \"1\",\n                \"display\": \"inline-block\",\n            }}>\n                {this.options.value}\n            </div>\n        ];\n    }\n}\n\n\nBlogArticleRenderer.markupClassMap = new MarkupClassMap(ArticleRenderer.markupClassMap);\nBlogArticleRenderer.markupClassMap.addClass(\"Quote\", BlogQuote);\n\n\nexport {BlogArticleRenderer, BlogQuote};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Modal,\n    Panel,\n    Select,\n    SortableTable,\n    TemporaryMessageArea,\n    TextInput,\n    Level,\n    UI,\n} from \"UI\";\nimport {FAIcon} from \"FontAwesome\";\nimport {Ajax} from \"Ajax\";\nimport {StemDate} from \"Time\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Language} from \"LanguageStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {GlobalStyle} from \"GlobalStyle\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\n\n\nclass TransferOwnershipModal extends ActionModal {\n    getActionName() {\n        return \"Transfer ownership\";\n    }\n\n    getActionLevel() {\n        return Level.PRIMARY;\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    getBody() {\n        return [\n            <UI.TextElement ref=\"text\" value={\"Set owner for \" + this.getArticle().name + \":\"}/>,\n            <Form style={{marginTop: \"10px\"}}>\n                <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                    <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId} />\n                </FormField>\n            </Form>\n        ];\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"transferOwnershipButton\" level={this.getActionLevel()} onClick={() => this.action()}\n                               statusOptions={[this.getActionName(), {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"},\n                                               this.getActionName(), \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    action() {\n        let newOwner = this.ownerFormInput.getValue();\n        let request = {\n            newOwner: newOwner\n        };\n\n        this.messageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.transferOwnershipButton.postJSON(\"/article/\" + this.getArticle().id + \"/set_owner/\", request).then(\n            () => this.hide(),\n            (error) => this.messageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete article\";\n    }\n\n    getBody() {\n        return <UI.TextElement ref=\"text\" value={\"Delete \" + this.getArticle().name + \"?\"}/>;\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.getArticle().id + \"/delete/\", {}).then(\n            () => {\n                let table = this.options.parent.table;\n                table.options.articles.splice(table.getArticleIndex(this.getArticle().id), 1);\n                table.redraw();\n                this.hide();\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\nclass CreateArticleModal extends ActionModal {\n    getActionName() {\n        return \"Create article\";\n    }\n\n    getBody() {\n        return <Form style={{marginTop: \"10px\"}}>\n            <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                <TextInput ref=\"articleNameInput\"  value=\"\"/>\n            </FormField>\n            <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                <TextInput ref=\"dependencyInput\" value=\"\"/>\n            </FormField>\n            <FormField ref=\"languageFormField\" label=\"Language\">\n                <Select ref=\"languageSelect\" options={Language.all()}/>\n            </FormField>\n            <FormField ref=\"publicFormField\" label=\"Public\">\n                <CheckboxInput ref=\"publicCheckbox\" checked={false}/>\n            </FormField>\n        </Form>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY} onClick={() => {this.createArticle()}}\n                               statusOptions={[\"Create article\", {faIcon: \"spinner fa-spin\", label:\" creating article ...\"},\n                                               \"Create article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    createArticle(options) {\n        let name = this.articleNameInput.getValue();\n        let dependency = this.dependencyInput.getValue();\n        let languageId = this.languageSelect.get().id;\n        let isPublic = this.publicCheckbox.getValue();\n        let request = {\n            name: name,\n            dependency: dependency,\n            languageId: languageId,\n            isPublic: isPublic\n        };\n        if (options) {\n            Object.assign(request, options);\n        }\n        this.createArticleButton.postJSON(\"/create_article/\", request).then(\n            (data) => {\n                this.options.parent.table.addArticle(ArticleStore.get(data.article.id));\n                this.hide();\n            },\n            (error) => {\n                this.messageArea.showMessage(error.message, \"red\");\n            }\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass AddTranslationModal extends CreateArticleModal {\n    getActioName() {\n        return \"Add translation\";\n    }\n\n    getBody() {\n        const baseArticle = this.options.baseArticle;\n        return <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                        <TextInput ref=\"articleNameInput\"  value={\"Translation for \" + baseArticle.name}/>\n                    </FormField>\n                    <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                        <TextInput ref=\"dependencyInput\" value={baseArticle.dependency}/>\n                    </FormField>\n                    <FormField ref=\"languageFormField\" label=\"Language\">\n                        <Select ref=\"languageSelect\" options={Language.all()}/>\n                    </FormField>\n                    <FormField ref=\"publicFormField\" label=\"Public\">\n                        <CheckboxInput ref=\"publicCheckbox\" checked={baseArticle.isPublic}/>\n                    </FormField>\n                </Form>\n    }\n\n    getFooter() {\n        const baseArticle = this.options.baseArticle;\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY}\n                               onClick={() => this.createArticle({\n                                   baseArticleId: baseArticle.id,\n                                   markup: baseArticle.markup\n                               })}\n                               statusOptions={[\"Add translation\", {faIcon: \"spinner fa-spin\", label:\" creating translation article ...\"},\n                                               \"Success\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n}\n\nclass ArticleOwnerSpan extends UI.Primitive(\"span\") {\n    getArticle() {\n        return this.options.article;\n    }\n\n    render() {\n        return <UserHandle id={this.getArticle().userCreatedId}/>;\n    }\n\n    onMount() {\n        this.attachUpdateListener(this.getArticle(), () => this.redraw());\n    }\n}\n\nclass ArticlePublicSpan extends FAIcon {\n    getDefaultOptions() {\n        return {\n            size: \"lg\"\n        };\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    isPublic() {\n        return this.options.article.isPublic;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"color\", this.isPublic() ? \"green\" : \"red\");\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.icon = this.isPublic() ? \"check\" : \"times\";\n    }\n\n    onMount() {\n        this.attachUpdateListener(this.getArticle(),\n            () => this.updateOptions({icon: this.isPublic() ? \"check\" : \"times\"})\n        );\n    }\n}\n\nclass ArticleTable extends SortableTable {\n    setOptions(options) {\n        super.setOptions(options);\n        this.resetColumnSortingOrder();\n    }\n\n    resetColumnSortingOrder() {\n        this.columnSortingOrder = [this.columns[4], this.columns[5], this.columns[0],\n            this.columns[3], this.columns[2], this.columns[1]];\n    }\n\n    getArticleIndex(articleId) {\n        for (let i = 0; i < this.options.articles.length; i += 1) {\n            if (this.options.articles[i].id === articleId)\n                return i;\n        }\n        return -1;\n    }\n\n    addArticle(article) {\n        this.options.articles.push(article);\n        this.redraw();\n    }\n\n    setColumns() {\n        let cellStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let headerStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let columns = [{\n            value: article => <Link href={\"/article/\" + article.id + \"/edit/\"} value={article.name} />,\n            rawValue: article => article.name,\n            headerName: \"Article\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <ArticleOwnerSpan article={article} />,\n            rawValue: article => PublicUserStore.get(article.userCreatedId).username,\n            headerName: \"Author\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <ArticlePublicSpan article={article} />,\n            rawValue: article => (article.isPublic ? \"Yes\" : \"No\"),\n            headerName: \"Public\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => Language.get(article.languageId).name,\n            rawValue: article => Language.get(article.languageId).name,\n            headerName: \"Language\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateCreated).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateCreated,\n            sortDescending: true,\n            headerName: \"Date created\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateModified).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateModified,\n            sortDescending: true,\n            headerName: \"Date modified\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }];\n        if (!this.options.parent.options.readOnly) {\n            if (USER.isSuperUser) {\n                columns.push({\n                    value: article => <Button level={Level.PRIMARY} label=\"Set owner\"\n                                              onClick={() => TransferOwnershipModal.show({ article })}/>,\n                    headerName: \"Set owner\",\n                    headerStyle: headerStyle,\n                    cellStyle: cellStyle\n                });\n            }\n            columns.push({\n                value: article => <Button level={Level.DANGER} label=\"Delete\"\n                                             onClick={() => {\n                                                 DeleteArticleModal.show({\n                                                     article,\n                                                     parent: this.options.parent\n                                                 });\n                                             }}/>,\n                headerName: \"Delete\",\n                headerStyle: headerStyle,\n                cellStyle: cellStyle\n            });\n        }\n        super.setColumns(columns);\n    }\n\n    getEntries() {\n        return this.sortEntries(this.options.articles);\n    }\n}\n\nclass ArticleManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Article manager\",\n            articles: [],\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(GlobalStyle.Container.SMALL);\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\">\n                <Button level={Level.PRIMARY} label=\"Create article\"\n                           onClick={() => CreateArticleModal.show({parent: this})}\n                           style={{marginTop: \"5px\", marginBottom: \"5px\"}}/>\n            </div>;\n        }\n\n        return [\n            <div className=\"pull-left\">\n                <h4><strong>{this.options.title}</strong></h4>\n            </div>,\n            addButton,\n            <ArticleTable ref=\"table\" articles={this.options.articles} parent={this}/>,\n        ];\n    }\n\n    onMount() {\n        if (this.options.articles && this.options.articles.length > 0) {\n            return;\n        }\n        Ajax.getJSON(\"/get_available_articles/\", {}).then(\n            () => this.table.updateOptions({articles: ArticleStore.all()})\n        );\n    }\n}\n\nclass ArticleTranslationManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Translation manager\"\n        };\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        this.table = <ArticleTable articles={[]} parent={this}/>;\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\"><Button level={Level.PRIMARY} label=\"Add translation\"\n                                                            onClick={() => AddTranslationModal.show({\n                                                                parent: this,\n                                                                baseArticle: this.options.baseArticle\n                                                            })}\n                                                            style={{marginTop: \"5px\", marginBottom: \"5px\"}}/></div>;\n        }\n        return [<div className=\"pull-left\"><h4><strong>{this.options.title}</strong></h4></div>, addButton, this.table];\n    }\n\n    onMount() {\n        if (!this.options.baseArticle) {\n            return;\n        }\n\n        Ajax.getJSON(\"/article/\" + this.options.baseArticle.id + \"/get_translations/\", {}).then(\n            () => {\n                for (let article of ArticleStore.all()) {\n                    if (article.baseArticleId === this.options.baseArticle.id) {\n                        this.table.options.articles.push(article);\n                    }\n                }\n                this.table.redraw();\n            }\n        );\n    }\n}\n\nexport {ArticleManager, ArticleTranslationManager};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Panel,\n    SectionDivider,\n    Select,\n    TabArea,\n    TemporaryMessageArea,\n    TextArea,\n    TextInput,\n    Level,\n    UI,\n} from \"UI\";\nimport {Language} from \"LanguageStore\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\nimport {ArticleTranslationManager} from \"./ArticleManager\";\nimport {ArticleRenderer} from \"./ArticleRenderer\";\nimport {MarkupEditor} from \"./markup/MarkupEditor\";\n\n\nconst deleteRedirectLink = \"/\";\n\nclass ArticleMarkupEditor extends MarkupEditor {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.value = this.options.article.markup;\n    }\n\n    getMarkupRenderer() {\n        return <ArticleRenderer ref={this.refLink(\"markupRenderer\")} article={this.options.article} style={{flex:\"1\", height: \"100%\", overflow: \"auto\"}} />\n    }\n\n    updateValue(markup) {\n        this.options.article.markup = markup;\n        super.updateValue(markup);\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete Article\";\n    }\n\n    getBody() {\n        return <p>Delete {this.options.article.name}?</p>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.options.article.id + \"/delete/\", {}).then(\n            () => {\n                if (this.options.article.baseArticleId)\n                    window.location.replace(\"/article/\" + this.options.article.baseArticleId + \"/edit/\");\n                else\n                    window.location.replace(deleteRedirectLink);\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n}\n\nclass ArticleEditor extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n\n    }\n\n    getArticle() {\n        return ArticleStore.get(this.options.articleId);\n    }\n\n    initializeVersioning() {\n        if (ArticleEditor.DiffWidgetClass) {\n            this.versions = [];\n            this.versionsLabels = [];\n            for (let article of this.getArticle().getEdits()) {\n                this.versions.push(article.content);\n                this.versionsLabels.push(\"Version \" + article.id);\n            }\n            this.versions.push(this.getArticle().markup);\n            this.versionsLabels.push(\"Edit version\");\n            this.versions.reverse();\n            this.versionsLabels.reverse();\n\n            this.leftEditable = true;\n            this.rightEditable = false;\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            height: \"100%\",\n        });\n    }\n\n    render() {\n        this.initializeVersioning();\n        let translationsPanel = null;\n        let baseArticleForm = null;\n        if (this.getArticle().baseArticleId) {\n            baseArticleForm = <FormField ref=\"baseArticleFormField\" label=\"Base article\">\n                <Link href={\"/article/\" + this.getArticle().baseArticleId + \"/edit/\"} value=\"Go to base article\" />\n            </FormField>;\n        } else {\n            translationsPanel = <Panel title=\"Translations\">\n                <ArticleTranslationManager title={\"Translations for \" + this.getArticle().name}\n                                    baseArticle={this.getArticle()}/>\n            </Panel>\n        }\n        let ownershipPanel = null;\n        if (USER.isSuperUser) {\n            ownershipPanel = <Panel title=\"Ownership\">\n                <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                        <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId}/>\n                    </FormField>\n                </Form>\n                <AjaxButton ref=\"setOwnerButton\" level={Level.INFO} onClick={() => {\n                                let newOwner = this.ownerFormInput.getValue();\n                                this.setOwner(newOwner);\n                               }}\n                               statusOptions={[\"Transfer ownership\", {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"}, \"Transfer ownership\", \"Failed\"]}\n                        />\n                <TemporaryMessageArea ref=\"setOwnerMessageArea\"/>\n            </Panel>\n        }\n\n        let revisionsPanel;\n        if (ArticleEditor.DiffWidgetClass) {\n            let DiffWidgetClass = ArticleEditor.DiffWidgetClass;\n                revisionsPanel = <Panel title=\"Revisions\" style={{height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel>\n                    <Select ref=\"leftTextSelector\" options={this.versionsLabels}/>\n                    <Select style={{float:\"right\", marginRight:\"25px\"}} ref=\"rightTextSelector\" options={this.versionsLabels}/>\n                </Panel>\n                <DiffWidgetClass ref=\"diffWidget\" leftEditable={this.leftEditable} rightEditable={this.rightEditable}\n                                 leftTextValue={this.versions[2]} arrows={this.arrows} rightTextValue={this.versions[1]}\n                                     style={{flex:\"1\", height: \"calc(100% - 100px)\", width: \"calc(100% - 100px)\"}} />\n            </Panel>;\n        }\n\n        return [\n            <h3>{this.getArticle().name + \" Id=\" + this.options.articleId}</h3>,\n                <TabArea ref=\"tabArea\" variableHeightPanels style={{flex: \"1\", height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel title=\"Edit\" active style={{height: \"100%\", overflow: \"hidden\"}}>\n                    <AjaxButton ref=\"saveMarkupButton\" level={Level.INFO} onClick={() => {\n                                    let content = this.markupEditor.getValue();\n                                    this.saveMarkup(content);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <TemporaryMessageArea ref=\"saveMarkupMessageArea\"/>\n                    <ArticleMarkupEditor style={{height: \"100%\", marginTop: \"-31px\", display: \"flex\", flexDirection: \"column\"}}\n                                         ref=\"markupEditor\" article={this.getArticle()} />\n                </Panel>\n                {revisionsPanel}\n                <Panel title=\"Summary\">\n                    <Form style={{marginTop: \"10px\"}}>\n                        <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                            <TextInput ref=\"articleNameFormInput\"  value={this.getArticle().name}/>\n                        </FormField>\n                        <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                            <TextInput ref=\"dependencyFormInput\" value={this.getArticle().dependency}/>\n                        </FormField>\n                        {baseArticleForm}\n                        <FormField ref=\"languageFormField\" label=\"Language\">\n                            <Select ref=\"languageSelect\" options={Language.all()}\n                                       selected={Language.get(this.getArticle().languageId)}/>\n                        </FormField>\n                        <FormField ref=\"publicFormField\" label=\"Public\">\n                            <CheckboxInput ref=\"publicCheckbox\" checked={this.getArticle().isPublic}/>\n                        </FormField>\n                    </Form>\n                    <AjaxButton ref=\"saveOptionsButton\" level={Level.INFO} onClick={() => {\n                                    let name = this.articleNameFormInput.getValue();\n                                   let dependency = this.dependencyFormInput.getValue();\n                                   let languageId = this.languageSelect.get().id;\n                                   let isPublic = this.publicCheckbox.getValue();\n                                   let options = {\n                                       name: name,\n                                       dependency: dependency,\n                                       languageId: languageId,\n                                       isPublic: isPublic\n                                   };\n                                   this.saveOptions(options);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <Button ref=\"deleteArticleButton\" level={Level.DANGER} label=\"Delete article\"\n                               style={{marginLeft: \"3px\"}}\n                               onClick={() => this.deleteArticleModal.show()}/>\n                    <TemporaryMessageArea ref=\"saveOptionsMessageArea\"/>\n                </Panel>\n                {translationsPanel}\n                {ownershipPanel}\n            </TabArea>\n        ];\n    }\n\n    saveMarkup(content) {\n        let request = {\n            markup: content\n        };\n\n        this.saveMarkupMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveMarkupButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => {\n                // Add a new version in the dropdown if the save is a success\n                if (ArticleEditor.DiffWidgetClass) {\n                    this.addNewVersion(content);\n                }\n                this.saveMarkupMessageArea.showMessage(\"Saved article\");\n            },\n            (error) => this.saveMarkupMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    saveOptions(options) {\n        let request = {};\n        Object.assign(request, options);\n\n        this.saveOptionsMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveOptionsButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => window.location.replace(\"/article/\" + this.options.articleId + \"/edit/\"),\n            (error) => this.saveOptionsMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    setOwner(newOwner) {\n        this.setOwnerMessageArea.showMessage(\"Saving...\", \"black\", null);\n        this.setOwnerButton.postJSON(\"/article/\" + this.options.articleId + \"/set_owner/\", {\n            newOwner: newOwner\n        }).then(\n            () => this.setOwnerMessageArea.showMessage(\"Author successfully changed\"),\n            (error) => this.setOwnerMessageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    addNewVersion(content) {\n        this.versionsLabels[0] = (\"Version \" + this.versionsLabels.length);\n        this.versions[0] = content;\n\n        this.versions.unshift(this.markupEditor.getValue());\n        this.versionsLabels.unshift(\"Edit version\");\n\n        let leftIndex = this.leftTextSelector.getIndex();\n        let rightIndex = this.rightTextSelector.getIndex();\n\n        this.leftTextSelector.redraw();\n        this.rightTextSelector.redraw();\n\n        this.setLeftIndex(leftIndex);\n        this.setRightIndex(rightIndex);\n    }\n\n    setLeftIndex(index) {\n        this.leftTextSelector.setIndex(index);\n        this.diffWidget.setLeftText(this.versions[index]);\n    }\n\n    setRightIndex(index) {\n        this.rightTextSelector.setIndex(index);\n        this.diffWidget.setRightText(this.versions[index]);\n    }\n\n    onMount() {\n        this.deleteArticleModal = <DeleteArticleModal article={this.getArticle()}/>;\n\n        if (ArticleEditor.DiffWidgetClass) {\n            this.tabArea.titleArea.children[1].addClickListener(() => {\n                this.versions[0] = this.markupEditor.getValue();\n                this.setLeftIndex(this.leftTextSelector.getIndex());\n                this.setRightIndex(this.rightTextSelector.getIndex());\n                //this.diffWidget.diffGutterPanel.scroll();\n            });\n\n            let updateEditable = () => {\n                this.leftEditable = (this.leftTextSelector.getIndex() === 0);\n                this.rightEditable = (this.rightTextSelector.getIndex() === 0);\n                this.diffWidget.setLeftEditable(this.leftEditable);\n                this.diffWidget.setRightEditable(this.rightEditable);\n            };\n\n            this.leftTextSelector.addChangeListener(() => {\n                this.diffWidget.setLeftText(this.versions[this.leftTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.rightTextSelector.addChangeListener(() => {\n                this.diffWidget.setRightText(this.versions[this.rightTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.setLeftIndex(0);\n            this.setRightIndex(1);\n\n            //this.diffWidget.diffGutter.redraw();\n        }\n\n        window.onbeforeunload = () => {\n            // Are you sure you want to close the page?\n            return \"\";\n        }\n    }\n}\n\nexport {ArticleEditor};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class UserReactionCollection extends StoreObject {\n    getUserReactionStore() {\n        return this.getStore().getState().getStore(\"UserReaction\");\n    }\n\n    // TODO should be done as generator? Clearly needs to have indexed data!\n    getReactions() {\n        let reactions = [];\n        for (let reaction of this.getUserReactionStore().all()) {\n            if (reaction.collectionId == this.id) {\n                reactions.push(reaction);\n            }\n        }\n        return reactions;\n    }\n\n    getCurrentUserReaction() {\n        let currentUser = window.USER;\n        for (const userReaction of this.getReactions()) {\n            if (userReaction.userId == currentUser.id) {\n                return userReaction;\n            }\n        }\n        return null;\n    }\n\n    getCurrentUserReactionType() {\n        const currentUserReaction = this.getCurrentUserReaction();\n        return currentUserReaction && currentUserReaction.type;\n    }\n}\n\nexport class UserReaction extends StoreObject {\n}\n\nexport let UserReactionCollectionStore = new GenericObjectStore(\"UserReactionCollection\", UserReactionCollection);\nexport let UserReactionStore = new GenericObjectStore(\"UserReaction\", UserReaction);","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin, VirtualStoreObjectMixin, VirtualStoreMixin} from \"StoreMixins\";\nimport {PublicUserStore} from \"UserStore\";\nimport {UserReactionCollectionStore} from \"UserReactionStore\";\nimport {MarkupParser} from \"MarkupParser\";\nimport {ServerTime, StemDate} from \"Time\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nclass MessageInstance extends VirtualStoreObjectMixin(StoreObject) {\n    constructor(obj, event) {\n        super(obj, event);\n\n        PublicUserStore.fakeCreate(event.user);\n    }\n\n    getNormalizedId() {\n        // TODO: Pretty bad implementation, works though\n        let messageId = this.id + \"\";\n        if (messageId.startsWith(\"temp-\")) {\n            messageId = messageId.substr(5);\n        }\n        return parseInt(messageId);\n    }\n\n    getDate() {\n        return this.timeAdded;\n    }\n\n    getUser() {\n        let user = PublicUserStore.get(this.userId);\n        if (user) {\n            return user.username;\n        }\n        return \"user-\" + this.userId;\n    }\n\n    getContent() {\n        return this.content;\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getReactionCollection(fakeIfMissing=false) {\n        let reactionCollection = UserReactionCollectionStore.get(this.reactionCollectionId);\n        if (fakeIfMissing && !reactionCollection) {\n            return {\n                upvotesCount: 0,\n                downvotesCount: 0,\n                getCurrentUserReactionType() {},\n            };\n        }\n        return reactionCollection;\n    }\n\n    getNumLikes() {\n        return this.getReactionCollection(true).upvotesCount;\n    }\n\n    getNumDislikes() {\n        return this.getReactionCollection(true).downvotesCount;\n    }\n\n    getVotesBalance() {\n        return this.getNumLikes() - this.getNumDislikes();\n    }\n\n    getUserVote() {\n        return this.getReactionCollection(true).getCurrentUserReactionType();\n    }\n\n    getPreviousMessage() {\n        // TODO: this should be cached and kept by the message thread\n        let ans = null;\n        let currentId = this.getNormalizedId();\n        // If message has temporary id, then it is identical with the previous message id, so instead the\n        // previous previous message would be found instead.\n        if (this.hasTemporaryId()) {\n            currentId += 1;\n        }\n        for (let message of this.getMessageThread().getMessages()) {\n            if (message.id < currentId && (!ans || ans.id < message.id)) {\n                ans = message;\n            }\n        }\n        return ans;\n    }\n\n    getNextMessage() {\n        throw \"Implement me!\";\n    }\n\n    hasMarkupEnabled() {\n        return this.getMessageThread().hasMarkupEnabled();\n    }\n\n    getTimeOfDay() {\n        return StemDate.unix(this.timeAdded).format(\"HH:mm\");\n    }\n\n    edit(content, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            message: content,\n        }).then(onSuccess, onError);\n    }\n\n    react(reaction, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            reaction: reaction,\n        }).then(onSuccess, onError);\n    }\n\n    like(onSuccess, onError) {\n        this.react(\"like\", onSuccess, onError);\n    }\n\n    dislike(onSuccess, onError) {\n        this.react(\"dislike\", onSuccess, onError);\n    }\n\n    resetReaction(onSuccess, onError) {\n        this.react(\"resetReaction\", onSuccess, onError);\n    }\n\n    deleteMessage(onSuccess, onError) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    applyEvent(event) {\n        if (event.type === \"messageEdit\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"edit\", event);\n        } else if (event.type === \"reaction\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"reaction\", event);\n        } else if (event.type === \"messageDelete\") {\n            this.dispatch(\"delete\", event);\n            this.getMessageThread().deleteMessageInstance(this);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    updateId(newId) {\n        if (this.id == newId) {\n            return;\n        }\n        let oldId = this.id;\n        super.updateId(newId);\n        let messageThread = this.getMessageThread();\n        messageThread.messages.delete(oldId);\n        messageThread.messages.set(this.id, this);\n    }\n\n    setPostError(postError) {\n        this.postError = postError;\n        this.dispatch(\"postError\", postError);\n        console.log(\"Post error: \", postError);\n    }\n}\n\nclass MessageThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.messages = new Map();\n        // TODO: for now don't register for private chats, you get them as user events\n        // TODO: don't change the global here, you fool!\n        if (!this.streamName.startsWith(\"messagethread-privatechat-\")) {\n            GlobalState.registerStream(this.streamName);\n        }\n        this.online = new Set(this.online || []);\n        this.online.delete(0);\n    }\n\n    hasMarkupEnabled() {\n        return this.markupEnabled || false;\n    }\n\n    addMessageInstance(messageInstance, event) {\n        this.messages.set(messageInstance.id, messageInstance);\n        this.dispatch(\"newMessage\", event);\n    }\n\n    deleteMessageInstance(messageInstance) {\n        this.messages.delete(messageInstance.id);\n    }\n\n    applyEvent(event) {\n        if (event.data.online) {\n            this.online = event.data.online = new Set(event.data.online);\n            this.online.delete(0);\n        }\n        if (event.type === \"online\") {\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaJoined\") {\n            if (event.data.userId != 0) {\n                this.online.add(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaLeft\") {\n            if (event.data.userId != 0) {\n                this.online.delete(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    getMessages(orderDescending=false) {\n        // TODO: should be also as iterable\n        let messages = Array.from(this.messages.values());\n        if (orderDescending) {\n            return messages.sort((a, b) => {return b.id - a.id});\n        }\n        return messages.sort((a, b) => {return a.id - b.id});\n    }\n\n    getNumMessages() {\n        return this.messages.size;\n    }\n\n    getMaxMessageId() {\n        let value = 0;\n        for (let messageInstance of this.messages.values()) {\n            if (!messageInstance.hasTemporaryId() && messageInstance.id > value) {\n                value = messageInstance.id;\n            }\n        }\n        return value;\n    }\n\n    // This method will return the last message of the message thread,\n    // regardless of whether it is virtual or real.\n    getLastMessage() {\n        let lastMessage = null;\n        for (let messageInstance of this.messages.values()) {\n            if (!lastMessage || lastMessage.getNormalizedId() < messageInstance.getNormalizedId() ||\n                    (lastMessage.getNormalizedId() === messageInstance.getNormalizedId() && messageInstance.hasTemporaryId())) {\n                lastMessage = messageInstance;\n            }\n        }\n        return lastMessage;\n    }\n}\n\nclass MessageInstanceStoreClass extends VirtualStoreMixin(GenericObjectStore) {\n    constructor() {\n        super(\"MessageInstance\", MessageInstance, {dependencies: [\"messagethread\", \"publicuser\"]});\n    }\n\n    createVirtualMessageInstance(messageContent, messageThread, temporaryId) {\n        let virtualMessageInstance = {\n            content: messageContent,\n            temporaryId: temporaryId,\n            id: \"temp-\" + temporaryId,\n            timeAdded: ServerTime.now().toUnix(),\n            userId: parseInt(USER.id),\n            messageThreadId: messageThread.id,\n            meta: {},\n        };\n\n        return this.fakeCreate(virtualMessageInstance, \"virtualMessage\");\n    };\n}\n\nvar MessageInstanceStore = new MessageInstanceStoreClass();\n\nMessageInstanceStore.addCreateListener((messageInstance, createEvent) => {\n    messageInstance.getMessageThread().addMessageInstance(messageInstance, createEvent);\n});\n\n\nvar MessageThreadStore = new GenericObjectStore(\"messagethread\", MessageThread);\n\nclass BaseChatObject extends StoreObject {\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getOnlineUserIds() {\n        return this.getMessageThread().online;\n    }\n}\n\nclass GroupChat extends BaseChatObject {\n}\n\nvar GroupChatStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar GroupChatStore = new GroupChatStoreClass(\"groupChat\", GroupChat, {\n    fetchURL: \"/chat/group_chat_state/\",\n    maxFetchObjectCount: 1,\n});\n\nGroupChatStore.getFetchRequestData = function (ids, fetchJobs) {\n    return {\n        chatId: ids[0],\n    };\n};\n\nclass PrivateChat extends BaseChatObject {\n    getOtherUserId() {\n        return (USER.id === this.user1Id ? this.user2Id : this.user1Id);\n    }\n}\n\nvar PrivateChatStore = new GenericObjectStore(\"PrivateChat\", PrivateChat, {\n});\n\nPrivateChatStore.getChatWithUser = function(userId) {\n    let myUserId = USER.id;\n    if (myUserId === userId) {\n        for (let privateChat of this.all()) {\n            if (privateChat.user1Id === userId && privateChat.user2Id === userId) {\n                return privateChat;\n            }\n        }\n        return null;\n    }\n    for (let privateChat of this.all()) {\n        if (privateChat.user1Id === userId || privateChat.user2Id === userId) {\n            return privateChat;\n        }\n    }\n};\n\nPrivateChatStore.fetchForUser = function (userId, onSuccess, onError) {\n    Ajax.postJSON(\"/chat/private_chat_state/\", {\n        userId: userId,\n    }).then(\n        (data) => onSuccess(PrivateChatStore.get(data.privateChatId)),\n        onError\n    );\n};\n\nPrivateChatStore.addListener(\"update\", (obj, event) => {\n    if (event.type === \"privateMessage\") {\n        GlobalState.importState(event.state);\n    }\n});\n\nexport {MessageInstance, MessageInstanceStore, MessageThread, MessageThreadStore, PrivateChatStore, GroupChatStore};\n","import {UI, FloatingWindow, Direction, Panel, Button} from \"UI\";\nimport {Device} from \"Device\";\n\nexport class BasePopup extends FloatingWindow {\n    static bodyPopups = new Set();\n\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.x = 0;\n        options.y = 0;\n        options.contentPadding = \"7px\";\n        options.contentStyle = {};\n        options.arrowDirection = Direction.UP;\n        options.arrowColor = \"white\";\n        options.backgroundColor = \"white\";\n        return options;\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.style = Object.assign({\n            boxShadow: \"0px 0px 4px rgba(0,0,0,0.5)\",\n            borderRadius: \"5px\",\n            display: \"table\",\n            maxWidth: \"350px\",\n            backgroundColor: this.options.backgroundColor,\n            position: \"absolute\",\n            left: (this.options.x) + \"px\",\n            top: (this.options.y) + \"px\",\n            zIndex: \"3\",\n            right: \"0px\"\n        }, this.options.style);\n        this.createArrowStyle();\n    }\n\n    setContent(content) {\n        this.options.children = content;\n        this.redraw();\n    }\n\n    getContent() {\n        return <div style={Object.assign({padding: this.options.contentPadding}, this.options.contentStyle)} ref=\"contentArea\">\n                {this.options.children}\n            </div>;\n    }\n\n    createArrowStyle() {\n        let baseArrowOutline = {\n            \"left\": \"50%\",\n            \"z-index\": \"-3\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n            marginLeft: \"-11px\"\n        };\n\n        this[\"arrow\" + Direction.UP + \"Outline\"] = Object.assign({\n            \"border-bottom\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"-10.8px\",\n            marginLeft: \"-11px\"\n        }, baseArrowOutline);\n\n        this[\"arrow\" + Direction.DOWN + \"Outline\"] = Object.assign({\n            \"border-top\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"2px\"\n        }, baseArrowOutline);\n\n        let baseArrow = {\n            \"left\": \"50%\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n        };\n\n        this[\"arrow\" + Direction.UP] = Object.assign({\n            \"margin-top\": \"-10px\",\n            \"border-bottom\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n\n        this[\"arrow\" + Direction.DOWN] = Object.assign({\n            \"border-top\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n    }\n\n    getArrow() {\n        let direction = this.options.arrowDirection;\n        return [\n            <Panel ref=\"popupArrow\" style={this[\"arrow\" + direction]}/>,\n            <Panel ref=\"popupArrowOutline\" style={this[\"arrow\" + direction + \"Outline\"]} />\n        ];\n    }\n\n    render() {\n        return (this.options.arrowDirection === Direction.UP) ?\n            [this.getArrow(), this.getContent()] :\n            [this.getContent(), this.getArrow()];\n    }\n\n    bindInsideParent() {\n        if (this.target) {\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = (this.options.arrowDirection === Direction.UP ? this.target.offsetHeight : 0);\n        }\n        let left = parseFloat(this.options.x);\n        let top = parseFloat(this.options.y) + (this.options.arrowDirection === Direction.UP ? 11 : - this.getHeight() - 11);\n        let arrowMargin = -11;\n        left -= this.getWidth() / 2;\n        if (this.options.bodyPlaced && this.target) {\n            const rect = this.target.getBoundingClientRect();\n            left += rect.left;\n            top += rect.top;\n        }\n        if (this.target && !this.options.bodyPlaced) {\n            if (this.node.offsetParent && !this.options.bodyPlaced) {\n                let left2 = left + this.node.offsetParent.offsetLeft;\n                if (left2 < 0) {\n                    left -= left2 - 2;\n                    arrowMargin += left2 + 2;\n                } else if (left2 + this.getWidth() > this.node.offsetParent.offsetParent.offsetWidth) {\n                    let delta = this.node.offsetParent.offsetParent.offsetWidth - (left2 + this.getWidth());\n                    arrowMargin -= delta - 2;\n                    left += delta - 2;\n                }\n            }\n        } else {\n            if (left < 0) {\n                arrowMargin += left + 2;\n                left = 2;\n            } else if (left + this.getWidth() > this.parentNode.offsetWidth) {\n                let delta = left + this.getWidth() - this.parentNode.offsetWidth;\n                arrowMargin += delta;\n                left -= delta;\n            }\n        }\n        this.popupArrow.setStyle(\"margin-left\", arrowMargin + \"px\");\n        this.popupArrowOutline.setStyle(\"margin-left\", arrowMargin + \"px\");\n\n        this.setStyle(\"left\", left + \"px\");\n        this.setStyle(\"top\", top + \"px\");\n    }\n\n    setParent(parent) {\n        let newParent;\n        if (parent instanceof HTMLElement) {\n            newParent = parent;\n        } else {\n            newParent = parent.node;\n        }\n        if (newParent === this.parentNode) {\n            return;\n        }\n        if (this.isInDocument()) {\n            this.parentNode.removeChild(this.node);\n            newParent.appendChild(this.node);\n            this.setParentNode(newParent);\n        } else {\n            this.setParentNode(newParent);\n        }\n    }\n\n    setCenter(center, manual=false) {\n        this.options.x = center.x;\n        this.options.y = center.y;\n        if (manual) {\n            setTimeout(() => {\n                this.bindInsideParent();\n            }, 0);\n        } else {\n            this.bindInsideParent();\n        }\n    }\n\n    static clearBodyPopups() {\n        for (const popup of this.bodyPopups) {\n            popup.hide();\n        }\n        this.bodyPopups.clear();\n    }\n\n    onUnmount() {\n        super.onUnmount();\n        if (this.options.bodyPlaced && this.target) {\n            this.constructor.bodyPopups.delete(this);\n        }\n    }\n\n    onMount() {\n        if(this.options.target) {\n            if (this.options.target instanceof HTMLElement) {\n                this.target = this.options.target;\n            } else {\n                this.target = this.options.target.node;\n            }\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = this.target.offsetHeight;\n        }\n        super.onMount();\n        // Set the Popup inside the parent\n        this.bindInsideParent();\n        if (this.options.bodyPlaced && this.target) {\n            this.constructor.bodyPopups.add(this);\n        }\n    }\n}\n\nexport class Popup extends BasePopup {\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.titleFontSize = \"12pt\";\n        options.contentFontSize = \"10pt\";\n        options.arrowColor = \"#F3F3F3\";\n        return options;\n    }\n\n    getContent() {\n        let contentArea = super.getContent();\n        contentArea.options.style = Object.assign({\n            fontSize: this.options.contentFontSize\n        }, contentArea.options.style || {});\n\n        return [<Panel ref=\"titleArea\" style={{backgroundColor: \"#F3F3F3\", paddingLeft: \"20px\", fontSize: this.options.titleFontSize,\n                fontWeight:\"bold\", paddingTop: \"6px\", paddingBottom: \"6px\", textAlign: \"center\",\n                borderBottom: \"1px solid #BEBEBE\"}}>\n                {this.getTitleAreaContent()}\n            </Panel>,\n            contentArea,\n        ];\n    }\n\n    setTitle(newTitle) {\n        this.options.title = newTitle;\n        this.redraw();\n    }\n\n    getTitleAreaContent() {\n        return [<Button className=\"pull-right\" ref=\"closeButton\" style={{backgroundColor:\"transparent\",border: \"none\", color: \"#888888\", fontSize:\"18pt\", padding:\"2px\", marginRight:\"3px\", marginTop:\"-12px\"}} label=\"×\"/>,\n            <div style={{marginRight: \"25px\"}}>{this.options.title}</div>\n        ];\n    }\n\n    bindWindowListeners() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n\n        let documentListener = () => {\n            this.hide();\n            if (!Device.supportsEvent(\"click\")) {\n                document.removeEventListener(\"touchstart\", documentListener);\n            } else {\n                document.removeEventListener(\"click\", documentListener);\n            }\n        };\n        if (!Device.supportsEvent(\"click\")) {\n            document.addEventListener(\"touchstart\", documentListener);\n        } else {\n            document.addEventListener(\"click\", documentListener);\n        }\n\n    }\n\n    show() {\n        super.show();\n        this.bindWindowListeners();\n    }\n\n    redraw() {\n        if (this.isInDocument()) {\n            this.bindInsideParent();\n        }\n        super.redraw();\n    }\n\n    onMount() {\n        super.onMount();\n\n        // fake a click event that will propagate to window and trigger\n        // the events of any other popup, closing them\n        let fakeClickEvent = document.createEvent(\"MouseEvents\");\n        fakeClickEvent.initEvent(\"click\", true, false);\n        document.body.dispatchEvent(fakeClickEvent);\n\n        // Make the popup close when something else is clicked\n        this.bindWindowListeners();\n\n        // Close button behavior\n        this.closeButton.addClickListener(() => {\n            this.hide();\n            this.closeButton.node.blur();\n        });\n        let closeButtonColor = this.closeButton.options.style.color;\n        this.closeButton.addNodeListener(\"mouseover\", () => {\n            this.closeButton.setStyle(\"color\", \"#0082AD\");\n        });\n        this.closeButton.addNodeListener(\"mouseout\", () => {\n            this.closeButton.setStyle(\"color\", closeButtonColor);\n        });\n    }\n}\n","import {UI, Button, Link, Modal, Level, Size, Direction} from \"UI\";\nimport {MarkupEditor} from \"./MarkupEditor\";\nimport {BasePopup} from \"../Popup\";\n// import {Emoji as EmojiMini} from \"EmojiMini\";\n// import \"EmojiUI\";\n\nUI.Emoji = UI.Emoji || UI.Element;\n\nclass ClickableEmote extends UI.Emoji {\n    redraw() {\n        this.redrawTimeout = setTimeout(()=> super.redraw());\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            const textBox = this.options.textBox;\n            if (textBox) {\n                textBox.appendValue(this.getValueText(), \" \");\n            }\n            if (this.options.afterClick) {\n                this.options.afterClick();\n            }\n        });\n    }\n\n    onUnmount() {\n        clearTimeout(this.redrawTimeout);\n    }\n}\n\nclass ClickableEmoji extends ClickableEmote {\n    getValueText() {\n        return \":\" + this.options.value + \":\";\n    }\n}\n\nclass ClickableTwitchEmote extends ClickableEmote {\n    getValueText() {\n        return this.options.value;\n    }\n}\n\nclass EmojiButton extends Button {\n    getPopup() {\n        const textBox = this.options.getTextBox();\n        const afterClick = () => this.closePopup();\n        let emotesList = [];\n        for (let emoji in EmojiMini.EMOJI) {\n            emotesList.push(<ClickableEmoji textBox={textBox} afterClick={afterClick} value={emoji}/>);\n        }\n        for (let twitchEmoji in EmojiMini.TWITCH_EMOTICONS) {\n            emotesList.push(<ClickableTwitchEmote textBox={textBox} afterClick={afterClick} value={twitchEmoji}/>);\n        }\n        return BasePopup.create(this.parent, {\n                target: this,\n                children: emotesList,\n                arrowDirection: Direction.DOWN,\n                style: {\n                    display: \"flex\",\n                    overflow: \"auto\",\n                    height: \"300px\",\n                    width: \"300px\",\n                }\n            });\n    }\n\n    closePopup() {\n        if (this.emojiPopup) {\n            this.emojiPopup.destroyNode();\n            delete this.emojiPopup;\n        }\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            if (this.emojiPopup) {\n                this.closePopup();\n            } else {\n                this.emojiPopup = this.getPopup();\n            }\n        })\n    }\n\n    onUnmount() {\n        this.closePopup();\n    }\n}\n\nclass MarkupEditorModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            height: \"85%\",\n            width: \"80%\",\n            destroyOnHide: false\n        });\n    }\n\n    getMarkupEditorStyle() {\n        return {\n            height: \"85%\",\n            border: \"solid 5px #DDD\",\n            borderRadius: \"10px\"\n        };\n    }\n\n    getButtonStyle() {\n        return {\n            margin: \"5px\"\n        }\n    }\n\n    render() {\n        return [\n            <MarkupEditor ref={this.refLink(\"markupEditor\")} classMap={this.options.classMap} showButtons={false} style={this.getMarkupEditorStyle()}/>,\n            <div ref={this.refLink(\"buttonPanel\")} style={{\"text-align\": \"center\"}} >\n                <Button ref=\"graphExample\" label=\"Graph\"\n                           onClick={() => {this.appendGraphExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"submissionExample\" label=\"Submission\"\n                           onClick={() => {this.appendSubmissionExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"codeSnippetExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Code\"\n                           onClick={() => {this.appendCodeExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"linkExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Link\"\n                           onClick={() => {this.appendLinkExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"latexExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"LaTeX\"\n                           onClick={() => {this.appendLatexExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref={this.refLink(\"doneButton\")} level={Level.PRIMARY} label=\"Done\"\n                           className=\"pull-right\" style={this.getButtonStyle()}/>\n            </div>,\n            //<span ref={this.refLink(\"emotesContainer\")} style={{float: \"left\", position: \"relative\", margin: \"5px\"}}>\n            //    <EmojiButton ref=\"emotes\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Emoticons\" getTextBox={() => this.markupEditor}/>\n            //</span>\n            //<Button ref=\"userExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"User\"\n            //           onClick={() => {this.appendUserExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n            <div className=\"\" style={{\"position\":\"absolute\", \"width\":\"90%\", \"margin-top\":\"45px\"}}>\n                <Link href=\"/about/#markup\" value=\"More details here\" />\n            </div>\n        ];\n    }\n\n    appendLatexExample() {\n        this.markupEditor.appendValue(\"$$lim_{x\\\\to\\\\infty} f(x)$$\");\n    }\n\n    appendGraphExample() {\n        this.markupEditor.appendValue(\"<Graph nodes={[{}, {}, {}]} edges={[{source:1, target:2}]} directed />\");\n    }\n\n    appendSubmissionExample() {\n        this.markupEditor.appendValue(\"<Submission id={25717} />\");\n    }\n\n    appendCodeExample() {\n        this.markupEditor.appendValue(\n            \"```java\\n\" +\n            \"class Main {\\n\" +\n            \"    public static void main (String[] args) throws java.lang.Exception {\\n\" +\n            \"        System.out.println(\\\"42\\\");\\n\" +\n            \"    }\\n\" +\n            \"}\\n\" +\n            \"```\");\n    }\n\n    appendUserExample() {\n        this.markupEditor.appendValue(\"<User id={1} />\");\n    }\n\n    appendLinkExample() {\n        this.markupEditor.appendValue(\"<Link href=\\\"https://csacademy.com\\\" value=\\\"Cool website\\\" newTab/>\");\n    }\n\n    hide() {\n        super.hide();\n        if (this.options.hideCallback) {\n            this.options.hideCallback(this);\n        }\n    }\n\n    show() {\n        super.show();\n        if (this.options.showCallback) {\n            this.options.showCallback(this);\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport {MarkupEditorModal};\n","import {UI} from \"UI\";\nimport {MarkupClassMap, MarkupRenderer} from \"markup/MarkupRenderer\";\n\nclass ChatMarkupRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = this.constructor.classMap;\n        super.setOptions(options);\n    }\n}\n\nChatMarkupRenderer.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n\nexport {ChatMarkupRenderer};\n","import {Dispatchable} from \"./Dispatcher\";\n\nclass ScriptResolver extends Dispatchable {\n    constructor(scriptPath) {\n        super();\n        this.loaded = false;\n        this.jobs = [];\n        // TODO: should be more thought out\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.async = true;\n        scriptElement.src = scriptPath;\n        scriptElement.onload = () => this.onLoad();\n        // TODO: what about error?\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoad() {\n        this.loaded = true;\n        for (let i = 0; i < this.jobs.length; i += 1) {\n            this.jobs[i](this);\n        }\n        this.jobs = [];\n    }\n\n    resolve(callback) {\n        if (this.loaded) {\n            callback(this);\n            return;\n        }\n        this.jobs.push(callback);\n    }\n}\n\nlet scriptResolveMap = new Map();\n\nfunction ensureSingle(script) {\n    let scriptResolver = scriptResolveMap.get(script);\n    if (!scriptResolver) {\n        scriptResolver = new ScriptResolver(script);\n        scriptResolveMap.set(script, scriptResolver);\n    }\n    return new Promise(function(resolve, reject) {\n        scriptResolver.resolve(resolve, reject);\n    });\n}\n\nfunction ensure(scripts, callback) {\n    if (!Array.isArray(scripts)) {\n        scripts = [scripts];\n    }\n    let promises = scripts.map(script => ensureSingle(script));\n    Promise.all(promises).then(function () {\n        callback(...arguments);\n    })\n}\n\nexport {ensure};\n","import {StoreObject, GenericObjectStore} from \"Store\";\n\nimport {Language} from \"./LanguageStore\";\n\n\nclass TranslationKey extends StoreObject {\n}\n\nexport const TranslationKeyStore = new GenericObjectStore(\"TranslationKey\", TranslationKey);\n\nclass TranslationEntry extends StoreObject {\n    getLanguage() {\n        return Language.get(this.languageId);\n    }\n\n    getTranslationKey() {\n        return TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nexport const TranslationEntryStore = new GenericObjectStore(\"TranslationEntry\", TranslationEntry);\n\nLanguage.addListener(\"buildTranslationMap\", (language) => {\n    for (let translationEntry of TranslationEntryStore.all()) {\n        if (translationEntry.languageId === language.id) {\n            language.translationMap.set(translationEntry.getTranslationKey().value, translationEntry.value);\n        }\n    }\n});\n","import {GenericObjectStore, StoreObject} from \"Store\";\nimport {TranslationKeyStore} from \"TranslationStore\";\n\nclass ErrorMessage extends StoreObject {\n    getTranslation() {\n        let translationKey = TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nclass ErrorMessageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"ErrorMessage\", ErrorMessage);\n    }\n}\n\nlet ErrorMessageStore = new ErrorMessageStoreClass();\n\nexport {ErrorMessageStore, ErrorMessage};\n","import {UI, ErrorModal} from \"UI\";\nimport {StoreObject} from \"Store\";\nimport {ErrorMessageStore, ErrorMessage} from \"ErrorMessageStore\";\n\nconst ErrorHandlers = {};\n\nErrorHandlers.wrapError = (error) => {\n    if (error instanceof StoreObject) {\n        return error;\n    }\n\n    if (error.id) {\n        return ErrorMessageStore.fakeCreate(error);\n    } else {\n        if (typeof error === \"string\" || error instanceof String) {\n            error = {message: error};\n        } else if (error instanceof Error) {\n            error = {\n                name: error.name,\n                message: error.message\n            };\n        }\n        return new ErrorMessage(error);\n    }\n};\n\nErrorHandlers.showErrorAlert = (error) => {\n    ErrorModal.show({\n        error: ErrorHandlers.wrapError(error)\n    });\n};\n\nErrorHandlers.PAGE_NOT_FOUND = ErrorHandlers.wrapError(\"Page not found.\");\n\nexport {ErrorHandlers};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\n\nclass SocialAccountManager extends Dispatchable {\n    constructor(socialApp, options) {\n        super();\n        this.socialApp = socialApp;\n        this.options = options;\n    }\n\n    getSocialApp() {\n        return this.socialApp;\n    }\n\n    getClientId() {\n        return this.getSocialApp().getClientId();\n    }\n\n    setLoaded() {\n        this.loaded = true;\n        this.dispatch(\"loaded\");\n    }\n\n    static getInstance() {\n        if (!this._Global) {\n            this._Global = new this();\n        }\n        return this._Global;\n    }\n\n    // TODO: all managers should call the onError function (if one is passed in) to report issues\n    static login(callback, onError) {\n        this.getInstance().login(...arguments);\n    }\n\n    static connect(callback, onError) {\n        this.getInstance().connect(...arguments);\n    }\n}\n\nexport {SocialAccountManager};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class SocialApp extends StoreObject {\n    getClientId() {\n        return this.clientId;\n    }\n}\n\nclass SocialAppStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"SocialApp\", SocialApp);\n    }\n\n    getSocialApps() {\n        return this.all();\n    }\n\n    getSocialAppByName(name) {\n        return this.all().find(socialApp => socialApp.name === name);\n    }\n}\n\nexport let SocialAppStore = new SocialAppStoreClass();\n","import {Ajax} from \"Ajax\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {NOOP_FUNCTION} from \"Utils\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass GoogleManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Google\"), {\n            loginByTokenUrl: \"/accounts/google/login/token/\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data, onSuccess=NOOP_FUNCTION) {\n        Ajax.postJSON(url, data).then(onSuccess);\n    }\n\n    ensureScriptNodeExists() {\n        const id = \"google-jsapi\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.onload = () => {\n            gapi.load(\"auth2\", () => {\n                gapi.auth2.init({\n                    client_id: this.getClientId(),\n                }).then(() => {\n                    // Handle the initial sign-in state.\n                    // this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n                    this.updateSigninStatus(this.getGoogleAuth().isSignedIn.get());\n\n                    // Listen for sign-in state changes.\n                    // gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n                    this.getGoogleAuth().isSignedIn.listen(this.updateSigninStatus);\n\n                    this.setLoaded();\n                });\n            });\n        };\n        scriptElement.src = \"https://apis.google.com/js/platform.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    getGoogleAuth() {\n        return gapi.auth2.getAuthInstance();\n    }\n\n    getGoogleUser() {\n        return this.getGoogleAuth().currentUser.get();\n    }\n\n    getAuthResponse() {\n        return this.getGoogleUser().getAuthResponse();\n    }\n\n    updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n            console.log(\"Google user is signed in\");\n        }\n    }\n\n    handleProcess(process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n        this.getGoogleAuth().grantOfflineAccess({\n            redirect_uri: \"postmessage\",\n            immediate: false,\n        }).then((data) => {\n            Object.assign(data, {\n                process: process,\n            });\n            this.sendData(this.options.loginByTokenUrl, data, () => self.location.reload());\n        });\n    }\n\n    login() {\n        this.handleProcess(\"login\");\n    }\n\n    connect() {\n        this.handleProcess(\"connect\")\n    }\n}\n\nexport {GoogleManager};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass FacebookManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Facebook\"), {\n            version: \"v2.7\",\n            loginByTokenUrl: \"/accounts/facebook/login/token/\",\n            loginOptions: {\n                auth_type: \"rerequest\",\n                scope: \"email\"\n            },\n            logoutUrl: \"/accounts/logout/\",\n            // TODO: should probably look at https://www.facebook.com/translations/FacebookLocales.xml and Language.Locale\n            locale: \"en_US\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data) {\n        Ajax.postJSON(url, data).then(\n            (data) => {\n                if (data.next) {\n                    self.location.href = data.next;\n                } else {\n                    location.reload();\n                }\n            },\n            (error) => {\n                this.dispatch(\"loginError\", error);\n            }\n        );\n    }\n\n    ensureScriptNodeExists() {\n        self.fbAsyncInit = () => {\n            FB.init({\n                appId: this.getClientId(),\n                version: this.options.version,\n                status: true,\n                cookie: true,\n                xfbml: true\n            });\n\n            this.setLoaded();\n        };\n\n        const id = \"facebook-jssdk\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.src = \"//connect.facebook.net/\" + this.options.locale + \"/sdk.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoginCanceled(response) {\n    }\n\n    onLoginError(response) {\n    }\n\n    onLoginSuccess(response, nextUrl, process) {\n        let data = {\n            next: nextUrl || '',\n            process: process,\n            accessToken: response.authResponse.accessToken,\n            expiresIn: response.authResponse.expiresIn\n        };\n        this.sendData(this.options.loginByTokenUrl, data);\n    }\n\n    logout() {\n        if (!self.FB) {\n            return;\n        }\n        FB.logout((response) => {\n            this.onLogoutSuccess(response, nextUrl);\n        });\n    }\n\n    onLogoutSuccess(response) {\n        if (this.options.logoutUrl) {\n            this.sendData(this.options.logoutUrl, data);\n        }\n    }\n\n    handleProcess(nextUrl, action, process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n\n        if (action === \"reauthenticate\") {\n            this.options.loginOptions.auth_type = action;\n        }\n\n        FB.login((response) => {\n            if (response.authResponse) {\n                this.onLoginSuccess(response, nextUrl, process);\n            } else if (response && response.status && [\"not_authorized\", \"unknown\"].indexOf(response.status) > -1) {\n                this.onLoginCanceled(response);\n            } else {\n                this.onLoginError(response);\n            }\n        }, this.options.loginOptions);\n    }\n\n    login(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"login\");\n    }\n\n    connect(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"connect\");\n    }\n}\n\nexport {FacebookManager};\n","import {composeURL} from \"Fetch\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass GithubManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Github\"), {\n            loginWindowOptions: \"height=600,width=800,scrollbars=yes\",\n        });\n    }\n\n    login(callback) {\n        const githubUri = \"https://github.com/login/oauth/authorize\";\n\n        const rawParams = {\n            client_id: this.getClientId(),\n        };\n\n        const uri = composeURL(githubUri, rawParams);\n        const githubWindow = window.open(uri, \"githubWindow\", this.options.loginWindowOptions);\n\n        githubWindow.onbeforeunload = callback;\n    }\n}\n\nexport {GithubManager};\n","import {StoreObject, GenericObjectStore} from \"Store\";\n\nclass Country extends StoreObject {\n    toString() {\n        return this.name;\n    }\n\n    getIsoCode() {\n        return this.isoCode;\n    }\n\n    getEmojiName() {\n        return \"flag_\" + this.getIsoCode().toLowerCase()\n    }\n}\n\nconst ALL_COUNTRIES_PLACEHOLDER = (name) => ({id: 0, name: \"\", toString: () => name || \"All Countries\"});\nconst NO_COUNTRY_PLACEHOLDER = (name) => ({id: -1, name: \"\", toString: () => name || \"None\"});\n\nconst COUNTRY_COMPARATOR = (a, b) => {\n    if (a.name > b.name) {\n        return 1;\n    }\n    return -1;\n};\n\nclass CountryStoreClass extends GenericObjectStore {\n    allWithNone(noneName=\"None\") {\n         return [\n            NO_COUNTRY_PLACEHOLDER(noneName),\n            ...this.all().sort(COUNTRY_COMPARATOR)\n        ];\n    }\n\n    getCountriesFromIds(countriesIds, allCountries=true) {\n        let countries = [];\n        for (let countryId of countriesIds) {\n            countries.push(CountryStore.get(countryId));\n        }\n        let result = countries.sort(COUNTRY_COMPARATOR);\n        if (allCountries) {\n            result.unshift(ALL_COUNTRIES_PLACEHOLDER());\n        }\n        return result;\n    }\n}\n\nconst CountryStore = new CountryStoreClass(\"country\", Country);\n\n\nexport {Country, CountryStore, ALL_COUNTRIES_PLACEHOLDER};\n","import {StyleSheet, styleRule} from \"UI\";\nimport {Device} from \"Device\";\n\n\nlet loginHeight = 500;\nlet registerHeight = 500;\nlet width = 500;\nlet buttonHeight = 60;\nlet fontAwesomeIconHeight = 40;\nlet fontAwesomeIconWidth = 60;\nlet textColor = \"#252525\";\nlet signInButtonHeight = 50;\nlet signInButtonWidth = 120;\n\n\nclass LoginStyle extends StyleSheet {\n\n    @styleRule\n    loginRegisterSystem = () => {\n        if (Device.isTouchDevice()) {\n            console.log(\"Touch device mode on\");\n            return {\n                position: \"absolute\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                backgroundColor: \"#fff\",\n                maxHeight: \"100%\",\n                maxWidth: \"100%\",\n            };\n        } else {\n            return {\n                maxWidth: \"100%\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                margin: \"0 auto\",\n                backgroundColor: \"#fff\",\n            };\n        }\n    };\n\n    @styleRule\n    loginRegisterButtons = {\n        display: \"inline-block\",\n        float: \"left\",\n        width: \"100%\",\n        height: buttonHeight / loginHeight * 100 + \"%\",\n    };\n\n    @styleRule\n    loginSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderLeft: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    @styleRule\n    registerSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderRight: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    selectedLeft = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedLeftClass = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    selectedRight = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedRightClass = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    loginWidget = {\n        height: loginHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    @styleRule\n    registerWidget = {\n        height: registerHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    fontAwesomeIcon = {\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        width: \"15%\",\n        maxWidth: \"15%\",\n        textAlign: \"center\",\n        fontSize: \"150%\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderTopLeftRadius: \"5px\",\n        borderBottomLeftRadius: \"5px\",\n        borderRight: \"0px solid white\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    input = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderRadius: \"0\",\n        borderTopRightRadius: \"5px\",\n        borderBottomRightRadius: \"5px\",\n        marginTop: \"20px\",\n        fontWeight: \"bold\",\n        color: textColor,\n        border: \"0px solid #d3d5d9\",\n        borderLeft: \"0px solid white\",\n        boxShadow: \"none\",\n        fontSize: \"85%\",\n        \":focus\": {\n            boxShadow: \"none\",\n            outline: \"none\",\n            border: \"0px solid #d3d5d9\",\n            borderLeft: \"0px solid white\",\n        }\n    };\n\n    @styleRule\n    countrySelect = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        lineHeight: \"30px\",\n        marginTop: \"30px\",\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    badLogin = {\n        height: \"30px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: this.themeProperties.COLOR_DANGER,\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    rememberMe = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"5px\",\n    };\n\n    @styleRule\n    rememberMeCheckbox = {\n        float: \"left\"\n    };\n\n    @styleRule\n    forgotPassword = {\n        display: \"inline-block\",\n        float: \"right\",\n        paddingRight: \"5px\",\n    };\n\n    @styleRule\n    signInButtonContainer = {\n        width: \"100%\",\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        margin: \"20px auto\"\n    };\n\n    @styleRule\n    signInButton = {\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        backgroundColor: \"#f6f6f6\",\n        marginTop: \"20px\",\n        minWidth: signInButtonWidth + \"px\",\n        height: signInButtonHeight + \"px\",\n        textAlign: \"center\",\n        lineHeight: signInButtonHeight + \"px\",\n        border: \"0px solid #d3d5d9\",\n        fontSize: \"18px\",\n        color: \"#252525\",\n        \":hover\": {\n            border: \"0px solid #0b79a7\",\n            borderBottom: \"2px solid #0b79a7\",\n            color: \"#0b79a7\",\n        }\n    };\n\n    @styleRule\n    horizontalLine = {\n        borderBottom: \"1px solid #d3d5d9\",\n        width: \"100%\",\n        marginTop: \"20px\",\n    };\n\n    connectWith = {\n        width: \"100%\",\n        textAlign: \"center\",\n        marginTop: \"20px\",\n    };\n\n    connectIcons = {\n        width: \"60%\",\n        marginLeft: \"20%\",\n        marginRight: \"20%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    faLogo = {\n        height: \"40px\",\n        paddingLeft: \"15px\",\n        paddingRight: \"15px\",\n        borderRadius: \"3px\",\n        textAlign: \"center\",\n        fontSize: \"18px\",\n        marginLeft: \"5px\",\n        marginRight: \"5px\",\n        transition: \".2s\",\n        color: \"#fff\",\n        \":hover\": {\n            transition: \".2s\",\n            opacity: \".9\",\n        },\n        cursor: \"pointer\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    recaptchaContainer = {\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    connectWithButtonsSpan = {\n        paddingLeft: \"15px\",\n        fontSize: \"15px\",\n    };\n\n    @styleRule\n    thirdPartyLoginContainer = {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexWrap: \"wrap\",\n        margin: \"15px 0\",\n    };\n\n    socialConnectDimensions = \"35px\";\n\n    @styleRule\n    socialConnectButtonContainer = {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: this.socialConnectDimensions,\n        color: \"#fff\",\n        paddingRight: \"10px\",\n        borderRadius: \"5px\",\n        margin: \"5px\",\n        outline: \"none\",\n        paddingTop: \"0\",\n        cursor: \"pointer\",\n        fontSize: \"13px\",\n        border: \"0\",\n        \":hover\": {\n            opacity: \".85\",\n        }\n    };\n\n    @styleRule\n    socialConnectButtonIcon = {\n        height: this.socialConnectDimensions,\n        width: this.socialConnectDimensions,\n        display: \"flex !important\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n}\n\n\nexport {LoginStyle}\n","import {\n    UI,\n    BasicTabTitle,\n    CheckboxInput,\n    EmailInput,\n    TextInput,\n    Link,\n    PasswordInput,\n    SubmitInput,\n    Switcher,\n    Select,\n    registerStyle,\n    TemporaryMessageArea,\n    Theme\n} from \"UI\";\n\nimport {ensure} from \"Require\";\nimport {Ajax} from \"Ajax\";\nimport {GoogleManager} from \"./GoogleManager\";\nimport {FacebookManager} from \"./FacebookManager\";\nimport {GithubManager} from \"./GithubManager\";\nimport {CountryStore} from \"CountryStore\";\n\nimport {FAIcon} from \"FontAwesome\";\nimport {LoginStyle} from \"./LoginStyle\";\n\nimport {SocialAppStore} from \"SocialAppStore\";\n\nconst ERROR_TIMEOUT = 6 * 1000;\n\nconst accountsConfig = {\n    username: true,\n    country: true,\n};\n\nconst socialLoginSpecificInfo = {\n    Google: {\n        name: \"Google\",\n        color: \"#de4b39\",\n        icon: \"google-plus\",\n        loginManager: GoogleManager,\n    },\n    Facebook: {\n        name: \"Facebook\",\n        color: \"#3b5998\",\n        icon: \"facebook\",\n        loginManager: FacebookManager,\n    },\n    Github: {\n        name: \"Github\",\n        color: \"#000\",\n        icon: \"github\",\n        loginManager: GithubManager,\n    },\n};\n\n\n@registerStyle(LoginStyle)\nclass SocialConnectButton extends UI.Primitive(\"button\") {\n    extraNodeAttributes(attr) {\n        let {specificInfo} = this.options;\n\n        attr.addClass(this.styleSheet.socialConnectButtonContainer);\n        attr.setStyle({\n            backgroundColor: specificInfo.color,\n        });\n    }\n\n    getLoginManager() {\n        return this.options.specificInfo.loginManager.getInstance();\n    }\n\n    render() {\n        let {specificInfo} = this.options;\n\n        return [\n            <FAIcon icon={specificInfo.icon} className={this.styleSheet.socialConnectButtonIcon} />,\n            <span> {specificInfo.name}</span>\n        ];\n    }\n\n    onMount() {\n        // Access the login manager, to load any scripts needed by the social provider\n        // TODO: try to find a way to not load all provider scripts on the login page\n        this.getLoginManager();\n        this.addClickListener(() => {\n            const loginElement = this.options.loginElement;\n            loginElement && loginElement.clearErrorMessage();\n            this.getLoginManager().login();\n        });\n    }\n}\n\n@registerStyle(LoginStyle)\nclass ThirdPartyLogin extends UI.Element {\n    getSocialApps() {\n        return SocialAppStore.all();\n    }\n\n    getConnectWith() {\n        return (\n            <div style={this.styleSheet.connectWith}>\n                {UI.T(\"or connect with\")}\n            </div>\n        );\n    }\n\n    getConnectWithButtons() {\n        return (\n            <div className={this.styleSheet.thirdPartyLoginContainer}>\n                {\n                    this.getSocialApps().map(\n                        socialApp => <SocialConnectButton specificInfo={socialLoginSpecificInfo[socialApp.name]}\n                                                          loginElement={this.options.loginElement} />\n                    )\n                }\n            </div>\n        );\n    }\n\n    render() {\n        return [\n            this.getConnectWith(),\n            this.getConnectWithButtons(),\n        ];\n    }\n}\n\n@registerStyle(LoginStyle)\nexport class LoginWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginWidget);\n    }\n\n    getEmailInput(emailIcon=\"user\") {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon\n                    icon={emailIcon}\n                    style={this.styleSheet.fontAwesomeIcon}\n                />\n                <EmailInput\n                    autofocus=\"autofocus\"\n                    placeholder=\"Email address\"\n                    name=\"email\"\n                    ref=\"emailInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getPasswordInput(passwordInputOptions={}) {\n        passwordInputOptions = Object.assign({\n            name: \"password\",\n            className: this.styleSheet.input,\n            ref: \"passwordInput\",\n            placeholder: \"Password\",\n            style: {marginBottom: \"20px\"}\n        }, passwordInputOptions);\n        return [\n            <div style={{width: \"80% !important\",}}>\n                <FAIcon icon=\"lock\"\n                        style={this.styleSheet.fontAwesomeIcon}\n                />\n                <PasswordInput {...passwordInputOptions} />\n            </div>\n        ];\n    }\n\n    getRememberMeCheckbox() {\n        return [\n            <CheckboxInput checked={true}\n                              ref=\"rememberInput\" className={this.styleSheet.rememberMeCheckbox} />,\n            <div className={this.styleSheet.rememberMe}>{UI.T(\"Remember me\")}</div>,\n        ];\n    }\n\n    getForgotPassword() {\n        return <Link className={this.styleSheet.forgotPassword} href=\"/accounts/password_reset\"\n                     value={UI.T(\"Forgot Password?\")} />;\n    }\n\n    getClearBothArea() {\n        return <div style={{clear: \"both\", height: \"20px\"}}/>;\n    }\n\n    getErrorArea() {\n        return <TemporaryMessageArea className={this.styleSheet.badLogin} ref=\"loginErrorMessage\"/>;\n    }\n\n    getSignInValue() {\n        return \"Sign In\";\n    }\n\n    getSignInButton() {\n        return <div className={this.styleSheet.signInButtonContainer}>\n            <SubmitInput className={this.styleSheet.signInButton} value={this.getSignInValue()} />\n        </div>;\n    }\n\n    getHorizontalLine() {\n        return <div className={this.styleSheet.horizontalLine}>\n        </div>;\n    }\n\n    getThirdPartyLogin() {\n        return SocialAppStore.all().length ? [\n            this.getHorizontalLine(),\n            <ThirdPartyLogin loginElement={this}/>,\n        ]: null;\n    }\n\n    render() {\n\n        return [\n            <form ref=\"form\">\n                {this.getEmailInput()}\n                {this.getPasswordInput()}\n                {this.getRememberMeCheckbox()}\n                {this.getForgotPassword()}\n                {this.getSignInButton()}\n                {this.getClearBothArea()}\n                {this.getErrorArea()}\n            </form>,\n            this.getThirdPartyLogin(),\n        ];\n    }\n\n    setErrorMessage(error, isError=true) {\n        this.loginErrorMessage.showMessage(error.message, isError? Theme.Global.getProperty(\"COLOR_DANGER\") : \"#000\", ERROR_TIMEOUT);\n    }\n\n    clearErrorMessage() {\n        this.loginErrorMessage.clear();\n    }\n\n    sendLogin() {\n        this.clearErrorMessage();\n        const data = {\n            email: this.emailInput.getValue(),\n            password: this.passwordInput.getValue(),\n            remember: this.rememberInput.getValue()\n        };\n        Ajax.postJSON(\"/accounts/login/\", data).then(\n            () => location.reload(),\n            (error) => this.setErrorMessage(error)\n        );\n    }\n\n    onMount() {\n        if (this.form) {\n            this.form.addNodeListener(\"submit\", (event) => {\n                this.sendLogin();\n                event.preventDefault();\n            });\n        }\n    }\n}\n\n\nclass RecaptchaWidget extends UI.Element {\n    render() {\n        return <div key={Math.random()} />;\n    }\n\n    redraw() {\n        super.redraw();\n\n        if (window.grecaptcha && window.GOOGLE_RECAPTCHA_PUBLIC_KEY) {\n            this.captchaId = grecaptcha.render(this.children[0].node, {\n                \"sitekey\": window.GOOGLE_RECAPTCHA_PUBLIC_KEY,\n            });\n        }\n    }\n\n    getResponse() {\n        return grecaptcha.getResponse(this.captchaId);\n    }\n\n    onMount() {\n        window.onRecaptchaCallback = () => this.redraw();\n\n        ensure(\"https://www.google.com/recaptcha/api.js?render=explicit&onload=onRecaptchaCallback\", () => {});\n    }\n}\n\n\n@registerStyle(LoginStyle)\nexport class RegisterWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerWidget);\n    }\n\n    getSignUpButton() {\n        return  <div className={this.styleSheet.signInButtonContainer}>\n                    <SubmitInput className={this.styleSheet.signInButton} value=\"Sign Up\" ref=\"submitButton\"/>\n                </div>;\n    }\n\n    getUsernameInput() {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon icon=\"user\"\n                        style={this.styleSheet.fontAwesomeIcon}/>\n                <TextInput\n                    placeholder=\"Username\"\n                    ref=\"usernameInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getCountryInput() {\n        return [\n            <div style={{width: \"100%\", marginBottom: \"20px\"}}>\n                <FAIcon icon=\"flag\" style={this.styleSheet.fontAwesomeIcon} />\n                <Select ref=\"countrySelect\" options={CountryStore.allWithNone(\"Don't set country\")}\n                        className={this.styleSheet.countrySelect} />\n                <div style={{clear: \"both\"}}/>\n            </div>\n        ];\n    }\n\n    render() {\n        let formFields = [\n            this.getEmailInput(),\n            this.getPasswordInput()\n        ];\n        if (accountsConfig.username) {\n            formFields.splice(1, 0, this.getUsernameInput());\n            formFields[0] = this.getEmailInput(\"envelope\");\n        }\n        if (accountsConfig.country) {\n            formFields[formFields.length - 1] = this.getPasswordInput({style: {}});\n            formFields.push(this.getCountryInput());\n        }\n        // TODO: This should be done in another way.\n        if (window.location.hostname !== \"localhost\") {\n            this.recaptchaWidget = <RecaptchaWidget />\n        }\n        return [\n            <form ref=\"form\">\n                {formFields}\n                <div className={this.styleSheet.recaptchaContainer}>\n                    {this.recaptchaWidget}\n                    {this.getSignUpButton()}\n                    <TemporaryMessageArea ref=\"errorArea\" />\n                </div>\n            </form>\n        ];\n    }\n\n    sendRegistration() {\n        this.submitButton.updateOptions({value: \"Signing up...\"});\n\n        const data = {\n            email: this.emailInput.getValue(),\n            recaptchaKey: this.recaptchaWidget && this.recaptchaWidget.getResponse(),\n            password: this.passwordInput.getValue(),\n        };\n        if (this.usernameInput) {\n            data.username = this.usernameInput.getValue();\n        }\n        if (this.countrySelect) {\n           data.countryId = this.countrySelect.get().id;\n        }\n        Ajax.postJSON(\"/accounts/signup_request/\", data).then(\n            () => {\n                this.recaptchaWidget && this.recaptchaWidget.hide();\n                this.submitButton.hide();\n                this.errorArea.showMessage(\"Done! Please check your email to continue\", \"black\", 26 * 60 * 60 * 1000);\n            },\n            (error) => {\n                this.errorArea.showMessage(\"Error in registration: \" + error.message, \"red\", 4000);\n                this.submitButton.updateOptions({value: \"Sign Up\"});\n                this.recaptchaWidget && this.recaptchaWidget.redraw();\n            }\n        );\n    }\n\n    onMount() {\n        this.form.addNodeListener(\"submit\", (event) => {\n            event.preventDefault();\n            this.sendRegistration();\n        })\n    }\n}\n\nRegisterWidget.prototype.getEmailInput = LoginWidget.prototype.getEmailInput;\nRegisterWidget.prototype.getPasswordInput = LoginWidget.prototype.getPasswordInput;\nRegisterWidget.prototype.getHorizontalLine = LoginWidget.prototype.getHorizontalLine;\n\n\n// original name: LoginRegisterSystem\n@registerStyle(LoginStyle)\nclass NormalLogin extends UI.Element {\n    constructor() {\n        super();\n\n        this.state = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginRegisterSystem);\n    }\n\n    getLoginButton() {\n        let style = {};\n\n        if (this.state === 0) {\n            style = this.styleSheet.selectedLeft;\n        }\n\n        return <div className={this.styleSheet.loginSystemButton}\n                    style={style}\n                    ref=\"loginButton\">\n            {UI.T(\"Log In\")}\n        </div>\n    }\n\n    getRegisterButton() {\n        let style = {};\n\n        if (this.state === 1) {\n            style = this.styleSheet.selectedRight;\n        }\n\n        return <div className={this.styleSheet.registerSystemButton}\n                    style={style}\n                    ref=\"registerButton\">\n            {UI.T(\"Sign Up\")}\n        </div>\n    }\n\n    render() {\n        let result = [\n            <div className={this.styleSheet.loginRegisterButtons}>\n                {this.getLoginButton()}\n                {this.getRegisterButton()}\n            </div>,\n            <Switcher ref=\"switcher\">\n                <LoginWidget ref=\"loginWidget\" active={this.state === 0} />\n                <RegisterWidget ref=\"registerWidget\" active={this.state === 1} />\n            </Switcher>\n        ];\n\n        return result;\n    }\n\n    onMount() {\n        this.loginButton.addClickListener(() => {\n            this.state = 0;\n            this.switcher.setActive(this.loginWidget);\n            this.redraw();\n        });\n\n        this.registerButton.addClickListener(() => {\n            this.state = 1;\n            this.switcher.setActive(this.registerWidget);\n            this.redraw();\n        });\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass LoginTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Log In\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedLeftClass);\n        }\n    }\n}\n\n@registerStyle(LoginStyle)\nclass RegisterTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Register\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedRightClass);\n        }\n    }\n}\n\n\nclass Login extends UI.Element {\n    render() {\n        return [\n            <NormalLogin/>,\n        ];\n    }\n}\n\nexport {Login};\n","import {UI, Modal} from \"UI\";\nimport {Login} from \"Login\";\nimport {Device} from \"Device\";\n\nclass LoginModal extends Modal {\n    getModalWindowStyle() {\n        if (Device.isTouchDevice()) {\n            return {\n                position: \"relative\",\n                padding: \"0\",\n                boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n                // margin: \"60px auto\",\n                display: this.options.display || \"block\",\n                left: \"0\",\n                right: \"0\",\n                width: \"100vw\",\n                height: \"600px\",\n                background: \"white\",\n                overflow: this.options.overflow || \"auto\",\n                maxHeight: \"100%\",\n                maxWidth: \"500px\",\n                verticalAlign: \"center\",\n                margin: \"0 auto\",\n            }\n        }\n        return {\n            position: \"relative\",\n            padding: \"0\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: \"500px\",\n            height: this.options.height || \"600px\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    render() {\n        return <Login/>;\n    }\n\n    static requireLogin(func) {\n        if (USER.isAuthenticated) {\n            return func();\n        } else {\n            this.show();\n        }\n    }\n}\n\nexport {LoginModal};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\nimport {Orientation} from \"ui/Constants\";\n\nclass VotingWidgetStyle extends StyleSheet {\n    height = 40;\n    size = 1;\n    likeColor = this.options.likeColor || \"#1E8921\"; //            |\n    dislikeColor = this.options.dislikeColor || \"#C5302C\"; //      |- Triadic colors + Shades\n    notVoteColor = this.options.notVoteColor || \"#313534\";\n    balanceColor = this.options.balanceColor || \"#313534\";\n    orientation = Orientation.VERTICAL;\n\n    @styleRule\n    container = {\n        height: \"40px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    mainClass = {\n        height: \"40px\",\n        lineHeight: \"40px\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"inline-block\",\n        float: \"right\",\n        textAlign: \"right\",\n    };\n\n    thumbsStyle = {\n        fontSize: this.height / 2 + \"px\",\n        lineHeight: this.height + \"px\",\n    };\n\n    @styleRule\n    displayStyle = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"3px\",\n    };\n\n    counterStyle = {\n        fontSize: 18 * this.size + \"px\",\n        fontWeight: \"900\",\n        color: this.balanceColor,\n    };\n\n    @styleRule\n    thumbsUpHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.likeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    thumbsDownHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.dislikeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    padding = {\n        width: \"3px\",\n        float: \"left\",\n        display: \"inline-block\",\n        height: this.height + \"px\",\n    };\n}\n\nexport {VotingWidgetStyle}","import {UI, registerStyle} from \"UI\";\nimport {LoginModal} from \"LoginModal\";\nimport {UserReactionCollection} from \"UserReactionStore\";\nimport {Orientation, VoteStatus} from \"ui/Constants\";\nimport {VotingWidgetStyle} from \"./VotingWidgetStyle\";\n\nclass VotingWidget extends UI.Element {\n    setOptions(options) {\n        options = Object.assign({\n            votesBalance: 0,\n            userVote: VoteStatus.NONE,\n            size: 1,\n            likeColor: this.options.likeColor || \"#1E8921\", //            |\n            dislikeColor: this.options.dislikeColor || \"#C5302C\", //      |- Triadic colors + Shades\n            notVoteColor: this.options.notVoteColor || \"#313534\",\n            balanceColor: this.options.balanceColor || \"#313534\",\n            orientation: Orientation.VERTICAL,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            textAlign: \"center\",\n            marginRight: \"10px\",\n        });\n    }\n\n    render() {\n        let buttonsStyle = {\n            paddingLeft: \"4px\",\n            paddingRight: \"4px\",\n            paddingTop: \"0px\",\n            paddingBottom: \"0px\",\n            lineHeight: \"0px\",\n            backgroundColor: \"transparent\",\n            borderColor: \"transparent\",\n            fontSize: 40 * this.options.size + \"px\",\n            marginTop: 8 * this.options.size + \"px\",\n            marginBottom: 8 * this.options.size + \"px\",\n            display: this.options.orientation === Orientation.VERTICAL ? \"block\" : \"inline-block\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            opacity: 0.7,\n            cursor: \"pointer\",\n            color: this.options.notVoteColor,\n        };\n\n        let likeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = this.options.likeColor;\n        }\n\n        let dislikeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = this.options.dislikeColor;\n        }\n\n        let counterStyle = {\n            fontSize: 18 * this.options.size + \"px\",\n            fontWeight: \"900\",\n            \"color\": this.options.balanceColor,\n        };\n\n        return [\n            <span className=\"fa fa-caret-up voteButton\" ref=\"likeButton\"\n                       faIcon=\"caret-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <span ref=\"counterContainer\" style={counterStyle}>\n                <UI.TextElement ref=\"counter\" value={this.getVotesBalance() + \"\"}/>\n            </span>,\n            <span className=\"fa fa-caret-down voteButton\" ref=\"dislikeButton\"\n                       faIcon=\"caret-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n\n    getVotesBalance() {\n        return this.options.votesBalance;\n    }\n\n    getUserVote() {\n        return this.options.userVote;\n    }\n}\n\nclass CommentVotingWidget extends VotingWidget {\n    getVotesBalance() {\n        return this.options.message.getVotesBalance();\n    }\n\n    getUserVote() {\n        return this.options.message.getUserVote();\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.updateTarget(this.options.message);\n    }\n\n    updateTarget(target) {\n        if (!target || target instanceof UserReactionCollection) {\n            this.options.target = target;\n            return;\n        }\n        const possibleTarget = target.getReactionCollection();\n        if (possibleTarget) {\n            this.options.target = possibleTarget;\n            return;\n        }\n        let tempListener = this.attachEventListener(target, \"createReactionCollection\", () => {\n            this.updateOptions({target: target.getReactionCollection()});\n            this.setupListener();\n            tempListener.remove();\n        });\n    }\n\n    setupListener() {\n        let target = this.options.target;\n        if (target) {\n            this.attachUpdateListener(target, () => {\n                this.redraw();\n            })\n        }\n    }\n\n\n    onMount() {\n        this.setupListener();\n        this.likeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.LIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.like();\n            }\n        });\n        this.dislikeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.DISLIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.dislike();\n            }\n        });\n\n        this.options.message.addListener(\"reaction\", () => {\n            this.redraw();\n        });\n    }\n}\n\n// TODO: rewrite\n@registerStyle(VotingWidgetStyle)\nclass CommentVotingWidgetWithThumbs extends CommentVotingWidget {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    getNumLikes() {\n        return this.options.message.getNumLikes();\n    }\n\n    getNumDislikes() {\n        return this.options.message.getNumDislikes();\n    }\n\n    render() {\n        let thumbsUpScoreStyle = {};\n        let thumbsDownScoreStyle = {};\n\n        // TODO: remove duplicate code\n        let likeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = thumbsUpScoreStyle.color = this.options.likeColor;\n            thumbsUpScoreStyle.fontWeight = \"bold\";\n        }\n\n        let dislikeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = thumbsDownScoreStyle.color = this.options.dislikeColor;\n            thumbsDownScoreStyle.fontWeight = \"bold\";\n        }\n\n        return [\n            <span className={this.styleSheet.displayStyle} style={thumbsUpScoreStyle}>{this.getNumLikes()}</span>,\n            <span className={\"fa fa-thumbs-up voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsUpHoverStyle} ref=\"likeButton\" faIcon=\"thumbs-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <div className={this.styleSheet.padding} />,\n            <span className={this.styleSheet.displayStyle} style={thumbsDownScoreStyle}>{this.getNumDislikes()}</span>,\n            <span className={\"fa fa-thumbs-down voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsDownHoverStyle} ref=\"dislikeButton\" faIcon=\"thumbs-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n}\n\nexport {VotingWidget, CommentVotingWidget, CommentVotingWidgetWithThumbs};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\n\nclass ChatStyle extends StyleSheet {\n    navbarHeight = \"50px\";\n    renderMessageHeight = \"100px\";\n\n    userFontSize = \"1.1em\";\n    commentFontSize = \"1.1em\";\n\n    backgroundColor = \"#fff\";\n    hrBackgroundColor = \"#ddd\";\n    hoverBackgroundColor = \"#f8f8f8\";\n\n    @styleRule\n    renderMessageView = {\n        height: \"100%\",\n        width: \"100%\",\n        overflowY: \"auto\",\n        overflowX: \"hidden\",\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n        wordBreak: \"break-word\",\n    };\n\n    @styleRule\n    renderMessage = {\n        height: this.renderMessageHeight,\n        maxHeight: this.renderMessageHeight,\n        width: \"100%\",\n        borderTop: \"1px solid \" + this.hrBackgroundColor,\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n    };\n\n    @styleRule\n    chatInput = {\n        height: \"100%\",\n        width: \"calc(100% - 50px)\",\n        // \"line-height\": \"30px\",\n        paddingTop: \"0\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        paddingLeft: \"8px\",\n        border: \"0px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"inline-block\",\n        float: \"left\",\n        outline: \"none\",\n        position: \"absolute\",\n        \":focus\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n        \":active\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n    };\n\n    @styleRule\n    messageBoxButton = {\n        textAlign: \"center\",\n        flex: \"1\",\n        backgroundColor: \"#fff\",\n        border: \"0\",\n        fontSize: \"18px\",\n        transition: \".2s\",\n        color: \"#333\",\n        padding: \"0\",\n        \":hover\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n            outline: \"none\",\n        },\n        \":focus:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n        \":hover:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n    };\n\n    previewButton = { // TODO: This is currently not restyled.\n        // We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"30px\",\n        borderRadius: \"100%\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n        textTransform: \"uppercase\",\n        marginTop: \"15px\",\n    };\n\n    @styleRule\n    messageTimeStampHr = {\n        height: \"1px\",\n        marginTop: \"1.5em\",\n        marginBottom: \"1.5em\",\n        width: \"100%\",\n        maxWidth: \"100%\",\n        backgroundColor: this.hrBackgroundColor,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    messageTimeStamp = {\n        height: \"1.5em\",\n        width: \"auto\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        backgroundColor: this.backgroundColor,\n        textAlign: \"center\",\n        color: \"#222\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    groupChatMessage = {\n        width: \"100%\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    comment = {\n        paddingLeft: \"12px\",\n        paddingRight: \"12px\",\n        paddingTop: \"12px\",\n        paddingBottom: \"12px\",\n        \":hover\": {\n            backgroundColor: this.hoverBackgroundColor,\n        },\n    };\n\n    @styleRule\n    userHandle = {\n        fontSize: this.userFontSize,\n    };\n\n    @styleRule\n    commentContent = {\n        \" p\": {\n            marginTop: \"0\",\n            marginBottom: \"0\",\n            fontSize: this.commentFontSize,\n            color: \"#454545\",\n            // textAlign: \"justify\",\n            wordWrap: \"break-word\",\n        },\n    };\n\n    @styleRule\n    timestamp = {\n        color: \"#262626\",\n        fontWeight: \"bold\",\n        margin: \"0 10px\",\n    };\n}\n\nexport {ChatStyle};\n","// Plugins should be used to extends on runtime the functionality of a class, to easily split functionality\nimport {Dispatchable} from \"./Dispatcher\";\n\nclass Plugin extends Dispatchable {\n    constructor(parent) {\n        super();\n        this.linkToParent(parent);\n    }\n\n    linkToParent(parent) {\n        this.parent = parent;\n    }\n\n    name() {\n        return this.constructor.pluginName();\n    }\n\n    static pluginName() {\n        return this.name;\n    }\n}\n\n// TODO: rename this to use Mixin in title\nvar Pluginable = function (BaseClass) {\n    return class Pluginable extends BaseClass {\n        // TODO: this should probably take in a plugin instance also\n        registerPlugin(PluginClass) {\n            if (!this.hasOwnProperty(\"plugins\")) {\n                this.plugins = new Map();\n            }\n            // TODO: figure out plugin dependencies\n            let plugin = new PluginClass(this);\n            let pluginName = plugin.name();\n\n            if (this.plugins.has(pluginName)) {\n                console.error(\"You are overwriting an existing plugin: \", pluginName, \" for object \", this);\n            }\n\n            this.plugins.set(pluginName, plugin);\n        }\n\n        removePlugin(pluginName) {\n            let plugin = this.getPlugin(pluginName);\n            if (plugin) {\n                plugin.remove(this);\n                this.plugins.delete(plugin.name());\n            } else {\n                console.error(\"Can't remove plugin \", pluginName);\n            }\n        }\n\n        getPlugin(pluginName) {\n            if (!(typeof pluginName === \"string\")) {\n                pluginName = pluginName.pluginName();\n            }\n            if (this.plugins) {\n                return this.plugins.get(pluginName);\n            } else {\n                return null;\n            }\n        }\n    }\n};\n\nexport {Plugin, Pluginable};\n","import {UI, Switcher, AjaxButton, TextArea, Button, ButtonGroup, Panel, InfiniteScrollable, registerStyle} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {MessageThreadStore, MessageThread, MessageInstance, MessageInstanceStore, GroupChatStore} from \"MessageThreadStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {LoginModal} from \"LoginModal\";\nimport {isDifferentDay} from \"Time\";\nimport {RunOnce} from \"Dispatcher\";\nimport {Ajax} from \"Ajax\";\nimport {ChatStyle} from \"ChatStyle\";\nimport {Pluginable} from \"Plugin\";\nimport {Level, Size} from \"ui/Constants\";\n\nimport {ButtonStyle} from \"ui/button/ButtonStyle\";\nimport {InputStyle} from \"ui/input/Style\";\n\nButtonStyle.getInstance().ensureFirstUpdate();\nInputStyle.getInstance().ensureFirstUpdate();\n\nclass PreviewMarkupButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            MarkupEditorModal.show({\n                classMap: ChatMarkupRenderer.classMap,\n                showCallback: (modal) => {modal.markupEditor.setValue(this.options.getValue());\n                                          modal.markupEditor.codeEditor.getAce().focus();},\n                hideCallback: (modal) => {this.options.setValue(modal.markupEditor.getValue());}\n            });\n        });\n    }\n}\n\nclass EditableMessage extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: true,\n        });\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    render() {\n        return [<Button ref=\"editButton\" onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</Button>,\n            <Switcher ref=\"contentSwitcher\">\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>\n        ];\n    }\n\n    showEditMode() {\n        if (!this.editContent) {\n            let writingSectionStyle = {\n                \"margin-top\": \"5px\"\n            };\n            let chatInputStyle = {\n                overflow: \"auto\",\n                height: \"60px\",\n                width: \"100%\",\n            };\n\n            this.editContent = <div style={writingSectionStyle}>\n                <TextArea ref={this.refLink(\"messageInput\")} style={chatInputStyle} className=\"form-control\"\n                             value={this.message.getContent()}/>\n                <ButtonGroup>\n                    <Button label={UI.T(\"Cancel\")} level={Level.DEFAULT} size={Size.SMALL}\n                               onClick={() => {this.hideEditMode()}} />\n                    <PreviewMarkupButton size={Size.SMALL}\n                                         getValue={() => {return this.messageInput.getValue();}}\n                                         setValue={(value) => {this.messageInput.setValue(value);this.messageInput.node.focus();}}\n                    />\n                    <Button label={UI.T(\"Save changes\")} level={Level.PRIMARY}\n                               onClick={() => this.saveMessageChanges()} size={Size.SMALL} />\n                    {this.options.deletable ? <Button level={Level.DANGER} label={UI.T(\"Delete\")} size={Size.SMALL}\n                                                         onClick={() => this.deleteMessage()}/> : \"\"}\n                </ButtonGroup>\n            </div>;\n        } else {\n            this.messageInput.setValue(this.message.getContent());\n        }\n\n        if (!this.contentSwitcher.hasChild(this.editContent)) {\n            this.contentSwitcher.appendChild(this.editContent);\n        }\n        this.contentSwitcher.setActive(this.editContent);\n    }\n\n    hideEditMode() {\n        this.contentSwitcher.setActive(this.contentContainer);\n    }\n\n    toggleEditMode() {\n        if (this.contentSwitcher.getActive() === this.contentContainer) {\n            this.showEditMode();\n        } else {\n            this.hideEditMode();\n        }\n    }\n\n    saveMessageChanges() {\n        let content = this.messageInput.getValue();\n\n        if (content) {\n            this.message.edit(content, () => {\n                this.hideEditMode();\n            });\n        }\n    }\n\n    deleteMessage() {\n        if (this.options.deletable) {\n            this.message.deleteMessage();\n        }\n    }\n\n    onMount() {\n        this.message.addListener(\"edit\", () => {\n            this.content.setValue(this.message.getContent());\n            this.redraw();\n        });\n\n        this.message.addListener(\"delete\", () => {\n            // TODO: refactor this, should delete message, not hide\n            this.hide();\n        });\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass GroupChatMessage extends EditableMessage {\n    setOptions(options) {\n        super.setOptions(options);\n        if (this.message.hasTemporaryId()) {\n            // TODO: this can also happen when editing a message, another case for later\n            this.message.addListener(\"postError\", () => {\n                this.redraw();\n            });\n            this.message.addListener(\"updateId\", () => {\n                // TODO: we might need to updated our position here\n                this.options.key = this.message.id;\n            })\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.groupChatMessage);\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    render() {\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n        // if (USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\"}, this.styleSheet.timestamp)}\n                            onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStampHr}>\n                <div className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        return [\n            date,\n            <div className={this.styleSheet.comment}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {editButton}\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass PrivateChatMessage extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.groupChatMessage);\n        return attr;\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    isOwnMessage() {\n        return this.message.userId === USER.id;\n    }\n\n    render() {\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div className={this.styleSheet.messageTimeStampHr}>\n                <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        let content = [\n            <div className={this.styleSheet.comment} style={{margin: \"8px 16px\", backgroundColor: \"#eee\",}}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n\n        let paddingDiv = <div style={{flexGrow: \"1000000\"}} />;\n\n        let result;\n        if (this.isOwnMessage()) {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {paddingDiv}\n                    {content}\n                </div>\n            ];\n        } else {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {content}\n                    {paddingDiv}\n                </div>\n            ];\n        }\n\n        return result;\n    }\n}\n\n\nclass ChatMessageScrollSection extends InfiniteScrollable {\n    setOptions(options) {\n        options = Object.assign({\n            entryComparator: (a, b) => {\n                return a.getNormalizedId() - b.getNormalizedId();\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    getTopMessage() {\n        return this.children[1];\n    }\n}\n\n\nlet ChatWidget = (ChatMessageClass) => {\n    @registerStyle(ChatStyle)\n    class ChatWidgetClass extends Pluginable(Panel) {\n        getDefaultOptions(options) {\n            return {\n                dateTimestamps: true,\n                renderMessage: (messageInstance) => {\n                    return <ChatMessageClass key={messageInstance.getNormalizedId()} message={messageInstance} />;\n                }\n            };\n        }\n\n        get messageThread() {\n            return this.options.messageThread;\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n            this.initializeShowLoadMoreButton();\n        }\n\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.setStyle({\n                display: \"flex\",\n                flexDirection: \"column\",\n            });\n        }\n\n        canOverwrite() {\n            return false;\n        }\n\n        initializeShowLoadMoreButton() {\n            // TODO: this is a shitty way of knowing if there are more messages!\n            if (this.messageThread.getNumMessages() >= 20) {\n                this.showLoadMoreButton = true;\n            }\n        }\n\n        createVirtualMessage(request, message) {\n            let virtualId = this.messageThread.getMaxMessageId() + \"-\" + MessageInstanceStore.generateVirtualId() + \"-\" + Math.random();\n            let virtualMessageInstance = MessageInstanceStore.createVirtualMessageInstance(message, this.messageThread, virtualId);\n            request.virtualId = virtualId;\n            return virtualMessageInstance;\n        }\n\n        sendMessage(message) {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            let request = Object.assign({}, this.options.baseRequest || {});\n\n            message = message || this.chatInput.getValue();\n            message = message.trim();\n\n            if (!message) {\n                return;\n            }\n            request.message = message;\n\n            // Create a virtual message to be drawn temporarily\n            let virtualMessageInstance = this.createVirtualMessage(request, message);\n\n            let onSuccess = (data) => {\n                if (data.error) {\n                    virtualMessageInstance.setPostError(data.error);\n                    return;\n                }\n                if (virtualMessageInstance && virtualMessageInstance.hasTemporaryId()) {\n                    MessageInstanceStore.applyUpdateObjectId(virtualMessageInstance, data.messageId);\n                    GlobalState.importState(data.state);\n                }\n            };\n\n            let onError = (error) => {\n                if (virtualMessageInstance) {\n                    virtualMessageInstance.setPostError(42);\n                }\n                console.log(\"Error in sending chat message:\\n\" + error.message);\n                console.log(error.stack);\n            };\n\n            this.messageWindow.scrollToBottom();\n\n            this.chatInput.setValue(\"\");\n            this.chatInput.dispatch(\"messageSent\");\n\n            Ajax.postJSON(this.getPostURL(), request, {disableStateImport: true}).then(onSuccess, onError);\n        }\n\n        saveScrollPosition() {\n            this.scrollPosition = this.messageWindow.node.scrollTop;\n            this.scrollPercent = this.scrollPosition / (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n        }\n\n        applyScrollPosition() {\n            this.messageWindow.node.scrollTop = this.scrollPosition || this.messageWindow.node.scrollHeight;\n            this.chatInput.node.focus();\n        }\n\n        addResizeListeners() {\n            this.messageWindow.addNodeListener(\"scroll\", () => {\n                let scrollTop = this.messageWindow.node.scrollTop;\n                if (scrollTop < 20) {\n                    this.loadMoreMessages();\n                }\n            });\n\n            this.addListener(\"hide\", () => {this.saveScrollPosition();});\n            this.addListener(\"show\", () => {this.applyScrollPosition();});\n\n            window.addEventListener(\"resize\", () => {\n                this.saveScrollPosition();\n                this.setAdaptiveHeight();\n            });\n\n            this.addListener(\"resize\", () => {\n                this.setAdaptiveHeight();\n                this.messageWindow.node.scrollTop = this.scrollPercent * (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n            });\n        }\n\n        getDesiredHeight() {\n            if (this.options.style && this.options.style.height) {\n                return this.options.style.height;\n            }\n            let viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n            let navbarHeight = document.getElementById(\"navbar\").offsetHeight; // use offsetHeight to accommodate padding and margin\n\n            let availableHeight = viewportHeight - navbarHeight - (this.options.extraHeightOffset || 25);\n            return Math.max(availableHeight || 0, 100) + \"px\"; // it needs at least 100px\n        }\n\n        setAdaptiveHeight() {\n            this.setStyle(\"height\", this.getDesiredHeight());\n        }\n\n        setHeight(height) {\n            this.setStyle(\"height\", height);\n        }\n\n        renderMessageView() {\n            let loadMoreButton;\n\n\n            if (this.showLoadMoreButton) {\n                loadMoreButton = (\n                    <div className=\"text-center\">\n                        <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                       style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                        />\n                    </div>\n                );\n            }\n\n            return [\n                <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                          ref=\"messageWindow\"\n                                          entryRenderer={this.options.renderMessage}\n                                          entries={this.messageThread.getMessages()}\n                                          staticTop={loadMoreButton} />\n            ];\n        }\n\n        getGetType() {\n            return \"GET\";\n        }\n\n        loadMoreMessages() {\n            // TODO: wrap this in something\n            if (this.outstandingRequest) {\n                return;\n            }\n            this.outstandingRequest = true;\n\n            const topMessage = this.messageWindow.getTopMessage();\n\n            let messageInstances = this.messageThread.getMessages();\n            let lastMessageId = 999999999;\n            if (messageInstances.length) {\n                lastMessageId = messageInstances[0].id;\n            }\n\n            let request = Object.assign({\n                lastMessageId: lastMessageId\n            }, this.options.baseRequest || {});\n\n            const oldScrollHeight = this.messageWindow.node.scrollHeight;\n\n            if (this.loadMoreButton) {\n                this.loadMoreButton.ajaxCall({\n                    url: this.getGetURL(),\n                    type: this.getGetType(),\n                    dataType: \"json\",\n                    data: request,\n                    complete: () => {\n                        //TODO(@Rocky): find out why this doesn't work\n                        this.outstandingRequest = false;\n                    }\n                }).then((data) => {\n                    const emptyData = !data.state || !data.state.MessageInstance;\n                    if (emptyData || data.state.MessageInstance.length < 20) {\n                        if (this.loadMoreButton) {\n                            this.loadMoreButton.hide();\n                        }\n                        this.showLoadMoreButton = false;\n\n                        if (emptyData) {\n                            return;\n                        }\n                    }\n\n                    let scrollDelta = 0;\n                    if (!topMessage.shouldShowDayTimestamp()) {\n                        scrollDelta += topMessage.dayTimestamp.getHeight();\n                        topMessage.dayTimestamp.addClass(\"hidden\");\n                    }\n                    this.messageWindow.scrollToHeight(this.messageWindow.node.scrollHeight - oldScrollHeight - scrollDelta);\n\n                    this.outstandingRequest = false;\n                });\n            }\n        }\n\n        renderMessageBox() {\n            return <div ref=\"writingSection\" className={this.styleSheet.renderMessage}>\n                <TextArea readOnly={this.messageThread.muted}\n                             ref=\"chatInput\"\n                             placeholder=\"Type a message...\"\n                             className={this.styleSheet.chatInput} />\n                <div style={{display: \"flex\", flexDirection: \"column\", height: \"100%\", position: \"absolute\", right: \"0px\", width: \"50px\"}}>\n                    <Button ref=\"sendMessageButton\"\n                               faIcon=\"paper-plane\"\n                               disabled={this.messageThread.muted}\n                               onClick={() => this.sendMessage()}\n                               className={this.styleSheet.messageBoxButton} />\n                    <PreviewMarkupButton ref=\"previewMessageButton\"\n                                   getValue={() => {return this.chatInput.getValue();}}\n                                   setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                                   className={this.styleSheet.messageBoxButton}\n                                   faIcon=\"eye\" />\n                </div>\n            </div>;\n        }\n\n        renderStatus() {\n            if (this.messageThread.muted) {\n                return [\n                    <h4 style={{color: \"red\", textAlign: \"center\"}}>This chat is currently turned off.</h4>\n                ];\n            } else {\n                if (USER.isSuperUser) {\n                    let userData = [];\n                    for (let userId of this.messageThread.online) {\n                        userData.push([\n                            <UserHandle id={parseInt(userId)}/>\n                        ]);\n                    }\n                    return userData;\n                }\n            }\n        }\n\n        render() {\n            return [\n                this.renderMessageView(),\n                this.renderMessageBox(),\n            ];\n        }\n\n        getDefaultPlugins() {\n            return ChatWidget.defaultPlugins || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            for (let plugin of (this.options.plugins || this.getDefaultPlugins())) {\n                this.registerPlugin(plugin);\n            }\n\n            this.attachUpdateListener(this.messageThread, (event) => {\n                if (event.type === \"muted\") {\n                    this.redraw();\n                }\n            });\n\n            this.attachListener(this.messageThread, \"newMessage\", (event) => {\n                //console.log(\"Received chat message: \", event);\n                let messageInstance = MessageInstanceStore.get(event.data.id);\n\n                // We calculate before adding new message\n                let messageWindowScrollTop = this.messageWindow.node.scrollTop;\n                let messageWindowscrollMax = this.messageWindow.node.scrollHeight - this.messageWindow.node.offsetHeight;\n                this.messageWindow.insertEntry(messageInstance);\n\n                // If we were at the bottom before message was appended, scroll automatically\n                if (messageWindowScrollTop + 20 > messageWindowscrollMax) {\n                    setTimeout(() => {\n                        this.messageWindow.scrollToBottom();\n                    }, 0);\n                }\n            });\n\n            this.addResizeListeners();\n        }\n    }\n    return ChatWidgetClass;\n};\n\nclass GroupChatWidget extends ChatWidget(GroupChatMessage) {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            overflowY: \"hidden\",\n        });\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                   style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                      ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages()}\n                                      staticTop={loadMoreButton}/>\n        ];\n    }\n}\n\nclass PrivateChatWidget extends ChatWidget(PrivateChatMessage) {\n    setOptions(options) {\n        options = Object.assign({\n            messageThread: options.privateChat.getMessageThread(),\n            baseRequest: {\n                userId: options.privateChat.getOtherUserId(),\n                privateChatId: options.privateChat.id\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    setPrivateChat(privateChat) {\n        this.options.privateChat = privateChat;\n        this.setOptions(this.options);\n    }\n\n    getPostURL() {\n        return \"/chat/private_chat_post/\";\n    }\n\n    getGetType() {\n        return \"POST\"; // It might create a chat if it doesn't have one\n    }\n\n    getGetURL() {\n        return \"/chat/private_chat_state/\";\n    }\n}\n\nclass VotableChatMessage extends GroupChatMessage {\n    render() {\n        let result = super.render();\n        result[1].options.children.push(<CommentVotingWidgetWithThumbs style={{display: \"inline-block\"}} message={this.options.message} />);\n        return result;\n    }\n}\n\nclass VotableGroupChatWidget extends ChatWidget(VotableChatMessage) {\n    setOptions(options) {\n        options.messageThread = options.messageThread || MessageThreadStore.get(GroupChatStore.get(options.chatId).messageThreadId);\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n}\n\nexport {ChatWidget, EditableMessage,\n    GroupChatWidget, PrivateChatWidget, VotableGroupChatWidget,\n    GroupChatMessage, PrivateChatMessage, VotableChatMessage,\n    PreviewMarkupButton, ChatMessageScrollSection};\n","import {StyleSheet, styleRule} from \"UI\";\n\nclass CommentWidgetStyle extends StyleSheet {\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n    };\n\n    writingSectionStyle = {\n        height: \"auto\",\n        marginTop: \"10px\",\n    };\n\n    @styleRule\n    chatInputStyle = {\n        height: \"30px\",\n        width: \"100%\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        outline: \"none\",\n        paddingLeft: \"8px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"block\",\n        border: \"1px solid #aaa\",\n        \":focus\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    chatInputMax = {\n        height: \"120px\",\n    };\n\n    previewButtonStyle = { // TODO: This is currently not restyled. We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"auto\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n}\n\nexport {CommentWidgetStyle}","import {UI, TimePassedSpan, Switcher, AjaxButton, TextArea, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {GroupChatStore, MessageThreadStore, MessageThread, MessageInstance} from \"MessageThreadStore\";\nimport {ChatMessageScrollSection, ChatWidget, EditableMessage} from \"ChatWidget\";\nimport {isDifferentDay, StemDate} from \"Time\";\nimport {UserHandle} from \"UserHandle\";\nimport {LoginModal} from \"LoginModal\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {Level} from \"ui/Constants\";\nimport {MarkupRenderer} from \"MarkupRenderer\";\nimport {CommentWidgetStyle} from \"./CommentWidgetStyle\";\n\n\nclass ThreadMessage extends EditableMessage {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: false,\n        });\n    }\n\n    render() {\n        let messageDate = <TimePassedSpan timeStamp={this.message.getDate()} style={{color: \"#666 !important\", textTransform: \"uppercase\", fontSize: \".85em\",}} />\n\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\", padding: \"0 10px\", fontSize: \"1.05em\", lineHeight: \"0px\",})} onClick={() => this.toggleEditMode()}>\n                edit\n            </a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <div ref=\"contentContainer\">\n                    <MarkupRenderer ref=\"content\" value={this.message.getContent()} />\n                </div>\n            </Switcher>;\n        }\n\n        let votes = <CommentVotingWidgetWithThumbs height={40} style={{float: \"left\"}} message={this.message} ref=\"commentVotingWidget\" />;\n\n        return [\n            <span style={{float: \"right\", display: \"inline-block\", height: \"40px\", lineHeight: \"40px\",}}>{messageDate}</span>,\n            <div style={{\n                height: \"40px\",\n                lineHeight: \"40px\",\n            }}>\n                <div style={{\n                    height: \"40px\",\n                    lineHeight: \"40px\",\n                    display: \"inline-block\",\n                    float: \"left\",\n                    fontSize: \".95em\",\n                    color: \"#333\",\n                }}>\n                    <UserHandle userId={this.message.userId} style={{fontSize: \"1.1em\",}}/>\n                </div>\n                {editButton}\n            </div>,\n            <div style={{\n                paddingTop: \"5px\",\n                fontSize: \"16px\",\n            }}>\n                {this.contentSwitcher}\n            </div>,\n            <div style={{\n                height: \"40px\",\n            }}>\n                {votes}\n            </div>,\n            <div style={{\n                height: \"1px\",\n                width: \"100%\",\n                backgroundColor: \"#ddd\",\n            }}></div>,\n        ];\n    }\n}\n\nclass ToggleLogin extends UI.Primitive(\"span\") {\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            LoginModal.show();\n            return;\n        });\n    }\n}\n\n\n@registerStyle(BlogStyle)\nclass BlogCommentWidget extends ChatWidget(ThreadMessage) {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            entryComparator: (a, b) => {\n                return b.getNormalizedId() - a.getNormalizedId();\n            }\n        })\n    }\n\n    get commentWidgetStyle() {\n        return CommentWidgetStyle.getInstance();\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                style={this.commentWidgetStyle.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages(true)}\n                                      entryComparator={this.options.entryComparator}\n                                      staticTop={loadMoreButton} />\n        ];\n    }\n\n    renderMessageBox() {\n        return [\n            <div ref=\"writingSection\" style={this.commentWidgetStyle.writingSectionStyle}>\n                <TextArea readOnly={this.messageThread.muted}\n                          ref=\"chatInput\"\n                          onChange={() => {\n                              if (this.chatInput.getValue()) {\n                                  this.chatInput.addClass(this.commentWidgetStyle.chatInputMax);\n                              } else {\n                                  this.chatInput.removeClass(this.commentWidgetStyle.chatInputMax);\n                              }\n                          }}\n                          className={this.commentWidgetStyle.chatInputStyle}\n                          placeholder=\"Leave a comment...\"/>\n                <Button disabled={this.messageThread.muted}\n                           label=\"SUBMIT\"\n                           ref=\"sendMessageButton\"\n                           className={this.styleSheet.sendMessageButtonStyle}\n                           level={Level.PRIMARY}\n                           onClick={() => this.sendMessage()} />\n                {/*{this.messageThread.hasMarkupEnabled() ?\n                        <PreviewMarkupButton disabled={this.messageThread.muted} ref=\"markupButton\" style={previewButtonStyle}\n                                         getValue={() => {return this.chatInput.getValue();}}\n                                         setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                        /> : null}*/ /* UNCOMMENT THIS !! */}\n            </div>\n        ];\n    }\n\n    render() {\n        return [\n            this.renderMessageBox(),\n            this.renderMessageView(),\n        ];\n    }\n\n    getDefaultPlugins() {\n        return CommentWidget.defaultPlugins || [];\n    }\n\n    createVirtualMessage(request, message) {\n        return null;\n    }\n}\n\n@registerStyle(BlogStyle)\nclass CommentWidget extends BlogCommentWidget {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.key = this.messageThread.id;\n\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n        this.options.dateTimestamps = false;\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    renderMessageBox() {\n        if (USER.isAuthenticated) {\n            return super.renderMessageBox();\n        } else {\n            return <div style={{\n                color: \"#333\",\n                paddingTop: \"5px\",\n                paddingBottom: \"5px\",\n            }}>You need to&nbsp;\n                <ToggleLogin style={{\n                    backgroundColor: \"#eee\",\n                    cursor: \"pointer\",\n                    padding: \"5px 10px\",\n                }}>\n                    login\n                </ToggleLogin>\n                &nbsp;to send a comment.</div>;\n        }\n    }\n\n    render() {\n        let commentsCount = this.messageThread.getMessages().length;\n        let commentsTitle;\n\n        commentsTitle = <div className={this.styleSheet.commentsTitle}>\n            {commentsCount} {commentsCount != 1 ? \"comments\" : \"comment\"}\n        </div>;\n\n        return [commentsTitle, super.render()];\n    }\n}\n\nclass AsyncCommentThread extends UI.Element {\n    getMessageThread() {\n        let groupChat = GroupChatStore.get(this.options.chatId);\n        return groupChat && groupChat.getMessageThread();\n    }\n\n    render() {\n        let messageThread = this.getMessageThread();\n        let commentWidgetOptions = {\n            marginBottom: \"10px\",\n            paddingBottom: \"10px\",\n            height: \"auto\",\n            width: \"100%\",\n            marginTop: \"50px\",\n            marginLeft: \"0px\",\n            marginRight: \"0px\",\n            border: \"0px\",\n            maxWidth: \"900px\"\n        };\n\n        if (messageThread) {\n            return [<CommentWidget ref=\"commentsSection\" chatId={this.options.chatId} messageThread={messageThread}\n                                   style={commentWidgetOptions} />];\n        } else {\n            GroupChatStore.fetch(this.options.chatId, (groupChat) => {\n                this.redraw();\n            });\n            return [\n                <div style={{\n                    width: \"100%\",\n                    height: \"60px\",\n                    lineHeight: \"60px\",\n                    fontSize: \"1em\",\n                    textAlign: \"center\",\n                    textTransform: \"uppercase\",\n                    fontWeight: \"bold\",\n                }}>\n                    <span className=\"fa fa-spinner fa-spin\" style={{\n                        padding: \"0 8px\",\n                    }}/>\n                    Comments loading...\n                </div>\n            ];\n        }\n    }\n}\n\nexport {CommentWidget, AsyncCommentThread};\n","import {UI} from \"./UIBase\";\nimport {keyframesRule} from \"../decorators/Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {StyleSheet} from \"./Style\";\n\nfunction getCircleStyle(size, borderSize, color, animationName, animationDuration) {\n    return {\n        position: \"absolute\",\n\n        height: size + \"px\",\n        width: size + \"px\",\n\n        border: borderSize + \"px solid \" + color,\n        borderRadius: size + \"px\",\n        borderRight: borderSize + \"px transparent\",\n        borderBottom: borderSize + \"px transparent\",\n\n        rotate: \"0deg\",\n        transform: \"rotate(45deg)\",\n\n        animationName: animationName,\n        animationDuration: animationDuration,\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"linear\",\n    };\n}\n\nfunction createCircle(size, borderSize, color, animationName, animationDuration) {\n    return <div style={getCircleStyle(size, borderSize, color, animationName, animationDuration)} />;\n}\n\nclass RotatingHelperStyle extends StyleSheet {\n    @keyframesRule\n    rotateClockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(360deg)\"\n        }\n    };\n\n    @keyframesRule\n    rotateCounterclockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(-360deg)\"\n        }\n    }\n}\n\n@registerStyle(RotatingHelperStyle)\nclass ConcentricCirclesLoadingScreen extends UI.Element {\n    render() {\n        let centerConstant = 100;\n        return <div style={{\n            height: \"100%\",\n            width: \"100%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginTop: \"200px\",\n        }}>\n            {createCircle(225 - centerConstant, 5, \"#3a4859\", this.styleSheet.rotateClockwise, \"2.25s\")}\n            {createCircle(200 - centerConstant, 4, \"#666666\", this.styleSheet.rotateCounterclockwise, \"1.5s\")}\n            {createCircle(175 - centerConstant, 3, \"#aaaaaa\", this.styleSheet.rotateClockwise, \"1s\")}\n            {createCircle(150 - centerConstant, 2, \"#20232d\", this.styleSheet.rotateCounterclockwise, \"3s\")}\n        </div>;\n    }\n}\n\nexport {ConcentricCirclesLoadingScreen}\n","import {ensure} from \"../base/Require\";\n\nlet DelayedElement = (BaseClass) => class DelayedElement extends BaseClass {\n    applyNodeAttributesNotLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributesLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributes() {\n        if (!this._loaded) {\n            return this.applyNodeAttributesNotLoaded();\n        } else {\n            return this.applyNodeAttributesLoaded();\n        }\n    }\n\n    renderNotLoaded() {\n        return \"Loading component...\";\n    }\n\n    renderLoaded() {\n        return super.render();\n    }\n\n    render() {\n        if (!this._loaded) {\n            return this.renderNotLoaded();\n        } else {\n            return this.renderLoaded();\n        }\n    }\n\n    setLoaded() {\n        if (this._loaded) {\n            return;\n        }\n        this._loaded = true;\n        if (!this.node) {\n            return;\n        }\n        super.redraw();\n        if (!this._executedMount) {\n            this._executedMount = true;\n            this.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        // Implement here anything you might need\n    }\n\n    redrawNotLoaded() {\n        this.beforeRedrawNotLoaded();\n        // The previous code might have triggered a redraw, skip if that was the case\n        if (!this._loaded) {\n            super.redraw();\n        }\n    }\n\n    redrawLoaded() {\n        super.redraw();\n    }\n\n    redraw() {\n        if (!this._loaded) {\n            return this.redrawNotLoaded();\n        }\n        return this.redrawLoaded();\n    }\n\n    onMount() {\n        // Nothing to be done here\n    }\n\n    onDelayedMount() {\n        super.onMount();\n    }\n};\n\nlet ScriptDelayedElement = (BaseClass, scripts) => class ScriptDelayedElement extends DelayedElement(BaseClass) {\n    beforeRedrawNotLoaded() {\n        // TODO: what happens if this gets destroyed before the load finishes? Should cancel this\n        ensure(scripts, () => {\n            this.setLoaded();\n        });\n    }\n};\n\nexport {DelayedElement, ScriptDelayedElement}\n","import {UI} from \"./UIBase\";\nimport {ConcentricCirclesLoadingScreen} from \"./ConcentricCirclesLoadingScreen\";\nimport {DelayedElement} from \"./DelayedElement\";\nimport {Ajax} from \"../base/Ajax\";\nimport {GlobalState} from \"../state/State\";\nimport {CardPanel} from \"./CardPanel\";\nimport {Level} from \"./Constants\";\n\n// You can configure the loading/error states by defining the \"renderLoading\" and \"renderError\" attributes of the\n// function somewhere globally in your app.\n// Example:\n// StateDependentElement.renderLoading = \"Loading...\";\n// or\n// StateDependentElement.renderLoading = () => <MyCustomLoadingAnimation />\n// StateDependentElement.renderError = (error) => <MyCustomErrorMessageClass error={error} />\n\nexport let StateDependentElement = (BaseClass) => class StateDependentElementClass extends DelayedElement(BaseClass) {\n    importState(data) {\n        GlobalState.importState(data.state || {});\n        for (let key of Object.keys(data)) {\n            if (key !== \"state\") {\n                this.options[key] = data[key];\n            }\n        }\n    }\n\n    getAjaxUrl() {\n        let url = location.pathname;\n        if (!url.endsWith(\"/\")) {\n            url += \"/\";\n        }\n        return url;\n    }\n\n    getAjaxRequest() {\n        return {};\n    }\n\n    renderNotLoaded() {\n        let renderLoading = StateDependentElement.renderLoading;\n        if (typeof renderLoading === \"function\") {\n            renderLoading = renderLoading();\n        }\n        return renderLoading;\n    }\n\n    setError(error) {\n        this.options.error = error;\n    }\n\n    renderError() {\n        let renderError = StateDependentElement.renderError;\n        if (typeof renderError === \"function\") {\n            renderError = renderError(this.options.error);\n        }\n        return renderError;\n    }\n\n    renderLoaded() {\n        if (this.options.error) {\n            return this.renderError();\n        }\n        return super.renderLoaded();\n    }\n\n    onDelayedMount() {\n        if (!this.options.error) {\n            super.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        Ajax.getJSON(this.getAjaxUrl(), this.getAjaxRequest()).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            (error) => {\n                this.setError(error);\n                this.setLoaded();\n            }\n        );\n    }\n};\n\nStateDependentElement.renderLoading = () => <ConcentricCirclesLoadingScreen/>;\n\nStateDependentElement.renderError = (error, message) => {\n    return <div style={{maxWidth: \"300px\", margin: \"0 auto\", marginTop: \"30px\"}}>\n            <CardPanel title={UI.T(\"Error in opening the URL\")} level={Level.ERROR}>\n                <h3>{message || error.message}</h3>\n            </CardPanel>\n        </div>;\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, Link, Modal, Form, FormField, TextInput, FormGroup, CheckboxInput, TemporaryMessageArea} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {BlogEntryStore} from \"BlogStore\";\nimport {ArticleStore} from \"ArticleStore\";\nimport {MarkupEditor} from \"markup/MarkupEditor\";\nimport {UserHandle} from \"UserHandle\";\nimport {BlogArticleRenderer} from \"./BlogArticleRenderer\";\nimport {ArticleEditor} from \"ArticleEditor\";\nimport {AsyncCommentThread} from \"CommentWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {slugify} from \"Utils\";\nimport {FAIcon} from \"FontAwesome\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Route, Router} from \"Router\";\nimport {Dispatcher} from \"Dispatcher\";\n\nimport {Theme} from \"ui/style/Theme\";\nimport {Level} from \"ui/Constants\";\n\nexport class BlogEntryEditModal extends Modal {\n    getModalWindowStyle() {\n        return Object.assign({}, super.getModalWindowStyle(), {\n            margin: \"0 auto\",\n            maxHeight: \"100%\",\n            overflow: \"initial\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            top: \"1vh\",\n            height: \"98vh\",\n        });\n    }\n\n    render() {\n        let entry = BlogEntryStore.get(this.options.entryId);\n        let article = entry.getArticle();\n\n        let discussionButton = null;\n        if (!entry.discussionId) {\n            discussionButton = <Button level={Level.WARNING} label=\"Create discussion\"\n                                       onClick={() => this.createDiscussion()} style={{marginLeft: \"5px\"}}/>;\n        }\n\n        return [\n            <h3>Edit Entry</h3>,\n            <Form>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" value={article.name} />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" value={entry.urlName} />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\" value={entry.visible} />\n                </FormField>\n                <Button level={Level.PRIMARY} label=\"Change settings\" onClick={() => this.changeSettings()} />\n                {discussionButton}\n                <TemporaryMessageArea ref=\"messageArea\"/>\n            </Form>,\n            <ArticleEditor ref=\"contentEditor\" articleId={article.id} style={{flex: \"1\"}} />\n        ];\n    }\n\n    changeSettings() {\n        let title = this.titleInput.getValue();\n        let urlName = this.urlInput.getValue();\n\n        let request = {\n            entryId: this.options.entryId,\n            isVisible: this.visibleCheckbox.getValue(),\n        };\n\n        if (title) {\n            request.title = title;\n        }\n\n        if (urlName) {\n            request.urlName = urlName;\n        }\n\n        Ajax.postJSON(\"/blog/change_entry_settings/\", request).then(\n            (data) => {\n                if (data.urlName) {\n                    Router.changeURL([\"blog\", data.urlName]);\n                }\n                this.hide();\n            }\n        );\n    }\n\n    createDiscussion() {\n        let request = {\n            entryId: this.options.entryId\n        };\n\n        Ajax.postJSON(\"/blog/create_entry_discussion/\", request).then(\n            () => this.hide()\n        );\n    }\n}\n\nexport class NewBlogEntryModal extends Modal {\n    render() {\n        return [\n            <h1>New Entry</h1>,\n            <FormGroup>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\"/>\n                </FormField>\n                <Button label=\"Add Entry\" level={Level.PRIMARY} onClick={() => {this.addEntry()}}/>\n                <MarkupEditor ref=\"postContentMarkup\" style={{height: \"450px\"}} />\n            </FormGroup>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.titleInput.onKeyUp(() => {\n            this.urlInput.setValue(slugify(this.titleInput.getValue()));\n        });\n    }\n\n    addEntry() {\n        let data = {};\n\n        let title = this.titleInput.getValue();\n        if (title) {\n            data.title = title;\n        }\n\n        let urlName = this.urlInput.getValue();\n        if (urlName) {\n            data.urlName = urlName;\n        }\n\n        data.isVisible = this.visibleCheckbox.getValue();\n\n        let content = this.postContentMarkup.getValue();\n        if (content) {\n            data.content = content;\n        }\n\n        Ajax.postJSON(\"/blog/add_entry/\", data).then(\n            (data) => {\n                let blogEntry = BlogEntryStore.get(data.blogEntryId);\n                Router.changeURL([\"blog\", blogEntry.urlName]);\n                this.hide();\n            }\n        );\n    }\n}\n\nclass BlogEntryPreview extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            position: \"relative\",\n            maxHeight: \"420px\",\n            marginTop: \"45px\",\n            marginBottom: \"45px\",\n        });\n    }\n\n    canOverwrite(obj) {\n        return super.canOverwrite(obj) && this.options.entryId === obj.options.entryId;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    getEntryURL() {\n        return \"/blog/\" + this.getBlogEntry().urlName + \"/\";\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n        const article = this.getBlogArticle();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            color: \"#777\",\n            fontSize: \"1em\",\n            margin: \"0\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>{UI.T(\"Last update on\")} {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        return [\n            <div style={{height: \"100%\",}}>\n                <div style={{\n                    boxShadow: \"0px 0px 10px rgb(160, 162, 168)\",\n                    \"background-color\": \"#fff\",\n                    \"padding\": \"1% 4% 10px 4%\",\n                    \"margin\": \"0 auto\",\n                    \"width\": \"900px\",\n                    \"max-width\": \"100%\",\n                    position: \"relative\"\n                }}>\n                    <div style={blogStyle.writtenBy}>\n                        {UI.T(\"Written by\")} <UserHandle\n                        userId={article.userCreatedId}/>, {publishedFormat}.{modifiedFormat}\n                    </div>\n                    <div style={blogStyle.title}>\n                        <Link href={this.getEntryURL()} value={article.name}\n                              style={{\"text-decoration\": \"none\", \"color\": \"inherit\"}}/>\n                    </div>\n                    <BlogArticleRenderer article={article} style={blogStyle.blogArticleRenderer}/>\n                    <div className={blogStyle.whiteOverlay}></div>\n                    <Link href={this.getEntryURL()} style={blogStyle.link} value={UI.T(\"Continue reading\")}/>\n                </div>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryView extends UI.Element {\n    get pageTitle() {\n        return this.getBlogArticle().name;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSheet().blogEntryView);\n    }\n\n    getComments() {\n        let chatId = this.getBlogEntry().discussionId;\n        if (!chatId) {\n            return null;\n        }\n        return (<div style={{marginBottom: \"20px\", marginTop: \"20px\"}}>\n            <AsyncCommentThread chatId={chatId}/>\n        </div>);\n    }\n\n    render() {\n        const article = this.getBlogArticle();\n        const blogStyle = this.getStyleSheet();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            margin: \"3px\",\n            color: \"#777\",\n            fontSize: \"1em\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>Last update on {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        let blogEntryEditButton;\n        // TODO: should use proper rights\n        if (USER.isSuperUser) {\n            blogEntryEditButton = <Button level={Level.DEFAULT} label=\"Edit\" onClick={() => {\n                BlogEntryEditModal.show({entryId: this.getBlogEntry().id, fillScreen: true});\n            }}/>\n        }\n\n        return [\n            <div style={{\n                \"background-color\": \"#fff\",\n                \"padding\": \"2% 5%\",\n                \"box-shadow\": \"rgb(160, 160, 160) 0px 3px 15px\",\n            }}>\n                {blogEntryEditButton}\n                <div style={blogStyle.writtenBy}>\n                    Written by <UserHandle userId={article.userCreatedId}/> on {publishedFormat}.\n                    {modifiedFormat}\n                </div>\n                <div style={blogStyle.title}>{article.name}</div>\n                <BlogArticleRenderer style={blogStyle.article} article={article}/>\n                <div style={{\n                    \"margin-top\": \"30px\",\n                    \"margin-bottom\": \"10px\",\n                }}>\n                    <Link href=\"/blog/\" style={blogStyle.link} value=\"Back to the Main Blog\"/>\n                </div>\n                {this.getComments()}\n            </div>,\n            <div className={blogStyle.bottomSection}>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryList extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"paddingTop\", \"10px\");\n    }\n\n    showNewBlogPostModal() {\n        let modal = <NewBlogEntryModal fillScreen/>;\n        modal.show();\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n\n        let entries = [];\n\n        let blogEntries = BlogEntryStore.all().sort((a, b) => {\n            return b.getArticle().dateCreated - a.getArticle().dateCreated;\n        });\n\n        for (let entry of blogEntries) {\n            entries.push(<BlogEntryPreview key={entry.id} entryId={entry.id}/>);\n        }\n\n        return [\n            USER.isSuperUser ?\n                <Button label=\"New Entry\"\n                        level={Level.DEFAULT}\n                        onClick={() => this.showNewBlogPostModal()}\n                />\n                : null,\n            <div ref=\"entriesList\">\n                {entries}\n            </div>,\n            <Button label={this.options.finishedLoading ? UI.T(\"End of blog\") : UI.T(\"Load More\")}\n                    ref=\"loadMoreButton\"\n                    style={{margin: \"0px auto\", display: \"block\"}}\n                    className={blogStyle.loadMoreButton}\n                    disabled={this.options.finishedLoading} />,\n            <div style={{\n                height: \"45px\",\n                width: \"100%\",\n            }}/>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.loadMoreButton.addClickListener(() => {\n            if (!this.options.finishedLoading) {\n                Ajax.getJSON(\"/blog/\", {\n                    lastDate: Math.min.apply(null, BlogEntryStore.all().map(x => x.getArticle().dateCreated))\n                }).then(\n                    (data) => {\n                        this.options.finishedLoading = data.finishedLoading;\n                        if (this.options.finishedLoading) {\n                            this.loadMoreButton.options.label = UI.T(\"No more posts\");\n                            this.loadMoreButton.redraw();\n                            this.loadMoreButton.disable();\n                        }\n                        this.redraw();\n                    }\n                );\n            }\n        });\n\n        this.attachCreateListener(BlogEntryStore, () => {\n            this.redraw();\n        });\n    }\n}\n\nTheme.register(BlogEntryView, BlogStyle);\nTheme.register(BlogEntryPreview, BlogStyle);\nTheme.register(BlogEntryList, BlogStyle);\n\nclass DelayedBlogEntryList extends StateDependentElement(BlogEntryList) {\n}\n\nclass DelayedBlogEntryView extends StateDependentElement(BlogEntryView) {\n    getBlogEntry() {\n        return BlogEntryStore.getEntryForURL(this.options.entryURL);\n    }\n\n    get pageTitle() {\n        if (this.getBlogEntry()) {\n            return super.pageTitle;\n        } else {\n            return null;\n        }\n    }\n\n    set pageTitle(value) {\n    }\n\n    onDelayedMount() {\n        super.onDelayedMount();\n        Router.updateURL();\n    }\n\n    getAjaxUrl() {\n        return \"/blog/get_blog_post/\";\n    }\n\n    getAjaxRequest() {\n        return {\n            entryUrlName: this.options.entryURL,\n        }\n    }\n}\n\nclass BlogRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route(\"%s\", (options) => {\n                let entryURL = options.args[options.args.length - 1];\n\n                let blogEntry = BlogEntryStore.getEntryForURL(entryURL);\n\n                if (blogEntry) {\n                    return <BlogEntryView entryId={blogEntry.id} />;\n                } else {\n                    return <DelayedBlogEntryView entryURL={entryURL} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"blog\", options={}) {\n        options.title = options.title || \"Blog\";\n        super(expr, DelayedBlogEntryList, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n\nexport {BlogEntryPreview, DelayedBlogEntryList, DelayedBlogEntryView, BlogEntryView, BlogRoute};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {MessageThreadStore, MessageInstanceStore} from \"MessageThreadStore\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Ajax} from \"Ajax\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nclass Forum extends StoreObject {\n    constructor() {\n        super(...arguments);\n        this.forumThreads = new Map();\n        // TODO: not appropriate to register to streams here\n        this.registerToStream();\n        ForumThreadStore.addDeleteListener((forumThread) => {\n            if (forumThread.parentId === this.id && this.forumThreads.has(forumThread.id)) {\n                this.deleteForumThread(forumThread);\n            }\n        });\n    }\n\n    getStreamName() {\n        return \"forum-\" + this.id;\n    }\n\n    getForumThreads() {\n        let forumThreads = Array.from(this.forumThreads.values());\n        // Filter out hidden forum threads\n        forumThreads = forumThreads.filter(forumThread => forumThread.isVisible());\n        forumThreads.sort((a, b) => {return b.id - a.id});\n        return forumThreads;\n    }\n\n    addForumThread(forumThread, event) {\n        this.forumThreads.set(forumThread.id, forumThread);\n        this.dispatch(\"newForumThread\", event);\n    }\n\n    deleteForumThread(forumThread) {\n        this.forumThreads.delete(forumThread.id);\n        this.dispatch(\"deleteForumThread\", forumThread);\n    }\n}\n\nvar ForumStore = new GenericObjectStore(\"forum\", Forum);\n\nclass ForumThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        let parent = this.getParent();\n        parent && parent.addForumThread(this);\n    }\n\n    getAuthor() {\n        return PublicUserStore.get(this.authorId);\n    }\n\n    isPinned() {\n        return this.pinnedIndex != null;\n    }\n\n    getPinIndex() {\n        return this.pinnedIndex;\n    }\n\n    getTitle() {\n        return this.title;\n    }\n\n    getContentMessage() {\n        return MessageInstanceStore.get(this.contentMessageId);\n    }\n\n    getVotesBalance() {\n        let message = this.getContentMessage();\n        if (message) {\n            return message.getVotesBalance();\n        }\n        return this.votesBalance;\n    }\n\n    getParent() {\n        return ForumStore.get(this.parentId);\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getTimeAdded() {\n        // TODO: maybe return formatted time\n        return this.timeAdded;\n    }\n\n    getLastActive() {\n        return this.lastActive;\n    }\n\n    getNumReplies() {\n        return this.getNumMessages() - 1;\n    }\n\n    deleteThread(onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/forum/edit_forum_thread/\", {\n            forumThreadId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    getNumMessages() {\n        return this.numMessages;\n    }\n\n    isVisible() {\n        return !this.hidden;\n    }\n\n    isLoaded() {\n        // TODO: this needs to be fixed to support dynamic loading\n        // console.warn(this.getNumReplies(), this.getMessageThread().getNumMessages());\n        return this.getMessageThread() != null && this.getNumReplies() === this.getMessageThread().getNumMessages() - 1;\n    }\n}\n\nconst ForumThreadStore = new GenericObjectStore(\"forumthread\", ForumThread, {\n    dependencies: [\"forum\", \"messageinstance\"]\n});\n\n\nexport {ForumStore, ForumThreadStore};","import {UI, Button} from \"UI\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {Level} from \"ui/Constants\";\n\nclass EditThreadReplyButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            EditThreadReplyModal.show({\n                messageInstance: this.options.messageInstance,\n                classMap: ChatMarkupRenderer.classMap\n            });\n        });\n    }\n}\n\nclass EditThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.markupEditor.setValue(this.options.messageInstance.getContent());\n        // this.markupEditor.codeEditor.getAce().focus();\n        this.doneButton.addClickListener(() => {\n            this.options.messageInstance.edit(this.markupEditor.getValue());\n        });\n    }\n}\n\nexport {EditThreadReplyButton};\n","import {UI, ActionModal, ActionModalButton} from \"UI\";\n\nclass DeleteThreadReplyModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete message\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>{UI.T(\"Are you sure you want to delete the message?\")}</p>;\n    }\n\n    action() {\n        this.options.messageInstance.deleteMessage();\n        this.hide();\n    }\n}\n\nlet DeleteThreadReplyButton = ActionModalButton(DeleteThreadReplyModal);\n\nexport {DeleteThreadReplyButton};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n//import {CSAStyle} from \"CSAStyle\";\n\nconst colors = {\n    // BLUE: \"#20232d\",\n    BLUE: \"#202e3e\",\n    HOVER_BLUE: \"#364251\",\n    // BLACK: \"#181a22\",\n    BLACK: \"#1c2937\",\n    // HOVER_BLACK: \"#323539\",\n    HOVER_BLACK: \"#364251\",\n    WHITE: \"#eee\",\n};\n\n\nclass ForumThreadReplyStyle extends StyleSheet {\n\n    @styleRule\n    mainClass = {\n        width: \"90%\",\n        margin: \"0 auto\",\n        maxWidth: \"1200px\",\n    }\n\n    @styleRule\n    repliesUserAndDate = {\n        height: \"40px\",\n        width: \"100%\",\n        lineHeight: \"40px\",\n        fontSize: \"15px\",\n        marginTop: \"8px\",\n        marginBottom: \"8px\",\n    };\n\n    @styleRule\n    repliesUser = {\n        display: \"inline-block\",\n        float: \"left\",\n        color: \"#444\",\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    repliesDate = {\n        display: \"inline-block\",\n        float: \"right\",\n    };\n\n    @styleRule\n    repliesContent = {\n        marginBottom: \"15px\",\n        fontSize: \"16px\",\n    };\n}\n\n\nlet height = 70;\n\nclass ForumThreadPanelStyle extends StyleSheet {\n    fontSize = \"0.9em\";\n    numRepliesFontSize = \"1.03em\";\n    messageFontSize = \"1.2em\";\n    buttonFontSize = \"1em\";\n\n    @styleRule\n    mainClass = {\n        margin: \"0 auto\",\n        marginBottom: \"20px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: \"2em\",\n        color: \"#333\",\n        minHeight: \"50px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    backButton = {\n        color: \"#444\",\n        fontSize: this.fontsize,\n        textDecoration: \"none\",\n        transition: \".15s\",\n        opacity: \"1\",\n        \":hover\": {\n            opacity: \"1\",\n            color: \"#337ab7\",\n            transition: \".15s\",\n        },\n    };\n\n    @styleRule\n    replyButtonDiv = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        height: \"50px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    replyButton = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    fullPost = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: this.fontSize,\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    dislikeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"16px\",\n    };\n\n    @styleRule\n    likeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"8px\",\n    };\n\n    @styleRule\n    author = {\n        color: \"#262626\",\n        fontSize: this.fontSize,\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        paddingLeft: \"0\",\n        // justifyContent: \"center\",\n        textTransform: \"uppercase\",\n        // fontWeight: \"bold\",\n    };\n\n    @styleRule\n    header = {\n    };\n\n    @styleRule\n    message = {\n        padding: \"5px 12px\",\n        fontSize: this.messageFontSize,\n        color: colors.BLUE,\n        \" p\": {\n            marginBottom: \"0\",\n            padding: \"5px 0\",\n        },\n    };\n\n    @styleRule\n    buttons = {\n        height: \"50px\",\n        width: \"100%\",\n        paddingTop: \"12px\",\n    };\n\n    @styleRule\n    bottomPanel = {\n        height: \"50px\",\n        width: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    };\n\n    @styleRule\n    voting = {\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    numReplies = {\n        height: \"50px\",\n        fontSize: this.numRepliesFontSize,\n        paddingLeft: \"12px\",\n        color: \"#767676\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    replies = {\n        width: \"100%\",\n        color: \"#444\",\n    };\n\n    @styleRule\n    editDeleteButtons = {\n        width: \"100%\",\n        height: \"50px\",\n        padding: \"0 7px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    };\n\n    @styleRule\n    editButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    deleteButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass ButtonStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: colors.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        marginBottom: \"0\",\n        borderColor: colors.BLUE,\n        fontSize: \"13px\",\n        transition: \".2s\",\n        outline: \"none\",\n        \":hover\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n}\n\n\nclass ForumThreadHeaderStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"0.85em\";\n    widthLimit = 800;\n\n    tagsHeight = 50;\n    // borderTopColor = \"rgb(232, 189, 35)\";\n    borderTopColor = \"#333\";\n\n    baseStyleObject = {\n        height: this.tagsHeight + \"px\",\n        // display: \"inline-block\",\n        // float: \"left\",\n        color: \"#262626\",\n        // letterSpacing: \"-0.3px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n        fontWeight: \"bold\",\n    };\n    \n    @styleRule\n    mainClass = {\n        height: \"40px\",\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        // borderBottom: \"2px solid #333\",// + this.borderTopColor,\n        color: \"#aaa\",\n        display: \"flex\",\n\n\n        boxSizing: \"content-box\",\n        backgroundColor: \"#eaeaea\",\n        height: this.tagsHeight + \"px\",\n        borderTop: \"3px solid \" + this.borderTopColor,\n    };\n\n    @styleRule\n    tagsTitle = [this.baseStyleObject, {\n        // marginLeft: \"1%\",\n        // width: \"40%\",\n        paddingLeft: \"12px\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        justifyContent: \"initial\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".7\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsReplies = [this.baseStyleObject, {\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            console.log(window.innerWidth);\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n}\n\n\nclass ForumThreadPreviewStyle extends StyleSheet {\n    // functionality\n    maxHeight = 50;\n    lines = 2;\n    lineHeight = this.maxHeight / this.lines;\n\n    // design\n    fontSize = \".88em\";\n    color = \"#aaa\";\n\n    @styleRule\n    forumThreadPreview = {\n        maxHeight: this.maxHeight + \"px\",\n        lineHeight: this.lineHeight + \"px\",\n        overflow: \"hidden\",\n        fontSize: this.fontSize,\n        color: this.color,\n        \" *\": {\n            marginBottom: \"0\",\n        },\n    };\n}\n\n\nclass ForumThreadBubbleStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"1em\";\n    titlePaddingBottom = \"10px\";\n    widthLimit = 800;\n\n    baseStyleObject = {\n        display: \"inline-block\",\n        verticalAlign: \"top\",\n        fontSize: this.fontSize,\n    };\n\n    @styleRule\n    backgroundColorOddInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorPinnedInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorEvenInstances = {\n        backgroundColor: \"#fff\",\n        \":hover\": {\n            backgroundColor: \"#fafafa\",\n        }\n    };\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        color: \"#555\",\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    threadTitleAndPreview = {\n        flexDirection: \"column\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        paddingTop: \"25px\",\n        paddingBottom: \"25px\",\n        paddingLeft: \"12px\",\n    }\n\n    @styleRule\n    threadTitle = [this.baseStyleObject, {\n        // width: \"40%\",\n        // maxWidth: \"50%\",\n        // flex: \"1.5\",\n        flexDirection: \"column\",\n        textAlign: \"justify\",\n        // paddingRight: \"8px\",\n        verticalAlign: \"middle\",\n        wordWrap: \"break-word\",\n        color: \"#252628\",\n        paddingBottom: this.titlePaddingBottom,\n    }];\n\n    @styleRule\n    pinnedIcon = {\n        textAlign: \"center\",\n        display: \"inline-block\",\n        float: \"left\",\n        height: \"60px\",\n        paddingTop: \"25px\",\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    threadTitleSpan = {\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        lineHeight: \"20px\",\n        // maxWidth: \"95%\",\n        transition: \"0.2s\",\n        fontSize: \"1.2em\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        // maxWidth: \"14%\",\n        flex: \".7\",\n        // paddingLeft: \"8px\",\n        textAlign: \"center\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadReplies = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontWeight: \"bold\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadRepliesSpan = {\n        transition: \"0.2s\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        fontSize: \".85em\",\n    }];\n}\n\n\nclass ForumPanelStyle extends StyleSheet {\n    textColor = \"#333\";\n    headerItemHeight = 50;\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"100%\",\n        // textAlign: \"center\",\n        fontSize: \"2em\",\n        color: this.textColor,\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    buttonParent = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    button = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    header = {\n        height: 2 * this.headerItemHeight + \"px\",\n        width: \"100%\",\n    };\n}\n\n\nexport {\n    ForumThreadReplyStyle, \n    ForumThreadPanelStyle, \n    ButtonStyle, \n    ForumThreadHeaderStyle, \n    ForumThreadPreviewStyle,\n    ForumThreadBubbleStyle, \n    ForumPanelStyle\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\n\n@registerStyle(ButtonStyle)\nclass CreateThreadReplyButton extends Button {\n    getDefaultOptions() {\n        return {\n            level: Level.PRIMARY,\n            size: Size.LARGE,\n            label: UI.T(\"Preview\")\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (!this.markupEditorModal) {\n                this.markupEditorModal = <CreateThreadReplyModal forumThreadId={this.options.forumThreadId}\n                    classMap={ChatMarkupRenderer.classMap}\n                />;\n            }\n            this.markupEditorModal.show();\n        });\n    }\n}\n\nclass CreateThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.createThreadReply();\n        });\n    }\n\n    createThreadReply() {\n        // TODO: should be a dispatch: it should jump and highlight your post\n        Ajax.postJSON(\"/forum/forum_thread_post/\", {\n            forumThreadId: this.options.forumThreadId,\n            message: this.markupEditor.getValue(),\n        });\n    }\n}\n\nexport {CreateThreadReplyButton};\n","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {\n    ActionModal,\n    ActionModalButton,\n    Button,\n    Input,\n    Link,\n    Panel,\n    Router,\n    TimePassedSpan,\n    UI,\n    registerStyle,\n} from \"UI\";\nimport {ConcentricCirclesLoadingScreen} from \"ui/ConcentricCirclesLoadingScreen\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {UserHandle} from \"UserHandle\";\nimport {EditThreadReplyButton} from \"EditThreadReplyButton\";\nimport {DeleteThreadReplyButton} from \"DeleteThreadReplyButton\";\nimport {CreateThreadReplyButton} from \"CreateThreadReplyButton\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {ForumThreadPanelStyle, ForumThreadReplyStyle} from \"ForumStyle\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nlet forumThreadPanelStyle = ForumThreadPanelStyle.getInstance();\nlet buttonStyle = ButtonStyle.getInstance();\n\n\nclass CreateForumThreadModal extends MarkupEditorModal {\n    render() {\n        let inputStyle = {\n            \"margin-bottom\": \"4px\",\n            \"border\": \"0\",\n            //\"border-radius\": \"4px\",\n            //\"border\": \"2px solid #dcdcdc\",\n            \"outline\": \"none\",\n            \"color\": \"#333\",\n            \"font-size\": \"14px\",\n            \"padding-left\": \"8px\",\n            \"width\": \"100%\",\n            \"text-align\": \"center\",\n            \"font-weight\": \"bold\",\n        };\n\n        return [\n            <Input label={UI.T(\"Title\")} ref=\"titleInput\" style={inputStyle} placeholder=\"Click here to edit the title (max. 160 characters).\" />,\n            ...super.render(),\n        ];\n    }\n\n    onMount() {\n        this.doneButton.addClickListener(() => {\n            this.createForumThread();\n        });\n    }\n\n    routeToThread(forumThreadId) {\n        // TODO: add the temp forum title\n        Router.changeURL([\"forum\", forumThreadId, \"title\"])\n    }\n\n    createForumThread() {\n        let request = {\n            forumId: this.options.forumId,\n            title: this.titleInput.getValue(),\n            message: this.markupEditor.getValue(),\n        };\n\n        Ajax.postJSON(\"/forum/create_forum_thread/\", request).then(\n            (data) => {\n                this.routeToThread(data.forumThreadId);\n                this.titleInput.setValue(\"\");\n                this.markupEditor.setValue(\"\");\n                this.markupEditor.redraw();\n                this.hide();\n            }\n        );\n    }\n}\n\n@registerStyle(ButtonStyle)\nclass CreateForumThreadButton extends Button {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        options.size = options.size || Size.LARGE;\n        super.setOptions(options);\n    }\n\n    getModalClass() {\n        return CreateForumThreadModal;\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            this.getModalClass().show({\n                forumId: this.options.forumId,\n                classMap: ChatMarkupRenderer.classMap,\n            });\n        });\n    }\n}\n\nclass DeleteForumThreadModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete forum thread\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>\n            {UI.T(\"Are you sure you want to delete thread\")}\n            {\" \\\"\" + this.options.forumThread.title + \"\\\"?\"}\n        </p>;\n    }\n\n    action() {\n        this.options.forumThread.deleteThread();\n        this.hide();\n    }\n}\n\nlet DeleteForumThreadButton = ActionModalButton(DeleteForumThreadModal);\n\nclass ForumThreadReply extends UI.Element {\n    extraNodeAttributes(attr) {\n        // attr.addClass(forumThreadReplyStyle.mainClass);\n    }\n\n    getMessageInstance() {\n        return this.options.messageInstance;\n    }\n\n    render() {\n        let messageInstance = this.getMessageInstance();\n        let deleteMessage;\n        let editMessage;\n        let editAndDeleteButtons = <span/>;\n\n        if (USER.isSuperUser || USER.id === messageInstance.userId) {\n            deleteMessage = <DeleteThreadReplyButton\n                faIcon=\"trash\"\n                level={Level.DANGER}\n                className={forumThreadPanelStyle.deleteButton}\n                modalOptions={{messageInstance: messageInstance}} />;\n            editMessage = <EditThreadReplyButton\n                faIcon={\"pencil\"}\n                level={Level.INFO}\n                messageInstance={messageInstance}\n                forumThreadPanel={this}\n                className={forumThreadPanelStyle.editButton} />;\n            editAndDeleteButtons = <div className={forumThreadPanelStyle.editDeleteButtons} style={{width: \"auto\",}}>\n                {editMessage}\n                {deleteMessage}\n            </div>;\n        }\n\n        return [\n            <div className={forumThreadPanelStyle.fullPost}>\n                <div className={forumThreadPanelStyle.author}\n                    style={{\n                        fontSize: \"1em\",\n                        paddingLeft: \"12px\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                    }}>\n                    <UserHandle id={messageInstance.userId} style={{\n                        textTransform: \"initial\",\n                        fontSize: \"1.1em\",\n                    }}/>\n                    <TimePassedSpan timeStamp={messageInstance.getDate()} style={{\n                        color: \"#262626 !important\",\n                        paddingRight: \"12px\",\n                    }}/>\n                </div>\n                <ChatMarkupRenderer ref={this.refLink(\"postContent\" + messageInstance.id)} value={messageInstance.getContent()} className={forumThreadPanelStyle.message}/>\n                <div className={forumThreadPanelStyle.bottomPanel}>\n                    {editAndDeleteButtons}\n                    <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={messageInstance} className={forumThreadPanelStyle.voting}/>\n                </div>\n            </div>\n        ];\n    }\n\n    onMount() {\n        this.attachEventListener(this.getMessageInstance(), \"messageDelete\", () => {\n            this.hide();\n        });\n        this.attachEventListener(this.getMessageInstance(), \"messageEdit\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumThreadPanelStyle)\nclass ForumThreadPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    returnToMainForum() {\n        Router.changeURL(this.getMainForumURL());\n    }\n\n    getMainForumURL() {\n        return \"/forum/\";\n    }\n\n    getForumThreadState(callback=NOOP_FUNCTION) {\n        let request = {\n            forumThreadId: this.options.forumThread.id,\n        };\n\n        Ajax.postJSON(\"/forum/forum_thread_state/\", request).then(\n            callback,\n            (error) => {\n                this.returnToMainForum();\n                ErrorHandlers.showErrorAlert(error);\n            }\n        );\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getTitle() {\n        return [\n            <div className={this.styleSheet.title}>\n                <Link href={this.getMainForumURL()} className={this.styleSheet.backButton}\n                    value={<span className=\"fa fa-arrow-left\" style={{\n                        paddingRight: \"10px\",\n                        fontSize: \".8em\",\n                        color: \"#333\",\n                    }} />} />\n                {this.getForumThread().getTitle()}\n            </div>\n        ];\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.author}>\n            {UI.T(\"written by\")}&nbsp;\n            <UserHandle id={this.getForumThread().authorId} style={{\n                textTransform: \"initial\",\n            }}/>\n            &nbsp;\n            <TimePassedSpan timeStamp={this.getForumThread().getTimeAdded()} style={{color: \"#262626 !important\",}}/>\n        </div>;\n    }\n\n    getMessage() {\n        return <div className={this.styleSheet.message}>\n                 <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.getForumThread().getContentMessage().getContent()} style={{height:\"auto\"}}/>\n            </div>;\n    }\n\n    getNumReplies(postsLength) {\n        return [\n            <div className={this.styleSheet.numReplies}>\n                <span style={{\"font-weight\": \"bold\", }}>{postsLength}</span>\n                &nbsp;{\"replies in this thread\" + (postsLength == 0 ? \", be the first one to comment\" : \"\")}\n            </div>\n        ];\n    }\n\n    getVoting() {\n        return <div className={this.styleSheet.voting}>\n            <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={this.getForumThread().getContentMessage()} style={{\"margin-left\": \"0\", }} />\n        </div>;\n    }\n\n    render() {\n        if (!this.options.forumThread.isLoaded()) {\n            this.getForumThreadState(() => {\n                this.redraw();\n                this.initializeListeners();\n            });\n            return <ConcentricCirclesLoadingScreen />;\n        }\n\n        let replies = [];\n        let spaceBetween;\n        let forumThread = this.options.forumThread;\n\n        // sort the forum replies by the activity date\n        let forumThreadMessages = Array.from(forumThread.getMessageThread().getMessages());\n        forumThreadMessages.sort((a, b) => {\n            return a.getDate() - b.getDate();\n        });\n\n        for (let messageInstance of forumThreadMessages) {\n            if (messageInstance !== forumThread.getContentMessage()) {\n                replies.push(<ForumThreadReply className={this.styleSheet.replies} messageInstance={messageInstance} />);\n            }\n        }\n\n        if (replies.length) {\n            spaceBetween = <div style={{\n                height: \"60px\",\n                borderBottom: \"1px solid #ddd\",\n                width: \"90%\",\n                maxWidth: \"1200px\",\n                margin: \"0 auto\",\n            }}></div>;\n        }\n\n        let deleteButton;\n        let editButton;\n        let editAndDeleteButtons;\n\n        if (USER.isSuperUser || USER.id === this.getForumThread().authorId) {\n            deleteButton = <DeleteForumThreadButton faIcon=\"trash\"\n                                                    level={Level.DANGER}\n                                                    className={this.styleSheet.deleteButton}\n                                                    modalOptions = {{\n                                                        forumThread: this.getForumThread()\n                                                    }}/>;\n            editButton = <EditThreadReplyButton faIcon=\"pencil\"\n                                                level={Level.INFO}\n                                                className={this.styleSheet.editButton}\n                                                messageInstance={this.getForumThread().getContentMessage()}/>;\n            editAndDeleteButtons = <div className={this.styleSheet.editDeleteButtons}>\n                {editButton}\n                {deleteButton}\n            </div>;\n        }\n\n        return [\n            <div style={{marginBottom: \"60px\",}}>\n                <div className={this.styleSheet.header}>\n                    {this.getTitle()}\n                    <div className={this.styleSheet.replyButtonDiv}>\n                        {this.getAuthor()}\n                        <CreateThreadReplyButton\n                            label={UI.T(\"REPLY\")}\n                            className={this.styleSheet.replyButton}\n                            size={Size.DEFAULT}\n                            forumThreadId={forumThread.id}\n                            forumThread={this.getForumThread()}\n                            classMap={ChatMarkupRenderer.classMap}\n                        />\n                    </div>\n                </div>\n                <div style={{width: \"90%\", maxWidth: \"1200px\", margin: \"0 auto\", height: \"3px\", backgroundColor: \"#333\", marginTop: \"10px\",}}></div>\n                <div className={this.styleSheet.fullPost}>\n                    {this.getMessage()}\n                    <div className={this.styleSheet.bottomPanel}>\n                        {this.getNumReplies(replies.length)}\n                        {this.getVoting()}\n                    </div>\n                    {editAndDeleteButtons}\n                </div>\n                {spaceBetween}\n                {replies}\n            </div>\n        ];\n    }\n\n    deleteThread() {\n        this.getForumThread().deleteThread();\n    }\n\n    initializeListeners() {\n        // These listeners need to be attached after the ForumThread is loaded in the js state\n        this.getForumThread().getMessageThread().addListener(\"newMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getMessageThread().addListener(\"deleteMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getContentMessage().addEventListener(\"messageEdit\", () => {\n            this.content.setValue(this.getForumThread().getContentMessage().getContent());\n            this.content.redraw();\n        });\n    }\n\n    onMount() {\n        // This applies only for a newly created forum thread, since the listeners from\n        // render do not get attached when the thread is already in the state.\n\n        if (this.options.forumThread.isLoaded()) {\n            this.initializeListeners();\n        }\n\n        this.getForumThread().addDeleteListener(() => {\n            this.returnToMainForum();\n        });\n    }\n}\n\nexport {CreateForumThreadButton, ForumThreadPanel};\n","import {UI, Panel, Link, Route, Router, TimePassedSpan, registerStyle, CardPanel} from \"ui/UI\";\nimport {Dispatcher} from \"base/Dispatcher\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\nimport {PreviewMarkupButton} from \"ChatWidget\";\nimport {UserHandle} from \"UserHandle\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {MessageThreadStore, MessageInstanceStore} from \"state/MessageThreadStore\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Size, Level} from \"ui/Constants\";\nimport {slugify} from \"base/Utils\";\n\nimport {ForumStore, ForumThreadStore} from \"./state/ForumStore\";\nimport {ForumThreadPanel, CreateForumThreadButton} from \"./ForumThread\";\nimport {ForumThreadHeaderStyle, ForumThreadPreviewStyle, ForumThreadBubbleStyle, ForumPanelStyle} from \"./ForumStyle\";\n\n\n@registerStyle(ForumThreadHeaderStyle)\nexport class ForumThreadHeader extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.tagsTitle}>\n            {UI.T(\"Title\")}\n        </div>;\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.tagsAuthor}>\n            {UI.T(\"Author\")}\n        </div>;\n    }\n\n    getReplies() {\n        return <div className={this.styleSheet.tagsReplies}>\n            {UI.T(\"Replies\")}\n        </div>;\n    }\n\n    getViews() {\n        return <div className={this.styleSheet.tagsViews}>\n            {UI.T(\"Views\")}\n        </div>;\n    }\n\n    getVotes() {\n        return <div className={this.styleSheet.tagsVotes}>\n            {UI.T(\"Score\")}\n        </div>;\n    }\n\n    getActivity() {\n        return <div className={this.styleSheet.tagsActivity}>\n            {UI.T(\"Active\")}\n        </div>;\n    }\n\n    render() {\n        return [\n            this.getTitle(),\n            this.getAuthor(),\n            this.getReplies(),\n            this.getViews(),\n            this.getVotes(),\n            this.getActivity(),\n        ];\n    }\n}\n\n@registerStyle(ForumThreadPreviewStyle)\nexport class ForumThreadPreview extends ChatMarkupRenderer {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.forumThreadPreview);\n    }\n}\n\n@registerStyle(ForumThreadBubbleStyle)\nexport class ForumThreadBubble extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.mainClass);\n        // couldn't figure out how to solve this easier and better\n        // if (this.options.isPinned) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorPinnedInstances));\n        // } else if (this.options.color == 0) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorOddInstances));\n        // } else {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorEvenInstances));\n        // }\n        return attr;\n    }\n\n    getHref() {\n        return \"/forum/\" + this.getForumThread().id + \"/\" + slugify(this.getForumThread().getTitle());\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getThreadTitle() {\n        let pinned = \"\";\n        if (this.getForumThread().isPinned()) {\n            pinned = <span className={\"fa fa-thumb-tack \" + this.styleSheet.pinnedIcon} aria-hidden=\"true\" style={{paddingTop: \"0\", lineHeight: \"20px\", height: \"20px\",}}/>;\n        }\n        let forumThread = this.getForumThread();\n        return [\n            <div className={this.styleSheet.threadTitleAndPreview}>\n                <div className={this.styleSheet.threadTitle}\n                    style={{paddingBottom: () => {\n                        if (forumThread.getContentMessage().content) {\n                            return this.styleSheet.titlePaddingBottom;\n                        }\n                        return \"0\";\n                    }}}>\n                    {pinned}\n                    <Link style={{\"text-decoration\": \"none\", \"color\": \"inherit\", \"font-size\": \"14px\", \"text-align\": \"justify\"}} href={this.getHref()}\n                        value={<span className={this.styleSheet.threadTitleSpan}>\n                                {this.getForumThread().getTitle()}\n                                </span>} />\n                </div>\n                <ForumThreadPreview value={this.getForumThread().getContentMessage().content} />\n            </div>\n        ];\n    }\n\n    getThreadAuthor() {\n        return [\n            <span className={this.styleSheet.threadAuthor}>\n                <UserHandle id={this.getForumThread().authorId} style={{\n                    \"line-height\": \"normal\",\n                    wordBreak: \"break-word\",\n                }} />\n            </span>\n        ];\n    }\n\n    getThreadReplies() {\n        return [\n            <div className={this.styleSheet.threadReplies}>\n                <Link style={{\n                    \"text-decoration\": \"none\",\n                    \"color\": \"inherit\",\n                }} href={this.getHref()} value={\n                    <span className={this.styleSheet.threadRepliesSpan}>\n                        {this.getForumThread().getNumReplies()}\n                    </span>\n                } />\n            </div>\n        ];\n    }\n\n    getThreadViews() {\n        return [\n            <div className={this.styleSheet.threadViews}>\n                {this.getForumThread().numViews}\n            </div>\n        ];\n    }\n\n    getThreadVotes() {\n        return [\n            <div className={this.styleSheet.threadVotes}>\n                {this.getForumThread().getVotesBalance()}\n            </div>\n        ];\n    }\n\n    getThreadActivity() {\n        let threadActivity = this.getForumThread().getLastActive();\n        /* TODO @mihaic, this should support custom color option (but I didn't want to change stem files on my own). check UIPrimitives.jsx line 400 */\n        return [\n            <div className={this.styleSheet.threadActivity}>\n                <TimePassedSpan timeStamp={threadActivity} />\n            </div>\n        ]\n    }\n\n    render() {\n        return [\n            this.getThreadTitle(),\n            this.getThreadAuthor(),\n            this.getThreadReplies(),\n            this.getThreadViews(),\n            this.getThreadVotes(),\n            this.getThreadActivity(),\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getForumThread().addUpdateListener(() => {\n            this.redraw();\n        });\n        this.getForumThread().addDeleteListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport class ForumThreadList extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setStyle({\n            width: \"90%\",\n            margin: \"0 auto\",\n            marginTop: \"10px\",\n            marginBottom: \"60px\",\n            // boxShadow: \"0px 0px 10px #ddd\", // TODO: Do we want this?\n        });\n        return attr;\n    }\n\n    getBubbleClass() {\n        return ForumThreadBubble;\n    }\n\n    render() {\n        let forumThreads = Array.from(this.options.forum.getForumThreads());\n\n        forumThreads.sort((a, b) => {\n            if (a.isPinned() && b.isPinned()) {\n                return b.getPinIndex() - a.getPinIndex();\n            }\n            if (a.isPinned()) {\n                return -1;\n            }\n            if (b.isPinned()) {\n                return 1;\n            }\n            return b.lastActive - a.lastActive;\n        });\n\n        let result = [];\n        let color = 1;\n        result.push(<ForumThreadHeader/>);\n        let Bubble = this.getBubbleClass();\n        for (let forumThread of forumThreads) {\n            result.push(<Bubble forumThread={forumThread} color={color} isPinned={forumThread.isPinned()}/>);\n            if (!forumThread.isPinned()) {\n                color = !color;\n            }\n        }\n        return result;\n    }\n\n    onMount() {\n        super.onMount();\n        this.options.forum.addListener(\"newForumThread\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumPanelStyle)\nexport class ForumPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.title}>\n                {this.options.forum.name}\n            </div>;\n    }\n\n    getButton() {\n        return <div className={this.styleSheet.buttonParent}>\n            <CreateForumThreadButton\n                label=\"NEW POST\"\n                className={this.styleSheet.button}\n                size={Size.DEFAULT}\n                forumId={this.options.forum.id}\n            />\n        </div>;\n    }\n\n    getForumThreadList() {\n        return <ForumThreadList forum={this.options.forum}/>;\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>\n                {this.getTitle()}\n                {this.getButton()}\n            </div>,\n            this.getForumThreadList(),\n        ];\n    }\n\n    onMount() {\n        this.attachListener(ForumThreadStore, \"create\", () => this.redraw());\n        this.attachListener(ForumThreadStore, \"delete\", () => this.redraw());\n    }\n}\n\nexport class DelayedForumPanel extends StateDependentElement(ForumPanel) {\n    importState(data) {\n        super.importState(data);\n        this.options.forum = ForumStore.get(this.options.forumId);\n    }\n}\n\nexport class DelayedForumThreadPanel extends StateDependentElement(ForumThreadPanel) {\n    // TODO: must be able to specify if URL is POST or GET in StateDependentElement\n    beforeRedrawNotLoaded() {\n        Ajax.postJSON(\"/forum/forum_thread_state/\", {\n            forumThreadId: this.options.forumThreadId,\n        }).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            () => {}\n        );\n    }\n\n    importState(data) {\n        super.importState(data);\n        this.options.forumThread = ForumThreadStore.get(this.options.forumThreadId);\n    }\n}\n\nexport class ForumRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route([\"%s\", \"%s\"], (options) => {\n                const forumThreadId = options.args[options.args.length - 2];\n\n                const forumThread = ForumThreadStore.get(forumThreadId);\n\n                if (forumThread) {\n                    return <ForumThreadPanel forumThread={forumThread} />;\n                } else {\n                    return <DelayedForumThreadPanel forumThreadId={forumThreadId} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"forum\", options={}) {\n        super(expr, DelayedForumPanel, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n","import {UI, Route} from \"UI\";\nimport {IndexPage} from \"./IndexPage\";\nimport {BlogRoute} from \"BlogPanel\";\nimport {ForumRoute} from \"ForumPanel\";\n\nexport const MAIN_ROUTE = new Route(\"\", IndexPage, []);","import {UI, Link, Router, GlobalContainer} from \"../ui/UI\";\nimport {isLocalUrl, trimLocalUrl} from \"../base/Utils\";\nimport {Dispatcher} from \"../base/Dispatcher\";\n\n\nexport function singlePageLinkOnMount() {\n    this.addClickListener((event) => {\n        if (event.shiftKey || event.ctrlKey || event.metaKey || !this.options.href || !isLocalUrl(this.options.href)\n            || this.options.newTab || (this.options.target && this.options.target !== \"_self\")) {\n            // Leave it to the browser\n            return;\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        Router.changeURL(trimLocalUrl(this.options.href));\n    });\n}\n\nexport class StemApp extends UI.Element {\n    static init() {\n        Link.prototype.onMount = singlePageLinkOnMount;\n        return self.appInstance = this.create(document.body);\n    }\n\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getBeforeContainer() {\n        return null;\n    }\n\n    getRouterOptions() {\n        return {\n            style: {\n                height: \"100%\",\n            }\n        }\n    }\n\n    getRouter() {\n        return <Router routes={this.getRoutes()} ref=\"router\" {...this.getRouterOptions()}/>;\n    }\n\n    getContainer() {\n        return <GlobalContainer>\n            {this.getRouter()}\n            </GlobalContainer>;\n    }\n\n    getAfterContainer() {\n        return null;\n    }\n\n    render() {\n        return [\n            this.getBeforeContainer(),\n            this.getContainer(),\n            this.getAfterContainer(),\n        ]\n    }\n\n    onMount() {\n        this.router && this.router.addListener(\"change\", () => {\n            document.body.click();\n            Dispatcher.Global.dispatch(\"closeAllModals\");\n        });\n    }\n}\n","import {Dispatcher} from \"base/Dispatcher\";\n\nclass WebsocketStreamHandler extends Dispatcher {\n    static NONE = Symbol();\n    static SUBSCRIBING = Symbol();\n    static SUBSCRIBED = Symbol();\n    static UNSUBSCRIBED = Symbol();\n\n    static MISSING_MESSAGE = \"INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW\";\n\n    constructor(websocketSubscriber, streamName, options={}) {\n        super();\n        this.websocketSubscriber = websocketSubscriber;\n        this.streamName = streamName;\n        this.options = options;\n        this.bytesReceived = 0;\n        this.isIndexed = false;\n        this.lastMessageIndex = -1;\n        this.messageBuffer = new Map();\n        this.missedPackets = 0;\n        this.status = this.constructor.NONE;\n        this.tryCount = 0; // TODO: rename to resubscribesubscribeTryCount\n    }\n\n    sendSubscribe() {\n        const websocketSubscriber = this.websocketSubscriber;\n\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.SUBSCRIBING;\n\n        if (this.haveIndex()) {\n            websocketSubscriber.sendResubscribe(this.streamName, this.getLastIndex());\n        } else {\n            websocketSubscriber.sendSubscribe(this.streamName);\n        }\n\n        this.subscribeTryCount++;\n\n        const subscribeTimeout = websocketSubscriber.constructor.STREAM_SUBSCRIBE_TIMEOUT || 3000;\n        const subscribeTimeoutMax = websocketSubscriber.constructor.STREAM_SUBSCRIBE_MAX_TIMEOUT || 30000;\n        const timeoutDuration = Math.min(subscribeTimeout * this.subscribeTryCount, subscribeTimeoutMax);\n\n        this.resendSubscribeTimeout = setTimeout(() => {\n            console.log(\"WebsocketSubscriber: stream subscribe timeout for #\" + streamName + \" reached! Trying to resubscribe again!\");\n            this.sendSubscribe();\n        }, timeoutDuration);\n    }\n\n    clearResubscribeTimeout() {\n        if (this.resendSubscribeTimeout) {\n            clearTimeout(this.resendSubscribeTimeout);\n            this.resendSubscribeTimeout = undefined;\n        }\n    }\n\n    setStatusSubscribed() {\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.SUBSCRIBED;\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    resetStatus() {\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.NONE;\n        this.subscribeTryCount = 0;\n    }\n\n    processPacket(packet) {\n        this.bytesReceived += packet.length;\n\n        let type, payload;\n        if (packet[0] === \"{\") {\n            type = \"v\";\n            payload = packet;\n        } else {\n            let firstSpace = packet.indexOf(\" \");\n            if (firstSpace > 0) {\n                type = packet.substr(0, firstSpace).trim();\n                payload = packet.substr(firstSpace + 1).trim();\n            } else {\n                console.error(\"WebsocketStreamHandler: Could not process stream packet: \" + packet);\n                return;\n            }\n        }\n\n        if (type === \"i\") {\n            this.processIndexedPacket(payload);\n        } else if (type === \"v\") {\n            this.processVanillaPacket(payload);\n        } else if (type === \"n\") {\n            this.processMissedPacket(payload);\n        } else {\n            console.error(\"WebsocketStreamHandler: invalid packet type \" + type);\n        }\n    }\n\n    processIndexedMessage(index, message) {\n        this.isIndexed = true;\n        if (this.lastMessageIndex == -1) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n        } else if (this.lastMessageIndex + 1 == index) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n            ++index;\n            while (this.messageBuffer.has(index)) {\n                message = this.messageBuffer.get(index);\n                this.messageBuffer.delete(index);\n                this.lastMessageIndex = index;\n                this.processVanillaPacket(message);\n                ++index;\n            }\n        } else {\n            this.messageBuffer.set(index, message);\n        }\n    }\n\n    processMissedPacket(packet) {\n        this.processIndexedMessage(parseInt(packet), WebsocketStreamHandler.MISSING_MESSAGE);\n    }\n\n    processVanillaPacket(packet) {\n        if (packet == WebsocketStreamHandler.MISSING_MESSAGE) {\n            this.missedPackets++;\n        }\n\n        if (!this.options.rawMessage) {\n            try {\n                packet = JSON.parse(packet);\n            } catch (exception) {\n                if (!this.options.parseMayFail) {\n                    console.error(\"WebsocketStreamHandler: Failed to parse \", packet, \" on stream \", this.streamName,\n                                  \" Exception:\", exception.message);\n                    return;\n                }\n            }\n        }\n        this.dispatch(packet);\n    }\n\n    processIndexedPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let message, index;\n        if (firstSpace > 0) {\n            index = parseInt(packet.substr(0, firstSpace).trim());\n            message = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketStreamHandler: Could not process indexed stream packet: \" + packet);\n            return;\n        }\n\n        this.processIndexedMessage(index, message);\n    }\n\n    haveIndex() {\n        return this.isIndexed;\n    }\n\n    getLastIndex() {\n        return this.lastMessageIndex;\n    }\n}\n\nexport {WebsocketStreamHandler};\n","import {Dispatchable} from \"base/Dispatcher\";\nimport {WebsocketStreamHandler} from \"./WebsocketStreamHandler\";\n\nclass WebsocketSubscriber extends Dispatchable {\n    static ConnectionStatus = {\n        NONE: 0,\n        CONNECTING: 1,\n        CONNECTED: 2,\n        DISCONNECTED: 3\n    };\n\n    static STREAM_SUBSCRIBE_TIMEOUT = 3000;\n    static STREAM_SUBSCRIBE_MAX_TIMEOUT = 30000;\n\n    static CONNECT_RETRY_TIMEOUT = 3000;\n    static CONNECT_RETRY_MAX_TIMEOUT = 30000;\n\n    static HEARTBEAT_MESSAGE = \"-hrtbt-\";\n\n    constructor(urls=self.WEBSOCKET_URL) {\n        super();\n        if (!Array.isArray(urls)) {\n            urls = [urls]\n        }\n        this.urls = urls;\n        this.streamHandlers = new Map();\n        this.attemptedConnect = false;\n        this.connectionStatus = WebsocketSubscriber.ConnectionStatus.NONE;\n        this.websocket = null;\n        this.failedReconnectAttempts = 0;\n        this.numConnectionAttempts = 0;\n        //TODO: should probably try to connect right now?\n    }\n\n    setConnectionStatus(connectionStatus) {\n        this.connectionStatus = connectionStatus;\n        this.dispatch(\"connectionStatus\", connectionStatus);\n    }\n\n    getNextUrl() {\n        const currentURLIndex = (this.numConnectionAttempts++) % this.urls.length;\n        return this.urls[currentURLIndex];\n    }\n\n    newConnection(url) {\n        return new WebSocket(url);\n    }\n\n    connect() {\n        const url = this.getNextUrl();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTING);\n        try {\n            console.log(\"WebsocketSubscriber: Connecting to \" + url + \" ...\");\n            this.websocket = this.newConnection(url);\n            this.websocket.onopen = () => {\n                this.onWebsocketOpen();\n            };\n            this.websocket.onmessage = (event) => {\n                this.onWebsocketMessage(event);\n            };\n            this.websocket.onerror = (event) => {\n                this.onWebsocketError(event);\n            };\n            this.websocket.onclose = (event) => {\n                this.onWebsocketClose(event);\n            };\n\n        } catch (e) {\n            this.tryReconnect();\n            console.error(\"WebsocketSubscriber: Failed to connect to \", url, \"\\nError: \", e.message);\n        }\n    }\n\n    tryReconnect() {\n        let reconnectWait = Math.min(WebsocketSubscriber.CONNECT_RETRY_TIMEOUT * this.failedReconnectAttempts,\n                                     WebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT);\n\n        this.failedReconnectAttempts++;\n\n        if (!this.reconnectTimeout) {\n            this.reconnectTimeout = setTimeout(() => {\n                this.reconnectTimeout = null;\n                console.log(\"WebsocketSubscriber: Trying to reconnect websocket connection\");\n                this.connect();\n            }, reconnectWait);\n        }\n    }\n\n    getStreamStatus(streamName) {\n        const streamHandler = this.getStreamHandler(streamName);\n        return streamHandler && streamHandler.status;\n    }\n\n    subscribe(streamName) {\n        // TODO: make sure to not explicitly support streams with spaces in the name\n        console.log(\"WebsocketSubscriber: Subscribing to stream \", streamName);\n\n        if (!this.attemptedConnect) {\n            this.connect();\n            this.attemptedConnect = true;\n        }\n\n        if (this.streamHandlers.has(streamName)) {\n            console.warning(\"WebsocketSubscriber: Already subscribed to stream \", streamName);\n            return;\n        }\n\n        let streamHandler = new WebsocketStreamHandler(this, streamName);\n        this.streamHandlers.set(streamName, streamHandler);\n\n        // Check if the websocket connection is open, to see if we can send the subscription now\n        if (this.isOpen()) {\n            this.sendSubscribe(streamName);\n        }\n\n        return streamHandler;\n    }\n\n    isOpen() {\n        return this.websocket && this.websocket.readyState === 1;\n    }\n\n    sendSubscribe(streamName) {\n        if (this.isOpen()) {\n            this.send(\"s \" + streamName);\n        }\n    }\n\n    sendResubscribe(streamName, index) {\n        if (this.isOpen(streamName)) {\n            this.send(\"r \" + index + \" \" + streamName);\n        }\n    }\n\n    resubscribe() {\n        // Iterate over all streams and resubscribe to them\n        for (let streamHandler of this.streamHandlers.values()) {\n            streamHandler.sendSubscribe();\n        }\n    }\n\n    onStreamSubscribe(streamName) {\n        const streamHandler = this.getStreamHandler(streamName);\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: received subscribe success response for unrequested stream #\" + streamName);\n            return;\n        }\n        streamHandler.setStatusSubscribed();\n    }\n\n    onWebsocketOpen() {\n        this.previousFailedReconnectAttempts = this.failedReconnectAttempts;\n        this.failedReconnectAttempts = 0;\n        console.log(\"WebsocketSubscriber: Websocket connection established!\");\n\n        this.reset();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTED);\n        this.resubscribe();\n    }\n\n    processStreamPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let streamName, afterStreamName;\n        if (firstSpace > 0) {\n            streamName = packet.substr(0, firstSpace).trim();\n            afterStreamName = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketSubscriber: Could not process stream packet: \" + packet);\n            return;\n        }\n\n        let streamHandler = this.streamHandlers.get(streamName);\n        // TODO: have a special mode if no handler is registered\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: No handler for websocket stream \", streamName);\n            return;\n        }\n        streamHandler.processPacket(afterStreamName);\n    }\n\n    fatalErrorClose(data) {\n        this.failedReconnectAttempts = this.previousFailedReconnectAttempts;\n        console.error(\"WebsocketSubscriber: server fatal error close: \", data);\n        this.onWebsocketError(data);\n    }\n\n    onWebsocketMessage(event) {\n        if (event.data === WebsocketSubscriber.HEARTBEAT_MESSAGE) {\n            // TODO: keep track of the last heartbeat timestamp\n        } else {\n            let firstSpace = event.data.indexOf(\" \");\n            let type, payload;\n\n            if (firstSpace > 0) {\n                type = event.data.substr(0, firstSpace).trim();\n                payload = event.data.substr(firstSpace + 1).trim();\n            } else {\n                type = event.data;\n                payload = \"\";\n            }\n\n            if (type === \"e\" || type === \"error\") { // error\n                console.error(\"WebsocketSubscriber: Websocket error: \", payload);\n                payload = payload.split(\" \")\n                const errorType = payload[0];\n                if (errorType === \"invalidSubscription\") {\n                    // Stop trying to resubscribe to a stream that's been rejected by the server\n                    const streamName = payload[1];\n                    const streamHandler = this.getStreamHandler(streamName);\n                    if (streamHandler) {\n                        // TODO: set permission denied explicitly?\n                        streamHandler.clearResubscribeTimeout();\n                    }\n                }\n            } else if (type === \"s\") { // subscribed\n                console.log(\"WebsocketSubscriber: Successfully subscribed to stream \", payload);\n                this.onStreamSubscribe(payload);\n            } else if (type === \"m\") { // stream message\n                this.processStreamPacket(payload);\n            } else if (type  === \"c\") { // command\n                this.dispatch(\"serverCommand\", payload);\n            } else if (type == \"efc\") { // error - fatal - close\n                this.fatalErrorClose(payload);\n            } else {\n                console.error(\"WebsocketSubscriber: Can't process \" + event.data);\n            }\n        }\n    }\n\n    reset() {\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.DISCONNECTED);\n        for (let streamHandler of this.streamHandlers.values()) {\n            streamHandler.resetStatus();\n        }\n    }\n\n    onWebsocketError(event) {\n        console.error(\"WebsocketSubscriber: Websocket connection is broken!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    onWebsocketClose(event) {\n        console.log(\"WebsocketSubscriber: Connection closed!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    send(message) {\n        // TODO: if the websocket is not open, enqueue WebsocketSubscriber message to be sent on open or just fail?\n        this.websocket.send(message);\n    }\n\n    getStreamHandler(streamName) {\n        let streamHandler = this.streamHandlers.get(streamName);\n        if (!streamHandler) {\n            streamHandler = this.subscribe(streamName);\n        }\n        return streamHandler;\n    }\n\n    // this should be pretty much the only external function\n    addStreamListener(streamName, callback) {\n        let streamHandler = this.getStreamHandler(streamName);\n        if (streamHandler.callbackExists(callback)) {\n            return;\n        }\n        streamHandler.addListener(callback);\n    }\n\n    static addListener(streamName, callback) {\n        return this.Global.addStreamListener(streamName, callback);\n    };\n}\n\nWebsocketSubscriber.Global = new WebsocketSubscriber();\n\nexport {WebsocketSubscriber};\n","import {StyleSheet} from \"ui/Style\";\nimport {styleRule, styleRuleCustom} from \"decorators/Style\";\n\nexport class GlobalStyleSheet extends StyleSheet {\n    @styleRuleCustom({selector: \"body\"})\n    body = {\n        margin: 0,\n        fontSize: this.themeProperties.FONT_SIZE_DEFAULT,\n        fontFamily: this.themeProperties.FONT_FAMILY_DEFAULT,\n    };\n\n    @styleRuleCustom({selector: \".hidden\"})\n    hidden = {\n        display: \"none !important\"\n    };\n\n    @styleRuleCustom({selector: \"*\"})\n    everything = {\n        boxSizing: \"border-box\"\n    };\n\n    @styleRuleCustom({selector: \"a\"})\n    a = {\n        textDecoration: \"none\",\n        color: this.themeProperties.COLOR_LINK\n    };\n\n    @styleRuleCustom({selector: \"hr\"})\n    hr = {\n        height: 0,\n        marginTop: \"20px\",\n        marginBottom: \"20px\",\n        border: 0,\n        borderTop: \"1px solid #eee\",\n        boxSizing: \"content-box\",\n    };\n\n    @styleRuleCustom({selector: \"code, pre\"})\n    codeAndPre = {\n        fontFamily: this.themeProperties.FONT_FAMILY_MONOSPACE,\n    };\n\n    @styleRuleCustom({selector: \"code\"})\n    code ={\n        padding: \"2px 4px\", // TODO: should be in rem\n        fontSize: \"90%\",\n        color: \"#345 !important\", // TODO: take colors from theme\n        backgroundColor: \"#f8f2f4 !important\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS,\n    };\n\n    @styleRuleCustom({selector: \"pre\"})\n    pre = {\n        overflow: \"auto\",\n        display: \"block\",\n        padding: this.themeProperties.BUTTON_BORDER_RADIUS,\n        margin: \"0 0 10px\",\n        fontSize: \"13px\",\n        lineHeight: \"1.42857143\",\n        color: \"#333\",\n        wordBreak: \"break-all\",\n        wordWrap: \"break-word\",\n        backgroundColor: \"#f5f5f5\",\n        border: \"1px solid #ccc\",\n    };\n\n    @styleRuleCustom({selector: \"pre code\"})\n    preInCode = {\n        padding: 0,\n        fontSize: \"inherit\",\n        color: \"inherit\",\n        whiteSpace: \"pre-wrap\",\n        backgroundColor: \"transparent\",\n        borderRadius: 0,\n    };\n}\n","import {Ajax} from \"base/Ajax\";\nimport {StemApp} from \"app/StemApp\";\nimport {getCookie} from \"base/Utils\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {GlobalState} from \"state/State\";\nimport {WebsocketSubscriber} from \"websocket/WebsocketSubscriber\";\nimport {GlobalStyleSheet} from \"./GlobalStyleSheet\";\nimport {ViewportMeta} from \"ui/UIPrimitives\";\nimport {StemDate} from \"time/Date\";\nimport {ServerTime} from \"time/Time\";\n\nexport class EstablishmentApp extends StemApp {\n    static MIN_VIEWPORT_META_WIDTH = 375; // Iphone 6\n\n    static init() {\n        this.loadPublicState();\n        this.addAjaxProcessors();\n        this.registerWebsocketStreams();\n        this.initializeViewportMeta();\n        this.configureTheme();\n        this.initializeGlobalStyle();\n        return super.init();\n    }\n\n    static loadPublicState() {\n        GlobalState.importState(self.PUBLIC_STATE || {});\n    }\n\n    static addAjaxProcessors() {\n        // Add the csrf cookie and credential for all requests\n        Ajax.addPreprocessor((options) => {\n            options.credentials = options.credentials || \"include\";\n            options.headers.set(\"X-CSRFToken\", getCookie(\"csrftoken\"));\n        });\n\n        // Add a postprocessor to load any state received from an Ajax response\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            if (payload.state && !xhrPromise.options.disableStateImport) {\n                GlobalState.importState(payload.state);\n            }\n        });\n\n        // Sync server time\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            const responseHeaders = xhrPromise.getResponseHeaders();\n            const responseDate = responseHeaders.get(\"date\");\n            if (responseDate) {\n                // Estimate server time, with 500ms rounding and 100 ms latency\n                const estimatedServerTime = new StemDate(responseDate).add(600);\n                ServerTime.set(estimatedServerTime, true);\n            }\n        });\n\n        // Raise any error, to be handled by the error processor\n        Ajax.addPostprocessor((payload) => {\n            if (payload.error) {\n                throw payload.error;\n            }\n        });\n\n        // Prettify any error, so it's in a standardized format\n        Ajax.addErrorPostprocessor((error) => {\n            return ErrorHandlers.wrapError(error);\n        });\n\n        // Add a default error handler\n        Ajax.errorHandler = (error) => ErrorHandlers.showErrorAlert(error);\n    }\n\n    static registerWebsocketStreams() {\n        // TODO: first check if websockets are enabled\n        GlobalState.registerStream = function (streamName) {\n            WebsocketSubscriber.addListener(streamName, GlobalState.applyEventWrapper);\n        };\n\n        //Register on the global event stream\n        GlobalState.registerStream(\"global-events\");\n\n        //Register on the user event stream\n        if (self.USER && self.USER.id) {\n            GlobalState.registerStream(\"user-\" + self.USER.id + \"-events\");\n        }\n    }\n\n    static initializeViewportMeta() {\n        return this.viewportMeta = ViewportMeta.create(document.head);\n    }\n\n    static configureTheme() {\n        // Nothing to do by default\n    }\n\n    static initializeGlobalStyle() {\n        GlobalStyleSheet.initialize();\n    }\n}\n","import {UI} from \"ui/UI\";\nimport {MAIN_ROUTE} from \"./Routes\"\nimport {EstablishmentApp} from \"EstablishmentApp\";\nimport {Theme} from \"UI\";\n\nTheme.Global.setProperties({\n    NAV_MANAGER_NAVBAR_HEIGHT: 0,\n    COLOR_BACKGROUND: \"#fff\",\n    COLOR_BACKGROUND_BODY: \"#fff\",\n});\n\nexport class AppClass extends EstablishmentApp {\n    static registerWebsocketStreams() {}\n\n    getRoutes() {\n        return MAIN_ROUTE;\n    }\n}"],"names":["PageTitleManager","prefix","updatePageTitle","defaultTitle","title","getPrefix","getTitle","document","getFullPageTitle","Error","setDefaultTitle","mapIterator","filterIterator","unwrapArray","elements","Array","isArray","Symbol","iterator","from","allProperElements","i","length","result","unwrappedElement","j","push","isLocalUrl","url","host","self","location","origin","startsWith","r","RegExp","test","trimLocalUrl","slice","splitInChunks","array","maxChunkSize","chunks","splice","defaultComparator","a","b","isNumber","aStr","toString","bStr","slugify","string","trim","replace","toLowerCase","suffixNumber","value","suffix","Number","setObjectPrototype","obj","Class","__proto__","prototype","isPlainObject","nodeType","constructor","Object","deepCopy","target","arguments","entries","key","clone","src","dashCase","str","rez","getCookie","name","cookies","cookie","split","decodeURIComponent","substring","uniqueId","objectWeakMap","WeakMap","constructorWeakMap","totalObjectCount","has","objConstructor","objIndex","get","set","objUniqueId","padNumber","num","minLength","strNum","String","getOrdinalSuffix","suffixes","lastDigit","isTeen","Math","floor","suffixWithOrdinal","instantiateNative","BaseClass","NewClass","args","extendsNative","targetClass","includes","allKeys","getOwnPropertySymbols","concat","getOwnPropertyNames","newClass","create","property","getOwnPropertyDescriptor","defineProperty","NOOP_FUNCTION","undefined","iter","func","CallModifier","wrap","UnorderedCallDropper","index","lastExecuted","callback","currentIndex","CallThrottler","options","lastCallTime","pendingCall","pendingCallArgs","pendingCallExpectedTime","numCalls","totalCallDuration","assign","throttle","ON_ANIMATION_FRAME","cancel","clearPendingCall","flush","timeNow","executionDelay","max","debounce","min","wrappedFunc","funcCall","funcCallArgs","isThrottleOnAnimationFrame","cancelHandler","requestAnimationFrame","cancelAnimationFrame","Date","now","computeExecutionDelay","dropThrottled","setTimeout","clearTimeout","replacePendingCall","originalFunc","updatePendingCall","AUTOMATIC","DispatcherHandle","dispatcher","console","warn","removeListener","remove","Dispatcher","listeners","error","callbackExists","handler","addListener","payload","listener","DispatchersSymbol","Dispatchable","dispatchers","getDispatcher","dispatch","call","CleanupJobs","map","x","addListenerOnce","runCleanupJobs","cleanupJob","hasOwnProperty","_cleanupJobs","add","cleanup","dispatcherHandle","Map","getAttachCleanupJobMethod","methodName","addCleanupJob","attachListener","attachEventListener","attachCreateListener","attachUpdateListener","attachDeleteListener","Global","RunOnce","timeout","jobs","job","indexOf","SingleActiveElementDispatcher","element","addChangeListener","forceDispatch","_active","newElement","defaultToPixelsAttributes","Set","CreateNodeAttributesMap","oldAttributesMap","allowedAttributesArray","allowedAttributesMap","attribute","reverseNameMap","domName","ClassNameSet","join","className","NodeAttributes","style","node","attributesMap","defaultAttributesMap","whitelistedAttributes","applyAttribute","keys","styleKey","setStyle","removeStyle","applyStyleToNode","classes","getClassArray","cls","getClassNameSet","classList","delete","attributeOptions","noValue","setAttribute","removeAttribute","addedAttributes","nodeAttributes","attributes","attr","attributeName","applyClassName","applyDebugFlags","STEM_DEBUG","stemElement","UI","renderingStack","BaseUIElement","existingChild","getNodeType","ref","parent","onUnmount","removeRef","TextElement","nextSibling","createNode","applyRef","redraw","insertBefore","onMount","Node","TEXT_NODE","createTextNode","getValue","newValue","nodeValue","UIElement","children","setOptions","defaultOptions","getDefaultOptions","updateOptions","preservedOptions","getPreservedOptions","addListenersFromOptions","createElement","child","destroyNode","clearNode","newChild","copyState","childrenKeyMap","childKey","render","getChildrenToRender","pop","newChildren","getChildrenForRedraw","applyNodeAttributes","domNode","getElementKeyMap","prevChildNode","currentChildNode","firstChild","newChildKey","canOverwrite","overwriteChild","mount","newChildrenSet","returnCopy","getOptionsAsNodeAttributes","extraNodeAttributes","getNodeAttributes","apply","domAttributesMap","addClass","removeClass","hasClass","eventType","addListenerMethodName","handlerMethodName","event","arrayName","doRedraw","nextSiblingNode","Element","bindToNode","insertChildNodeBefore","position","nextChildNode","destroy","eraseChildAtIndex","erasedChild","removeChild","childElement","lastChild","body","contains","parameter","parseFloat","offsetWidth","offsetHeight","getWidthOrHeight","addEventListener","removeNodeListener","removeEventListener","addNodeListener","getStyleSheet","styleSheet","parentNode","uiElement","tag","primitiveMap","Primitive","baseClassPrimitiveMap","resultClass","Orientation","HORIZONTAL","VERTICAL","Direction","UP","LEFT","DOWN","RIGHT","Level","NONE","DEFAULT","INFO","PRIMARY","SECONDARY","SUCCESS","WARNING","DANGER","ERROR","Size","EXTRA_SMALL","SMALL","MEDIUM","LARGE","EXTRA_LARGE","VoteStatus","LIKE","DISLIKE","ActionStatus","RUNNING","FAILED","getOffset","left","top","nodePosition","nodeStyle","offsetLeft","offsetTop","offsetParent","getComputedStyle","computedStyle","window","getPropertyValue","StyleInstance","selector","StyleElement","ALLOWED_SELECTOR_STARTS","DynamicStyleElement","getClassName","instanceCounter","selectorName","ownStyle","haveOwnStyle","isProperValue","firstChar","charAt","subStyle","getStyleInstances","unshift","getSelector","KeyframeElement","getKeyframeName","keyframeName","keyframe","getKeyframeInstance","isDescriptor","desc","decorate","handleDescriptor","entryArgs","createDefaultSetter","configurable","writable","enumerable","descriptor","initializer","ret","lazyInitialize","lazyInit","evaluateStyleRuleObject","getStyleRuleKey","getKeyframesRuleKey","styleRuleWithOptions","targetMethodName","styleRuleDecorator","objInitializer","inherit","parentDesc","getPrototypeOf","parentStyle","getKey","styleRule","styleRuleInherit","styleRuleCustom","keyframesRule","keyframesRuleInherit","StyleSheet","head","getElementName","delayedMount","ensureMounted","getTheme","addStyleSheet","styleElement","styleElementOptions","theme","defaultValue","getProperty","_firstUpdate","ensureFirstUpdate","elementOptions","nameKey","styleInstances","styleInstance","appendChild","keyframes","styleElements","getProperties","singletonInstance","getInstance","log","elementNameCounter","ExclusiveClassSet","classInstance","Device","_isTouchDevice","navigator","MaxTouchPoints","msMaxTouchPoints","mobileDevices","_isMobileDevice","device","userAgent","touches","touch","identifier","getEventTouchIdentifier","find","axis","reference","coordName","getEventTouch","originalEvent","getEventCoord","opr","addons","opera","InstallTrigger","HTMLElement","documentMode","StyleMedia","chrome","webstore","eventName","cachedSupportedValues","onEventName","isSupported","Draggable","_clickCallbacks","_clickDragListeners","callbackWrapper","_okForClick","clickDragListener","onStart","dragForClickStarted","onDrag","dragForClick","addDragListener","removeDragListener","listenerWrapper","onWrapperDrag","eventX","getEventX","eventY","getEventY","deltaX","_lastX","deltaY","_lastY","onWrapperStart","onWrapperEnd","onEnd","touchEventIdentifier","preventDefault","createDragListenerWrapper","touchListenerWrapper","createTouchDragListenerWrapper","_dragListeners","COLORS_BY_NAME","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Color","color","setColor","parseColor","rgba","getRgba","values","hex3","match","parseInt","hex6","substr","rgb","firstColor","secondColor","t","firstColorArray","secondColorArray","convertToRgba","opacity","colorArray","lighten","amount","interpolate","darken","root","pow","enhance","isLight","buildColors","dark","colors","darkenPercents","ColorGenerator","FIRST_COLORS","cache","getRandomColor","allowed","random","getInstanceForObject","Theme","styleSheetSymbol","classSet","styleSheetSet","properties","updateThrottler","updateThrottled","updateStyleSheets","update","getAllStyleSheets","register","setProperties","styleSheetGetter","registerStyle","styleClass","GlobalStyle","getTextColor","backgroundColor","COLOR_BACKGROUND","COLOR_BACKGROUND_ALTERNATIVE","COLOR_BACKGROUND_BODY","COLOR_FOREGROUND_BODY","COLOR_BACKGROUND_BADGE","COLOR_PRIMARY","COLOR_SECONDARY","COLOR_SUCCESS","COLOR_INFO","COLOR_WARNING","COLOR_DANGER","COLOR_LINK","FONT_SIZE_EXTRA_SMALL","FONT_SIZE_SMALL","FONT_SIZE_DEFAULT","FONT_SIZE_LARGE","FONT_SIZE_EXTRA_LARGE","BASE_BORDER_RADIUS","BASE_BOX_SHADOW","BASE_BORDER_WIDTH","BASE_BORDER_STYLE","BASE_BORDER_COLOR","BUTTON_BORDER_RADIUS","CARD_PANEL_HEADER_HEIGHT","CARD_PANEL_HEADER_HEIGHT_LARGE","CARD_PANEL_HEADING_PADDING","CARD_PANEL_HEADING_PADDING_LARGE","CARD_PANEL_TEXT_TRANSFORM","DARK_BOX_SHADOW","ROW_LIST_ROW_HEIGHT","ROW_LIST_ROW_HEIGHT_LARGE","ROW_LIST_ROW_PADDING","ROW_LIST_ROW_PADDING_LARGE","ROW_LIST_ROW_BORDER_WIDTH","FONT_FAMILY_SANS_SERIF","FONT_FAMILY_SERIF","FONT_FAMILY_MONOSPACE","FONT_FAMILY_DEFAULT","NAV_MANAGER_NAVBAR_HEIGHT","NAV_MANAGER_BOX_SHADOW_NAVBAR","NAV_MANAGER_BOX_SHADOW_SIDE_PANEL","MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE","FLAT_TAB_AREA_COLOR_BACKGROUND","FLAT_TAB_AREA_LINE_HEIGHT","FLAT_TAB_AREA_PADDING_SIDES","BasicLevelSizeStyleSheet","level","type","size","BasicLevelStyleSheet","colorToStyleFunction","textColor","colorStyleRule","themeProperties","FlexContainerStyle","orientation","display","marginLeft","flex","flexDirection","marginTop","ContainerStyle","mobilePixels","desktopPercent","margin","isMobileDevice","getSizeStyle","Utils","extraTop","height","width","FlexContainer","Container","SimpleStyledElement","getLevel","getSize","IconableInterface","beforeChildren","getLabel","label","faIcon","getFaIcon","iconOptions","marginRight","labelColorToStyle","darker","textDecoration","regular","borderColor","LabelStyle","fontWeight","border","padding","borderRadius","textAlign","whiteSpace","verticalAlign","lineHeight","touchAction","cursor","fontSize","borderWidth","Label","badgeColorToStyle","BadgeStyle","Badge","progressBarColorToStyle","ProgressBarStyle","marginBottom","overflow","boxShadow","float","transition","fontColor","backgroundImage","backgroundSize","animation","ProgressBar","container","valueInPercent","barStyle","barOptions","disableTransition","striped","active","Panel","SlideBar","barSize","getOrientation","getProgressBarStyle","getSliderStyle","progressBar","slider","getOrientationAttribute","getSliderValue","getDragConfig","HorizontalSlideBar","barWidth","setValue","VerticalSlideBar","barHeight","Link","newTab","Image","RawHTML","innerHTML","__innerHTML","getInnerHTML","ViewportMeta","scale","getDesiredScale","initialScale","maximumScale","MIN_WIDTH","minDeviceWidth","screen","availWidth","getContent","desiredScale","maybeUpdate","TemporaryMessageArea","textElement","message","displayDuration","clear","clearValueTimeout","ScrollableMixin","scrollHeight","clientHeight","scrollTop","getExcessTop","getDesiredExcessHeightTop","getExcessBottom","getDesiredExcessHeightBottom","haveExcessTop","popChildTop","haveExcessBottom","popChildBottom","removeExcessBottom","insertChild","removeExcessTop","maxScrollTop","scrollInfo","scrollAtTop","scrollAtBottom","scrollToHeight","InfiniteScrollable","entryComparator","id","firstRenderedEntry","lastRenderedEntry","staticTop","entry","renderEntry","entryRenderer","insertEntry","TimePassedSpan","getTimeDeltaDisplay","timeStamp","timeDelta","timeUnitsInSeconds","timeUnits","_updateListener","addIntervalListener","updateFunction","TIME_DISPATCHER","setInterval","InputStyle","outline","InputableElement","inputElement","Input","getInputType","SubmitInput","TextInput","NumberInput","val","EmailInput","PasswordInput","FileInput","files","getFiles","formData","FormData","file","append","CheckboxInput","checkboxInput","checked","RadioInput","TextArea","readOnly","Select","givenOptions","selectOptions","selected","select","selectedIndex","getIndex","setIndex","FormStyle","separatedLineInputStyle","maxWidth","paddingRight","Form","form","FormGroup","formGroup","errorMessage","errorField","textContent","hasError","getErrorField","FormField","inline","formField","sameLine","separatedLine","contentFirst","MozStyleElements","SVGNodeAttributes","transform","translate","fixMozAttributes","SVG","createElementNS","point","svgNode","ownerSVGElement","createSVGPoint","svgPoint","y","matrixTransform","getScreenCTM","inverse","rect","getBoundingClientRect","clientLeft","clientTop","getScreenCoordinatedForPoint","state","scrollLeft","pos","bottom","right","getBBox","parentElement","newOpacity","getSvg","Text","text","dy","textAnchor","selectable","setX","setY","fillOnly","EPS","isZero","epsilon","abs","equal","val1","val2","crossProduct","p1","p2","p0","polarToCartesian","angle","radius","orig","cos","sin","SVGRoot","RawSVG","Group","Defs","ClipPath","Path","d","getPath","newPath","getTotalLength","len","getPointAtLength","totalLength","getLength","p3","alpha","atan2","PI","Circle","center","cx","cy","pathString","Stop","RadialGradient","LinearGradient","Ellipse","CircleArc","startAngle","endAngle","angleDiff","startPoint","math","endPoint","sweepFlag","largeArcFlag","Rect","Line","fill","stroke","x1","y1","x2","y2","Polygon","points","getPolygonPath","setPath","Transition","context","duration","startTime","dependsOn","speedFactor","isStopped","stopped","setStartTime","functionWrapper","pauseTime","nextStep","getEndTime","time","ratio","restart","stop","lastT","getFraction","Modifier","reverseFunc","TransitionList","transitions","forceFinish","pause","resume","onNewFrame","finished","stk","canAdvance","setSpeedFactor","sortByEndTime","endTime","transitionEndTime","sort","hasDependencyOn","sortByStartTime","forceStart","startPercent","animationFrameId","paused","AnimatedSVG","animationWrapper","repeat","blinkTransition","config","times","executeLastStep","interval","changeOpacityTransition","setOpacity","changeColorTransition","getColor","moveTransition","coords","setPosition","changeFillTransition","Switcher","childMap","numRedraws","fullHeight","preserveScroll","overwriteElements","activeChild","existingElements","newElements","keyMap","lazyRender","getChildProperties","isUpToDate","updateChild","updateActiveChild","isMounted","redrawIndex","doMount","setActive","childProperties","deactivateChild","activateChild","isInDocument","Router","getRoutes","clearCache","routes","pageTitle","urlParts","getPage","getPageNotFound","page","getPageToRender","activePage","getActive","setTitle","setGlobalRouter","path","pathname","filter","replaceHistory","joinURLParts","historyArgs","history","replaceState","pushState","updateURL","setURL","parseURL","router","onpopstate","Route","expr","pageGenerator","subroutes","cachedPages","subroute","isArg","ARG_KEY","argsArray","serializedArgs","generatorArgs","myPageTitle","getPageTitle","matchesOwnNode","generatePage","matches","TerminalRoute","translationMap","TranslationElements","TranslationTextElement","strings","evaluateSprintf","evaluate","T","HorizontalOverflowStyle","baseColor","arrowColor","arrowBackground","arrowHoverColor","arrowHoverBackground","transitionTime","arrow","zIndex","alignItems","borderRight","borderLeft","BaseTabAreaStyle","userSelect","listStyle","DefaultTabAreaStyle","paddingLeft","borderBottomColor","borderBottom","MinimalistTabAreaStyle","paddingTop","paddingBottom","FlatTabAreaStyle","letterSpacing","FlatTabAreaHorizontalOverflowStyle","BasicTabTitle","tab","activeTab","existingElement","babelHelpers.get","panel","activeTabDispatcher","getPanel","addClickListener","TabTitleArea","TabArea","autoActive","panelClass","titleAreaClass","tabArea","tabHref","createTabPanel","tabTitle","tabPanel","titleArea","switcherArea","tabTitles","nav","tabPanels","switcherClass","switcher","activePanel","getTitleArea","getSwitcher","onSetActive","FAIcon","icon","getIcon","FACollapseIcon","collapsed","setCollapsed","FASortIcon","direction","HorizontalOverflow","swipePercent","horizontalOverflow","leftArrow","hiddenArrow","childrenContainer","pusherContainer","rightArrow","eraseChild","shouldOverflowRight","shouldOverflowLeft","elementRect","childRect","leftArrowHidden","getWidth","rightArrowHidden","containerNode","scrollWidth","swipeHelperChild","setWidth","swipeAnimation","checkForOverflow","scrollContent","handleEventAndHandlePositionChange","scrollContentRight","scrollContentLeft","FlatTabTitle","activeTabTitleDispatcher","FlatTabTitleArea","barLeft","activeOnRender","activeBar","tabWidth","bar","setActiveBar","activeBarAnimated","FlatTabArea","MultiMap","nKey","normalizeKey","nValue","normalizeValue","items","Headers","TypeError","polyfill","polyfillHeaders","global","URLSearchParams","decode","query","encode","encodeURIComponent","polyfillURLSearchParams","fileReaderReady","reader","Promise","resolve","reject","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","Body","bodyUsed","bodyInit","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","_bodyFormData","DataView","_bodyArrayBuffer","cloneBuffer","buffer","ArrayBuffer","isView","headers","rejected","setBodyUsed","then","view","Uint8Array","chars","fromCharCode","readArrayBufferAsText","JSON","parse","bytes","shift","byteLength","Request","input","method","normalizeMethod","headerArgs","referrer","referrerPolicy","mode","credentials","initialize","upcased","toUpperCase","methods","polyfillRequest","Response","status","ok","statusText","response","redirectStatuses","RangeError","polyfillResponse","parseHeaders","xhr","rawHeader","getAllResponseHeaders","rawHeaderLines","line","parts","getURLSearchParams","data","urlSearchParams","instance","composeURL","params","XHRPromise","request","XMLHttpRequest","promiseResolve","promiseReject","getResponseHeaders","responseText","responseInit","responseURL","dataType","ontimeout","open","withCredentials","responseType","forEach","setRequestHeader","send","getXHR","postprocessors","fetch","defaultPostprocessors","errorPostprocessors","defaultErrorPostprocessors","getPostprocessors","postprocessor","exception","onSuccess","onComplete","getErrorPostprocessors","onError","_chained","errorHandler","onResolve","onReject","getPromise","catch","abort","addXHRListener","jQueryCompatibilityPreprocessor","contentType","urlParams","arrayValue","preprocessors","defaultPreprocessors","preprocessor","success","complete","AjaxHandler","ajaxHandler","Ajax","parentHandler","baseOptions","getPreprocessors","getErrorHandler","post","inherited","FixedURLAjaxHandler","buttonColorToStyle","darker1","darker2","darker3","hoverDisabled","ButtonStyle","base","ButtonGroupStyle","pointerEvents","RadioButtonGroupStyle","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","Button","disabled","enabled","StateButton","statusOptions","statusLabel","enable","disable","stateOptions","AjaxButton","resetToDefaultTimeout","stateResetTimeout","clearResetTimeout","setState","ajaxPromise","getAjaxHandler","scheduleStateReset","ajax","ButtonGroup","RadioButtonGroup","buttons","oldIndex","oldValue","cardPanelColorToStyle","CardPanelStyle","minHeight","textTransform","cardPanelHeaderColorToStyle","borderStyle","justifyContent","CardPanelHeaderStyle","CardPanel","headingCentered","bodyCentered","headingClasses","getHeaderStyleSheet","headingLevel","centered","bodyClasses","getHeadingClasses","getBodyClasses","bodyStyle","RowListStyle","borderTopWidth","borderTopStyle","borderTopColor","RowList","rowList","alternateColors","rowClasses","alternativeColorsOddRow","noAlternativeColors","rows","rowParser","row","getRowClasses","CollapsibleStyle","transitionDuration","transitionTimingFunction","transitionProperty","transitionDelay","CollapsiblePanelStyle","fontFamily","content","CollapsibleMixin","CollapsibleClass","CollapsibleElement","collapsibleStyleSheet","collapsibleStyle","getCollapsibleStyleSheet","collapsing","transitionEndFunction","CollapsiblePanel","expand","collapse","contentArea","toggleButton","collapsedButton","setChildren","collapsedPanelClass","collapsedHeadingClass","hiddenClass","contentStyle","noPadding","heading","button","toggle","DelayedCollapsiblePanel","_haveExpanded","getDelayedChildren","FloatingWindowStyle","visibility","ModalStyle","background","borderTop","FloatingWindow","visibleAnimated","hiddenAnimated","fadeIn","fadeOut","VolatileFloatingWindow","hideListener","hide","show","bindWindowListeners","notVisible","stopPropagation","Modal","closeButton","destroyOnHide","visible","getModalWindow","getModalWindowStyle","fillScreen","maxHeight","isVisible","modalWindow","behindPanel","modalContainer","detachListener","closeListenerHandler","modal","ActionModal","actionName","closeName","header","getHeader","getBody","getFooter","footer","getActionName","getActionLevel","action","getCloseName","getActionButton","ActionModalButton","modalOptions","getModalOptions","ErrorModal","GlobalContainerStyle","updateOnResize","innerHeight","GlobalContainer","default","isTouchDevice","Divider","dragMousedown","divider","domEvent","dragMousemoveFunction","dragMousemove","dragMouseupFunction","dragMouseup","touchDeviceTriggered","dividerMousedownFunction","DividerStyle","AccordionStyle","flexGrow","flexShrink","flexBasis","SectionDividerStyle","barThickness","barPadding","dividerColor","backgroundClip","TitledDividerStyle","dividerStyle","DividerBar","noTextSelection","verticalDivider","horizontalDivider","SectionDivider","autoCollapse","uncollapsedSizes","verticalSection","horizontalSection","getHeight","setHeight","minWidth","getDimension","panels","dividers","parentSize","childSize","unCollapsedCount","fixed","getVisibleDivider","setDimension","recalculateDimensions","getHiddenDivider","isCollapsed","expandChild","collapseChild","fixedTotalSize","unfixedTotalSize","dividerEvent","previousEvent","previousPanel","getPreviousUnfixedChild","nextPanel","getNextUnfixedChild","panelsSize","deltaFunction","mouseMoveListener","delta","nextSize","previousSize","getMinDimension","mouseUpListener","clearListeners","dividerMouseDownFunction","leftChildVisible","DividerBarClass","getDividerBarClass","TitledSectionDividerBar","verticalDots","arrowButton","horizontalDots","leftButton","rightButton","BarCollapsePanel","panelChild","getGivenChildren","barCollapsePanel","panelSize","hiddenContent","collapsedSize","isFirst","isLast","firstCaret","lastCaret","collapsedBarTitle","TitledSectionDivider","paddingRemoved","animatedSectionDivider","wrappedChild","AccordionDivider","grabbing","grab","collapseIcon","toggleCollapsed","Accordion","accordion","dragTriggered","panelsHeight","totalFlex","getPreviousVisibleChild","getNextVisibleChild","sign","toggleChild","toggleClass","childrenStatus","CarouselStyle","navigatorHeight","hoverColor","navigatorTransitionTime","CarouselNavigator","navigatorIcon","Carousel","carousel","setActiveIndex","activeIndex","pusher","RangePanelStyle","rowHeight","overflowY","EntriesManager","rawEntries","cacheEntries","cachedEntries","sortEntries","filterEntries","getRawEntries","low","high","getComparator","getFilter","comparator","TableStyle","cellStyle","theadCellStyle","borderSpacing","borderCollapse","SortableTableStyle","sortIcon","TableRow","rowCells","columns","column","renderEntryCell","Table","setColumns","table","renderTableHead","renderTableBody","renderHeaderCell","getEntries","RowClass","getRowClass","getEntryKey","getRowOptions","headerStyle","renderColumnHeader","headerName","columnDefaults","TableRowInCollapsibleTable","CollapsibleTableStyle","collapsibleTableStyle","CollapsibleTableRow","renderCollapsible","getInitialCollapsedContent","DelayedCollapsibleTableRow","redrawCollapsible","CollapsibleTableInterface","BaseTableClass","toggleColumn","rowClass","CollapsibleTable","SortableTableInterface","SortIconClass","SortableTable","columnSortingOrder","sortByColumn","sortBy","sortDescending","colCmp","col","keyA","rawValue","keyB","cmp","cmpRes","sortedEntries","TimeUnit","baseUnit","multiplier","pluralName","milliseconds","getMilliseconds","variableMultiplier","variableDuration","isVariable","date","timeUnit","CANONICAL","ALL","FIXED_DURATION","VARIABLE_DURATION","MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","QUARTER","TRIMESTER","SEMESTER","YEAR","dateMethodSuffix","Duration","relativeDuration","toDuration","increm","negate","toMilliseconds","toSeconds","toMinutes","toHours","locale","addCanonicalTimeUnit","timeUnitsName","addCanonicalTimeUnits","MAX_AUTO_UNIX_TIME","BaseDate","StemDate","toDate","setTime","getTime","toUnix","toTimeUnit","getDateValue","equals","diff","isBefore","isAfter","isSameOrAfter","isSameOrBefore","getDay","count","currentValue","roundDown","addUnit","roundUp","isAbsolute","loc","token","tokenFormattersMap","tokens","splitToTokens","evalToken","fromUnixMilliseconds","getTimezoneOffset","year","getFullYear","lastDayInMonth","getMonth","getDate","months","isLeapYear","month","totalDays","getDaysCountPerMonth","getDayInYear","getWeekDay","unixMilliseconds","unixSecons","highResTimestamp","performance","timing","navigationStart","unixTime","fromUnixSeconds","candidate","lastIsLetter","escapeByCurlyBracket","escapeBySquareBracket","charCode","charCodeAt","isLetter","format","pattern","utc","miniWeekDays","shortWeekDays","longWeekdays","shortMonths","longMonths","DateLocale","formats","longDate","toISOString","getHours","getMinutes","getSeconds","ServerTime","subtract","offset","onlyIfMissing","setPageLoadTime","serverPageLoad","responseStart","DAY_IN_MILLISECONDS","isDifferentDay","timeA","timeB","DatePickerTable","TimePickerWidget","hours","minutes","seconds","textSpanStyle","changeCallback","hourSlider","minuteSlider","secondSlider","DateTimeWindow","computeInitial","initialDateTime","formatISO","currentDate","toTimeString","output","datePicker","timePicker","DateTimePicker","setDate","integerTokens","number","isNaN","years","days","textInput","parseDateFromString","dateString","enqueueIfNotLoaded","isLoaded","enqueueMethodCall","EnqueueableMethodMixin","methodCallQueue","methodCall","CodeEditor","getAce","aceMode","aceTheme","aceKeyboardHandler","tabSize","showLineNumber","showPrintMargin","printMarginSize","applyAceOptions","aceResize","ace","requireAce","onDelayedMount","edit","$blockScrolling","Infinity","resolveQueuedMethods","renderer","$textLayer","setAceMode","setAceKeyboardHandler","setAceTheme","setAceFontSize","setAceTabSize","setAceLineNumberVisible","setAcePrintMarginVisible","setAcePrintMarginSize","setReadOnly","setUseWrapMode","lineWrapping","numLines","maxLines","minLines","setAceOptions","langTools","require","setBasicAutocompletion","enableBasicAutocompletion","setLiveAutocompletion","enableLiveAutocompletion","setSnippets","enableSnippets","resize","sourceCode","fakeUserChange","apiChange","getSession","setMode","$keybindingId","keyboardHandler","aceName","setKeyboardHandler","getMode","setTheme","getFontSize","getOption","setShowGutter","getShowGutter","setShowPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","annotations","setAnnotations","setOption","foldStyle","setFoldStyle","setHighlightActiveLine","setHighlightGutterLine","getScrollTop","setScrollTop","startLine","startCol","endLine","endCol","Range","AceRange","addMarker","marker","removeMarker","doc","getTextRange","getDocument","session","getLine","gotoLine","insert","addAceSessionEventListener","on","focus","editor","editorRow","editorColumn","undoManager","setUndoManager","lastRow","lastRowLength","scrolledToBottom","isRowFullyVisible","scrollToLine","selectAll","execCommand","StaticCodeHighlighterStyle","StaticCodeHighlighter","hideActive","getPathPrefix","hostname","getTransitionDelay","ImportedSVG","getSVGName","svgName","backdropFilter","LogoStyle","Logo","href","getHref","logo","MediumLogo","FacebookLogo","GitHubLogo","InstagramLogo","LinkedInLogo","PinterestLogo","TwitterLogo","YouTubeLogo","Shadow","DBribe","IndexPageStyle","IndexPage","State","stores","applyEventWrapper","applyEvent","objectType","store","getStore","individualEvent","importState","getStoreForEvent","objectId","stateMap","storeState","getDependencies","dependency","importStateFromTempMap","next","GlobalState","DefaultState","StoreSymbol","StoreObject","setStore","handlers","e","_eventDispatcher","addUpdateListener","getState","registerStream","getStreamName","BaseStore","ObjectWrapper","attachToState","addStore","dependencies","GenericObjectStore","objects","getObjectIdForEvent","asIterable","sendDispatch","existingObject","getObjectForEvent","refreshEvent","newObject","createObject","applyCreateEvent","applyEventToObject","objDeleted","applyDeleteEvent","applyUpdateOrCreateEvent","fakeCreate","fakeExisting","object","SingletonStore","AjaxFetchMixin","BaseStoreClass","successCallback","errorCallback","forceFetch","fetchJobs","fetchTimeout","executeAjaxFetch","fetchTimeoutDuration","ids","requestData","getFetchRequestData","fetchURL","fetchType","fetchJob","idFetchJobs","maxFetchObjectCount","idChunks","fetchJobsChunks","requests","getFetchRequestObject","getFetchRequests","requestObject","VirtualStoreObjectMixin","BaseStoreObjectClass","newId","oldId","hasTemporaryId","VirtualStoreMixin","generateVirtualId","virtualId","updateId","existingVirtualObject","getVirtualObject","applyUpdateObjectId","virtualIdCounter","LanguageObject","localName","Language","LanguageStoreClass","isoCode","all","language","Locale","Article","edits","user","USER","isSuperUser","userCreatedId","articleEdit","ArticleStore","article","baseArticleId","languageId","ArticleEdit","articleId","ArticleStoreClass","baseArticle","getTranslation","ArticleEditStore","addCreateListener","getArticle","addEdit","BlogEntry","BlogEntryStoreClass","urlName","blogEntry","BlogEntryStore","StringStream","pointer","steps","ch","whitespaceChar","whitespaceStart","done","at","validChars","skipWhitespace","whitespace","wordStart","nanString","advance","NaN","char","infinityString","isDigit","isHexDigit","numberStart","peek","delimiter","maxLength","delimiterMatch","delimiterIndex","delimiterLength","search","newStream","kmp","prefixLength","ModifierAutomation","startNode","lastNode","startPatternNode","patternPrefix","patternNode","leftWhitespace","whitespaceNode","newNode","backNode","patternLastNode","captureContent","capture","captureNode","endPattern","endCaptureNode","endPatternPrefix","endPatternNodes","endPatternLastNode","endNode","patternStep","endPatternStep","currentArray","originalString","matcher","arrayLocation","currentElement","newArray","end","isJSX","nextState","modifierStart","modifierEnd","modifierCapture","start","isString","reverse","processChildren","processChild","isDummy","InlineModifierMixin","BaseModifierClass","lastElement","lastIndexOf","LineStartModifierMixin","groupConsecutive","isValidElement","wrapItem","patternIndex","patternEnd","itemTag","RawContentModifierMixin","BlockCodeModifier","codeOptions","codeBlock","firstLineEnd","firstLine","lineStream","word","MarkupParser","parseOptions","codeHighlighter","getElement","HeaderModifier","hashtagIndex","hashtagEnd","headerLevel","nextChar","HorizontalRuleModifier","UnorderedListModifier","OrderedListModifier","ParagraphModifier","capturedContent","lineStart","StrongModifier","ItalicModifier","InlineCodeModifier","InlineVarModifier","InlineLatexModifier","LinkModifier","checkAndAddUrl","isCorrectUrl","trimProtocol","modifiers","uiElements","arr","parseUIElements","modifier","modify","el","stream","textStart","elementStart","parseUIElement","optionsEnd","contentStart","uiElementStart","remainingContent","validOptionName","optionName","optionString","foundStringEnd","bracketCount","validJSON","jsonString","parseJSON5","lineNumber","columnNumber","escapee","f","n","renderChar","chr","m","SyntaxError","stringify","c","isFinite","hex","uffff","delim","inlineComment","blockComment","comment","source","reviver","walk","holder","k","v","MarkupClassMap","fallback","extraClasses","classMap","extraClass","classObject","registerMarkup","getClass","GLOBAL","MarkupRenderer","parser","registerDependencies","reparse","convertToUI","SafeUriEnhancer","isSafeUri","uri","MarkupEditor","showButtons","rendererOptions","refLink","getEditor","getMarkupRenderer","markup","markupRenderer","separator","updateValue","editorPanel","codeEditor","toggleLeftButton","sectionDivider","setLevel","toggleRightButton","rendererPanel","setEditorOptions","User","keyChain","currentDict","customSettings","getCustomSetting","lastKey","customSettingsKey","customSettingsValue","timeouts","postJSON","setCustomSetting","UserStore","getCurrentUser","PublicUser","displayName","username","PublicUserStoreClass","PublicUserStore","UserNotification","userId","getUser","lastReadNotificationId","UserNotificationStore","UserHandle","setUser","handle","getProfileUrl","getDisplayHandle","ArticleRenderer","markupClassMap","showEditButton","canBeEditedByUser","editButtonUrl","getEditButton","getArticleToRender","getArticleDependencies","liveLanguage","RecursiveArticleRenderer","ArticleSwitcher","articleChildMap","getPageForArticle","initialArticle","initialArticleId","setActiveArticleId","BLUE","HOVER_BLUE","BLACK","HOVER_BLACK","WHITE","CSAStyle","BlogStyle","titleFontSize","writtenBy","link","blogArticleRenderer","BlogArticleRendererStyle","hStyle","BlogArticleRenderer","BlogQuote","quote","TransferOwnershipModal","newOwner","ownerFormInput","messageArea","showMessage","transferOwnershipButton","DeleteArticleModal","deleteArticle","deleteArticleButton","articles","getArticleIndex","CreateArticleModal","createArticle","articleNameInput","dependencyInput","languageSelect","isPublic","publicCheckbox","createArticleButton","addArticle","AddTranslationModal","ArticleOwnerSpan","ArticlePublicSpan","ArticleTable","resetColumnSortingOrder","unix","dateCreated","dateModified","ArticleManager","addButton","getJSON","ArticleTranslationManager","deleteRedirectLink","ArticleMarkupEditor","ArticleEditor","DiffWidgetClass","versions","versionsLabels","getEdits","leftEditable","rightEditable","initializeVersioning","translationsPanel","baseArticleForm","ownershipPanel","setOwner","revisionsPanel","arrows","markupEditor","saveMarkup","articleNameFormInput","dependencyFormInput","saveOptions","deleteArticleModal","saveMarkupMessageArea","saveMarkupButton","addNewVersion","saveOptionsMessageArea","saveOptionsButton","setOwnerMessageArea","setOwnerButton","leftIndex","leftTextSelector","rightIndex","rightTextSelector","setLeftIndex","setRightIndex","diffWidget","setLeftText","setRightText","updateEditable","setLeftEditable","setRightEditable","onbeforeunload","UserReactionCollection","reactions","getUserReactionStore","reaction","collectionId","currentUser","getReactions","userReaction","currentUserReaction","getCurrentUserReaction","UserReaction","UserReactionCollectionStore","UserReactionStore","MessageInstance","messageId","timeAdded","MessageThreadStore","messageThreadId","fakeIfMissing","reactionCollection","reactionCollectionId","upvotesCount","downvotesCount","getCurrentUserReactionType","getReactionCollection","getNumLikes","getNumDislikes","ans","currentId","getNormalizedId","getMessageThread","getMessages","hasMarkupEnabled","react","hidden","deleteMessageInstance","messageThread","messages","postError","MessageThread","streamName","online","markupEnabled","messageInstance","orderDescending","lastMessage","MessageInstanceStoreClass","messageContent","temporaryId","virtualMessageInstance","meta","MessageInstanceStore","createEvent","addMessageInstance","BaseChatObject","GroupChat","GroupChatStoreClass","GroupChatStore","chatId","PrivateChat","user1Id","user2Id","PrivateChatStore","getChatWithUser","myUserId","privateChat","fetchForUser","privateChatId","BasePopup","contentPadding","arrowDirection","createArrowStyle","baseArrowOutline","baseArrow","getArrow","arrowMargin","bodyPlaced","left2","popupArrow","popupArrowOutline","newParent","setParentNode","manual","bindInsideParent","bodyPopups","popup","Popup","contentFontSize","getTitleAreaContent","newTitle","documentListener","supportsEvent","fakeClickEvent","initEvent","dispatchEvent","blur","closeButtonColor","Emoji","ClickableEmote","redrawTimeout","textBox","appendValue","getValueText","afterClick","ClickableEmoji","ClickableTwitchEmote","EmojiButton","getTextBox","closePopup","emotesList","emoji","EmojiMini","EMOJI","twitchEmoji","TWITCH_EMOTICONS","emojiPopup","getPopup","MarkupEditorModal","getMarkupEditorStyle","appendGraphExample","getButtonStyle","appendSubmissionExample","appendCodeExample","appendLinkExample","appendLatexExample","hideCallback","showCallback","doneButton","ChatMarkupRenderer","ScriptResolver","scriptPath","loaded","scriptElement","async","onLoad","getElementsByTagName","scriptResolveMap","ensureSingle","script","scriptResolver","ensure","scripts","promises","TranslationKey","TranslationKeyStore","TranslationEntry","translationKeyId","TranslationEntryStore","translationEntry","getTranslationKey","ErrorMessage","translationKey","ErrorMessageStoreClass","ErrorMessageStore","ErrorHandlers","wrapError","showErrorAlert","PAGE_NOT_FOUND","SocialAccountManager","socialApp","getSocialApp","getClientId","_Global","login","connect","SocialApp","clientId","SocialAppStoreClass","SocialAppStore","GoogleManager","getSocialAppByName","loginByTokenUrl","ensureScriptNodeExists","getElementById","gapi","load","auth2","init","client_id","updateSigninStatus","getGoogleAuth","isSignedIn","listen","setLoaded","getAuthInstance","getGoogleUser","getAuthResponse","process","handleProcess","grantOfflineAccess","redirect_uri","immediate","sendData","reload","FacebookManager","version","loginOptions","auth_type","scope","logoutUrl","fbAsyncInit","FB","appId","xfbml","nextUrl","accessToken","authResponse","expiresIn","logout","onLogoutSuccess","onLoginSuccess","onLoginCanceled","onLoginError","GithubManager","loginWindowOptions","githubUri","rawParams","githubWindow","Country","getIsoCode","ALL_COUNTRIES_PLACEHOLDER","NO_COUNTRY_PLACEHOLDER","COUNTRY_COMPARATOR","CountryStoreClass","noneName","countriesIds","allCountries","countries","countryId","CountryStore","loginHeight","registerHeight","buttonHeight","fontAwesomeIconHeight","signInButtonHeight","signInButtonWidth","LoginStyle","selectedLeft","selectedRight","fontAwesomeIcon","connectWith","connectIcons","socialConnectDimensions","flexWrap","ERROR_TIMEOUT","socialLoginSpecificInfo","Google","loginManager","Facebook","Github","SocialConnectButton","specificInfo","socialConnectButtonContainer","socialConnectButtonIcon","getLoginManager","loginElement","clearErrorMessage","ThirdPartyLogin","thirdPartyLoginContainer","getSocialApps","getConnectWith","getConnectWithButtons","LoginWidget","loginWidget","emailIcon","passwordInputOptions","placeholder","rememberMeCheckbox","rememberMe","forgotPassword","badLogin","signInButtonContainer","signInButton","getSignInValue","horizontalLine","getHorizontalLine","getEmailInput","getPasswordInput","getRememberMeCheckbox","getForgotPassword","getSignInButton","getClearBothArea","getErrorArea","getThirdPartyLogin","isError","loginErrorMessage","email","emailInput","password","passwordInput","remember","rememberInput","setErrorMessage","sendLogin","RecaptchaWidget","grecaptcha","GOOGLE_RECAPTCHA_PUBLIC_KEY","captchaId","getResponse","onRecaptchaCallback","RegisterWidget","registerWidget","allWithNone","countrySelect","formFields","getUsernameInput","getCountryInput","recaptchaWidget","recaptchaContainer","getSignUpButton","submitButton","recaptchaKey","usernameInput","errorArea","sendRegistration","NormalLogin","loginRegisterSystem","loginSystemButton","registerSystemButton","loginRegisterButtons","getLoginButton","getRegisterButton","loginButton","registerButton","LoginTabButton","selectedLeftClass","RegisterTabButton","selectedRightClass","Login","LoginModal","isAuthenticated","VotingWidgetStyle","likeColor","dislikeColor","notVoteColor","balanceColor","mainClass","thumbsStyle","counterStyle","VotingWidget","votesBalance","userVote","buttonsStyle","likeButtonStyle","getUserVote","dislikeButtonStyle","getVotesBalance","CommentVotingWidget","updateTarget","possibleTarget","tempListener","setupListener","likeButton","resetReaction","like","dislikeButton","dislike","CommentVotingWidgetWithThumbs","thumbsUpScoreStyle","thumbsDownScoreStyle","displayStyle","thumbsUpHoverStyle","thumbsDownHoverStyle","ChatStyle","navbarHeight","renderMessageHeight","userFontSize","commentFontSize","hrBackgroundColor","hoverBackgroundColor","previewButton","loadMoreButton","overflowX","wordBreak","wordWrap","Plugin","linkToParent","pluginName","Pluginable","PluginClass","plugins","plugin","getPlugin","PreviewMarkupButton","EditableMessage","deletable","toggleEditMode","editContent","writingSectionStyle","chatInputStyle","hideEditMode","messageInput","saveMessageChanges","deleteMessage","contentSwitcher","hasChild","contentContainer","showEditMode","GroupChatMessage","groupChatMessage","getPreviousMessage","editButton","timestamp","shouldShowDayTimestamp","messageTimeStampHr","messageTimeStamp","errorElement","userHandle","getTimeOfDay","commentContent","PrivateChatMessage","paddingDiv","isOwnMessage","ChatMessageScrollSection","ChatWidget","ChatMessageClass","ChatWidgetClass","dateTimestamps","renderMessage","initializeShowLoadMoreButton","getNumMessages","showLoadMoreButton","getMaxMessageId","createVirtualMessageInstance","baseRequest","chatInput","createVirtualMessage","setPostError","stack","messageWindow","scrollToBottom","getPostURL","disableStateImport","scrollPosition","scrollPercent","loadMoreMessages","saveScrollPosition","applyScrollPosition","setAdaptiveHeight","viewportHeight","documentElement","availableHeight","extraHeightOffset","getDesiredHeight","renderMessageView","outstandingRequest","topMessage","getTopMessage","messageInstances","lastMessageId","oldScrollHeight","ajaxCall","getGetURL","getGetType","emptyData","scrollDelta","dayTimestamp","muted","sendMessage","messageBoxButton","userData","renderMessageBox","defaultPlugins","getDefaultPlugins","registerPlugin","messageWindowScrollTop","messageWindowscrollMax","addResizeListeners","GroupChatWidget","PrivateChatWidget","getOtherUserId","VotableChatMessage","VotableGroupChatWidget","CommentWidgetStyle","previewButtonStyle","ThreadMessage","messageDate","votes","ToggleLogin","BlogCommentWidget","commentWidgetStyle","chatInputMax","sendMessageButtonStyle","CommentWidget","commentsCount","commentsTitle","AsyncCommentThread","groupChat","commentWidgetOptions","getCircleStyle","borderSize","animationName","animationDuration","rotate","animationIterationCount","animationTimingFunction","createCircle","RotatingHelperStyle","ConcentricCirclesLoadingScreen","centerConstant","rotateClockwise","rotateCounterclockwise","DelayedElement","_loaded","applyNodeAttributesNotLoaded","applyNodeAttributesLoaded","renderNotLoaded","renderLoaded","_executedMount","beforeRedrawNotLoaded","redrawNotLoaded","redrawLoaded","StateDependentElement","endsWith","renderLoading","renderError","getAjaxUrl","getAjaxRequest","setError","BlogEntryEditModal","entryId","discussionButton","discussionId","createDiscussion","changeSettings","titleInput","urlInput","visibleCheckbox","changeURL","NewBlogEntryModal","addEntry","onKeyUp","postContentMarkup","blogEntryId","BlogEntryPreview","getBlogEntry","blogStyle","getBlogArticle","publishedDate","publishedFormat","modifiedFormat","articleInfoStyle","fontStyle","getEntryURL","whiteOverlay","BlogEntryView","blogEntryView","blogEntryEditButton","getComments","bottomSection","BlogEntryList","blogEntries","showNewBlogPostModal","finishedLoading","lastDate","DelayedBlogEntryList","DelayedBlogEntryView","getEntryForURL","entryURL","entryUrlName","BlogRoute","getSubroutes","Forum","forumThreads","registerToStream","ForumThreadStore","addDeleteListener","forumThread","parentId","deleteForumThread","ForumStore","ForumThread","getParent","addForumThread","authorId","pinnedIndex","contentMessageId","getContentMessage","lastActive","forumThreadId","numMessages","getNumReplies","EditThreadReplyButton","EditThreadReplyModal","DeleteThreadReplyModal","DeleteThreadReplyButton","ForumThreadReplyStyle","ForumThreadPanelStyle","numRepliesFontSize","messageFontSize","buttonFontSize","fontsize","ForumThreadHeaderStyle","widthLimit","tagsHeight","baseStyleObject","boxSizing","innerWidth","ForumThreadPreviewStyle","lines","ForumThreadBubbleStyle","titlePaddingBottom","ForumPanelStyle","headerItemHeight","CreateThreadReplyButton","markupEditorModal","CreateThreadReplyModal","createThreadReply","forumThreadPanelStyle","buttonStyle","CreateForumThreadModal","inputStyle","createForumThread","forumId","routeToThread","CreateForumThreadButton","getModalClass","DeleteForumThreadModal","deleteThread","DeleteForumThreadButton","ForumThreadReply","getMessageInstance","editMessage","editAndDeleteButtons","deleteButton","editDeleteButtons","fullPost","author","bottomPanel","voting","ForumThreadPanel","getMainForumURL","returnToMainForum","backButton","getForumThread","getTimeAdded","postsLength","numReplies","getForumThreadState","initializeListeners","replies","spaceBetween","forumThreadMessages","replyButtonDiv","getAuthor","replyButton","getMessage","getVoting","ForumThreadHeader","tagsTitle","tagsAuthor","tagsReplies","tagsViews","tagsVotes","tagsActivity","getReplies","getViews","getVotes","getActivity","ForumThreadPreview","forumThreadPreview","ForumThreadBubble","pinned","isPinned","pinnedIcon","threadTitleAndPreview","threadTitle","threadTitleSpan","threadAuthor","threadReplies","threadRepliesSpan","threadViews","numViews","threadVotes","threadActivity","getLastActive","getThreadTitle","getThreadAuthor","getThreadReplies","getThreadViews","getThreadVotes","getThreadActivity","ForumThreadList","forum","getForumThreads","getPinIndex","Bubble","getBubbleClass","ForumPanel","buttonParent","getButton","getForumThreadList","DelayedForumPanel","DelayedForumThreadPanel","ForumRoute","MAIN_ROUTE","singlePageLinkOnMount","shiftKey","ctrlKey","metaKey","StemApp","getRouterOptions","getRouter","getBeforeContainer","getContainer","getAfterContainer","click","appInstance","WebsocketStreamHandler","websocketSubscriber","bytesReceived","isIndexed","lastMessageIndex","messageBuffer","missedPackets","tryCount","clearResubscribeTimeout","SUBSCRIBING","haveIndex","sendResubscribe","getLastIndex","sendSubscribe","subscribeTryCount","subscribeTimeout","STREAM_SUBSCRIBE_TIMEOUT","subscribeTimeoutMax","STREAM_SUBSCRIBE_MAX_TIMEOUT","timeoutDuration","resendSubscribeTimeout","SUBSCRIBED","packet","firstSpace","processIndexedPacket","processVanillaPacket","processMissedPacket","processIndexedMessage","MISSING_MESSAGE","rawMessage","parseMayFail","UNSUBSCRIBED","WebsocketSubscriber","urls","WEBSOCKET_URL","streamHandlers","attemptedConnect","connectionStatus","ConnectionStatus","websocket","failedReconnectAttempts","numConnectionAttempts","currentURLIndex","WebSocket","getNextUrl","setConnectionStatus","CONNECTING","newConnection","onopen","onWebsocketOpen","onmessage","onWebsocketMessage","onWebsocketError","onclose","onWebsocketClose","tryReconnect","reconnectWait","CONNECT_RETRY_TIMEOUT","CONNECT_RETRY_MAX_TIMEOUT","reconnectTimeout","streamHandler","getStreamHandler","warning","isOpen","readyState","setStatusSubscribed","previousFailedReconnectAttempts","reset","CONNECTED","resubscribe","afterStreamName","processPacket","HEARTBEAT_MESSAGE","errorType","onStreamSubscribe","processStreamPacket","fatalErrorClose","DISCONNECTED","resetStatus","subscribe","addStreamListener","GlobalStyleSheet","EstablishmentApp","loadPublicState","addAjaxProcessors","registerWebsocketStreams","initializeViewportMeta","configureTheme","initializeGlobalStyle","PUBLIC_STATE","addPreprocessor","addPostprocessor","xhrPromise","responseHeaders","responseDate","estimatedServerTime","addErrorPostprocessor","viewportMeta","MIN_VIEWPORT_META_WIDTH","AppClass"],"mappings":"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"}